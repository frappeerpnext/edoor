[
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival Remaining\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n\\n\\n{% if frappe.form_dict.get('action')=='view_arrival_remaining' %}\\n\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_date,\\n        reference_number,\\n        reservation_type,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        keyword like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status in ('Reserved','Confirmed') \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or ''\\n        ),as_dict=1)\\n%}\\n\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            \\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n             {%endif%}\\n             <th class=\\\"text-center\\\">Status</th> \\n            \\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                    <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td> \\n                    <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                   \\n                {%endif%}\\n                 <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                \\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n\\n{% if frappe.form_dict.get('action')=='view_arrival' %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        is_active_reservation = 1 and\\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        keyword like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status = if('{5}' = '', reservation_status, '{5}') \\n       \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n            frappe.form_dict.get('floor') or ''\\n            \\n        ),as_dict=1)\\n%}\\n    {% if (data|length) >0 %}\\n\\n    <table class='report-list occupied-001' style='width:100%'>\\n     \\n            <tr>\\n                <th class=\\\"text-center\\\">No.</th>\\n                <th class=\\\"text-center\\\">Reservation #</th>\\n                <th class=\\\"text-center\\\">Stay #</th>\\n                <th>Ref. #</th>\\n                <th class=\\\"text-center\\\">Type</th>\\n                <th class=\\\"text-center\\\">Res. Date</th>\\n                \\n                <th class=\\\"text-center\\\">Stay Date</th>\\n                <th class=\\\"text-center\\\">Room Nights</th>\\n                <th>Room(s)</th>\\n                <th>Guest</th>\\n                <th>Source</th>\\n                {%if can_view_rate==1%}\\n                    <th class=\\\"text-end\\\">ADR</th>\\n                    <th class=\\\"text-end\\\">Total Room Rate</th>\\n                {%endif%}\\n                <th class=\\\"text-center\\\">Status</th>\\n            </tr>\\n      \\n            {%for d in data%}\\n                <tr>\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                    <td>{{d.reference_number or \\\"\\\"}}</td>\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                   \\n                    <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                    <td>\\n                        {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                        {% if (rooms|length)>0 %}\\n                            {% for room in rooms %}\\n                              <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                            {% endfor %}\\n                        {% endif %}\\n                    </td>\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                    <td>{{d.business_source}}</td>\\n                    {%if can_view_rate ==1  %}\\n                        <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                        <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                    {%endif%}\\n                    <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                </tr>\\n            {%endfor%}\\n         \\n    </table>\\n    {% else %}\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n        <div class=\\\"isemtyIcon\\\"></div> \\n        <small class=\\\"text-emty\\\">No Data </small>\\n    </div>\\n    {%endif%}\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-01 11:10:52.262802",
  "module": "eDoor",
  "name": "eDoor Dashboard Arrival Guest",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 }
]