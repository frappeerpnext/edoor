[
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\r\\n{%\\r\\nset data = frappe.db.sql(\\\"\\r\\n    select \\r\\n        name,\\r\\n        reservation,\\r\\n        reservation_type,\\r\\n        guest,\\r\\n        guest_name, \\r\\n        business_source, \\r\\n        arrival_date, \\r\\n        departure_date,\\r\\n        reservation_status,\\r\\n        room_types,\\r\\n        room_type_alias,\\r\\n        status_color,\\r\\n        rooms,\\r\\n        room_nights,\\r\\n        adr,\\r\\n        total_room_rate ,\\r\\n        cancelled_by,\\r\\n        cancelled_note,\\r\\n        cancelled_date,\\r\\n        reference_number,\\r\\n        adult,\\r\\n        child\\r\\n    from `tabReservation Stay` \\r\\n    where \\r\\n        property= '{0}' and \\r\\n        reservation_status = 'Cancelled' and \\r\\n        arrival_date = '{1}'\\r\\n    order by\\r\\n        arrival_date asc\\r\\n        \\\".format(\\r\\n            doc.name,\\r\\n            frappe.form_dict.get('date')\\r\\n        ),as_dict=1)\\r\\n%}\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n<div>\\r\\n    <table class='report-list' style='width:100%'>\\r\\n        <tr>\\r\\n            <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" >Today Cancelled</th>\\r\\n        </tr>\\r\\n        {% if (data|length) >0 %}\\r\\n        <tr class=\\\"font-widht-tr-header\\\" >\\r\\n            <td class=\\\"text-center\\\">No.</td>\\r\\n            <td class=\\\"text-center\\\">Reservation #</td>\\r\\n            <td class=\\\"text-center\\\">Stay #</td>\\r\\n            <td>Ref. #</td>\\r\\n            <td class=\\\"text-center\\\">Type</td>\\r\\n            <td class=\\\"text-center\\\">Stay Date</td>\\r\\n            <td class=\\\"text-center\\\">Nights</td>\\r\\n            <td>Room(s)</td>\\r\\n            <td>Guest</td>\\r\\n            <td class=\\\"text-center\\\">Pax(A/C)</td>\\r\\n            {% if can_view_rate==1%}\\r\\n            <td class=\\\"text-end\\\">ADR</td>\\r\\n            <td class=\\\"text-end\\\">Total Room Rate</td>\\r\\n            {%endif%}\\r\\n            <td class=\\\"text-center\\\">Status</td>\\r\\n            <td>Cancelled By</td>\\r\\n            <td>Cancelled Date</td>\\r\\n            <td>Cancelled Note</td>\\r\\n        </tr>\\r\\n        {%for d in data%}\\r\\n            <tr>\\r\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\r\\n                <td>{{d.reference_number or ''}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.reservation_type or ''}}</td>\\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'}) or ''}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.room_nights or ''}}</td>\\r\\n                <td>{{d.rooms or ''}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.room_type_alias or ''}}</td>\\r\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\r\\n                <td class=\\\"text-center\\\">{{d.adult or ''}}/{{d.child or ''}}</td>\\r\\n                {% if can_view_rate==1%}\\r\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n                {%endif%}\\r\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\r\\n                 <td>{{d.cancelled_by or ''}}</td>\\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.cancelled_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n                <td>{{d.cancelled_note or ''}}</td>\\r\\n            </tr>\\r\\n        {%endfor%}\\r\\n        {% else %}\\r\\n    </table>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n<div class=\\\"isemtyIcon\\\"></div> \\r\\n<small class=\\\"text-emty\\\">No Data </small>\\r\\n</div>\\r\\n{% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_types,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        cancelled_by,\\n        cancelled_note,\\n        cancelled_date,\\n        reference_number,\\n        adult,\\n        child\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        reservation_status = 'Cancelled' and \\n        cancelled_date = '{1}'\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n<div>\\n    <table class='report-list' style='width:100%'>\\n        <tr>\\n            <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" >Cancelled</th>\\n        </tr>\\n        {% if (data|length) >0 %}\\n        <tr class=\\\"font-widht-tr-header\\\" >\\n            <td class=\\\"text-center\\\">No.</td>\\n            <td class=\\\"text-center\\\">Reservation #</td>\\n            <td class=\\\"text-center\\\">Stay #</td>\\n            <td>Ref. #</td>\\n            <td class=\\\"text-center\\\">Type</td>\\n            <td class=\\\"text-center\\\">Stay Date</td>\\n            <td class=\\\"text-center\\\">Nights</td>\\n            <td>Room(s)</td>\\n            <td>Guest</td>\\n            <td class=\\\"text-center\\\">Pax(A/C)</td>\\n            {% if can_view_rate==1%}\\n            <td class=\\\"text-end\\\">ADR</td>\\n            <td class=\\\"text-end\\\">Total Room Rate</td>\\n            {%endif%}\\n            <td class=\\\"text-center\\\">Status</td>\\n            <td>Cancelled By</td>\\n            <td>Cancelled Date</td>\\n            <td>Cancelled Note</td>\\n        </tr>\\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>{{d.rooms}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.room_type_alias}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\n                {% if can_view_rate==1%}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                 <td>{{d.cancelled_by}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.cancelled_date,{'fieldtype':'Date'})}}</td>\\n                <td>{{d.cancelled_note}}</td>\\n            </tr>\\n        {%endfor%}\\n        {% else %}\\n    </table>\\n</div>\\n\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-02 16:28:39.810798",
  "module": "eDoor",
  "name": "eDoor Cancel Reservation List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 }
]