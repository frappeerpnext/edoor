[
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Audit Trail\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            \\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"username\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set select_filter = None if  not frappe.form_dict.get('select_filter') else frappe.form_dict.get('select_filter').split(',') %}\\r\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\r\\n        report_name=\\\"Audit Trail Report\\\",\\r\\n        filters={\\r\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\r\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\r\\n            \\\"property\\\":doc.name,\\r\\n            \\\"select_filter\\\":select_filter,\\r\\n            \\\"select_user\\\":frappe.form_dict.get('select_user'),\\r\\n            \\\"sort_order\\\":frappe.form_dict.get('sort_order'),\\r\\n            \\\"order_by_audit\\\":frappe.form_dict.get('audit_order'),\\r\\n        }\\r\\n    )\\r\\n%}\\r\\n\\r\\n{% if (data.result|length) >0 %}\\r\\n<table class='report-list occupied-001' style='width:100%'>\\r\\n    <tr>\\r\\n        <th class=\\\"text-center\\\">No.</th> \\r\\n        {%for c in data.columns%}\\r\\n        <th style=\\\"width:{{c.width}}px;\\\" class=\\\"{{c.css_class or ''}}\\\">{{c.label}}</th>\\r\\n        {%endfor%} \\r\\n    </tr>\\r\\n    {% for d in data.result %}\\r\\n    <tr>\\r\\n        <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n        {% for c in data.columns %}\\r\\n        <td style=\\\"width:{{c.width}}px;\\\" class=\\\"{{c.css_class}}\\\">{{frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}</td>\\r\\n        {% endfor %}\\r\\n    </tr>\\r\\n    {% endfor %}\\r\\n</table>\\r\\n{% else %}\\r\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n</div>\\r\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-01 17:32:31.135302",
  "module": "eDoor",
  "name": "eCoor Cashier Shift Audit Trail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.filter-section{\n    border:none !important;\n}\n.body-report-style td , tfoot td{\n     border:1px solid #bbbbbb;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n   \n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">Monthly Availability Chart</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n                - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n            \\r\\n            {% if frappe.form_dict.room_name_types %}\\r\\n                / {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_name_types}}</strong>\\r\\n            {% endif %}\\r\\n            \\r\\n            \\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set room_type_name = None if  not frappe.form_dict.get('room_name_types') else frappe.form_dict.get('room_name_types').split(',') %}\\r\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\r\\n        report_name=\\\"Monthly Availability Chart\\\",\\r\\n        filters={\\r\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\r\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\r\\n            \\\"property\\\":doc.name,\\r\\n            \\\"chart_type\\\":\\\"bar\\\",\\r\\n            \\\"room_name_types\\\":room_type_name,\\r\\n        }\\r\\n    )\\r\\n%}\\r\\n\\r\\n{% set reservation_status = frappe.db.sql(\\\" select alias, color from `tabReservation Status`\\\",as_dict=1)%}\\r\\n\\r\\n<table class='report-list occupied-001' style='width:100%'>\\r\\n    <thead>\\r\\n        <tr>\\r\\n            {%for c in data.columns%}\\r\\n            <th style=\\\"width:{{c.width}}px\\\" class=\\\"text-{{c.align}}\\\">{{c.label}}</th>\\r\\n            {%endfor%}\\r\\n        </tr>\\r\\n    </thead>\\r\\n    <tbody class=\\\"body-report-style\\\">\\r\\n        {% for d in data.result %}\\r\\n        {% if d.header == 1 %}\\r\\n        <tr>\\r\\n            {%for c in data.columns%}\\r\\n            <td style=\\\"width:{{c.width}}px;font-size:14px;padding:5px\\\" class=\\\"text-{{c.align}}\\\"><strong>{{d[c.fieldname or ''] or 0}}</strong></td>\\r\\n            {%endfor%}\\r\\n        </tr>\\r\\n        {% elif d.indent == 1 %}\\r\\n        <tr >\\r\\n            {%for c in data.columns%}\\r\\n            <td style=\\\"width:{{c.width}}px\\\" class=\\\"text-{{c.align}}\\\"><strong>{{d[c.fieldname or ''] or 0}}</strong></td>\\r\\n            {%endfor%}\\r\\n        </tr>\\r\\n        {% elif d.indent == 2 %}\\r\\n        <tr>\\r\\n            {%for c in data.columns %}\\r\\n            <td style=\\\"width:{{c.width}}px;{% for r in reservation_status %}{% if d[c.fieldname or ''] == r.alias %}background-color:{{r.color}};color:white;{%endif%}{% endfor%}{% if d[c.fieldname or ''] == 'BL' %}background-color:black{%endif%}\\\" class=\\\"text-{{c.align}}\\\"><strong>\\r\\n            \\r\\n                {{frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}\\r\\n   \\r\\n            </strong></td>\\r\\n\\r\\n            {%endfor%}\\r\\n        </tr>\\r\\n        {% endif %}\\r\\n        \\r\\n        {%endfor%}\\r\\n    </tbody>\\r\\n    <tfoot>\\r\\n        {% for d in data.result %}\\r\\n            {% if d.is_grand_total == 1 %}\\r\\n            <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                {%for c in data.columns%}\\r\\n                <td class=\\\"text-{{c.align}}\\\"><strong>{{'' if not frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype}) else frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}</strong></td>\\r\\n                {%endfor%}\\r\\n            </tr>\\r\\n            {% endif %}\\r\\n        {% endfor %}\\r\\n    </tfoot>\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Summary\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set room_type_name = None if  not frappe.form_dict.get('room_name_types') else frappe.form_dict.get('room_name_types').split(',') %}\\r\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\r\\n        report_name=\\\"Monthly Availability Chart\\\",\\r\\n        filters={\\r\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\r\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\r\\n            \\\"property\\\":doc.name,\\r\\n            \\\"chart_type\\\":\\\"bar\\\",\\r\\n            \\\"room_name_types\\\":room_type_name,\\r\\n        }\\r\\n    )\\r\\n%}\\r\\n\\r\\n{% set room = frappe.db.sql(\\\"\\r\\n            select count(room_number) as room,room_type,room_type_alias from `tabRoom` \\r\\n            where property = '{0}'\\r\\n            group by\\r\\n            room_type,\\r\\n            room_type_alias\\r\\n\\\".format(\\r\\n            doc.name,\\r\\n            \\r\\n        \\r\\n),as_dict=1)%}\\r\\n\\r\\n{% set count_room = frappe.db.sql(\\\"\\r\\n            select \\r\\n                count(room_number) as room, \\r\\n                room_type, room_type_alias,\\r\\n                DATE_FORMAT(date,'%e') as date,\\r\\n                DATE_FORMAT(date,'%M') as month\\r\\n            from `tabRoom Occupy` \\r\\n            where \\r\\n                is_departure = 0 and \\r\\n                date between '{1}' and '{2}' and \\r\\n                property = '{0}'\\r\\n                group by room_type, room_type_alias, date\\r\\n\\\".format(\\r\\n            doc.name,\\r\\n            frappe.form_dict.get('start_date'),\\r\\n            frappe.form_dict.get('end_date'),\\r\\n        \\r\\n),as_dict=1)%}\\r\\n<br/>\\r\\n<br/>\\r\\n<h2>Summary Room Chart</h2>\\r\\n<table class='report-list occupied-001' style='width:100%;'>\\r\\n    <thead>\\r\\n        <tr>\\r\\n            {%for c in data.columns%}\\r\\n            {% if c.fieldname == 'occupancy'%}\\r\\n            <th style=\\\"width:{{c.width}}px\\\" class=\\\"text-{{c.align}}\\\">{{_(\\\"Total Room\\\")}}</th>\\r\\n            {% else %}\\r\\n            <th style=\\\"width:{{c.width}}px\\\" class=\\\"text-{{c.align}}\\\">{{c.label}}</th>\\r\\n            {% endif %}\\r\\n            {%endfor%}\\r\\n        </tr>\\r\\n    </thead>\\r\\n    <tbody class=\\\"body-report-style\\\">\\r\\n        {% for d in data.result %}\\r\\n        {% if d.header == 1 %}\\r\\n        <tr>\\r\\n            <td style=\\\"font-size:14px;padding:5px;\\\"><strong>{{d.row_header or ''}}</strong></td>\\r\\n            <td colspan=\\\"32\\\"></td>\\r\\n        </tr>\\r\\n        {% elif d.indent == 1 %}\\r\\n        <tr >\\r\\n            <td><strong>{{d.row_header or ''}}</strong></td>\\r\\n            {% for r in room | selectattr(\\\"room_type\\\",\\\"equalto\\\",d.row_header) | list %}\\r\\n            <td class=\\\"text-center\\\">{{r.room or 0}}</td>\\r\\n            {% endfor %}\\r\\n\\r\\n            <!--{% for cr in count_room | selectattr(\\\"room_type\\\",\\\"equalto\\\",d.row_header) | list%}-->\\r\\n                \\r\\n            <!--    <td>-->\\r\\n                   \\r\\n            <!--        {{cr}}-->\\r\\n                    \\r\\n            <!--    </td>-->\\r\\n            <!--{% endfor %}-->\\r\\n            \\r\\n            {%for c in data.columns %}\\r\\n            {% if c.fieldname != 'occupancy' and c.label != 'Room'%}\\r\\n            <td style=\\\"width:{{c.width}}px\\\" class=\\\"text-{{c.align}}\\\">\\r\\n            {% for cr in count_room | selectattr(\\\"room_type\\\",\\\"equalto\\\",d.row_header) | selectattr(\\\"month\\\",\\\"equalto\\\",d.month)|list%}\\r\\n                {% if cr.date == c.label %}\\r\\n                {{cr.room or 0}}\\r\\n                {% endif %}\\r\\n            {% endfor %}\\r\\n            </td>\\r\\n            {% else %}\\r\\n            \\r\\n            {% endif %}\\r\\n            {%endfor%}\\r\\n        </tr>\\r\\n\\r\\n        {% endif %}\\r\\n        \\r\\n        {%endfor%}\\r\\n    </tbody>\\r\\n   \\r\\n</table>\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-02 16:42:44.326695",
  "module": "eDoor",
  "name": "Monthly Availability Chart",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Reservation List\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{frappe.form_dict.filter_date_by or ''}} : \\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n                <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n            {% if frappe.form_dict.business_source %}\\r\\n                / {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source}}</strong>\\r\\n            {% endif %}\\r\\n            {% if frappe.form_dict.reservation_status %}\\r\\n                / {{_(\\\"Reservation Status\\\")}} : <strong>{{frappe.form_dict.reservation_status}}</strong>\\r\\n            {% endif %}\\r\\n            {% if frappe.form_dict.room_type %}\\r\\n                / {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type}}</strong>\\r\\n            {% endif %}\\r\\n            {% if frappe.form_dict.guest %}\\r\\n                / {{_(\\\"Guest\\\")}} : <strong>{{frappe.form_dict.guest}}</strong>\\r\\n            {% endif %}\\r\\n            \\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_status = None if  not frappe.form_dict.get('reservation_status') else frappe.form_dict.get('reservation_status').split(',') %}\\r\\n \\r\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\r\\n        report_name=\\\"Reservation List Report\\\",\\r\\n        filters={\\r\\n            \\\"filter_date_by\\\":frappe.form_dict.get('filter_date_by'),\\r\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\r\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\r\\n            \\\"property\\\":doc.name,\\r\\n            \\\"reservation_status\\\":reservation_status,\\r\\n            \\\"business_source\\\":frappe.form_dict.get('business_source'),\\r\\n            \\\"chart_type\\\":\\\"bar\\\",\\r\\n            \\\"room_type\\\":frappe.form_dict.get('room_type'),\\r\\n            \\\"guest\\\":frappe.form_dict.get('guest'),\\r\\n            \\\"is_active_reservation\\\":frappe.form_dict.get('is_active_reservation'),\\r\\n            \\\"order_by\\\":frappe.form_dict.get('order_by'),\\r\\n            \\\"sort_order\\\":frappe.form_dict.get('sort_order'),\\r\\n            \\\"group_by\\\":frappe.form_dict.get('group_by'),\\r\\n            \\\"show_summary\\\":frappe.form_dict.get('show_summary')\\r\\n        }\\r\\n    )\\r\\n%}\\r\\n\\r\\n<table class='report-list occupied-001' style='width:100%'>\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th class=\\\"text-center\\\">No</th>\\r\\n            {%for c in data.columns%}\\r\\n                {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                <th class=\\\"text-{{c.align}}\\\">{{c.label}}</th>\\r\\n                {%endif%}\\r\\n            {%endfor%}\\r\\n          \\r\\n        </tr>\\r\\n    </thead>\\r\\n    <tbody> \\r\\n        {% if frappe.form_dict.get('group_by') %} \\r\\n            {% for g in data.result | selectattr('is_group','equalto', 1)|list%}\\r\\n                <tr>\\r\\n                    <td></td>\\r\\n                    <td><strong>{{g.reservation}}</strong></td>\\r\\n                </tr>\\r\\n                \\r\\n                {% for d in data.result | selectattr('parent','equalto', g.id) if not \\\"is_total_row\\\" in d %}\\r\\n                    <tr>\\r\\n                        <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n                    {%for c in data.columns%}\\r\\n                        {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                        <td class=\\\"text-{{c.align}}\\\">\\r\\n                            {%if \\\"post_message_action\\\" in c%}\\r\\n                \\r\\n                                <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('{{c.post_message_action}}|{{d[c.fieldname]}}', '*')\\\">{{frappe.format(d[c.fieldname or ''])}}</a>\\r\\n                            {%else%}\\r\\n\\r\\n                            {{frappe.format(d[c.fieldname or ''] or '',{\\\"fieldtype\\\":c.fieldtype})}}\\r\\n                            {% endif %}\\r\\n                            \\r\\n                        </td>\\r\\n                    {%endif%}\\r\\n                    {%endfor%}\\r\\n                    </tr>\\r\\n                {% endfor %}\\r\\n                {% for d in data.result | selectattr('parent','equalto', g.id) if \\\"is_total_row\\\" in d %}\\r\\n                    <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td></td>\\r\\n                    {%for c in data.columns%}\\r\\n                    {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                        <td class=\\\"text-{{c.align}}\\\"><strong>{{'' if not frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype}) else frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}</strong></td>\\r\\n                    {%endif%}\\r\\n                    {%endfor%}\\r\\n                    </tr>\\r\\n                {% endfor %}\\r\\n            {% endfor %}\\r\\n            {% for d in data.result %}\\r\\n                {% if d.is_grand_total == 1 %}\\r\\n                <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                <td></td>\\r\\n                {%for c in data.columns%}\\r\\n                {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                    <td class=\\\"text-{{c.align}}\\\"><strong>{{'' if not frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype}) else frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}</strong></td>\\r\\n                {%endif%}\\r\\n                {%endfor%}\\r\\n                </tr>\\r\\n                {% endif %}\\r\\n            {% endfor %} \\r\\n        {% else %} \\r\\n            {% for d in data.result %}\\r\\n                {% if d.indent != 0 %}\\r\\n                    <tr>\\r\\n                        <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n                        {%for c in data.columns%}\\r\\n                            {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                            <td class=\\\"text-{{c.align}}\\\">\\r\\n                                {%if \\\"post_message_action\\\" in c%}\\r\\n                            \\r\\n                                    <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('{{c.post_message_action}}|{{d[c.fieldname]}}', '*')\\\">{{frappe.format(d[c.fieldname or ''])}}</a>\\r\\n                                    \\r\\n                                {%else%}\\r\\n                                    {% if c.fieldname == 'guest_name' %}\\r\\n                                <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{frappe.format(d[c.fieldname or ''])}}</a>\\r\\n                            {% else %}\\r\\n                            {{frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}\\r\\n                            {% endif %}\\r\\n                                {%endif%}\\r\\n                            </td>\\r\\n                            {%endif%}\\r\\n                        {%endfor%}\\r\\n                    </tr>\\r\\n                {% endif %}\\r\\n                {% if d.indent == 0 %}\\r\\n                    {% if d.is_total_row == 1 %}\\r\\n                        <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                            <td></td>\\r\\n                        {%for c in data.columns%}\\r\\n                        {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                            <td class=\\\"text-{{c.align}}\\\"><strong>{{'' if not frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype}) else frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}</strong></td>\\r\\n                        {%endif%}\\r\\n                        {%endfor%}\\r\\n                        </tr>\\r\\n                    {% endif %}\\r\\n                {% endif %}\\r\\n            {% endfor %}    \\r\\n        {% endif %} \\r\\n    </tbody>\\r\\n</table> \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_status = None if  not frappe.form_dict.get('reservation_status') else frappe.form_dict.get('reservation_status').split(',') %}\\r\\n \\r\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\r\\n        report_name=\\\"Reservation List Report\\\",\\r\\n        filters={\\r\\n            \\\"filter_date_by\\\":frappe.form_dict.get('filter_date_by'),\\r\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\r\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\r\\n            \\\"property\\\":doc.name,\\r\\n            \\\"reservation_status\\\":reservation_status,\\r\\n            \\\"business_source\\\":frappe.form_dict.get('business_source'),\\r\\n            \\\"chart_type\\\":\\\"bar\\\",\\r\\n            \\\"room_type\\\":frappe.form_dict.get('room_type'),\\r\\n            \\\"guest\\\":frappe.form_dict.get('guest'),\\r\\n            \\\"is_active_reservation\\\":frappe.form_dict.get('is_active_reservation'),\\r\\n            \\\"order_by\\\":frappe.form_dict.get('order_by'),\\r\\n            \\\"sort_order\\\":frappe.form_dict.get('sort_order'),\\r\\n            \\\"summary_filter\\\":frappe.form_dict.get('summary_filter'),\\r\\n            \\\"group_by\\\":frappe.form_dict.get('group_by'),\\r\\n            \\\"show_summary\\\":frappe.form_dict.get('show_summary')\\r\\n        }\\r\\n    )\\r\\n%}\\r\\n{% if frappe.form_dict.show_summary %}\\r\\n<br/>\\r\\n<table class='report-list occupied-001' style=\\\"width:60%;margin-top:7px;\\\">\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th>{{_(\\\"Summary By \\\")}}{{frappe.form_dict.summary_filter or ''}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Pax(A/C)\\\")}}</th>\\r\\n            <th class=\\\"text-right\\\">{{_(\\\"Debit\\\")}}</th>\\r\\n            <th class=\\\"text-right\\\">{{_(\\\"Credit\\\")}}</th>\\r\\n        </tr>\\r\\n    </thead>\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Business Source\\\" %}\\r\\n    <tbody>\\r\\n        {% for business_source in data.result |  map(attribute='business_source') | unique %}\\r\\n        <tr>\\r\\n            {% if business_source %}\\r\\n            <td>{{business_source or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n        {% if frappe.form_dict.summary_filter ==\\\"Arrival Date\\\" %}\\r\\n    <tbody>\\r\\n        {% for arrival_date in data.result |  map(attribute='arrival_date') | unique %}\\r\\n        <tr>\\r\\n            {% if arrival_date %}\\r\\n            <td>{{arrival_date or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Departure Date\\\" %}\\r\\n    <tbody>\\r\\n        {% for departure_date in data.result |  map(attribute='departure_date') | unique %}\\r\\n        <tr>\\r\\n            {% if departure_date %}\\r\\n            <td>{{departure_date or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Reservation\\\" %}\\r\\n    <tbody>\\r\\n        {% for reservation in data.result |selectattr(\\\"indent\\\", \\\"equalto\\\", 1)|  map(attribute='reservation') | unique %}\\r\\n        <tr>\\r\\n            {% if reservation %}\\r\\n            <td>{{reservation or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    \\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Reservation Date\\\" %}\\r\\n    <tbody>\\r\\n        {% for reservation_date in data.result |  map(attribute='reservation_date') | unique %}\\r\\n        <tr>\\r\\n            {% if reservation_date %}\\r\\n            <td>{{reservation_date or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Reservation Type\\\" %}\\r\\n    <tbody>\\r\\n        {% for reservation_type in data.result |  map(attribute='reservation_type') | unique %}\\r\\n        <tr>\\r\\n            {% if reservation_type %}\\r\\n            <td>{{reservation_type or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Guest\\\" %}\\r\\n    <tbody>\\r\\n        {% for guest in data.result |  map(attribute='guest') | unique %}\\r\\n        <tr>\\r\\n            {% if guest %}\\r\\n            <td>{{guest or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Room Type\\\" %}\\r\\n    <tbody>\\r\\n        {% for room_types in data.result |  map(attribute='room_types') | unique %}\\r\\n        <tr>\\r\\n            {% if room_types %}\\r\\n            <td>{{room_types or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Business Source Type\\\" %}\\r\\n    <tbody>\\r\\n        {% for business_source_type in data.result |  map(attribute='business_source_type') | unique %}\\r\\n        <tr>\\r\\n            {% if business_source_type %}\\r\\n            <td>{{business_source_type or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Nationality\\\" %}\\r\\n    <tbody>\\r\\n        {% for nationality in data.result |  map(attribute='nationality') | unique %}\\r\\n        <tr>\\r\\n            {% if nationality %}\\r\\n            <td>{{nationality or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Rate Type\\\" %}\\r\\n    <tbody>\\r\\n        {% for rate_type in data.result |  map(attribute='rate_type') | unique %}\\r\\n        <tr>\\r\\n            {% if rate_type %}\\r\\n            <td>{{rate_type or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Reservation Status\\\" %}\\r\\n    <tbody>\\r\\n        {% for reservation_status in data.result |  map(attribute='reservation_status') | unique %}\\r\\n        <tr>\\r\\n            {% if reservation_status %}\\r\\n            <td>{{reservation_status or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-right\\\">{{frappe.format(data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    <tfoot>\\r\\n    {% if frappe.form_dict.get('group_by') %}\\r\\n    {% for d in data.result %}\\r\\n    {% if d.is_grand_total == 1 %}\\r\\n        <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n            <td><strong>{{d.reservation}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{(data.result | list| length) - (data.result |selectattr(\\\"indent\\\", \\\"equalto\\\", 0) |list|length)}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{d.room_nights}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{d.total_pax}}</strong></td>\\r\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format(d.total_debit,{\\\"fieldtype\\\":\\\"Currency\\\"})}}</strong></td>\\r\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format(d.total_credit,{\\\"fieldtype\\\":\\\"Currency\\\"})}}</strong></td>\\r\\n        </tr>\\r\\n    {% endif %}\\r\\n    {% endfor %}\\r\\n    {% else %}\\r\\n    {% for d in data.result %}\\r\\n    {% if d.is_total_row == 1 %}\\r\\n        <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n            <td><strong>{{_(\\\"Grand Total\\\")}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{(data.result | list| length) - (data.result |selectattr(\\\"indent\\\", \\\"equalto\\\", 0) |list|length)}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{d.room_nights}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{d.total_pax}}</strong></td>\\r\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format(d.total_debit,{\\\"fieldtype\\\":\\\"Currency\\\"})}}</strong></td>\\r\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format(d.total_credit,{\\\"fieldtype\\\":\\\"Currency\\\"})}}</strong></td>\\r\\n        </tr>\\r\\n    {% endif %}\\r\\n    {% endfor %}\\r\\n    {% endif %}\\r\\n    </tfoot>\\r\\n</table>\\r\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-02-05 09:55:57.316340",
  "module": "eDoor",
  "name": "Reservation List Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n\r\n\r\nbody {\r\n  counter-reset: page;\r\n}\r\n\r\n/* Style for printed pages */\r\n@page {\r\n  size: A4; /* Set the paper size, you can adjust as needed */\r\n  margin: 1cm; /* Set margins as needed */\r\n}\r\n\r\n/* Increment the 'page' counter on each page and display the page number */\r\n@page :first {\r\n  @top-center {\r\n    content: \"Page \" counter(page);\r\n  }\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Folio Transaction",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>Extra Charge Voucher</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td width='150px'>{{_(\\\"Room\\\")}}</td>\\r\\n        <td>: {{doc.room_number or ''}}</td>\\r\\n        \\r\\n        <td width='150px'>{{_(\\\"No.\\\")}}</td>\\r\\n        <td>: {{doc.name or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td>{{_(\\\"Guest\\\")}}</td>\\r\\n        <td>: {{doc.guest_name or ''}}</td>\\r\\n        \\r\\n        <td>{{_(\\\"Date\\\")}}</td>\\r\\n        <td>: {{frappe.format(doc.posting_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td colspan=\\\"4\\\">\\r\\n            <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{doc.parent_account_name}}</h4>\\r\\n \\r\\n        </td>\\r\\n    </tr>\\r\\n  \\r\\n    <tr>\\r\\n        <td style=\\\"font-size:15px;\\\">{{doc.report_description}}</td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Amount\\\")}}</strong></td>\\r\\n        <td class=\\\"text-right\\\"> <strong>{{frappe.format(doc.amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n    {% if doc.allow_enter_quantity %}\\r\\n    <tr>\\r\\n        <td colspan='2'></td>\\r\\n        <td><strong>Qty</strong></td>\\r\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format_value(doc.quantity,\\\"Float\\\")}}</strong></td>\\r\\n    </tr>\\r\\n    {% endif %}\\r\\n    {% if doc.tax_rule %}\\r\\n        {% set tax_rule = frappe.get_doc(\\\"Tax Rule\\\",doc.tax_rule) %}\\r\\n    {% endif %}\\r\\n    {% if doc.discount > 0 %}\\r\\n        {% if doc.discount_type == 'Percent' %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td width=\\\"150px\\\">{{_(\\\"Discount\\\")}} {{doc.discount}}%</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.discount_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.discount_type == 'Amount' %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{_(\\\"Discount\\\")}}</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.discount_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n    {% endif %}\\r\\n    \\r\\n    {% if doc.tax_rule %}\\r\\n        {% if doc.tax_1_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_1_name}} {{doc.tax_1_rate}}%</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.tax_1_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.tax_2_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_2_name}} {{doc.tax_2_rate}}%</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.tax_2_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.tax_3_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_3_name}} {{doc.tax_3_rate}}%</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.tax_3_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td><strong>{{_(\\\"Total Amount\\\")}}</strong></td>\\r\\n                <td class=\\\"text-right\\\"> <strong>{{frappe.format(doc.total_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n            </tr>\\r\\n    {% endif %}\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h5>{{_(\\\"Remark\\\")}} : {{doc.note or ''}}</h5>\\n<hr style=\\\"margin-bottom:100px;margin-top:20px\\\"/>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table>\\n  <tr>\\n      <td>{{_(\\\"User\\\")}}</td>\\n      <td>:</td>\\n      <td>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</td>\\n  </tr>  \\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style='margin-left:100px'>\\n  <tr>\\n      <td>{{_(\\\"Authorized Signatory\\\")}}</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-23 11:10:56.344498",
  "module": "eDoor",
  "name": "Folio Extra Charge Voucher",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Folio Transaction",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>RECEIPT</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td width='150px'>{{_(\\\"Room\\\")}}</td>\\r\\n        <td width='150px'>: {{doc.room_number or ''}}</td>\\r\\n        \\r\\n        <td width='150px'>{{_(\\\"Receipt No\\\")}}</td>\\r\\n        <td>: {{doc.name or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td>{{_(\\\"Guest\\\")}}</td>\\r\\n        <td>: {{doc.guest_name or ''}}</td>\\r\\n        \\r\\n        <td>{{_(\\\"Date\\\")}}</td>\\r\\n        <td>: {{frappe.format(doc.posting_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td colspan=\\\"4\\\">\\r\\n            <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{_(\\\"Payment Information\\\")}}</h4>\\r\\n \\r\\n        </td>\\r\\n    </tr>\\r\\n      <tr>\\r\\n        <td width=\\\"150px\\\">{{doc.account_name}}</td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.input_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n    {%if doc.bank_fee_amount %}\\r\\n     <tr>\\r\\n        <td width=\\\"150px\\\"></td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Bank Fee\\\")}} {{doc.bank_fee}}%</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.bank_fee_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n\\r\\n     <tr>\\r\\n        <td width=\\\"150px\\\"></td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Payment Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.total_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n        {%endif%}\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if doc.parent_account_name == 'Credit Card' %}\\n  <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{_(\\\"Card Information\\\")}}</h4>\\n\\n<table class=\\\"table table-bordered report-list\\\" style='font-size:13px'>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Card Number\\\")}}</td>\\n        <td>: {{doc.credit_card_number or ''}}</td>\\n         <td width='150px'>{{_(\\\"Bank Name\\\")}}</td>\\n        <td>: {{doc.bank_name or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Card Holder\\\")}}</td>\\n        <td>:  {{doc.card_holder_name or ''}}</td>\\n        <td>{{_(\\\"Card Expired date\\\")}}</td>\\n        <td>: {{ \\\"{}-{}\\\".format( (doc.credit_expired_date|string).split(\\\"-\\\")[1],(doc.credit_expired_date|string).split(\\\"-\\\")[0])  if   doc.credit_expired_date.split else \\\"\\\" }}</td>\\n\\n    </tr>\\n</table>\\n{% endif %}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h5>{{_(\\\"Remark\\\")}} : {{doc.note or ''}}</h5>\\n<hr style=\\\"margin-bottom:100px;margin-top:20px\\\"/>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table>\\n  <tr>\\n      <td>{{_(\\\"User\\\")}}</td>\\n      <td>:</td>\\n      <td>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</td>\\n  </tr>  \\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style='margin-left:100px'>\\n  <tr>\\n      <td>{{_(\\\"Authorized Signatory\\\")}}</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-28 15:49:29.034171",
  "module": "eDoor",
  "name": "Folio Payment Receipt",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div>\\n    \\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Housekeeping Revenue\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n            {% if frappe.form_dict.room %}\\r\\n            /{{frappe.form_dict.room}}\\r\\n            {% endif %}\\r\\n            {% if frappe.form_dict.account_name %}\\r\\n            /{{frappe.form_dict.account_name}}\\r\\n            {% endif %}\\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\n            select \\n                    name, \\n                    account_name,\\n                    reservation, \\n                    reservation_stay, \\n                    business_source,\\n                    reference_number,\\n                    input_amount, \\n                    discount_amount,\\n                    tax_1_amount,\\n                    tax_2_amount,\\n                    tax_3_amount,\\n                    total_tax,\\n                    total_amount,\\n                    parent_account_name,\\n                    room_number,\\n                    quantity,\\n                    posting_date,\\n                    guest_name,\\n                    guest,\\n                    room_type_alias,\\n                    sum(if(allow_enter_quantity=1,quantity,'')) as qty\\n            from `tabFolio Transaction`\\n            where \\n                    parent_account_name = 'Housekeeping' and\\n                    posting_date between '{1}' and '{2}' and\\n                    room_number like '%{3}%' and\\n                    account_name like '%{4}%'\\n            group by\\n                    name, \\n                    account_name,\\n                    reservation, \\n                    reservation_stay, \\n                    business_source,\\n                    reference_number,\\n                    input_amount, \\n                    discount_amount,\\n                    tax_1_amount,\\n                    tax_2_amount,\\n                    tax_3_amount,\\n                    total_tax,\\n                    total_amount,\\n                    parent_account_name,\\n                    room_number,\\n                    quantity,\\n                    posting_date,\\n                    guest_name,\\n                    guest,\\n                    room_type_alias\\n\\\".format(\\n            doc.name,\\n            frappe.form_dict.get('start_date'),\\n            frappe.form_dict.get('end_date'),\\n            frappe.form_dict.get('rooms') or '',\\n            frappe.form_dict.get('account_name') or ''\\n),as_dict=1)%}\\n\\n<table class='report-list occupied-001' style='width:100%'>\\n    <tr>\\n        <th class=\\\"text-center\\\">No.</th>\\n        <th>Reservation #</th>\\n        <th>Ref #</th>\\n        <th class=\\\"text-center\\\">Date</th>\\n        <th class=\\\"text-center\\\">Folio Tran.#</th>\\n        <th>Room #</th>\\n        <th style=\\\"width:140px\\\">Guest</th>\\n        <th>Account Code</th>\\n        <th class=\\\"text-center\\\">QTY</th>\\n        <th class=\\\"text-right\\\">Amount</th>\\n        <th class=\\\"text-right\\\">Discount</th>\\n        <th class=\\\"text-right\\\">Tax</th>\\n        <th class=\\\"text-right\\\">Total Amount</th>\\n    </tr>\\n    {% if data|length > 0 %}\\n        {% for d in data %}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a><br/>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay}}</a>\\n                </td>\\n                <td>{{d.reference_number or ''}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.posting_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.name}}</td>\\n                <td>{{d.room_type_alias}}/{{d.room_number}}</td>\\n                <td><a onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\n                <td>{{d.account_name}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format_value(d.qty,\\\"Float\\\") }}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format(d.input_amount,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format(d.discount_amount,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format(d.total_amount,{'fieldtype':'Currency'})}}</td>\\n            </tr>\\n        {% endfor %}\\n    {% else %}\\n        <tr>\\n            <td colspan=\\\"13\\\" class=\\\"text-center\\\">No data</td>\\n        </tr>\\n    {% endif%}\\n    <tr style=\\\"border-top:solid 1px #000;\\\">\\n        <td colspan=\\\"7\\\"></td>\\n        <td colspan=\\\"1\\\"><strong>Total:</strong></td>\\n        <td class=\\\"text-center\\\"><strong>\\n            {{data|sum(attribute='qty')}}\\n        </strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='input_amount'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='discount_amount'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='total_tax'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='total_amount'),{'fieldtype':'Currency'})}}</strong></td>\\n    </tr>\\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-23 11:35:43.214896",
  "module": "eDoor",
  "name": "Housekeeping Revenue",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Housekeeping Departure Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n           {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            total_room_rate ,\\r\\n            require_drop_off,\\r\\n            TIME_FORMAT(drop_off_time, '%H:%i %p') as drop_off_time,\\r\\n            departure_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='departure_date')|unique|list|sort  %}\\r\\n    \\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th style=\\\"width:140px\\\">Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th>Status</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th class=\\\"text-center\\\">HK Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('departure_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n                    <td>{{d.reference_number or ''}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.drop_off_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.departure_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n                    <td class=\\\"break-all\\\">{{d.housekeeping_note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"4\\\" ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"1\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('departure_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"4\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n    <br/>\\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-12-29 14:51:50.542320",
  "module": "eDoor",
  "name": "Housekeeping Departure Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Housekeeping Arrival Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Type\\\"}}</strong>\\r\\n        </td> \\r\\n        <td></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            child,\\r\\n            total_room_rate ,\\r\\n            housekeeping_note,\\r\\n            require_pickup,\\r\\n            TIME_FORMAT(pickup_time, '%H:%i %p') as pickup_time,\\r\\n            arrival_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            name in (select reservation_stay from `tabRoom Occupy` where is_arrival = 1 and is_active = 1 and is_active_reservation and date between '{1}' and '{2}') and\\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n\\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n     {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th style=\\\"width:140px\\\">Guest</th>\\r\\n                <th class=\\\"text-center\\\">Pax(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th>Status</th>\\r\\n                <th class=\\\"text-center\\\">HK Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n           {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n                    <td>{{d.reference_number or ''}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.pickup_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.arrival_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"break-all\\\">{{d.housekeeping_note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n             <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"4\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n            \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"4\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n    <br/>\\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2024-01-16 15:45:25.948670",
  "module": "eDoor",
  "name": "Housekeeping Arrival Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Housekeeping Arrival Stay Over Departure Guest\\\")}}</h2>\\r\\n{{frappe.db.get_value('System Report', report_name, 'parent_system_report')}}\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n           {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            require_pickup,\\r\\n            TIME_FORMAT(pickup_time, '%H:%i %p') as pickup_time,\\r\\n            arrival_flight_number,\\r\\n            housekeeping_note\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            name in (select reservation_stay from `tabRoom Occupy` where is_arrival = 1 and is_active = 1 and is_active_reservation and date between '{1}' and '{2}') and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Arrival Guest\\\")}}</h3>\\r\\n\\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th >Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room #</th>\\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th style=\\\"width:140px\\\">Guest</th>\\r\\n                <th class=\\\"text-center\\\">Pax(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th>Status</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th class=\\\"text-center\\\">HK Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n                    <td>{{d.reference_number or ''}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.pickup_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.arrival_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n                    <td class=\\\"break-all\\\">{{d.housekeeping_note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"4\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"1\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"4\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n\\r\\n    \"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            rs.name,\\r\\n            r.date,\\r\\n            r.reservation,\\r\\n            r.reservation_stay,\\r\\n            r.room_number,\\r\\n            r.room_type_alias,\\r\\n            r.reservation_type,\\r\\n            rs.arrival_date, \\r\\n            rs.departure_date, \\r\\n            rs.business_source, \\r\\n            rs.note,\\r\\n            rs.room_nights,\\r\\n            rs.adr,\\r\\n            rs.adult,\\r\\n            rs.reservation_status,\\r\\n            rs.child,\\r\\n            rs.guest,\\r\\n            rs.guest_name,\\r\\n            rs.housekeeping_note\\r\\n        from `tabRoom Occupy` r\\r\\n        inner join `tabReservation Stay` rs on r.reservation_stay = rs.name\\r\\n        where \\r\\n            rs.property= '{0}' and \\r\\n            rs.arrival_date < '{1}' and \\r\\n            rs.departure_date > '{2}' and \\r\\n            rs.keyword like '%{3}%' and \\r\\n            rs.business_source = if('{4}'='', rs.business_source,'{4}') and \\r\\n            rs.room_types like '%{5}%' and \\r\\n            rs.reservation_status = if('{6}' = '', rs.reservation_status, '{6}') and\\r\\n            rs.is_active_reservation=1 and\\r\\n            r.date between '{1}' and '{2}'\\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or '',\\r\\n                frappe.form_dict.get('reservation_status') or '',\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Stay Over Guest\\\")}}</h3>\\r\\n\\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th >Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th> \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th style=\\\"width:140px\\\">Guest</th>\\r\\n                <th class=\\\"text-center\\\">Pax(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th>Status</th>\\r\\n                <th class=\\\"text-center\\\">HK Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n                    <td>{{d.reference_number or ''}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_number}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td ><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"break-all\\\">{{d.housekeeping_note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"4\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"1\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"4\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n\\r\\n    \"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            total_debit,\\r\\n            total_credit,\\r\\n            balance,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            require_drop_off,\\r\\n            TIME_FORMAT(drop_off_time, '%H:%i %p') as drop_off_time,\\r\\n            departure_flight_number,\\r\\n            housekeeping_note\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date asc\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='departure_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Departure Guest\\\")}}</h3>\\r\\n\\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th>Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th style=\\\"width:140px\\\">Guest</th>\\r\\n                <th class=\\\"text-center\\\">Pax(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th>Status</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th class=\\\"text-center\\\">HK Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('departure_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n                    <td>{{d.reference_number or ''}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td> \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.drop_off_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.departure_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n                    <td class=\\\"break-all\\\">{{d.housekeeping_note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"4\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"1\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('departure_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"4\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n\\r\\n    \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            arrival_date,\\r\\n            departure_date,\\r\\n            business_source,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            child\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n\\r\\n    <h3>{{_(\\\"Arrival Summary \\\")}}</h3>\\r\\n    <table  class='report-list occupied-001' width=\\\"100%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"  \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            child\\r\\n\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date < '{1}' and \\r\\n            departure_date > '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            reservation_status = if('{6}' = '', reservation_status, '{6}') and\\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date asc\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or '',\\r\\n                frappe.form_dict.get('reservation_status') or '',\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    <h3>{{_(\\\"Stay Over Summary\\\")}}</h3>\\r\\n       <table  class='report-list occupied-001' width=\\\"100%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            departure_date,\\r\\n            business_source,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            child\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n\\r\\n    <h3>{{_(\\\"Departure Summary\\\")}}</h3>\\r\\n    <table  class='report-list occupied-001' width=\\\"100%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2024-01-16 15:45:41.408726",
  "module": "eDoor",
  "name": "Housekeeping Arrival Stay Over Departure Guest",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Room Charge Posting\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\n            select\\n                    reservation,\\n                    reservation_stay,\\n                    name,\\n                    posting_date,\\n                    business_source,\\n                    guest_name,\\n                    guest,\\n                    room_number,\\n                    room_type_alias,\\n                    amount,\\n                    account_name,\\n                    discount_amount,\\n                    total_tax,\\n                    total_amount\\n            from `tabFolio Transaction`\\n            where \\n                    property = '{0}' and\\n                   is_auto_post =1 and\\n                   posting_date = '{1}' and\\n                   ifnull(parent_reference,'') = '' and\\n                   transaction_type = 'Reservation Folio' and\\n                   account_category = 'Room Charge'\\n            order by\\n            name\\n           \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('start_date'),\\n\\n),as_dict=1)%}\\n\\n<table class='report-list occupied-001' style='width:100%'>\\n    <tr>\\n        <th class=\\\"text-center\\\">No.</th>\\n        <th>Reservation #</th>\\n        <th class=\\\"text-center\\\">Date</th>\\n        <th>Folio Tran.#</th>\\n        <th class=\\\"text-center\\\">Room #</th>\\n        <th>Guest</th>\\n        <th>Account Code</th>\\n        <th class=\\\"text-right\\\">Amount</th>\\n        <th class=\\\"text-right\\\">Discount</th>\\n        <th class=\\\"text-right\\\">Tax</th>\\n        <th class=\\\"text-right\\\">Total Amount</th>\\n    </tr>\\n    {% for d in data %}\\n    <tr>\\n        <td class=\\\"text-center\\\">{{loop.index}}</td>\\n        <td>\\n            <a onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation or ''}}</a><br>\\n            <a onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay or ''}}</a>\\n        </td>\\n        <td class=\\\"text-center\\\">{{frappe.format(d.posting_date,{'fieldtype':'Date'})}}</td>\\n        <td><a onclick=\\\"window.parent.postMessage('view_folio_transaction_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n        <td class=\\\"text-center\\\">{{d.room_type_alias}}/{{d.room_number or 'Unassign'}}</td>\\n        <td><a onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name or ''}}</a></td>\\n        <td>{{d.account_name or ''}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.amount or 0,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.discount_amount or 0,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.total_tax or 0,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.total_amount or 0,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    {% endfor %}\\n    <tr style=\\\"border-top:solid 1px #000;\\\">\\n        <td colspan=\\\"1\\\"></td>\\n        <td colspan=\\\"6\\\" class=\\\"text-right\\\"><strong>Total:</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='amount'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='discount_amount'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='total_tax'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='total_amount'),{'fieldtype':'Currency'})}}</strong></td>\\n    </tr>\\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-29 11:08:46.739481",
  "module": "eDoor",
  "name": "Room Charge Posting",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Stay Over Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            rs.name,\\r\\n            r.date,\\r\\n            r.reservation,\\r\\n            r.reservation_stay,\\r\\n            r.room_number,\\r\\n            r.room_type_alias,\\r\\n            r.reservation_type,\\r\\n            rs.arrival_date, \\r\\n            rs.departure_date, \\r\\n            rs.business_source, \\r\\n            rs.note,\\r\\n            rs.room_nights,\\r\\n            rs.adr,\\r\\n            rs.adult,\\r\\n            rs.reservation_status,\\r\\n            rs.reference_number,\\r\\n            rs.child,\\r\\n            rs.guest,\\r\\n            rs.guest_name,\\r\\n            rs.room_rate,\\r\\n            rs.total_room_rate\\r\\n        from `tabRoom Occupy` r\\r\\n        inner join `tabReservation Stay` rs on r.reservation_stay = rs.name\\r\\n        where \\r\\n            rs.property= '{0}' and \\r\\n            rs.arrival_date < '{1}' and \\r\\n            rs.departure_date > '{2}' and \\r\\n            rs.keyword like '%{3}%' and \\r\\n            rs.business_source = if('{4}'='', rs.business_source,'{4}') and \\r\\n            rs.room_types like '%{5}%' and \\r\\n            rs.reservation_status = if('{6}' = '', rs.reservation_status, '{6}') and\\r\\n            rs.is_active_reservation=1 and\\r\\n            r.date between '{1}' and '{2}' and\\r\\n            r.is_active = 1\\r\\n\\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or '',\\r\\n                frappe.form_dict.get('reservation_status') or '',\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n\\r\\n    {% set dates = data|map(attribute='date')|unique|list|sort%}\\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-left\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-end\\\">ADR</th>\\r\\n                <th class=\\\"text-end\\\">Rate</th>\\r\\n                <th class=\\\"text-end\\\">Total Rate</th>\\r\\n                <th>Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for date in dates%}\\r\\n                <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n                </tr>\\r\\n             {%for d in data|selectattr('date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reference_number or ''}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-left\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.room_number}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n    \\r\\n                    <td class=\\\"nowrap\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end break-all\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"4\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"1\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"4\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data|map(attribute='reservation_stay')|unique|list|length}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n    <br/>\\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n                {% for business_source in data | map(attribute = 'business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-12-29 16:37:25.122516",
  "module": "eDoor",
  "name": "Front Desk Stay Over Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Departure Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            total_debit,\\r\\n            total_credit,\\r\\n            balance,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            total_room_rate ,\\r\\n            require_drop_off,\\r\\n            TIME_FORMAT(drop_off_time, '%H:%i %p') as drop_off_time,\\r\\n            departure_flight_number,\\r\\n            is_early_checked_out\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and  \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and\\r\\n            is_active_reservation=1 and\\r\\n            is_early_checked_out = 0\\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='departure_date')|unique|list|sort  %}\\r\\n    \\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-right\\\">ADR</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('departure_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reference_number or ''}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.drop_off_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.departure_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td class=\\\"nowrap\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-right nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-right break-all\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('departure_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n    <br/>\\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2024-01-03 10:22:49.923894",
  "module": "eDoor",
  "name": "Front Desk Departure Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Night Audit Reservation\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Working Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Working Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        is_active_reservation\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and\\n        working_date between '{1}' and '{2}' \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('start_date'),\\n            frappe.form_dict.get('end_date')\\n        ),as_dict=1)\\n%}\\n\\n<table class='report-list occupied-001' style='width:100%;margin-bottom:20px;'>\\n\\n {% if (data|length) >0 %}\\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th>Reservation #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-right\\\">ADR</th>\\n            <th class=\\\"text-right\\\">Total Room Rate</th>\\n            <th>Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td>\\n                    <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a><br/>\\n                    <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\n                </td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td>{{d.reservation_status}}</td>\\n            </tr>\\n        {%endfor%}\\n     {% else %}\\n</table>\\n\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data</small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-12 15:32:14.940911",
  "module": "eDoor",
  "name": "Night Audit Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Daily Reservation\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Working Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Working Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table> \\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\r\\n{%\\r\\nset data = frappe.db.sql(\\\"\\r\\n    select \\r\\n        name,\\r\\n        reservation,\\r\\n        reservation_type,\\r\\n        reference_number,\\r\\n        reservation_date,\\r\\n        group_code,\\r\\n        group_name,\\r\\n        guest,\\r\\n        guest_name, \\r\\n        business_source, \\r\\n        arrival_date, \\r\\n        departure_date,\\r\\n        reservation_status,\\r\\n        room_type_alias,\\r\\n        status_color,\\r\\n        rooms,\\r\\n        room_nights,\\r\\n        adr,\\r\\n        total_room_rate,\\r\\n        adult,\\r\\n        working_date,\\r\\n        child\\r\\n    from `tabReservation Stay` \\r\\n    where \\r\\n        property= '{0}' and \\r\\n        working_date between '{1}' and '{2}' and\\r\\n        business_source = if('{3}'='',business_source,'{3}')\\r\\n        \\\".format(\\r\\n            doc.name,\\r\\n            frappe.form_dict.get('start_date'),\\r\\n            frappe.form_dict.get('end_date'),\\r\\n            frappe.form_dict.get('business_source') or ''\\r\\n        ),as_dict=1)\\r\\n%} \\r\\n\\r\\n{% set dates =  data|map(attribute='working_date')|unique|list|sort  %}\\r\\n{% if (data|length) >0 %}\\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th>Reservation #</th>\\r\\n                <th>Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type #</th>\\r\\n                <th class=\\\"text-center\\\">Res. Date</th>\\r\\n                <th class=\\\"text-center\\\">Stay Date</th>\\r\\n                <th class=\\\"text-center\\\">Room Nights</th>\\r\\n                <th>Room(s)</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">Pax(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                {% if can_view_rate==1%}\\r\\n                <th class=\\\"text-right\\\">ADR</th>\\r\\n                <th class=\\\"text-right\\\">Total Room Rate</th>\\r\\n                {%endif%}\\r\\n                <th>Status</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for date in dates%}\\r\\n                <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n                </tr>\\r\\n                {%for d in data|selectattr('working_date', 'equalto', date)|list %}\\r\\n                    <tr>\\r\\n                        <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                        <td>\\r\\n                            <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a><br/>\\r\\n                            <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                        </td>\\r\\n                        <td>{{d.reference_number or ''}}</td>\\r\\n                        <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                        <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\r\\n                        <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                        <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                        <td>\\r\\n                            {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\r\\n                            {% if (rooms|length)>0 %}\\r\\n                                {% for room in rooms %}\\r\\n                                  <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\r\\n                                {% endfor %}\\r\\n                            {% endif %}\\r\\n                        </td>\\r\\n                        <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                        <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                        <td>{{d.business_source}}</td>\\r\\n                        {%if can_view_rate==1 %}\\r\\n                        <td class=\\\"text-right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                        <td class=\\\"text-right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n                        {%endif%}\\r\\n                        <td>{{d.reservation_status}}</td>\\r\\n                    </tr>\\r\\n                {%endfor%}\\r\\n                <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"5\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('reservation_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\"></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('reservation_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('reservation_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"5\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n    <!---->\\r\\n    <br/>\\r\\n    <!---->\\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td>\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n{%endif%}\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-31 08:54:35.986994",
  "module": "eDoor",
  "name": "eDoor Dashboard Daily Reservation Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "html, body{\n    height:500px !important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Chart\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"w-full my-2 px-3\\\">\\n    <div class=\\\"row w-full\\\">\\n        <div class=\\\"col-3 px-2\\\">\\n<div class=\\\"shadow-sm p-3 bg-light rounded\\\">\\n<h5>Reservation</h5>\\n<div id=\\\"arrival_stay_over_departure\\\" class=\\\"w-full flex justify-content-center\\\" style=\\\"height:200px;\\\"></div>\\n</div>\\n</div>\\n<div class=\\\"col-3 px-2\\\">\\n<div class=\\\"shadow-sm p-3 bg-light rounded\\\">\\n<h5>Business Source</h5>\\n<div id=\\\"business_source_chart\\\"  style=\\\"height:200px;\\\"></div>\\n</div>\\n</div>\\n<div class=\\\"col-3 px-2\\\">\\n<div class=\\\"shadow-sm p-3 bg-light rounded\\\">\\n<h5>Room Type</h5>\\n<div id=\\\"room_type_chart\\\"  style=\\\"height:200px;\\\"></div>\\n</div>\\n</div>\\n<div class=\\\"col-3 px-2\\\">\\n<div class=\\\"shadow-sm p-3 bg-light rounded\\\">\\n<h5>Reservation Type</h5>\\n<div id=\\\"reservation_type_chart\\\" class=\\\"w-full flex justify-content-center\\\"  style=\\\"height:200px;\\\"></div>\\n</div>\\n </div>\\n </div>\\n</div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\n    set data = frappe.call(\\\"edoor.api.frontdesk.get_dashboard_data\\\",property=doc.name,date=frappe.form_dict.get(\\\"date\\\"),room_type_id=(frappe.form_dict.get(\\\"room_type_id\\\") or ''))\\n%}\\n{% set total_res = (data.arrival|int or 0) + (data.stay_over|int or 0) + (data.departure|int or 0) %}\\n{% set total_res_active = (data.arrival|int or 0) + (data.stay_over|int or 0) %}\\n\\n<div class=\\\"row px-3\\\">\\n    <div class=\\\"col-4 p-2\\\">\\n<div class=\\\"shadow-sm p-3 bg-light  rounded\\\">\\n  <div class=\\\"card-body \\\">\\n    <h5 class=\\\"card-title\\\">Summary</h5>\\n    <h6 class=\\\"card-subtitle mb-2 text-muted\\\"> Reservation {{total_res_active}} </h6>\\n    <div class=\\\"row\\\">\\n    <div class=\\\"col lh-1 border-end\\\" style=\\\"color: rgb(236, 134, 75);\\\">\\n        <h3 class=\\\"mb-0 arrival\\\" >{{data.arrival|int}}</h3>\\n        <span>Arrival</span>\\n    </div>\\n    <div class=\\\"col lh-1 border-end\\\" style=\\\"color:#50ac58;\\\">\\n        <h3 class=\\\"mb-0 stay_over\\\">{{data.stay_over|int}}</h3>\\n        <span>Stay Over</span>\\n    </div>\\n        <div  class=\\\"col lh-1 border-end\\\" style=\\\"color: rgb(79, 79, 79);\\\">\\n        <h3 class=\\\"mb-0 departure\\\">{{data.departure|int}}</h3>\\n        Departure\\n    </div>\\n        <div style=\\\"color:rgb(237, 99, 150);\\\" class=\\\"col lh-1 text-nowrap\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.unassign_room | int}}</h3>\\n       Unassign Room\\n    </div>\\n\\n    </div>\\n  </div>\\n  <div class=\\\"col-12 mt-2\\\">\\n    <div class=\\\"progress rounded-0 mt-2\\\" style=\\\"height:3px\\\">\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment one\\\" style=\\\"width:{{(data.arrival|int/(total_res or 1))*100}}%;background-color: rgb(236, 134, 75);\\\" aria-valuenow=\\\"15\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">\\n     \\n  </div>\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment two\\\" style=\\\"width:{{(data.stay_over|int/(total_res or 1))*100}}%;background:#50ac58;\\\" aria-valuenow=\\\"10\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">\\n\\n  </div>\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment three\\\" style=\\\"width:{{(data.departure|int/(total_res or 1))*100}}%;background:rgb(79, 79, 79);\\\" aria-valuenow=\\\"20\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">\\n    \\n  </div>\\n</div>\\n</div>\\n</div>\\n</div>\\n<div class=\\\"col-6 p-2\\\">\\n    <div class=\\\"shadow-sm p-3 bg-light rounded\\\">\\n  <div class=\\\"card-body\\\" >\\n    <h5 class=\\\"card-title\\\">Occupancy</h5>\\n    <h6 class=\\\"card-subtitle mb-2 text-muted\\\">Total Room  : {{(data.total_room|int)}}</h6>\\n    <div class=\\\"row\\\">\\n    <div class=\\\"col lh-1 border-end text-nowrap\\\" style=\\\"color:#50ac58;\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.total_room_occupy|int}}</h3>\\n        Occupy  {{\\\"%.2f\\\"|format(data.occupancy)}}% \\n    </div>\\n    <div class=\\\"col lh-1 border-end text-nowrap\\\" style=\\\"color: rgb(236, 134, 75);\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.total_room_vacant | int}}</h3>\\n       \\n        Vacant Room {{\\\"%.2f\\\"|format((data.total_room_vacant / ( data.total_room - ( 0 if frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"calculate_room_occupancy_include_room_block\\\") ==1 else data.total_room_block | int) )  )*100)}}%\\n    </div>\\n     <div class=\\\"col lh-1 border-end text-nowrap\\\">\\n        \\n        <h3 class=\\\"mb-0\\\">{{data.total_room_block | int}}</h3>\\n        Room Block  \\n        {% if frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"calculate_room_occupancy_include_room_block\\\") %}\\n        {{\\\"%.2f\\\"|format((data.total_room_block / ( data.total_room - ( 0 if frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"calculate_room_occupancy_include_room_block\\\") ==1 else data.total_room_block | int)) )*100)}}%\\n        {% endif %}\\n    </div>\\n            <div style=\\\"color:rgb(130, 130, 5);\\\"  class=\\\"col lh-1 border-end\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.today_no_show|int}}</h3>\\n        No Show\\n    </div>\\n     <div style=\\\"color:rgb(237, 99, 150);\\\" class=\\\"col lh-1 border-end\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.total_cancelled | int}}</h3>\\n        Cancell\\n    </div>\\n     <div style=\\\"color:rgb(255, 0, 0);\\\" class=\\\"col lh-1\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.total_void | int}}</h3>\\n        Void\\n    </div>\\n    </div>\\n  </div>\\n  <div class=\\\"col-12 mt-2\\\">\\n    <div class=\\\"progress rounded-0 mt-2\\\" style=\\\"height:3px;\\\">\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment one\\\" style=\\\"width: {{(data.total_room_occupy|int / data.total_room|int)*100}}%;background:#50ac58\\\" aria-valuenow=\\\"15\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">\\n      \\n  </div>\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment two\\\" style=\\\"width: {{(data.total_room_vacant|int / data.total_room|int )*100}}%;background-color: rgb(236, 134, 75);\\\" aria-valuenow=\\\"15\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\"></div>\\n  <div class=\\\"progress-bar bg-dark\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment \\\" style=\\\"width: {{(data.total_room_block|int / data.total_room|int )*100}}%\\\" aria-valuenow=\\\"15\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\"></div>\\n</div>\\n</div>\\n</div>\\n</div>\\n<div class=\\\"col-2 p-2\\\">\\n<div class=\\\"shadow-sm p-3 bg-light rounded \\\">\\n  <div class=\\\"card-body\\\">\\n    <h5 class=\\\"card-title\\\">\\nTransportation\\n</h5>\\n    <h6 class=\\\"card-subtitle mb-2 text-muted\\\">Total: {{data.pick_up|int + data.drop_off|int}}</h6>\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col lh-1 border-end\\\" style=\\\"color:#50ac58\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.pick_up | int}}</h3>\\n        Pickup\\n    </div>\\n        <div class=\\\"col lh-1\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.drop_off | int}}</h3>\\n      Drop Off\\n    </div>\\n    </div>\\n  </div>\\n  <div class=\\\"col-12 mt-2\\\">\\n     <div class=\\\"progress rounded-0 mt-2\\\" style=\\\"height:3px\\\">\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment two\\\" style=\\\"width:{{(data.pick_up|int/((data.pick_up|int + data.drop_off|int) or 1))*100}}%;background:#50ac58;\\\" aria-valuenow=\\\"10\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">\\n    \\n  </div>\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment three\\\" style=\\\"width:{{(data.drop_off|int/((data.pick_up|int + data.drop_off|int) or 1))*100}}%;background:rgb(79, 79, 79);\\\" aria-valuenow=\\\"20\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">\\n     \\n  </div>\\n</div>\\n  </div>\\n</div>\\n</div>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set date = frappe.form_dict.get('date')%}\\n{%set total_room = frappe.db.sql(\\\"select count(name) as total_room from tabRoom where property='{}' \\\".format(doc.name),as_dict=1)[0][\\\"total_room\\\"]%}\\n{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        arrival_mode,\\n        reservation_type,\\n        reference_number,\\n        DATE_FORMAT(reservation_date, '%Y-%m-%d')  as reservation_date,\\n        guest,\\n        guest_name, \\n        business_source, \\n        DATE_FORMAT(arrival_date, '%Y-%m-%d') as arrival_date,\\n        DATE_FORMAT(departure_date, '%Y-%m-%d') as departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        adult,\\n        child,\\n        cancelled_by,\\n        total_room_rate,\\n        is_active_reservation,\\n        departure_mode,\\n        arrival_flight_number,\\n        departure_flight_number,\\n        pickup_location,\\n        drop_off_location,\\n        pickup_driver,\\n        drop_off_driver,\\n        pickup_driver_name,\\n        drop_off_driver_name,\\n        pickup_driver_phone_number,\\n        drop_off_driver_phone_number,\\n        pickup_note,\\n        is_early_checked_out,\\n        is_reserved_room,\\n        DATE_FORMAT(cancelled_date, '%Y-%m-%d') as cancelled_date,\\n        drop_off_note,\\n        require_pickup,\\n        DATE_FORMAT(checked_out_system_date, '%Y-%m-%d') as checked_out_system_date,\\n        require_drop_off,\\n        require_pickup + require_drop_off as is_pickup_drop_off\\n    from `tabReservation Stay` \\n    where \\n        name in (\\n            select reservation_stay from `tabRoom Occupy` r\\n            where \\n            \\n                property= '{0}' and \\n                date = '{1}'  and \\n                r.room_type_id = if('{2}'='',r.room_type_id,'{2}') \\n            )\\n        or name in ( \\n        select \\n            reservation_stay \\n        from `tabRoom Occupy` r\\n        where \\n            property= '{0}' and \\n            date = '{1}'  and \\n            r.room_type_id = if('{2}'='',r.room_type_id,'{2}')        ) \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            \\\"\\\" if (frappe.form_dict.get('room_type_id') or \\\"\\\") ==\\\"null\\\" else frappe.form_dict.get('room_type_id')\\n        ),as_dict=1)\\n%} \\n{%\\n    set room_block = frappe.db.sql(\\\"\\n        select\\n              \\n           name,\\n            room_number,\\n            block_date,\\n            start_date,\\n            end_date,\\n            reason,\\n            room_type,\\n            owner,\\n            creation,\\n            total_night_count,\\n            status_color,\\n            is_unblock\\n            \\n        from `tabRoom Block` \\n        where \\n        property = '{0}' and \\n        name in (\\n            select  stay_room_id from `tabRoom Occupy` r\\n            where \\n                type='Block' and \\n                date = '{1}' and \\n                property = '{0}' and \\n                 r.room_type_id = if('{2}'='',r.room_type_id,'{2}')\\n            \\n        ) \\n    \\\".format(\\n      doc.name,\\n            frappe.form_dict.get('date'),\\n            \\\"\\\" if (frappe.form_dict.get('room_type_id') or \\\"\\\") ==\\\"null\\\" else frappe.form_dict.get('room_type_id')\\n    ),as_dict=1)\\n%}\\n\\n{% set total_room = total_room - ( 0 if frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"calculate_room_occupancy_include_room_block\\\") ==1 else room_block|length) %}\\n{% set business_source = data|map(attribute='business_source')|unique|sort %}\\n{% \\n    set data_room = frappe.call(\\\"edoor.api.frontdesk.get_daily_summary_by_room_type\\\",property=doc.name,date=frappe.form_dict.get(\\\"date\\\"),room_type_id=(frappe.form_dict.get(\\\"room_type_id\\\") or ''))\\n%}\\n{%\\n     set total_room_sold = (data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) |list| length ) or 1\\n%}\\n\\n<!-- Total -->\\n {% set total_adult = data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | map(attribute='adult') | sum %}\\n            {% set total_child = data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | map(attribute='child') | sum %}       \\n            {% set total_pick_up = data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"require_pickup\\\", \\\"equalto\\\", 1) | list | length   %} \\n            {% set total_drop_off = data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"departure_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"require_drop_off\\\", \\\"equalto\\\", 1) | list | length  %} \\n            {% set total_arrival = data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) |list| length   %} \\n            {% set total_remine_checked_in =data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"in\\\", [\\\"Confirmed\\\", \\\"Reserved\\\"]) |list| length %} \\n            {% set total_checked_in = total_arrival - total_remine_checked_in  %}\\n            {% set total_stay_over = data | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"In-house\\\") |selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) |selectattr(\\\"arrival_date\\\", \\\"ne\\\",date) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | list | length %} \\n            {% set total_checked_out = data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"checked_out_system_date\\\", \\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Checked Out\\\") |list| length %}\\n            {% set total_departure = ( data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"departure_date\\\", \\\"equalto\\\",date) |rejectattr(\\\"reservation_status\\\", \\\"equalto\\\",\\\"Checked Out\\\") |list| length ) + total_checked_out %}\\n            {% set total_no_show = data|  selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"No Show\\\") |list| length  %}\\n            {% set total_cancelled =data| selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Cancelled\\\") |list| length %}\\n            {% set total_void = data| selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Void\\\") |list| length  %}\\n            \\n            {% set total_adr = (data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | map(attribute='adr') | sum )/((data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) |list| length)or 1)  %}\\n            \\n            {% set total_sum_rate = ( data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | map(attribute='total_room_rate') | sum )  %}\\n            {% set total_occupancy =( data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) |list| length)/total_room_sold * 100  %}\\n <div id=\\\"reservation_data\\\" style=\\\"display:none\\\">\\n     {{ data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"departure_date\\\", \\\"ne\\\", date) | list }}\\n </div>\\n{% if (data|length) >0 %}\\n<div class=\\\"row px-3\\\" >\\n<div class=\\\"col-12 shadow-sm p-3 rounded\\\">\\n<ul class=\\\"nav nav-tabs\\\" id=\\\"myTab\\\" role=\\\"tablist\\\">\\n\\n  <li class=\\\"nav-item\\\" role=\\\"presentation\\\">\\n    <button class=\\\"nav-link active\\\" id=\\\"profile-tab\\\" data-bs-toggle=\\\"tab\\\" data-bs-target=\\\"#Detail\\\" type=\\\"button\\\" role=\\\"tab\\\" aria-controls=\\\"Detail\\\" aria-selected=\\\"true\\\">Detail</button>\\n  </li>  \\n  <li class=\\\"nav-item\\\" role=\\\"presentation\\\">\\n    <button class=\\\"nav-link\\\" id=\\\"home-tab\\\" data-bs-toggle=\\\"tab\\\" data-bs-target=\\\"#Summary\\\" type=\\\"button\\\" role=\\\"tab\\\" aria-controls=\\\"Summary\\\" aria-selected=\\\"false\\\">Summary</button>\\n  </li>\\n</ul>\\n<div class=\\\"tab-content p-2\\\" id=\\\"myTabContent\\\">\\n<div class=\\\"tab-pane fade show active\\\" id=\\\"Detail\\\" role=\\\"tabpanel\\\" aria-labelledby=\\\"profile-tab\\\" tabindex=\\\"0\\\">\\n        <div class=\\\"accordion\\\" id=\\\"arrivalAccordion\\\">\\n            {% set count_arrival_guest = (data | selectattr(\\\"arrival_date\\\", \\\"equalto\\\", date) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | list) | length %}\\n            <div class=\\\"accordion-item\\\">\\n                <h2 class=\\\"accordion-header\\\" id=\\\"arrivalHeading\\\">\\n                    <button class=\\\"accordion-button\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#arrivalCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"arrivalCollapse\\\">\\n                        Arrival Guest <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                           {{ count_arrival_guest }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"arrivalCollapse\\\" class=\\\"accordion-collapse collapse show\\\" aria-labelledby=\\\"arrivalHeading\\\" data-bs-parent=\\\"#arrivalAccordion\\\">\\n                    <div class=\\\"accordion-body overflow-auto p-0\\\">\\n                        {% if count_arrival_guest > 0 %}\\n                        <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) %}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }} </td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                  <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"accordion\\\" id=\\\"stayOverAccordion\\\">\\n            <div class=\\\"accordion-item\\\">\\n             {% set count_stay_over = (data | selectattr(\\\"arrival_date\\\", \\\"ne\\\",date) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_status\\\", \\\"in\\\", [\\\"In-house\\\", \\\"Reserved\\\" ,\\\"Confirmed\\\" , \\\"Checked Out\\\" ]) | list) | length %}\\n                <h2 class=\\\"accordion-header\\\" id=\\\"stayOverHeading\\\">\\n                    <button class=\\\"accordion-button\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#stayOverCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"stayOverCollapse\\\">\\n                        Stay Over Guest\\n                        <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                           {{ count_stay_over }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"stayOverCollapse\\\" class=\\\"accordion-collapse collapse show\\\" aria-labelledby=\\\"stayOverHeading\\\" data-bs-parent=\\\"#stayOverAccordion\\\">\\n                    <div class=\\\"accordion-body overflow-auto p-0\\\">\\n                    {% if count_stay_over > 0 %}    \\n                       <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data | selectattr(\\\"reservation_status\\\", \\\"in\\\", [\\\"In-house\\\", \\\"Reserved\\\" ,\\\"Confirmed\\\",\\\"Checked Out\\\" ]) | selectattr(\\\"arrival_date\\\", \\\"ne\\\",date) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) %}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"accordion\\\" id=\\\"departureAccordion\\\">\\n            <div class=\\\"accordion-item\\\">\\n                {% set checked_out_system_date = (data | selectattr(\\\"checked_out_system_date\\\", \\\"equalto\\\", date) \\n                          | rejectattr(\\\"departure_date\\\", \\\"equalto\\\", date) \\n                          | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) \\n                          | list) | length %}\\n               {% set count_departure = (data\\n                          | selectattr(\\\"departure_date\\\", \\\"equalto\\\", date) \\n                          | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) \\n                          | list) | length %}\\n\\n\\n                <h2 class=\\\"accordion-header\\\" id=\\\"departureHeading\\\">\\n                    <button class=\\\"accordion-button\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#departureCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"departureCollapse\\\">\\n                        Departure Guest\\n                        <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                           {{ count_departure + checked_out_system_date }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"departureCollapse\\\" class=\\\"accordion-collapse collapse show\\\" aria-labelledby=\\\"departureHeading\\\" data-bs-parent=\\\"#departureAccordion\\\">\\n                    <div class=\\\"accordion-body overflow-auto p-0\\\">\\n                            {% if count_departure + checked_out_system_date > 0 %}\\n                       <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n        {% set checked_out_items = data | selectattr(\\\"checked_out_system_date\\\", \\\"equalto\\\", date)  | rejectattr(\\\"departure_date\\\", \\\"equalto\\\", date) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1)  | list %}\\n{% set departure_items = data | selectattr(\\\"departure_date\\\", \\\"equalto\\\", date) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | list %}\\n\\n{% set combined_items = checked_out_items + departure_items %}\\n  {% for d in combined_items %}\\n      \\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                 <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"accordion\\\" id=\\\"unassignAccordion\\\">\\n            <div class=\\\"accordion-item\\\">\\n                  {% set count_unassign_room = (data | selectattr(\\\"reservation_status\\\", \\\"equalto\\\",\\\"Confirmed\\\") | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | list) | length %}\\n                <h2 class=\\\"accordion-header\\\" id=\\\"unassignHeading\\\">\\n                    <button class=\\\"accordion-button collapsed\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#unassignCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"unassignCollapse\\\">\\n                       Unassign Room\\n                         <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                          {{ count_unassign_room }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"unassignCollapse\\\" class=\\\"accordion-collapse collapse\\\" aria-labelledby=\\\"unassignHeading\\\" data-bs-parent=\\\"#unassignAccordion\\\">\\n                    <div class=\\\"accordion-body overflow-auto p-0\\\">\\n                          {% if count_unassign_room > 0 %}\\n                        <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data | selectattr(\\\"reservation_status\\\", \\\"equalto\\\",\\\"Confirmed\\\") | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) %}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                 <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n      {% set drop_off_item = data | selectattr(\\\"departure_date\\\",\\\"equalto\\\",date) | selectattr(\\\"require_drop_off\\\", \\\">\\\",0) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | list %}\\n{% set early_drop_off_item = data | selectattr(\\\"checked_out_system_date\\\",\\\"equalto\\\",date) | selectattr(\\\"require_drop_off\\\", \\\">\\\",0) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"is_early_checked_out\\\", \\\"equalto\\\", 1)  | list %}\\n\\n{% set drop_off_all_items = drop_off_item + early_drop_off_item %}\\n\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"accordion\\\" id=\\\"pickupDropoffAccordion\\\">\\n            <div class=\\\"accordion-item\\\">\\n                 {% set count_upandoff = (data | selectattr(\\\"is_pickup_drop_off\\\", \\\">\\\",0) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | list) | length %}\\n                <h2 class=\\\"accordion-header\\\" id=\\\"pickupDropoffHeading\\\">\\n                    <button class=\\\"accordion-button collapsed\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#pickupDropoffCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"pickupDropoffCollapse\\\">\\n                        Pickup <span class=\\\"badge ms-2 text-bg-secondary ms-2\\\"> {{ (data | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"require_pickup\\\", \\\">\\\",0) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | list) | length }} </span> / Drop Off\\n                               <span class=\\\"badge ms-2 text-bg-secondary ms-2\\\">\\n                         {{ drop_off_all_items | length }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"pickupDropoffCollapse\\\" class=\\\"accordion-collapse collapse\\\" aria-labelledby=\\\"pickupDropoffHeading\\\" data-bs-parent=\\\"#pickupDropoffAccordion\\\">\\n                    <div class=\\\"accordion-body overflow-auto p-0\\\">\\n                        {% if count_upandoff > 0  %}\\n                       <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th>Mode</th>\\n            <th>Flight #</th>\\n            <th>Location</th>\\n            <th>Driver</th>\\n            <th>Phone Number</th>\\n            <th class=\\\"text-center\\\">Require</th>\\n            <th class=\\\"text-start\\\">Note</th>\\n        </tr>\\n\\n        {%for d in data | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"require_pickup\\\", \\\">\\\",0) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1)%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td>{{ (d.arrival_mode ) or ''}}</td>\\n                <td>{{ (d.arrival_flight_number ) or '' }}</td>\\n                <td>{{ (d.pickup_location  ) or '' }}</td>\\n                <td>{{ (d.pickup_driver_name) or '' }}</td>\\n                <td>{{ (d.pickup_driver_phone_number ) or '' }}</td>\\n               \\n                <td class=\\\"text-center\\\"><span style=\\\"background-color: #50ac58;\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">\\n    Pickup</span></td>\\n     <td class=\\\"text-end\\\">{{ (d.pickup_note ) or '' }} </td>\\n            </tr> \\n        {%endfor%}\\n  \\n\\n                {%for d in drop_off_all_items %}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td>{{ (d.departure_mode) or ''}}</td>\\n                <td>{{ (d.departure_flight_number ) or '' }}</td>\\n                <td>{{ (d.drop_off_location ) or '' }}</td>\\n                <td>{{ (d.drop_off_driver_name ) or '' }}</td>\\n                <td>{{ (d.drop_off_driver_phone_number ) or '' }}</td>\\n                \\n                <td class=\\\"text-center\\\"><span style=\\\"background-color:#4f4f4f;\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">\\n    Drop off</span></td>\\n    <td class=\\\"text-end\\\">{{ (d.drop_off_note ) or '' }} </td>\\n            </tr> \\n\\n        {%endfor%}\\n       \\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"accordion\\\" id=\\\"noShowCancelledAccordion\\\">\\n            <div class=\\\"accordion-item\\\">\\n                {% set count_cancelled = (data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date)  | list) | length %}\\n                {% set count_noshow = (data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"is_reserved_room\\\",\\\"equalto\\\",1) | selectattr(\\\"arrival_date\\\", \\\"ne\\\",date) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | list) | length %}\\n                <h2 class=\\\"accordion-header\\\" id=\\\"noShowCancelledHeading\\\">\\n                    <button class=\\\"accordion-button collapsed\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#noShowCancelledCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"noShowCancelledCollapse\\\">\\n                        No Show, Cancelled & Void\\n                         <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                          {{ count_cancelled + count_noshow }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"noShowCancelledCollapse\\\" class=\\\"accordion-collapse collapse\\\" aria-labelledby=\\\"noShowCancelledHeading\\\" data-bs-parent=\\\"#noShowCancelledAccordion\\\">\\n                    <div class=\\\"accordion-body overflow-auto p-0\\\">\\n                        {% if ( count_cancelled + count_noshow ) > 0 %}\\n                       <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n            <th class=\\\"text-center\\\">Modified By</th>\\n            <th class=\\\"text-center\\\">Modified Date</th>\\n        </tr>\\n  {% set data_cancelled = data | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | list %}\\n  {% set data_noshow = data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"is_reserved_room\\\",\\\"equalto\\\",1) | selectattr(\\\"arrival_date\\\", \\\"ne\\\",date) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | list %}\\n        {%for d in (data_cancelled + data_noshow)  %}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                 <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{{room.room_number or ''}} {{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}} \\n                {% if  d.is_reserved_room  %}\\n<span title=\\\"Reserved Room\\\" class=\\\"rounded-circle px-1\\\" style=\\\"background: rgba(0, 0, 0, 0.274);\\\">            \\n                <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" version=\\\"1.1\\\" id=\\\"Layer_1\\\" x=\\\"0px\\\" y=\\\"0px\\\" width=\\\"13\\\" height=\\\"13\\\" viewBox=\\\"0 0 104.6 79.3\\\" style=\\\"enable-background:new 0 0 104.6 79.3;\\\" xml:space=\\\"preserve\\\">\\n<style type=\\\"text/css\\\">\\n\\t.st0{fill:#fff;}\\n</style>\\n<path class=\\\"st0\\\" d=\\\"M100.7,46H100v-5.2c0-3.8-2.2-7.3-5.8-9.2V13.2C94.3,5.9,87.8,0,79.9,0H24.7c-7.9,0-14.3,5.9-14.3,13.2v18.4  c-3.6,2-5.8,5.4-5.8,9.2V46H4.1c-0.1,0-0.3,0-0.5,0C1.5,46.2,0,47.9,0,50v13.8c0,2.2,1.8,4,4,4h0.6v7.5c0,2.2,1.8,4,4,4h11.5  c2.2,0,4-1.8,4-4v-7.5h56.5v7.5c0,2.2,1.8,4,4,4H96c2.2,0,4-1.8,4-4v-7.5h0.6c2.2,0,4-1.8,4-4V50C104.6,47.8,102.8,46,100.7,46z   M92.1,67.8v3.5h-3.5v-3.5H92.1z M16.1,67.8v3.5h-3.5v-3.5H16.1z M31,24.7c0-1.7,1.3-2.9,2.9-2.9h11.5c1.7,0,2.9,1.3,2.9,2.9V27  c0,1.7-1.3,2.9-2.9,2.9H33.9c-1.7,0-2.9-1.3-2.9-2.9V24.7z M56.3,24.7c0-1.7,1.3-2.9,2.9-2.9h11.5c1.7,0,2.9,1.3,2.9,2.9V27  c0,1.7-1.3,2.9-2.9,2.9H59.2c-1.7,0-2.9-1.3-2.9-2.9V24.7z M86.3,29.9h-5.1c0.3-1,0.4-1.9,0.4-2.9v-2.3c0-6-4.9-10.9-10.9-10.9H59.2  c-2.5,0-5,0.9-6.9,2.5c-1.9-1.6-4.4-2.5-6.9-2.5H33.9c-6,0-10.9,4.9-10.9,10.9V27c0,1,0.1,2,0.4,2.9h-5.1V13.2  c0-2.8,2.9-5.2,6.4-5.2h55.2c3.5,0,6.4,2.4,6.4,5.2V29.9z M12.6,46v-5.2c0-1.3,1.8-2.9,4.1-2.9H88c2.3,0,4.1,1.6,4.1,2.9V46H12.6z   M96.7,54v5.8H8V54H96.7z\\\"></path>\\n</svg>\\n</span> \\n                {% endif %} </span></td>\\n                <td class=\\\"text-end\\\">{{d.cancelled_by}}</td>\\n                <td class=\\\"text-end\\\"> {{frappe.format(d.cancelled_date,{'fieldtype':'Date'})}}</td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n{% set room_type_alias = frappe.get_doc(\\\"Room Type\\\",doc.room_type) %}\\n        <div class=\\\"accordion\\\" id=\\\"roomBlockAccordion\\\">\\n            <div class=\\\"accordion-item\\\">\\n                {% set count_room_block = (room_block | list) | length %}\\n                <h2 class=\\\"accordion-header\\\" id=\\\"roomBlockHeading\\\">\\n                    <button class=\\\"accordion-button collapsed\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#roomBlockCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"roomBlockCollapse\\\">\\n                        Room Block\\n                               <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                          {{ count_room_block }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"roomBlockCollapse\\\" class=\\\"accordion-collapse collapse\\\" aria-labelledby=\\\"roomBlockHeading\\\" data-bs-parent=\\\"#roomBlockAccordion\\\">\\n                    <div class=\\\"accordion-body overflow-auto p-0\\\">\\n                        {% if count_room_block > 0 %}\\n                        <table class='report-list occupied-001' style='width:100%' >\\n           <tr>\\n                <th class=\\\"text-center\\\" >No</th>\\n                <th class=\\\"text-center\\\" >Blocked Number</th>\\n                <th class=\\\"text-center\\\" >Blocked Date</th>\\n                <th class=\\\"text-center\\\" >Start Date</th>\\n                <th class=\\\"text-center\\\" >Release Date</th>\\n                <th class=\\\"text-center\\\" >Night</th>\\n                <th class=\\\"text-center\\\" >Room(s)</th>\\n                <th class=\\\"text-center\\\" >Status</th>\\n                <th>Blocked By</th>\\n                <th style=\\\"width:20%\\\">Reason</th>\\n            </tr>\\n        {%for d in room_block %}\\n             <tr>\\n                    <td class=\\\"text-center\\\" >{{loop.index}}</td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_room_block_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.block_date or '',{'fieldtype':'Date'})}} </td>\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.start_date,{'fieldtype':'Date'})}} </td>\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.end_date,{'fieldtype':'Date'})}} </td>\\n                    <td class=\\\"text-center\\\">{{d.total_night_count}}</td>\\n                    <td class=\\\"text-center\\\">{{d.room_number}} {{\\\"/\\\" if d.room_number else \\\"\\\"}}{{room_type_alias.alias}}</td>\\n                    <td class=\\\"text-center\\\">\\n                        <span class=\\\"rounded-pill py-1 px-2 text-white\\\" style=\\\"background: {{d.status_color}}\\\">\\n                            <svg version=\\\"1.2\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"18\\\" height=\\\"18\\\">\\n                            \\t<title>lock-svgrepo-com-svg</title>\\n                            \\t<style>\\n                            \\t\\t.s0 { fill: transparent;stroke: #ffffff;stroke-linecap: round;stroke-linejoin: round;stroke-width: 2 } \\n                            \\t</style>\\n                            \\t<path id=\\\"Layer\\\" fill-rule=\\\"evenodd\\\" class=\\\"s0\\\" d=\\\"m7 10v-2c0-2.8 2.2-5 5-5 2.8 0 5 2.2 5 5v2m1.4 0.3c0.5 0.3 1 0.8 1.3 1.3 0.3 0.7 0.3 1.5 0.3 3.2v1.4c0 1.7 0 2.5-0.3 3.2-0.3 0.5-0.8 1-1.3 1.3-0.7 0.3-1.5 0.3-3.2 0.3h-6.4c-1.7 0-2.5 0-3.2-0.3-0.5-0.3-1-0.8-1.3-1.3-0.3-0.7-0.3-1.5-0.3-3.2v-1.4c0-1.7 0-2.5 0.3-3.2 0.3-0.5 0.8-1 1.3-1.3 0.4-0.2 0.8-0.2 1.4-0.3h10c0.6 0.1 1 0.1 1.4 0.3zm-3.2-0.3h-6.4c-0.7 0-1.3 0-1.8 0h10c-0.5 0-1.1 0-1.8 0z\\\"/>\\n                            </svg>\\n                            {{\\\"Blocked\\\" if d.is_unblock==0 else \\\"Release\\\"}}\\n                        </span>\\n                    </td>\\n                     <td>{{d.owner.split(\\\"@\\\")[0]}}</td>\\n                     <td style=\\\"width:20%\\\">{{d.reason or ''}}</td>\\n                </tr>\\n        {%endfor%}\\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n{%endif%}\\n</div>\\n  <div class=\\\"tab-pane fade\\\" id=\\\"Summary\\\" role=\\\"tabpanel\\\" aria-labelledby=\\\"home-tab\\\" tabindex=\\\"0\\\">\\n\\n<div class=\\\"shadow-sm p-2 bg-white border  rounded overflow-auto\\\">\\n<table class='report-list occupied-001' style='width:100%' >\\n       <tr>\\n        <th colspan=\\\"14\\\" class=\\\"text-center fw-bolder p-3\\\">Summary by Business Source</th>\\n    </tr>\\n        <tr>\\n            <th class=\\\"text-center\\\" >No</th>\\n            <th >Business Source</th>\\n            <th class=\\\"text-center\\\" >Room Sold</th> \\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\" >FIT / GIT</th>\\n            <th class=\\\"text-center\\\" >Pickup / Drop off</th>\\n            <th class=\\\"text-center\\\" >Checked In / Arrival</th>\\n            <th class=\\\"text-center\\\" >Stay Over</th>\\n            <th class=\\\"text-center\\\">Checked Out / Departure</th>\\n            <th class=\\\"text-center\\\"> No Show </th>\\n            <th class=\\\"text-center\\\"> Cancelled / Void </th> \\n            <th class=\\\"text-end\\\">ADR</th>\\n           <th class=\\\"text-end\\\">Total Rate</th>\\n            <th class=\\\"text-center\\\">Occupancy</th>\\n        </tr>\\n        {% set sum_adult = 0 %}\\n            {%for d in business_source%}\\n            \\n                <tr>\\n                    <td class=\\\"text-center\\\" >{{loop.index}}</td>\\n                    <td >{{d}}</td>\\n                    <td class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) |list| length}}</td> \\n                    <td class=\\\"text-center\\\" >{{ data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"business_source\\\", \\\"equalto\\\", d) | map(attribute='adult') | sum }} / \\n                    {{ data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"business_source\\\", \\\"equalto\\\", d) | map(attribute='child') | sum }}\\n                    </td>\\n                    <td class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", \\\"FIT\\\") |list| length}}\\n                    / {{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", \\\"GIT\\\") |list| length}}\\n                    </td>\\n                    <td class=\\\"text-center\\\" >{{ data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"business_source\\\", \\\"equalto\\\", d) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"require_pickup\\\", \\\"equalto\\\", 1) | list | length }}\\n/ {{ data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"business_source\\\", \\\"equalto\\\", d) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"departure_date\\\",\\\"equalto\\\",date) | selectattr(\\\"require_drop_off\\\", \\\"equalto\\\", 1) | list | length }}</td>\\n\\n                    \\n                       <td class=\\\"text-center\\\" >\\n                    {{ data\\n   | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1)\\n   | selectattr(\\\"business_source\\\", \\\"equalto\\\", d)\\n   | selectattr(\\\"arrival_date\\\", \\\"equalto\\\", date)\\n   | rejectattr(\\\"reservation_status\\\", \\\"in\\\", [\\\"Confirmed\\\", \\\"Reserved\\\"])\\n   | list\\n   | length }} / {{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) |list| length}} \\n                       </td>\\n                       <td class=\\\"text-center\\\" >\\n                        {{ data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"arrival_date\\\", \\\"ne\\\",date) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"In-house\\\") | list | length  }}\\n                       </td>\\n                     <td class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"checked_out_system_date\\\", \\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Checked Out\\\") |list| length}}\\n                       / {{ (data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"departure_date\\\", \\\"equalto\\\",date) |rejectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Checked Out\\\") |list| length ) + (data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"checked_out_system_date\\\", \\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Checked Out\\\") |list| length)}}\\n                       </td>\\n                       <td class=\\\"text-center\\\" >{{data| selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"No Show\\\") |list| length}}</td>\\n                      <td class=\\\"text-center\\\" >{{data|  selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Cancelled\\\") |list| length}}\\n                      / {{data|  selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Void\\\") |list| length}}\\n                      </td>\\n                      <td class=\\\"text-end\\\">{{frappe.format((data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"business_source\\\", \\\"equalto\\\", d) | map(attribute='adr')  | sum ) / ((data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) |list| length)or 1) ,{'fieldtype':'Currency'})}}       </td>\\n                      <td class=\\\"text-end\\\">\\n                     {{frappe.format(data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"business_source\\\", \\\"equalto\\\", d) | map(attribute='total_room_rate')  | sum,{'fieldtype':'Currency'})}}       \\n                   \\n                      </td>\\n                       <td class=\\\"text-center\\\">{{\\\"%.2f\\\"|format((data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) |  selectattr(\\\"business_source\\\",\\\"equalto\\\",d)  |list| length)/ total_room_sold * 100 )}}%</td>\\n                        \\n                </tr>\\n            {%endfor%}\\n            <tr class=\\\"border bg-white\\\">\\n              <th class=\\\"text-center p-3\\\" colspan=\\\"2\\\" >Total :</th>\\n              <th class=\\\"text-center\\\">{{total_room_sold}}</th>\\n              <th class=\\\"text-center\\\" >{{ total_adult }} / {{ total_child }}</th>\\n              <th class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", \\\"FIT\\\") |list| length}}\\n                    / {{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", \\\"GIT\\\") |list| length}}\\n                    </th>\\n              <th class=\\\"text-center\\\" >{{ total_pick_up }} / {{ total_drop_off }}</th>\\n              <th class=\\\"text-center\\\" >{{ total_checked_in }} / {{total_arrival}} </th>\\n              <th class=\\\"text-center\\\" > {{ total_stay_over }} </th>\\n              <th class=\\\"text-center\\\" >{{total_checked_out}} / {{ total_departure }} </th>\\n              <th class=\\\"text-center\\\" >{{total_no_show}}</th>\\n              <th class=\\\"text-center\\\" >{{total_cancelled}} / {{total_void}} </th>\\n              <th class=\\\"text-end\\\" > {{frappe.format(total_adr ,{'fieldtype':'Currency'})}} </th>\\n              <th class=\\\"text-end\\\"> {{frappe.format(total_sum_rate,{'fieldtype':'Currency'})}} </th>\\n              <th class=\\\"text-center\\\">{{\\\"%.2f\\\"|format(total_occupancy)}}%</th>\\n                        \\n            </tr>\\n \\n</table>\\n</div>\\n{% set reservation_type = data|map(attribute='reservation_type')|unique|sort %}\\n<div class=\\\"shadow-sm p-2 bg-white border  rounded overflow-auto mt-3\\\">\\n<table class='report-list occupied-001' style='width:100%' >\\n    <tr>\\n        <th colspan=\\\"14\\\" class=\\\"text-center fw-bolder p-3\\\">Summary by Reservation Type</th>\\n    </tr>\\n        <tr>\\n            <th class=\\\"text-center\\\" >No</th> \\n            <th  >Reservation Type</th>\\n            <th class=\\\"text-center\\\" >Room Sold</th> \\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\" >Pickup / Drop off</th>\\n            <th class=\\\"text-center\\\" >Checked In / Arrival</th>\\n            <th class=\\\"text-center\\\" >Stay Over</th>\\n            <th class=\\\"text-center\\\">Checked Out / Departure</th>\\n            <th class=\\\"text-center\\\"> No Show </th>\\n            <th class=\\\"text-center\\\"> Cancelled / Void </th> \\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Rate</th>\\n            <th class=\\\"text-center\\\">Occupancy</th>\\n        </tr>\\n        {% set sum_adult = 0 %}\\n           {%for d in reservation_type%}\\n            \\n                <tr>\\n                    <td class=\\\"text-center\\\" >{{loop.index}}</td>\\n                    <td >{{d}}</td>\\n                    <td class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) |list| length}}</td> \\n                    <td class=\\\"text-center\\\" >{{ data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d) | map(attribute='adult') | sum }} / \\n                    {{ data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d) | map(attribute='child') | sum }}\\n                    </td>\\n                    <td class=\\\"text-center\\\" >{{ data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"require_pickup\\\", \\\"equalto\\\", 1) | list | length }}\\n/ {{ data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"departure_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"require_drop_off\\\", \\\"equalto\\\", 1) | list | length }}</td>\\n\\n                    \\n                       <td class=\\\"text-center\\\" >\\n                      {{ data\\n   | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1)\\n   | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d)\\n   | selectattr(\\\"arrival_date\\\", \\\"equalto\\\", date)\\n   | rejectattr(\\\"reservation_status\\\", \\\"in\\\", [\\\"Confirmed\\\", \\\"Reserved\\\"])\\n   | list\\n   | length }} / {{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) |list| length}} \\n                       </td>\\n                       <td class=\\\"text-center\\\" >\\n                        {{ data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"arrival_date\\\", \\\"ne\\\",date) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"In-house\\\") | list | length  }}\\n                       </td>\\n                     <td class=\\\"text-center\\\" >\\n                      {{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"checked_out_system_date\\\", \\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Checked Out\\\") |list| length}} / {{ (data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"departure_date\\\", \\\"equalto\\\",date) |rejectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Checked Out\\\") |list| length ) + (data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"checked_out_system_date\\\", \\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Checked Out\\\") |list| length)}}\\n                       </td>\\n                       <td class=\\\"text-center\\\" >{{data| selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"No Show\\\") |list| length}}</td>\\n                      <td class=\\\"text-center\\\" >{{data|  selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Cancelled\\\") |list| length}}\\n                      / {{data|  selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Void\\\") |list| length}}\\n                      </td>\\n                      <td class=\\\"text-end\\\">\\n                          {{frappe.format((data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d) | map(attribute='adr') | sum )/ ((data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) |list| length)or 1),{'fieldtype':'Currency'})}}\\n                      </td >\\n                      <td class=\\\"text-end\\\">\\n                          {{frappe.format(data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d) | map(attribute='total_room_rate') | sum,{'fieldtype':'Currency'})}}\\n                    \\n                      </td>\\n                       <td class=\\\"text-center\\\">{{\\\"%.2f\\\"|format((data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d)  |list| length)/total_room_sold * 100 )}}%\\n</td>\\n                        \\n                </tr>\\n            {%endfor%}\\n           \\n                        <tr class=\\\"border bg-white\\\">\\n              <th class=\\\"text-center p-3\\\" colspan=\\\"2\\\" >Total :</th>\\n              <th class=\\\"text-center\\\">{{total_room_sold}}</th>\\n              <th class=\\\"text-center\\\" >{{ total_adult }} / {{ total_child }}</th>\\n              <th class=\\\"text-center\\\" >{{ total_pick_up }} / {{ total_drop_off }}</th>\\n              <th class=\\\"text-center\\\" > {{ total_checked_in }} / {{total_arrival}}</th>\\n              <th class=\\\"text-center\\\" > {{ total_stay_over }} </th>\\n              <th class=\\\"text-center\\\" > {{total_checked_out}} / {{ total_departure }}</th>\\n              <th class=\\\"text-center\\\" >{{total_no_show}}</th>\\n              <th class=\\\"text-center\\\" >{{total_cancelled}} / {{total_void}} </th>\\n              <th class=\\\"text-end\\\" > {{frappe.format(total_adr ,{'fieldtype':'Currency'})}} </th>\\n              <th class=\\\"text-end\\\"> {{frappe.format(total_sum_rate,{'fieldtype':'Currency'})}} </th>\\n              <th class=\\\"text-center\\\">{{\\\"%.2f\\\"|format(total_occupancy)}}%</th>\\n                        \\n            </tr>\\n</table>\\n</div>\\n<!-- By Room Type -->\\n<div class=\\\"shadow-sm p-2 bg-white border  rounded overflow-auto mt-3\\\">\\n   \\n<table class='report-list occupied-001' style='width:100%' >\\n    <tr>\\n        <th colspan=\\\"15\\\" class=\\\"text-center fw-bolder p-3\\\">Summary by Room Type</th>\\n    </tr>\\n    {% if data_room | length > 0 %} \\n        <tr>\\n            <th class=\\\"text-center px-1\\\" >No</th> \\n            <th >Room Type</th>\\n            <th class=\\\"text-center px-1\\\" >Total Room</th>\\n            <th class=\\\"text-center px-1\\\" >Room Sold</th> \\n            <th class=\\\"text-center px-1\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center px-1\\\" >FIT / GIT</th>\\n            <th class=\\\"text-center px-1\\\" >Pickup / Drop off</th>\\n            <th class=\\\"text-center px-1\\\" >Checked In / Arrival</th>\\n            <th class=\\\"text-center px-1\\\" >Stay Over</th>\\n            <th class=\\\"text-center px-1\\\">Checked Out / Departure</th>\\n            <th class=\\\"text-center px-1\\\"> No Show </th>\\n            <th class=\\\"text-center px-1\\\"> Cancelled / Void </th> \\n            <th class=\\\"text-end px-1\\\">ADR</th>\\n            <th class=\\\"text-center px-1\\\">Total Rate</th>\\n            <th class=\\\"text-center px-1\\\">Occupancy</th>\\n        </tr>\\n        {% set sum_adult = 0 %}\\n           {%for d in data_room%}\\n                <tr>\\n                    <td class=\\\"text-center\\\" >{{loop.index}}</td>\\n                    <td title=\\\"{{d.room_type}}\\\" >{{d.room_type_alias}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.toal_room |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.total_room_sold |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.adult |int}} / {{d.child |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.fit |int}} / {{d.git |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.pick_up |int}} / {{d.drop_off |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.checked_in |int}} / {{d.arrival |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.stay_over |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.checked_out |int}} / {{d.departure |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.no_show |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.cancelled |int}} / {{d.void |int}}</td>\\n                    <td class=\\\"text-end\\\" >{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                    <td class=\\\"text-end\\\" >{{frappe.format(d.total_rate,{'fieldtype':'Currency'})}}</td>\\n                    <td class=\\\"text-center\\\" > {{\\\"%.2f\\\"|format(d.total_room_sold /((data_room| map(attribute='total_room_sold') | sum) or 1 ) * 100 )}} % </td>\\n                </tr>\\n            {%endfor%}\\n              <tr class=\\\"border bg-white\\\">\\n              <th class=\\\"text-center p-3\\\" colspan=\\\"2\\\" >Total :</th>\\n              <th class=\\\"text-center\\\" >{{data_room| map(attribute='toal_room') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='total_room_sold') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='adult') | sum | int}} / {{data_room| map(attribute='child') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='fit') | sum | int}} / {{data_room| map(attribute='git') | sum |int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='pick_up') | sum | int}} / {{data_room| map(attribute='drop_off') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='checked_in') | sum | int}} / {{data_room| map(attribute='arrival') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='stay_over') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='departure') | sum | int}} / {{data_room| map(attribute='checked_out') | sum | int}} </th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='no_show') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='cancelled') | sum | int}} / {{data_room| map(attribute='void') | sum | int}} </th>\\n                    <th class=\\\"text-end\\\" >{{ frappe.format(((\\n    data_room|selectattr(\\\"departure\\\", \\\"equalto\\\", 0)|selectattr(\\\"checked_out\\\", \\\"equalto\\\", 0)|map(attribute='adr')|sum\\n) / (\\n    (data_room|selectattr(\\\"departure\\\", \\\"equalto\\\", 0)|selectattr(\\\"checked_out\\\", \\\"equalto\\\", 0)|list|length) or 1\\n)), {'fieldtype': 'Currency'}) }}\\n\\n\\n</th>\\n                    <th class=\\\"text-end\\\" >{{frappe.format((data_room| map(attribute='total_rate') | sum),{'fieldtype':'Currency'})}}</th>\\n                    <th class=\\\"text-center\\\" > {{\\\"%.2f\\\"|format(((data_room| selectattr(\\\"departure\\\", \\\"equalto\\\",0 )|selectattr(\\\"checked_out\\\", \\\"equalto\\\",0 )| map(attribute='total_room_sold') | sum) or 1 ) / ((data_room| selectattr(\\\"departure\\\", \\\"equalto\\\",0 )|selectattr(\\\"checked_out\\\", \\\"equalto\\\",0 )| map(attribute='total_room_sold') | sum) or 1 ) * 100 )}}% </th>\\n              </tr>\\n              {% else %}\\n<tr>\\n<td>\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n</td>\\n</tr>\\n\\n{% endif %}\\n              \\n</table>\\n</div>\\n</div>\\n</div>\\n</div>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Chart Code\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set reservation_by_room_type=frappe.db.sql(\\\"select room_type_alias,room_type_id, count(name) as total from `tabRoom Occupy` where type='reservation' and is_departure=0 and property='{0}' and date='{1}' and room_type_id=if('{2}'='',room_type_id,'{2}') group by room_type_alias,room_type_id\\\".format(doc.name,frappe.form_dict.get('date'),frappe.form_dict.get('room_type_id')),as_dict=1) %}\\n<div id=\\\"reservation_by_room_type_id\\\" class=\\\"d-none\\\">\\n    {{ reservation_by_room_type }}\\n</div>\\n\\n<script>\\n  \\nlet reservation_data = document.querySelector(\\\"#reservation_data\\\").textContent;\\n\\nreservation_data = reservation_data.replaceAll(\\\"'\\\",'\\\"').replaceAll(': None,',': \\\"\\\",')\\nconsole.log(reservation_data);\\nreservation_data = JSON.parse(reservation_data)\\n\\n//reservation type\\nconst reservation_chart_data = {\\n    labels:[...new Set(reservation_data.map(r=>r.reservation_type))]\\n}\\n \\n \\nlet reservation_chart_dataset =[]\\n\\nreservation_chart_data.labels.map(r=>{\\n   reservation_chart_dataset.push(reservation_data.filter(x=>x.reservation_type==r).length) \\n})\\n    \\n\\nreservation_chart_data.datasets=[\\n    {values: reservation_chart_dataset}\\n]\\nconst reservation_type_chart = new frappe.Chart(\\\"#reservation_type_chart\\\", {  // or a DOM element,                                        // new Chart() in case of ES6 module with above usage\\n    data: reservation_chart_data,\\n    type: 'pie',\\n    height: 200,\\n    valuesOverPoints: 1,\\n    colors:[\\\"red\\\",\\\"green\\\"]\\n})\\n//end reservation type\\n\\n// business_source\\nconst business_source_chart_data = {\\n    labels:[...new Set(reservation_data.map(r=>r.business_source))]\\n}\\n \\n \\nlet business_source_chart_dataset =[]\\n\\nbusiness_source_chart_data.labels.map(r=>{\\n   business_source_chart_dataset.push(reservation_data.filter(x=>x.business_source==r).length) \\n})\\n    \\n\\nbusiness_source_chart_data.datasets=[\\n    {values: business_source_chart_dataset}\\n]\\nconst business_source_type_chart = new frappe.Chart(\\\"#business_source_chart\\\", {  // or a DOM element,                                        // new Chart() in case of ES6 module with above usage\\n    data: business_source_chart_data,\\n    type: 'bar',\\n    height: 200,\\n    valuesOverPoints: 1,\\n    colors:[\\\"#7cd6fd\\\",\\\"green\\\"]\\n})\\n// business_source end\\n\\n// room_type_alias\\nlet room_type_alias_data = document.querySelector(\\\"#reservation_by_room_type_id\\\").textContent;\\nroom_type_alias_data = room_type_alias_data.replaceAll(\\\"'\\\",'\\\"').replaceAll(': None,',': \\\"\\\",')\\nroom_type_alias_data = JSON.parse(room_type_alias_data)\\nconst room_type_chart_data = {\\n    labels:room_type_alias_data.map(r=>r.room_type_alias)\\n}\\n\\n\\nroom_type_chart_data.datasets=[\\n    {values:room_type_alias_data.map(r=>r.total)}\\n]\\nconst room_type_type_chart = new frappe.Chart(\\\"#room_type_chart\\\", {  // or a DOM element,                                        // new Chart() in case of ES6 module with above usage\\n    data: room_type_chart_data,\\n    type: 'bar',\\n    height: 200,\\n    valuesOverPoints: 1,\\n    colors:[\\\"#7cd6fd\\\",\\\"green\\\"]\\n})\\n//arrival stay over departure \\nconst arrival= parseInt(document.querySelector(\\\".arrival\\\").textContent)\\nconst stay_over= parseInt(document.querySelector(\\\".stay_over\\\").textContent)\\nconst departure= parseInt(document.querySelector(\\\".departure\\\").textContent)\\n \\nconst chart2 = new frappe.Chart(\\\"#arrival_stay_over_departure\\\", {  // or a DOM element,                                        // new Chart() in case of ES6 module with above usage\\n    data: {\\n    labels: [\\\"Arrival\\\",\\\"Stay Over\\\",\\\"Departure\\\"],\\n    datasets: [\\n        {\\n            values: [ arrival, stay_over, departure]\\n        }\\n    ]},\\n    type: 'pie', // or 'bar', 'line', 'scatter', 'pie', 'percentage'\\n    height: 200,\\n    valuesOverPoints: 1,\\n    colors: ['#EC864B', '#29CD42','#4F4F4F']\\n})\\n\\n\\n\\n\\n\\n</script>\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-15 10:29:15.218444",
  "module": "eDoor",
  "name": "Daily Property Data Summary",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\r\\n{%\\r\\nset data = frappe.db.sql(\\\"\\r\\n    select \\r\\n        name,\\r\\n        reservation,\\r\\n        reservation_type,\\r\\n        reference_number,\\r\\n        reservation_date,\\r\\n        business_source,\\r\\n        group_code,\\r\\n        group_name,\\r\\n        guest,\\r\\n        guest_name, \\r\\n        business_source, \\r\\n        arrival_date, \\r\\n        departure_date,\\r\\n        reservation_status,\\r\\n        room_type_alias,\\r\\n        status_color,\\r\\n        rooms,\\r\\n        room_nights,\\r\\n        adr,\\r\\n        total_room_rate \\r\\n    from `tabReservation Stay` \\r\\n    where \\r\\n        property= '{0}' and \\r\\n        reservation_date = '{1}' and\\r\\n        ifnull(keyword,'') like '%{2}%' and \\r\\n        business_source = if('{3}'='', business_source,'{3}') and \\r\\n        room_types like '%{4}%' and \\r\\n          reservation_status = if('{5}' = '', reservation_status, '{5}')\\r\\n        \\r\\n        \\\".format(\\r\\n            doc.name,\\r\\n            frappe.form_dict.get('date'),\\r\\n            frappe.form_dict.get('keyword') or '',\\r\\n            frappe.form_dict.get('business_source') or '',\\r\\n            frappe.form_dict.get('room_type') or '',\\r\\n            frappe.form_dict.get('reservation_status') or '',\\r\\n        ),as_dict=1)\\r\\n%}\\r\\n{% if (data|length) >0 %} \\r\\n<table class='report-list occupied-001' style='width:100%'>\\r\\n \\r\\n        <tr>\\r\\n            <th class=\\\"text-center\\\">No.</th>\\r\\n            <th class=\\\"text-center\\\">Reservation #</th>\\r\\n            <th class=\\\"text-center\\\">Stay #</th>\\r\\n            <th>Ref. #</th>\\r\\n            <th class=\\\"text-center\\\">Group Code</th>\\r\\n            <th class=\\\"text-center\\\">Res. Date</th>\\r\\n            \\r\\n            <th class=\\\"text-center\\\">Stay Date</th>\\r\\n            <th class=\\\"text-center\\\">Nights</th>\\r\\n            <th>Room(s)</th>\\r\\n            <th>Guest</th>\\r\\n            <th>Source</th>\\r\\n            {% if can_view_rate==1%}\\r\\n            <th class=\\\"text-end\\\">ADR</th>\\r\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\r\\n            {%endif%}\\r\\n            <th class=\\\"text-center\\\">Status</th>\\r\\n        </tr>\\r\\n  \\r\\n        {%for d in data%}\\r\\n            <tr>\\r\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\r\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.group_code or \\\"\\\"}}{{ \\\"/\\\" if d.group_code and d.group_name else \\\"\\\" }}{{d.group_name or \\\"\\\"}}</td>\\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\r\\n               \\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                <td>\\r\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\r\\n                    {% if (rooms|length)>0 %}\\r\\n                        {% for room in rooms %}\\r\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\r\\n                        {% endfor %}\\r\\n                    {% endif %}\\r\\n                </td>\\r\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\r\\n                <td>{{d.business_source}}</td>\\r\\n                {%if can_view_rate==1 %}\\r\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n                {%endif%}\\r\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\r\\n            </tr>\\r\\n        {%endfor%}\\r\\n     \\r\\n</table>\\r\\n{% else %}\\r\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n<div class=\\\"isemtyIcon\\\"></div> \\r\\n<small class=\\\"text-emty\\\">No Data </small>\\r\\n</div>\\r\\n{%endif%}\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-11 17:43:30.721749",
  "module": "eDoor",
  "name": "eDoor Dashboard Daily Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\n    <h2>CONFIRMATION VOUCHER</h2>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:12px;margin-bottom: 15px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Comfirmation No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Reference No.\\\")}}</td>\\n        <td>: {{doc.reference_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone\\\")}}</td>\\n        <td>: {{doc.guest_phone_number or ''}}</td>\\n        <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n        <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Pax (A/C)\\\")}}</td>\\n        <td>: {{doc.adult}} / {{doc.child}}</td>\\n        <td>{{_(\\\"Room Nights\\\")}}</td>\\n        <td>: {{doc.room_nights}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n        <td>{{_(\\\"Type\\\")}}</td>\\n        <td>: {{doc.reservation_type}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set res = frappe.db.sql(\\\"\\n                            select \\n                                    rs.name as stay, \\n                                    rs.arrival_date, \\n                                    rs.departure_date, \\n                                    rs.rooms,\\n                                    rs.room_type_alias, \\n                                    rs.rate_type, \\n                                    rs.room_rate,\\n                                    rs.guest_name,\\n                                    rs.adult,\\n                                    rs.child,\\n                                    rs.room_rate_discount,\\n                                    rs.total_room_rate_tax,\\n                                    rs.total_room_rate,\\n                                    rs.room_nights\\n                            from    `tabReservation Stay` rs \\n                            \\n                            where \\n                                    rs.reservation = '{}' and \\n                                    rs.is_active_reservation = 1 \\n                            order by\\n                                arrival_date,\\n                                name\\n                            \\\".format(doc.name),as_dict=1)%}\\n\\n<table  class='report-list occupied-001' style='width:100%;font-size:10px;margin-bottom:15px;'>\\n    <tr>\\n        <th>No.</th>\\n        <th class=\\\"text-center\\\">{{_(\\\"Stay #\\\")}}</th>\\n        <th class=\\\"text-center\\\">{{_(\\\"Date\\\")}}</th>\\n        <th class=\\\"text-center\\\">{{_(\\\"Nights\\\")}}</th>\\n        <th>{{_(\\\"Room\\\")}}</th>\\n        <th>{{_(\\\"Guest\\\")}}</th>\\n        <th class=\\\"text-center\\\">{{_(\\\"Pax(A/C)\\\")}}</th>\\n        <th>{{_(\\\"Rate Type\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Rate\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Disc.\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Tax\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Total Rate\\\")}}</th>\\n    </tr>\\n    {% for r in res %}\\n    <tr>\\n        <td>{{loop.index}}</td>\\n        <td class=\\\"text-center\\\" style=\\\"white-space: nowrap\\\">{{r.stay}}</td>\\n        <td class=\\\"text-center\\\" style=\\\"white-space: nowrap\\\">{{frappe.format(r.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(r.departure_date,{'fieldtype':'Date'})}}</td>\\n        <td class=\\\"text-center\\\">{{r.room_nights}}</td>\\n        <td>{{r.room_type_alias}}/{{r.rooms}}</td>\\n        <td>{{r.guest_name}}</td>\\n        <td class=\\\"text-center\\\">{{r.adult}}/{{r.child}}</td>\\n        <td>{{r.rate_type}}</td>\\n        <td class=\\\"text-right\\\" style=\\\"white-space: nowrap\\\">{{frappe.format(r.room_rate,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\" style=\\\"white-space: nowrap\\\">{{frappe.format(r.room_rate_discount,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\" style=\\\"white-space: nowrap\\\">{{frappe.format(r.total_room_rate_tax,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\" style=\\\"white-space: nowrap\\\">{{frappe.format(r.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    {% endfor %}\\n\\n    <tr style=\\\"border-top:1px solid black;\\\">\\n        <td colspan=\\\"6\\\"></td>\\n        <td><strong>{{_(\\\"Total:\\\")}}</strong></td>\\n        <td class=\\\"text-right\\\" style=\\\"white-space: nowrap\\\"><strong>{{frappe.format(res|sum(attribute='room_rate'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\" style=\\\"white-space: nowrap\\\"><strong>{{frappe.format(res|sum(attribute='room_rate_discount'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\" style=\\\"white-space: nowrap\\\"><strong>{{frappe.format(res|sum(attribute='total_room_rate_tax'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\" style=\\\"white-space: nowrap\\\"><strong>{{frappe.format(res|sum(attribute='total_room_rate'),{'fieldtype':'Currency'})}}</strong></td>\\n    </tr>\\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-29 09:42:43.372583",
  "module": "eDoor",
  "name": "eDoor Reservation Confirmation Voucher",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 1 - Welcome \"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"1\\\" %}\\n<div class=\\\"text-center\\\" style=\\\"margin-top:36px\\\">\\n <h1>Welcome to Run Night Audit</h1>\\n <h5 class=\\\"text-center\\\">Please ensure all users log out of other devices while processing the running night audit.</h5>\\n <h5>Click on Next button to Continue</h5>\\n \\n</div>\\n<div class=\\\"text-center\\\" style=\\\"margin-top:25px;padding-right:60px\\\">\\n <img width=\\\"250px\\\" src=\\\"/assets/edoor/images/icon-run-night-audit-gray.svg\\\">\\n</div> \\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 2 - Today Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"2\\\" %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        is_active_reservation,\\n        group_code\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and\\n        is_active_reservation = 1 and\\n        arrival_date = '{1}' \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<div class=\\\"primary_message\\\">\\n<h2>Today Arrival</h2>\\nToday, you have {{ data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1)|list|length }} arrival reservations.\\n\\n  {%if (data|selectattr(\\\"reservation_status\\\",\\\"equalto\\\",\\\"Reserved\\\")|list|length) + (data|selectattr(\\\"reservation_status\\\",\\\"equalto\\\",\\\"Confirmed\\\")|list|length)>0 %}\\n    <span>There're {{ (data|selectattr(\\\"reservation_status\\\",\\\"equalto\\\",\\\"Reserved\\\")|list|length) + (data|selectattr(\\\"reservation_status\\\",\\\"equalto\\\",\\\"Confirmed\\\")|list|length) }} reservation pending to check-in.<br></span>\\n{%endif%}\\n\\nPlease review your reservation, perform check-in, or cancel. Then click on the \\\"Next\\\" button to continue.\\n</div>\\n\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th>Group Code</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td>{{d.group_code or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">Today no arrivals guest to check-in.</small>\\n</div>\\n{%endif%}\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 3 - Today Departure\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"3\\\" %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n          name in (\\n            select reservation_stay from `tabRoom Occupy` r\\n            where \\n                property= '{0}' and \\n                date = '{1}' and\\n             is_departure=1\\n            )\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<div class=\\\"primary_message\\\">\\n<h2>Today Departure</h2>\\n\\nYou have {{data|length}} rooms to check out today. \\n {%if  data|selectattr(\\\"reservation_status\\\",\\\"equalto\\\",\\\"In-house\\\")|list|length >0 %}\\n    There're {{data|selectattr(\\\"reservation_status\\\",\\\"equalto\\\",\\\"In-house\\\")|list|length}} room pending to check out. <br>\\n    Please review your reservation and perform check out or extend stay then click on button Next to continue\\n{%else%}\\n    <br/> Click on \\\"Next\\\" to continue.\\n{%endif%}\\n\\n\\n\\n</div>\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>{{d.room_type_alias}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.rooms}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div>\\n    <small class=\\\"text-emty\\\">Today no pending reservations to check out.</small>\\n</div>\\n{%endif%}\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 4 - Today Reservation\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"4\\\" %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        is_active_reservation\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and\\n        reservation_date = '{1}' \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n\\n<div class=\\\"primary_message\\\">\\n<h2>Today Reservation</h2>\\nToday, you have created {{data|count}} reservation(s)(\\n{{data|selectattr('reservation_status','equalto','Reserved')|list|length}} Reserved, \\n{{data|selectattr('reservation_status','equalto','Confirmed')|list|length}} Confirmed, \\n{{data|selectattr('reservation_status','equalto','In-house')|list|length}} In-house, \\n{{data|selectattr('reservation_status','equalto','Checked Out')|list|length}} Checked Out, \\n{{data|selectattr('reservation_status','equalto','No Show')|list|length}} No-Show, \\n{{data|selectattr('reservation_status','equalto','Cancelled')|list|length}} Cancelled, \\n{{data|selectattr('reservation_status','equalto','Void')|list|length}} Void\\n)\\n<br>Click on the \\\"Next\\\" button to continue.\\n</div>\\n\\n<table class='report-list occupied-001' style='width:100%;margin-bottom:20px;'>\\n    <tr>\\n        <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" ><strong>Today Reservation</strong></th>\\n    </tr>\\n {% if (data|length) >0 %}\\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     {% else %}\\n</table>\\n\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">Today no Reservation was created</small>\\n</div>\\n{%endif%}\\n{%endif%}\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"4\\\" %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        is_active_reservation\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and\\n        cancelled_date = '{1}' and\\n        reservation_status in ('Cancelled','No Show','Void')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n\\n<table class='report-list occupied-001' style='width:100%;margin-bottom:20px;'>\\n    <tr>\\n        <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" ><strong>Today No-show/Cancelled/Void</strong></th>\\n    </tr>\\n {% if (data|length) >0 %}\\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for reservation_status in data | map(attribute='reservation_status') | unique %}\\n            <tr>\\n                <td><strong>{{reservation_status}}</strong></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>\\n            </tr>\\n            {% for d in data | selectattr('reservation_status','equalto',reservation_status) | list %}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n        {% endfor %}\\n     {% else %}\\n</table>\\n\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data</small>\\n</div>\\n{%endif%}\\n{%endif%}\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"4\\\" %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        is_active_reservation\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and\\n        arrival_date = '{1}' and\\n        reservation_status in ('Cancelled', 'Void')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n\\n<table class='report-list occupied-001' style='width:100%;margin-bottom:20px;'>\\n    <tr>\\n        <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" ><strong>Cancelled/Void</strong></th>\\n    </tr>\\n {% if (data|length) >0 %}\\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for reservation_status in data | map(attribute='reservation_status') | unique%}\\n            <tr>\\n                <td><strong>{{reservation_status}}</strong></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n            </tr>\\n            {% for d in data | selectattr('reservation_status','equalto',reservation_status) | list %}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n        {%endfor%}\\n        \\n     {% else %}\\n</table>\\n\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data</small>\\n</div>\\n{%endif%}\\n{%endif%}\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"4\\\" %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        is_active_reservation\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and\\n        reservation_status = 'No Show' and \\n        arrival_date <= '{1}' and\\n        departure_date > '{1}' and\\n        is_reserved_room = 1\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n\\n<table class='report-list occupied-001' style='width:100%;margin-bottom:20px;'>\\n    <tr>\\n        <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" ><strong>No-Show(Reserved Room)</strong></th>\\n    </tr>\\n {% if (data|length) >0 %}\\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n        \\n        {%for arrival_date in data | map(attribute = 'arrival_date') | unique %}\\n\\n            <tr>\\n                <td><strong>{{frappe.format(arrival_date,{'fieldtype':'Date'})}}</strong></td>\\n                <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>\\n            </tr>\\n            {% for d in data | selectattr('arrival_date','equalto',arrival_date) | list%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {% endfor %}\\n        {%endfor%}\\n     {% else %}\\n</table>\\n\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data</small>\\n</div>\\n{%endif%}\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 5 - Today Posting Folio Transaction\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"6\\\" %}\\n{%\\n    set sql = \\\"\\n            select \\n                name,\\n                reservation_stay,\\n                business_source,\\n                transaction_type,\\n                reservation,\\n                posting_date,\\n                room_number,\\n                room_type,\\n                room_type_alias,\\n                parent_reference,\\n                type,\\n                payment_by,\\n                payment_by_phone_number,\\n                guest,\\n                guest_name,\\n                account_code,\\n                report_description as  account_name,\\n                report_quantity as quantity,\\n                input_amount,\\n                price,\\n                amount,\\n                discount_amount,\\n                transaction_number,\\n                total_tax,\\n                total_amount,\\n                bank_fee_amount,\\n                ifnull(note,'') as note,\\n                creation,\\n                owner,\\n                modified,\\n                modified_by\\n            from `tabFolio Transaction` \\n            where\\n                posting_date = '{0}'and\\n                property = '{1}' and \\n                ifnull(parent_reference,'') = '' \\n    \\\".format(\\n        frappe.form_dict.get('date'),\\n        doc.name\\n    )\\n\\n%}\\n{%\\n    set data = frappe.db.sql(sql, as_dict=1)\\n%}\\n\\n\\n \\n {% if (data|length) > 0 %}\\n <div class=\\\"primary_message\\\">\\n <h2>Today Posting Transaction</h2>\\n Today, there are {{data|length}} folio transactions posted to the system.<br>\\n Kindly review the Account Code and Rate. If the details are accurate, please mark the checkbox to confirm folio posting, then proceed by clicking \\\"Next\\\" to continue.\\n </div>\\n\\n <div style=\\\"width:100%;overflow:auto;\\\">\\n      <h4>{{_(\\\"Reservation Folio\\\")}}</h4>\\n    <table class='report-list occupied-001' style='width:100%;margin-bottom:15px;'>\\n        <tr>\\n            <th class=\\\"text-left\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Folio #</th>\\n            <th class=\\\"text-center\\\">Folio Tran. #</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th>Account</th>\\n            <th class=\\\"text-center\\\">QTY</th> \\n            <th class=\\\"text-end\\\">Amount/Rate</th>\\n            <th class=\\\"text-end\\\">Discount</th>\\n            <th class=\\\"text-center\\\">Tax</th>\\n            <th class=\\\"text-center\\\">Bank Fee</th>\\n            <th class=\\\"text-center\\\">Total Amount</th>\\n            <th>By</th>\\n            <th class=\\\"text-start note-width-iframe\\\">Note</th>\\n        </tr>\\n  \\n      \\n    {% for d in data | selectattr('transaction_type','equalto','Reservation Folio') | list %}\\n    <tr>\\n        <td class=\\\"text-left\\\">{{ loop.index }}</td>\\n        <td class=\\\"text-center\\\">{% if d.reservation %}<a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>{% else %}N/A{% endif %}</td>\\n        <td class=\\\"text-center\\\">{% if d.reservation_stay%}<a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay}}</a>{% else %}N/A{% endif %}</td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_{{d.transaction_type|replace(' ','_')|lower }}_detail|{{d.transaction_number}}', '*')\\\">{{d.transaction_number}}</a></td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_folio_transaction_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n        <td>  {{d.room_type_alias or ''}} {{ '/' if d.room_type_alias else '' }} {{d.room_number or ''}}  </td>\\n        <td>{% if d.guest_name %}<a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a>{% else %}N/A{% endif %}</td>\\n        <td>{{'N/A' if not d.business_source else d.business_source}}</td>\\n        <td>{% if d.account_code or d.account_name %}{{d.account_code}} - {{d.account_name}}{% else %}N/A{% endif %}</td>\\n        <td class=\\\"text-end\\\">{{d.quantity if d.quantity> 0 else \\\"\\\" }}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.price,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.discount_amount,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.bank_fee,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.total_amount,{'fieldtype':'Currency'})}}</td>\\n        <td>{{d.owner.split(\\\"@\\\")[0]}}</td>\\n        <td style=\\\"note-width\\\">{{d.note}}</td>  \\n            </tr>\\n      {% endfor %}\\n    </table>\\n\\n        \\n {% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2 mb-15\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">There're no folio transaction posting for today</small>\\n</div>\\n</div>\\n{%endif%}    \\n{%endif%}   \\n\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"6\\\" %}\\n{%\\n    set sql = \\\"\\n            select \\n                name,\\n                reservation_stay,\\n                business_source,\\n                transaction_type,\\n                reservation,\\n                posting_date,\\n                room_number,\\n                room_type,\\n                room_type_alias,\\n                parent_reference,\\n                type,\\n                payment_by,\\n                payment_by_phone_number,\\n                guest,\\n                guest_name,\\n                account_code,\\n                report_description as  account_name,\\n                report_quantity as quantity,\\n                input_amount,\\n                price,\\n                amount,\\n                discount_amount,\\n                transaction_number,\\n                total_tax,\\n                total_amount,\\n                bank_fee_amount,\\n                ifnull(note,'') as note,\\n                creation,\\n                owner,\\n                modified,\\n                modified_by\\n            from `tabFolio Transaction` \\n            where\\n                transaction_type = 'City Ledger' and\\n                posting_date = '{0}'and\\n                property = '{1}' and \\n                ifnull(parent_reference,'') = '' \\n    \\\".format(\\n        frappe.form_dict.get('date'),\\n        doc.name\\n    )\\n\\n%}\\n{%\\n    set data = frappe.db.sql(sql, as_dict=1)\\n%}\\n\\n\\n <h4>{{_(\\\"City Ledger\\\")}}</h4>\\n {% if (data|length) > 0 %}\\n \\n <div style=\\\"width:100%;overflow:auto;\\\">\\n     \\n    <table class='report-list occupied-001' style='width:100%;margin-bottom:15px;'>\\n        <tr>\\n            <th class=\\\"text-left\\\">No.</th>\\n            <th class=\\\"text-center\\\">Folio #</th>\\n            <th class=\\\"text-center\\\">Folio Tran. #</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th>Account</th>\\n            <th>Payment By</th>\\n            <th>Phone Number</th>\\n            <th class=\\\"text-center\\\">QTY</th> \\n            <th class=\\\"text-end\\\">Amount/Rate</th>\\n            <th class=\\\"text-end\\\">Discount</th>\\n            <th class=\\\"text-center\\\">Tax</th>\\n            <th class=\\\"text-center\\\">Bank Fee</th>\\n            <th class=\\\"text-center\\\">Total Amount</th>\\n            <th>By</th>\\n            <th class=\\\"text-start note-width-iframe\\\">Note</th>\\n        </tr>\\n  \\n    {% for d in data %}\\n    <tr>\\n        <td class=\\\"text-left\\\">{{ loop.index }}</td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_{{d.transaction_type|replace(' ','_')|lower }}_detail|{{d.transaction_number}}', '*')\\\">{{d.transaction_number}}</a></td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_folio_transaction_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n        <td>  {{d.room_type_alias or ''}} {{ '/' if d.room_type_alias else '' }} {{d.room_number or ''}}  </td>\\n        <td>{% if d.guest_name %}<a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a>{% else %}{% endif %}</td>\\n        <td>{{'' if not d.business_source else d.business_source}}</td>\\n        <td>{% if d.account_code or d.account_name %}{{d.account_code}} - {{d.account_name}}{% else %}N/A{% endif %}</td>\\n        <td>{{d.payment_by or ''}}</td>\\n        <td>{{d.payment_by_phone_number or ''}}</td>\\n        <td class=\\\"text-end\\\">{{d.quantity if d.quantity> 0 else \\\"\\\" }}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.price,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.discount_amount,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.bank_fee,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.total_amount,{'fieldtype':'Currency'})}}</td>\\n        <td>{{d.owner.split(\\\"@\\\")[0]}}</td>\\n        <td style=\\\"note-width\\\">{{d.note}}</td>  \\n            </tr>\\n      {% endfor %}\\n    </table>\\n</div>\\n {% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2 mb-15\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">There're no folio transaction posting for today</small>\\n</div>\\n{%endif%}     \\n{%endif%}\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"6\\\" %}\\n{%\\n    set sql = \\\"\\n            select \\n                name,\\n                reservation_stay,\\n                business_source,\\n                transaction_type,\\n                reservation,\\n                posting_date,\\n                room_number,\\n                room_type,\\n                room_type_alias,\\n                parent_reference,\\n                type,\\n                payment_by,\\n                payment_by_phone_number,\\n                guest,\\n                guest_name,\\n                account_code,\\n                report_description as  account_name,\\n                report_quantity as quantity,\\n                input_amount,\\n                price,\\n                amount,\\n                discount_amount,\\n                transaction_number,\\n                total_tax,\\n                total_amount,\\n                bank_fee_amount,\\n                ifnull(note,'') as note,\\n                creation,\\n                owner,\\n                modified,\\n                modified_by\\n            from `tabFolio Transaction` \\n            where\\n                transaction_type = 'Deposit Ledger' and\\n                posting_date = '{0}'and\\n                property = '{1}' and \\n                ifnull(parent_reference,'') = '' \\n    \\\".format(\\n        frappe.form_dict.get('date'),\\n        doc.name\\n    )\\n\\n%}\\n{%\\n    set data = frappe.db.sql(sql, as_dict=1)\\n%}\\n\\n\\n <h4>{{_(\\\"Deposit Ledger\\\")}}</h4>\\n {% if (data|length) > 0 %}\\n <div style=\\\"width:100%;overflow:auto;\\\">\\n     \\n    <table class='report-list occupied-001' style='width:100%;margin-bottom:15px;'>\\n        <tr>\\n            <th class=\\\"text-left\\\">No.</th>\\n            <th class=\\\"text-center\\\">Folio #</th>\\n            <th class=\\\"text-center\\\">Folio Tran. #</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th>Account</th>\\n            <th>Payment By</th>\\n            <th>Phone Number</th>\\n            <th class=\\\"text-center\\\">QTY</th> \\n            <th class=\\\"text-end\\\">Amount/Rate</th>\\n            <th class=\\\"text-end\\\">Discount</th>\\n            <th class=\\\"text-center\\\">Tax</th>\\n            <th class=\\\"text-center\\\">Bank Fee</th>\\n            <th class=\\\"text-center\\\">Total Amount</th>\\n            <th>By</th>\\n            <th class=\\\"text-start note-width-iframe\\\">Note</th>\\n        </tr>\\n  \\n    {% for d in data %}\\n    <tr>\\n        <td class=\\\"text-left\\\">{{ loop.index }}</td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_{{d.transaction_type|replace(' ','_')|lower }}_detail|{{d.transaction_number}}', '*')\\\">{{d.transaction_number}}</a></td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_folio_transaction_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n        <td>  {{d.room_type_alias or ''}} {{ '/' if d.room_type_alias else '' }} {{d.room_number or ''}}  </td>\\n        <td>{% if d.guest_name %}<a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a>{% else %}{% endif %}</td>\\n        <td>{{'' if not d.business_source else d.business_source}}</td>\\n        <td>{% if d.account_code or d.account_name %}{{d.account_code}} - {{d.account_name}}{% else %}{% endif %}</td>\\n        <td>{{d.payment_by or ''}}</td>\\n        <td>{{d.payment_by_phone_number or ''}}</td>\\n        <td class=\\\"text-end\\\">{{d.quantity if d.quantity> 0 else \\\"\\\" }}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.price,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.discount_amount,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.bank_fee,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.total_amount,{'fieldtype':'Currency'})}}</td>\\n        <td>{{d.owner.split(\\\"@\\\")[0]}}</td>\\n        <td style=\\\"note-width\\\">{{d.note}}</td>  \\n            </tr>\\n      {% endfor %}\\n    </table>\\n</div>\\n {% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2 mb-15\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">There're no folio transaction posting for today</small>\\n</div>\\n{%endif%}     \\n{%endif%}\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"6\\\" %}\\n{%\\n    set sql = \\\"\\n            select \\n                name,\\n                reservation_stay,\\n                business_source,\\n                transaction_type,\\n                reservation,\\n                posting_date,\\n                room_number,\\n                room_type,\\n                room_type_alias,\\n                parent_reference,\\n                type,\\n                payment_by,\\n                payment_by_phone_number,\\n                guest,\\n                guest_name,\\n                account_code,\\n                report_description as  account_name,\\n                report_quantity as quantity,\\n                input_amount,\\n                price,\\n                amount,\\n                discount_amount,\\n                transaction_number,\\n                total_tax,\\n                total_amount,\\n                bank_fee_amount,\\n                ifnull(note,'') as note,\\n                creation,\\n                owner,\\n                modified,\\n                modified_by\\n            from `tabFolio Transaction` \\n            where\\n                transaction_type = 'Desk Folio' and\\n                posting_date = '{0}'and\\n                property = '{1}' and \\n                ifnull(parent_reference,'') = '' \\n    \\\".format(\\n        frappe.form_dict.get('date'),\\n        doc.name\\n    )\\n\\n%}\\n{%\\n    set data = frappe.db.sql(sql, as_dict=1)\\n%}\\n\\n\\n <h4>{{_(\\\"Desk Folio\\\")}}</h4>\\n {% if (data|length) > 0 %}\\n <div style=\\\"width:100%;overflow:auto;\\\">\\n     \\n    <table class='report-list occupied-001' style='width:100%;margin-bottom:15px;'>\\n        <tr>\\n            <th class=\\\"text-left\\\">No.</th>\\n            <th class=\\\"text-center\\\">Folio #</th>\\n            <th class=\\\"text-center\\\">Folio Tran. #</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th>Account</th>\\n            <th>Payment By</th>\\n            <th>Phone Number</th>\\n            <th class=\\\"text-center\\\">QTY</th> \\n            <th class=\\\"text-end\\\">Amount/Rate</th>\\n            <th class=\\\"text-end\\\">Discount</th>\\n            <th class=\\\"text-center\\\">Tax</th>\\n            <th class=\\\"text-center\\\">Bank Fee</th>\\n            <th class=\\\"text-center\\\">Total Amount</th>\\n            <th>By</th>\\n            <th class=\\\"text-start note-width-iframe\\\">Note</th>\\n        </tr>\\n\\n    {% for d in data %}\\n    <tr>\\n        <td class=\\\"text-left\\\">{{ loop.index }}</td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_{{d.transaction_type|replace(' ','_')|lower }}_detail|{{d.transaction_number}}', '*')\\\">{{d.transaction_number}}</a></td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_folio_transaction_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n        <td>  {{d.room_type_alias or ''}} {{ '/' if d.room_type_alias else '' }} {{d.room_number or ''}}  </td>\\n        <td>{% if d.guest_name %}<a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a>{% else %}{% endif %}</td>\\n        <td>{{'' if not d.business_source else d.business_source}}</td>\\n        <td>{% if d.account_code or d.account_name %}{{d.account_code}} - {{d.account_name}}{% else %}{% endif %}</td>\\n        <td>{{d.payment_by or ''}}</td>\\n        <td>{{d.payment_by_phone_number or ''}}</td>\\n        <td class=\\\"text-end\\\">{{d.quantity if d.quantity> 0 else \\\"\\\" }}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.price,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.discount_amount,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.bank_fee,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.total_amount,{'fieldtype':'Currency'})}}</td>\\n        <td>{{d.owner.split(\\\"@\\\")[0]}}</td>\\n        <td style=\\\"note-width\\\">{{d.note}}</td>  \\n            </tr>\\n      {% endfor %}\\n    </table>\\n</div>\\n {% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2 mb-15\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">There're no folio transaction posting for today</small>\\n</div>\\n{%endif%}     \\n{%endif%}\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"6\\\" %}\\n{%\\n    set sql = \\\"\\n            select \\n                name,\\n                reservation_stay,\\n                business_source,\\n                transaction_type,\\n                reservation,\\n                posting_date,\\n                room_number,\\n                room_type,\\n                room_type_alias,\\n                parent_reference,\\n                type,\\n                payment_by,\\n                payment_by_phone_number,\\n                guest,\\n                guest_name,\\n                account_code,\\n                report_description as  account_name,\\n                report_quantity as quantity,\\n                input_amount,\\n                price,\\n                amount,\\n                discount_amount,\\n                transaction_number,\\n                total_tax,\\n                total_amount,\\n                bank_fee_amount,\\n                ifnull(note,'') as note,\\n                creation,\\n                owner,\\n                modified,\\n                modified_by\\n            from `tabFolio Transaction` \\n            where\\n                transaction_type = 'Payable Ledger' and\\n                posting_date = '{0}'and\\n                property = '{1}' and \\n                ifnull(parent_reference,'') = '' \\n    \\\".format(\\n        frappe.form_dict.get('date'),\\n        doc.name\\n    )\\n\\n%}\\n{%\\n    set data = frappe.db.sql(sql, as_dict=1)\\n%}\\n\\n\\n <h4>{{_(\\\"Payable Ledger\\\")}}</h4>\\n    {% if (data|length) > 0 %}\\n <div style=\\\"width:100%;overflow:auto;\\\">\\n     \\n    <table class='report-list occupied-001' style='width:100%'>\\n        <tr>\\n            <th class=\\\"text-left\\\">No.</th>\\n            <th class=\\\"text-center\\\">Folio #</th>\\n            <th class=\\\"text-center\\\">Folio Tran. #</th>\\n            <th>Room(s)</th>\\n            <th>Vendor</th>\\n            <th>Account</th>\\n            <th>Payment By</th>\\n            <th>Phone Number</th>\\n            <th class=\\\"text-center\\\">QTY</th> \\n            <th class=\\\"text-end\\\">Amount/Rate</th>\\n            <th class=\\\"text-end\\\">Discount</th>\\n            <th class=\\\"text-center\\\">Tax</th>\\n            <th class=\\\"text-center\\\">Bank Fee</th>\\n            <th class=\\\"text-center\\\">Total Amount</th>\\n            <th>By</th>\\n            <th class=\\\"text-start note-width-iframe\\\">Note</th>\\n        </tr>\\n \\n    {% for d in data %}\\n    {% set vendor = frappe.get_doc(\\\"Payable Ledger\\\",d.transaction_number)%}\\n    <tr>\\n        <td class=\\\"text-left\\\">{{ loop.index }}</td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_{{d.transaction_type|replace(' ','_')|lower }}_detail|{{d.transaction_number}}', '*')\\\">{{d.transaction_number}}</a></td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_folio_transaction_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n        <td>  {{d.room_type_alias or ''}} {{ '/' if d.room_type_alias else '' }} {{d.room_number or ''}}  </td>\\n        <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_vendor_detail|{{vendor.vendor}}', '*')\\\">{{vendor.vendor_name}}</a></td>\\n        <td>{% if d.account_code or d.account_name %}{{d.account_code}} - {{d.account_name}}{% else %}N/A{% endif %}</td>\\n        <td>{{d.payment_by or ''}}</td>\\n        <td>{{d.payment_by_phone_number or ''}}</td>\\n        <td class=\\\"text-end\\\">{{d.quantity if d.quantity> 0 else \\\"\\\" }}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.price,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.discount_amount,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.bank_fee,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(d.total_amount,{'fieldtype':'Currency'})}}</td>\\n        <td>{{d.owner.split(\\\"@\\\")[0]}}</td>\\n        <td style=\\\"note-width\\\">{{d.note}}</td>  \\n            </tr>\\n      {% endfor %}\\n   \\n    </table>\\n</div>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">There're no folio transaction posting for today</small>\\n</div>\\n{%endif%} \\n        \\n \\n {%set summary_data = frappe.db.sql(\\\"\\n            select \\n                account_category,\\n                account_category_sort_order, \\n                sum(amount * if(type='Debit',1,-1)) as amount \\n            from `tabFolio Transaction` \\n            where \\n                posting_date = '{0}' and \\n                property = '{1}'  \\n            group by \\n                account_category \\n            order by \\n                account_category_sort_order\\n        \\\".format(\\n            frappe.form_dict.get(\\\"date\\\"),\\n            doc.name    \\n        ),as_dict=1)%}\\n <br>\\n    <table class=\\\"table-print-format\\\">\\n        <tr>\\n            <th colspan=\\\"2\\\">   \\n                <h3>Summary</h3>\\n            </th>\\n        </tr>\\n        <tbody>\\n            {%for d in summary_data %}\\n            <tr>\\n               <td width=\\\"350px\\\">{{ d.account_category }}</td>\\n               <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n            </tr>\\n            {%endfor%}\\n        </tbody>\\n      \\n    </table>\\n\\n{%endif%}\\n\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 6 - Room Charge Posting\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"5\\\" %}\\n \\n {%\\n    set sql = \\\"\\n        select \\n            name,\\n            business_source,\\n            reservation,\\n            reservation_stay,\\n            input_rate, \\n            rate, \\n            total_tax, \\n            total_rate, \\n            room_number, \\n            room_type,\\n            room_type_alias,\\n            discount,\\n            rate_type,\\n            guest,\\n            guest_name,\\n            is_manual_rate\\n        \\n    from `tabReservation Room Rate`\\n    where\\n        date = date_add('{0}',interval 1 day) and \\n        property = '{1}' and \\n        is_arrival = 0 and\\n        is_active_reservation=1\\n    \\\".format(\\n        frappe.form_dict.get('date'),\\n       doc.name\\n    )\\n%}\\n{%\\n    set data = frappe.db.sql(sql, as_dict=1)\\n    \\n %}\\n \\n <div class=\\\"primary_message\\\">\\n <h2>Posting Room Charge</h2>\\n Your have {{data|length}} stay-over guests, Room changes will be automatically posted to the master folio after the system date changes.<br>\\n Please make sure the room rate is correct, then click on the \\\"Next\\\" button to continue.\\n </div>\\n \\n     {% if (data|length)>0 %}\\n      \\n      <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n              <th>Room(s)</th>\\n            <th>Rate Type</th>\\n          \\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-center\\\">Use Rate Plan</th>\\n            <th class=\\\"text-end\\\">Rate</th>\\n            <th class=\\\"text-end\\\">Discount</th>\\n            <th class=\\\"text-end\\\">Tax</th>\\n            <th class=\\\"text-end\\\">Total Rate</th>\\n            \\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay}}</a></td>\\n\\n                <td>\\n                    {{d.room_type_alias}} / {{d.room_number}}\\n                </td>\\n                <td>{{d.rate_type}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-center\\\">{{\\\"Yes\\\" if d.is_manual_rate == 0 else \\\"No\\\"}}</td>\\n                <td class=\\\"text-end\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_edit_room_rate|{{d.name}}', '*')\\\">{{frappe.format(d.rate,{'fieldtype':'Currency'})}}</a></td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.discount,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_rate,{'fieldtype':'Currency'})}}</td>\\n                \\n            </tr>\\n        {%endfor%}\\n        <tr>\\n            <th colspan=\\\"8\\\" class=\\\"text-start\\\">Total : {{data|length}}</th>\\n            <th class=\\\"text-end\\\">{{frappe.format((data| map(attribute='rate') | sum),{'fieldtype':'Currency'})}}</th>\\n            <th class=\\\"text-end\\\">{{frappe.format((data| map(attribute='discount') | sum),{'fieldtype':'Currency'})}}</th>\\n            <th class=\\\"text-end\\\">{{frappe.format((data| map(attribute='total_tax') | sum),{'fieldtype':'Currency'})}}</th>\\n            <th class=\\\"text-end\\\">{{frappe.format((data| map(attribute='total_rate') | sum),{'fieldtype':'Currency'})}}</th>\\n        </tr>\\n</table>\\n\\n      \\n     {% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">You don't have pending reservation to check out</small>\\n</div>\\n     {%endif%}\\n     \\n \\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 7 - Today Shift\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"7\\\" %}\\n{%set sql = \\\"select \\n                * \\n            from `tabCashier Shift` \\n            where \\n                posting_date = '{0}' and\\n                business_branch = '{1}'   \\n        \\n            \\\".format(\\n                frappe.form_dict.get(\\\"date\\\"),\\n                doc.name\\n            )\\n%}\\n{%\\n    set data = frappe.db.sql(sql,as_dict=1)\\n%}\\n<div class=\\\"primary_message\\\">\\n <h2>Today Shift</h2>\\n {%if data|selectattr(\\\"is_closed\\\",\\\"equalto\\\",0)|list|length > 0 %}\\n    You currently have {{data|selectattr(\\\"is_closed\\\",\\\"equalto\\\",0)|list|length}} open shifts. Kindly close all open shifts and proceed by clicking the \\\"Next\\\" button.\\n{%else%}\\n    All shifts are closed. Please click on the \\\"Next\\\" button to proceed.\\n {%endif%}\\n</div>\\n<table class='report-list occupied-001' style='width:100%'>\\n     <tr>\\n         <th class=\\\"text-center\\\">No</th>\\n         <th class=\\\"text-center\\\">Shift #</th>\\n         <th class=\\\"text-center\\\">Open Date</th>\\n         <th>Open By</th>\\n         <th class=\\\"text-end\\\">Opening Amount</th>\\n         <th class=\\\"text-end\\\">Close Amount</th>\\n\\n         <th class=\\\"text-center\\\">Close Date</th>\\n          <th>Close By</th>\\n         <th class=\\\"text-center\\\">Shift Type</th>\\n         <th class=\\\"text-center\\\">Status</th>\\n     </tr>\\n     {%for d in data %}\\n        <tr>\\n         <td class=\\\"text-center\\\">{{loop.index}}</td>\\n         \\n         <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_cashier_shift_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n         <td class=\\\"text-center\\\">{{frappe.format_value(d.creation,\\\"Datetime\\\")}}</td>\\n         <td>{{d.owner.split(\\\"@\\\")[0]}}</td>\\n         <td class=\\\"text-end\\\">{{frappe.format_value(d.total_opening_amount,\\\"Currency\\\")}}</td>\\n         <td class=\\\"text-end\\\">{{frappe.format_value(d.total_close_amount,\\\"Currency\\\")}}</td>\\n         \\n         <td class=\\\"text-center\\\">{{frappe.format_value(d.closed_date,\\\"Datetime\\\") if d.is_closed ==\\\"1\\\" else \\\"\\\"}}</td>\\n            <td>{{ d.closed_by if d.is_closed ==\\\"1\\\" else \\\"\\\" }}</td>\\n         <td class=\\\"text-center\\\"> {{ \\\"eDoor Shift\\\" if d.is_edoor_shift ==1 else \\\"ePOS Shift\\\" }}</td>\\n         <td class=\\\"text-center\\\">{% if d.is_closed == 1 %}<span class=\\\"rounded-pill px-2\\\" style=\\\"background:#ececec\\\">Closed</span>{% else %}<span class=\\\"rounded-pill px-2\\\" style=\\\"background:#e6f4ea;color:#137333;\\\">Open</span>{% endif %}</td>\\n       \\n         \\n     </tr>\\n     {%endfor%}\\n </table>\\n \\n \\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 8 - Finish\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"8\\\" %}\\n{% set data = frappe.call(\\\"edoor.api.frontdesk.get_dashboard_data\\\",property=doc.name,date=frappe.form_dict.get('date')) %}\\n<div class=\\\"primary_message\\\">\\n<!--<h2>Summary</h2>-->\\nKindly review the information below. Once you have confirmed that everything is accurate, click the \\\"Finish\\\" button to initiate the Night Audit.<br/>\\nThe upcoming day is scheduled for {{frappe.format(frappe.utils.add_to_date(data.working_date, days=1), {'fieldtype':'Date'})}}\\n</div> \\n<br/>\\n<div class=\\\"row\\\">\\n    <div class=\\\"col\\\">\\n        <h3>Summary</h3>\\n        <table class=\\\"table table-bordered report-list\\\">  \\n            <thead>\\n                <tr>\\n                   <th width=\\\"250px\\\">Summary</th>\\n                   <th class=\\\"text-right\\\">Value</th>\\n                </tr>\\n            </thead>\\n            <tbody>\\n                <tr>\\n                   <td width=\\\"250px\\\" style=\\\"font-weight:400 !important\\\">Arrival</td>\\n                   <td class=\\\"text-right\\\" style=\\\"font-weight:400 !important\\\">{{data.arrival|int}}</td>\\n                </tr>\\n                <tr>\\n                   <td>Departure</td>\\n                   <td class=\\\"text-right\\\">{{data.departure|int}}</td>\\n                </tr>  \\n                <tr>\\n                   <td>FIT Arrival</td>\\n                   <td class=\\\"text-right\\\"><span>Total Reservation {{data.fit_reservation_arrival|int}}</span> & <span>Total Stay {{data.fit_stay_arrival|int}}</span></td>\\n                </tr>\\n                <tr>\\n                   <td>GIT Arrival</td>\\n                   <td class=\\\"text-right\\\"><span>Total Reservation {{data.git_reservation_arrival|int}}</span> & <span>Total Stay {{data.git_stay_arrival|int}}</span></td>\\n                </tr>\\n                <tr>\\n                   <td>Stay Over</td>\\n                   <td class=\\\"text-right\\\">{{data.stay_over|int}}</td>\\n                </tr> \\n                <tr>\\n                   <td>No Show</td>\\n                   <td class=\\\"text-right\\\"><span>Today No-show {{data.today_no_show|int}}</span> & <span>No-show(Reserved Room) {{data.total_no_show|int}}</span></td>\\n                </tr>\\n                <tr>\\n                   <td>Cancel</td>\\n                   <td class=\\\"text-right\\\"><span>Today Cancelled {{data.today_cancelled|int}}</span> & <span>Cancelled {{data.total_cancelled|int}}</span></td>\\n                </tr>\\n                <tr>\\n                   <td>Void</td>\\n                   <td class=\\\"text-right\\\"><span>Today Void {{data.today_void|int}}</span> & <span>Void {{data.total_void|int}}</span></td>\\n                </tr> \\n                <tr>\\n                   <td>Pick-up</td>\\n                   <td class=\\\"text-right\\\">{{data.pick_up|int}}</td>\\n                </tr>\\n                <tr>\\n                   <td>Drop Off</td>\\n                   <td class=\\\"text-right\\\">{{data.drop_off|int}}</td>\\n                </tr>\\n                <tr>\\n                   <td>Daily Reservation</td>\\n                   <td class=\\\"text-right\\\">{{data.daily_reservation|int}}</td>\\n                </tr>\\n                <tr>\\n                   <td>Total Room Occupy</td>\\n                   <td class=\\\"text-right\\\">{{data.total_room_occupy|int}}</td>\\n                </tr>\\n                <tr>\\n                   <td>Total Room Vacant</td>\\n                   <td class=\\\"text-right\\\">{{data.total_room_vacant|int}}</td>\\n                </tr>\\n                <tr>\\n                   <td>Total Room Block</td>\\n                   <td class=\\\"text-right\\\">{{data.total_room_block|int}}</td>\\n                </tr> \\n            </tbody>\\n        </table> \\n    </div>\\n    <div class=\\\"col\\\">\\n        {%set summary_data = frappe.db.sql(\\\"\\\"\\\"\\n            select \\n                transaction_type,\\n                account_category,\\n                account_category_sort_order,\\n                sum(report_quantity) as quantity, \\n                sum(amount * if(type='Debit',1,-1)) as amount \\n            from `tabFolio Transaction` \\n            where \\n                working_date = '{}' \\n            group by \\n                transaction_type,\\n                account_category \\n            order by account_category_sort_order\\n            \\\"\\\"\\\".format(\\n                frappe.form_dict.get(\\\"date\\\")\\n            ),as_dict=1)%}\\n        \\n        {%set ledger= ['Reservation Folio','Deposit Ledger','City Ledger','Desk Folio', 'Payable Ledger']%}\\n        \\n        {%for l in ledger%}\\n        {%if  (summary_data|selectattr('transaction_type','==',l)|sum(attribute='amount'))!=0  %}\\n            <h3>{{'Guest Ledger' if l=='Reservation Folio' else l}}</h3>\\n            <table class=\\\"table table-bordered report-list\\\">\\n                <thead>\\n                <tr>\\n                    <th>{{_('Summary')}} </th>    \\n                    <th class='text-center'>QTY</th>    \\n                    <th class='text-end'>Amount</th>    \\n                    \\n                </tr>\\n                \\n                    \\n                </thead>\\n                <tbody>\\n                    {%for d in summary_data|selectattr('transaction_type','==',l) %}\\n                    <tr>\\n                        <td style=\\\"font-weight:400 !important\\\">{{ d.account_category }}</td>\\n                        <td style=\\\"font-weight:400 !important\\\" class='text-center' style=\\\"width:100px\\\">{{ frappe.format(d.quantity,'Float') }}</td>\\n                        <td style=\\\"font-weight:400 !important\\\" class=\\\"text-end\\\" style=\\\"width:150px\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n                    </tr>\\n                    {%endfor%}\\n                </tbody>\\n                <tfoot>\\n                    <tr>\\n                        <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n                        <td class=\\\"text-end\\\"><strong>{{frappe.format_value(summary_data|selectattr('transaction_type','==',l)|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n                        \\n                    </tr>\\n                </tfoot>\\n               \\n            </table>\\n         {%endif%}    \\n         <!--end if check if ledger have transaction-->\\n         {%endfor%} \\n    </div>\\n</div> \\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 9 -  Thank You\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"9\\\" %}\\n <h1>Congratulation!</h1>\\n <p>You have successfully completed the Run Night Audit process.</p> \\n <p>The system date has been changed to 20-07-2023 (Static).</p> \\n <p>Please print report below to your supervisor.</p>\\n <hr/>\\n \\n the report list \\n \\n <ul>\\n     <li>Report 1</li>\\n     <li>Report 2</li>\\n     <li>Report 3</li>\\n     <li>Report 4</li>\\n </ul>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-08 15:55:04.496210",
  "module": "eDoor",
  "name": "eDoor Run Night Audit Step",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_types,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        cancelled_by,\\n        cancelled_note,\\n        cancelled_date,\\n        reference_number,\\n        adult,\\n        child\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        reservation_status = 'Cancelled' and \\n        cancelled_date = '{1}'\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n<div>\\n    <table class='report-list' style='width:100%'>\\n        <tr>\\n            <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" >Today Cancelled</th>\\n        </tr>\\n        {% if (data|length) >0 %}\\n        <tr class=\\\"font-widht-tr-header\\\" >\\n            <td class=\\\"text-center\\\">No.</td>\\n            <td class=\\\"text-center\\\">Reservation #</td>\\n            <td class=\\\"text-center\\\">Stay #</td>\\n            <td>Ref. #</td>\\n            <td class=\\\"text-center\\\">Type</td>\\n            <td class=\\\"text-center\\\">Stay Date</td>\\n            <td class=\\\"text-center\\\">Nights</td>\\n            <td>Room(s)</td>\\n            <td>Guest</td>\\n            <td class=\\\"text-center\\\">Pax(A/C)</td>\\n            {% if can_view_rate==1%}\\n            <td class=\\\"text-end\\\">ADR</td>\\n            <td class=\\\"text-end\\\">Total Room Rate</td>\\n            {%endif%}\\n            <td class=\\\"text-center\\\">Status</td>\\n            <td>Cancelled By</td>\\n            <td>Cancelled Date</td>\\n            <td>Cancelled Note</td>\\n        </tr>\\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>{{d.rooms}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.room_type_alias}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\n                {% if can_view_rate==1%}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                 <td>{{d.cancelled_by}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.cancelled_date,{'fieldtype':'Date'})}}</td>\\n                <td>{{d.cancelled_note}}</td>\\n            </tr>\\n        {%endfor%}\\n        {% else %}\\n    </table>\\n</div>\\n\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\r\\n{%\\r\\nset data = frappe.db.sql(\\\"\\r\\n    select \\r\\n        name,\\r\\n        reservation,\\r\\n        reservation_type,\\r\\n        guest,\\r\\n        guest_name, \\r\\n        business_source, \\r\\n        arrival_date, \\r\\n        departure_date,\\r\\n        reservation_status,\\r\\n        room_types,\\r\\n        room_type_alias,\\r\\n        status_color,\\r\\n        rooms,\\r\\n        room_nights,\\r\\n        adr,\\r\\n        total_room_rate ,\\r\\n        cancelled_by,\\r\\n        cancelled_note,\\r\\n        cancelled_date,\\r\\n        reference_number,\\r\\n        adult,\\r\\n        child\\r\\n    from `tabReservation Stay` \\r\\n    where \\r\\n        property= '{0}' and \\r\\n        reservation_status = 'Cancelled' and \\r\\n        arrival_date = '{1}'\\r\\n    order by\\r\\n        arrival_date asc\\r\\n        \\\".format(\\r\\n            doc.name,\\r\\n            frappe.form_dict.get('date')\\r\\n        ),as_dict=1)\\r\\n%}\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n<div>\\r\\n    <table class='report-list' style='width:100%'>\\r\\n        <tr>\\r\\n            <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" >Cancelled</th>\\r\\n        </tr>\\r\\n        {% if (data|length) >0 %}\\r\\n        <tr class=\\\"font-widht-tr-header\\\" >\\r\\n            <td class=\\\"text-center\\\">No.</td>\\r\\n            <td class=\\\"text-center\\\">Reservation #</td>\\r\\n            <td class=\\\"text-center\\\">Stay #</td>\\r\\n            <td>Ref. #</td>\\r\\n            <td class=\\\"text-center\\\">Type</td>\\r\\n            <td class=\\\"text-center\\\">Stay Date</td>\\r\\n            <td class=\\\"text-center\\\">Nights</td>\\r\\n            <td>Room(s)</td>\\r\\n            <td>Guest</td>\\r\\n            <td class=\\\"text-center\\\">Pax(A/C)</td>\\r\\n            {% if can_view_rate==1%}\\r\\n            <td class=\\\"text-end\\\">ADR</td>\\r\\n            <td class=\\\"text-end\\\">Total Room Rate</td>\\r\\n            {%endif%}\\r\\n            <td class=\\\"text-center\\\">Status</td>\\r\\n            <td>Cancelled By</td>\\r\\n            <td>Cancelled Date</td>\\r\\n            <td>Cancelled Note</td>\\r\\n        </tr>\\r\\n        {%for d in data%}\\r\\n            <tr>\\r\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\r\\n                <td>{{d.reference_number or ''}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.reservation_type or ''}}</td>\\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'}) or ''}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.room_nights or ''}}</td>\\r\\n                <td>{{d.rooms or ''}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.room_type_alias or ''}}</td>\\r\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\r\\n                <td class=\\\"text-center\\\">{{d.adult or ''}}/{{d.child or ''}}</td>\\r\\n                {% if can_view_rate==1%}\\r\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n                {%endif%}\\r\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\r\\n                 <td>{{d.cancelled_by or ''}}</td>\\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.cancelled_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n                <td>{{d.cancelled_note or ''}}</td>\\r\\n            </tr>\\r\\n        {%endfor%}\\r\\n        {% else %}\\r\\n    </table>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n<div class=\\\"isemtyIcon\\\"></div> \\r\\n<small class=\\\"text-emty\\\">No Data </small>\\r\\n</div>\\r\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-05 16:51:46.158505",
  "module": "eDoor",
  "name": "eDoor Cancel Reservation List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        group_code,\\n        group_name,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        ifnull(keyword,'') like '%{2}%' and \\n        reservation_type = 'FIT' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        is_active_reservation = 1 and\\n        reservation_status = if('{5}' = '', reservation_status, '{5}')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-11 17:44:51.388217",
  "module": "eDoor",
  "name": "eDoor FIT Arrival Guest",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".header-name{\n    cursor: pointer;\n    padding: .5rem;\n    font-size: 13px;\n    font-weight: 600 !important;\n    background-color: rgb(226 232 240);\n    color: #343a40;\n}\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Customer",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\r\\n{% \\r\\n    set data = frappe.db.sql(\\\"select\\r\\n        name,\\r\\n        property,\\r\\n        reservation, \\r\\n        reservation_stay,\\r\\n        posting_date,\\r\\n        business_source,\\r\\n        room_types,\\r\\n        room_types_alias,\\r\\n        rooms,\\r\\n        total_credit,\\r\\n        total_debit,\\r\\n        balance,\\r\\n        status,\\r\\n        note\\r\\n    from `tabReservation Folio` \\r\\n    where guest='{0}'\\r\\n    \\\".format(doc.name),as_dict=1)\\r\\n    \\r\\n%}\\r\\n{% if data %}\\r\\n<table class=\\\"report-list w-100 \\\" style=\\\"width:100%\\\">\\r\\n    <tbody>\\r\\n    <tr>\\r\\n        <th class=\\\"text-center\\\">Folio Name</th>\\r\\n        <th class=\\\"text-center\\\">Reservation #</th>\\r\\n        <th class=\\\"text-center\\\">Res #</th>\\r\\n        <th class=\\\"text-center\\\">Posting Date</th>\\r\\n        <th class=\\\"text-center\\\">Business Source</th>\\r\\n        <th class=\\\"text-center\\\">Room</th>\\r\\n        {% if can_view_rate==1%}\\r\\n        <th class=\\\"text-end\\\">Debit (Charge)</th>\\r\\n        <th class=\\\"text-end\\\">Credit (Payment)</th>\\r\\n        <th class=\\\"text-end\\\">Balance</th>\\r\\n        {%endif%}\\r\\n        <th class=\\\"text-center\\\">Status</th>\\r\\n        <th style=\\\"width:25%;\\\" class=\\\"text-start\\\">Note</th>\\r\\n    </tr>\\r\\n     {% for d in data %}\\r\\n        <tr>\\r\\n            <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_folio_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\r\\n            <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\r\\n            <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay}}</a></td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(d.posting_date,{'fieldtype':'Date'})}}</td>\\r\\n            <td class=\\\"\\\">{{d.business_source}}</td>\\r\\n            <td>{{d.rooms}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.room_types_alias}}</td>\\r\\n            {% if can_view_rate==1%}\\r\\n            <td class=\\\"text-end\\\">{{frappe.format(d.total_debit,{'fieldtype':'Currency'})}}</td>\\r\\n            <td class=\\\"text-end\\\">{{frappe.format(d.total_credit,{'fieldtype':'Currency'})}}</td>\\r\\n            \\r\\n            <td class=\\\"text-end\\\">{{frappe.format(d.balance,{'fieldtype':'Currency'})}}</td>\\r\\n            {%endif%}\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {% if d.status == 'Open' %}\\r\\n                    <span class=\\\"rounded-3 py-1 px-2 bg-green-200\\\" style=\\\"background:#a0e6ba;color:#188a42;font-weight: 500!important;\\\">{{d.status}}</span>\\r\\n                {% else %}\\r\\n                    <span class=\\\"rounded-3 py-1 px-2 text-dark\\\" style=\\\"background:#ececec;font-weight: 500!important;\\\">{{d.status}}</span>\\r\\n                {% endif %}\\r\\n            </td>\\r\\n            <td class=\\\"text-start\\\">\\r\\n                {% if note %}\\r\\n                    <span>{{ d.note }} </span>\\r\\n                {%endif%}\\r\\n            </td>\\r\\n           \\r\\n            \\r\\n        </tr>\\r\\n    {% endfor%}\\r\\n    </tbody>\\r\\n</table>\\r\\n{% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-26 15:18:50.691342",
  "module": "eDoor",
  "name": "eDoor Guest Detail Folio List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Group Booking List\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{frappe.form_dict.filter_date_by or ''}} : \\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n                <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n            {% if frappe.form_dict.business_source %}\\r\\n                / {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source}}</strong>\\r\\n            {% endif %}\\r\\n            {% if frappe.form_dict.reservation_status %}\\r\\n                / {{_(\\\"Reservation Status\\\")}} : <strong>{{frappe.form_dict.reservation_status}}</strong>\\r\\n            {% endif %}\\r\\n            {% if frappe.form_dict.room_type %}\\r\\n                / {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type}}</strong>\\r\\n            {% endif %}\\r\\n            {% if frappe.form_dict.guest %}\\r\\n                / {{_(\\\"Guest\\\")}} : <strong>{{frappe.form_dict.guest}}</strong>\\r\\n            {% endif %}\\r\\n            \\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"username\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_status = None if  not frappe.form_dict.get('reservation_status') else frappe.form_dict.get('reservation_status').split(',') %}\\r\\n \\r\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\r\\n        report_name=\\\"Group Booking Report\\\",\\r\\n        filters={\\r\\n            \\\"filter_date_by\\\":frappe.form_dict.get('filter_date_by'),\\r\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\r\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\r\\n            \\\"property\\\":doc.name,\\r\\n            \\\"reservation_status\\\":reservation_status,\\r\\n            \\\"business_source\\\":frappe.form_dict.get('business_source'),\\r\\n            \\\"chart_type\\\":\\\"bar\\\",\\r\\n            \\\"room_type\\\":frappe.form_dict.get('room_type'),\\r\\n            \\\"guest\\\":frappe.form_dict.get('guest'),\\r\\n            \\\"is_active_reservation\\\":frappe.form_dict.get('is_active_reservation'),\\r\\n            \\\"order_by\\\":frappe.form_dict.get('order_by'),\\r\\n            \\\"sort_order\\\":frappe.form_dict.get('sort_order'),\\r\\n        }\\r\\n    )\\r\\n%}\\r\\n<table class='report-list occupied-001' style='width:100%'>\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th>No</th>\\r\\n            {%for c in data.columns%}\\r\\n                {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                <th class=\\\"text-{{c.align}}\\\">{{c.label}}</th>\\r\\n                {%endif%}\\r\\n            {%endfor%}\\r\\n          \\r\\n        </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n            {% for g in data.result | selectattr('is_group','equalto', 1)|list%}\\r\\n                <tr>\\r\\n                    <td></td>\\r\\n                    <td>{{g.reservation}}</td>\\r\\n                </tr>\\r\\n                \\r\\n                {% for d in data.result | selectattr('parent','equalto', g.id) if not \\\"is_total_row\\\" in d %}\\r\\n                    <tr>\\r\\n                        <td>{{loop.index}}</td>\\r\\n                    {%for c in data.columns%}\\r\\n                        {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                        <td class=\\\"text-{{c.align}}\\\">\\r\\n                            {%if \\\"post_message_action\\\" in c%}\\r\\n                \\r\\n                                <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('{{c.post_message_action}}|{{d[c.fieldname]}}', '*')\\\">{{frappe.format(d[c.fieldname or ''])}}</a>\\r\\n                                \\r\\n                            {%else%}\\r\\n                            {% if c.fieldname == 'guest_name' %}\\r\\n                                <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{frappe.format(d[c.fieldname or ''])}}</a>\\r\\n                            {% else %}\\r\\n                            {{frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}\\r\\n                            {% endif %}\\r\\n                                \\r\\n                            {%endif%}\\r\\n                        </td>\\r\\n                        {%endif%}\\r\\n                    {%endfor%}\\r\\n                    </tr>\\r\\n                {% endfor %}\\r\\n                {% for d in data.result | selectattr('parent','equalto', g.id) if \\\"is_total_row\\\" in d %}\\r\\n                    <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td></td>\\r\\n                    {%for c in data.columns%}\\r\\n                    {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                        <td class=\\\"text-{{c.align}}\\\"><strong>{{'' if not frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype}) else frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}</strong></td>\\r\\n                    {%endif%}\\r\\n                    {%endfor%}\\r\\n                    </tr>\\r\\n                {% endfor %}\\r\\n            {% endfor %}\\r\\n            {% for d in data.result %}\\r\\n                    {% if d.is_grand_total == 1 %}\\r\\n                    <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td></td>\\r\\n                    {%for c in data.columns%}\\r\\n                    {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                        <td class=\\\"text-{{c.align}}\\\"><strong>{{'' if not frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype}) else frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}</strong></td>\\r\\n                    {%endif%}\\r\\n                    {%endfor%}\\r\\n                    </tr>\\r\\n                    {% endif %}\\r\\n            {% endfor %}\\r\\n       \\r\\n    </tbody>\\r\\n</table>\\r\\n\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_status = None if  not frappe.form_dict.get('reservation_status') else frappe.form_dict.get('reservation_status').split(',') %}\\r\\n \\r\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\r\\n        report_name=\\\"Reservation List Report\\\",\\r\\n        filters={\\r\\n            \\\"filter_date_by\\\":frappe.form_dict.get('filter_date_by'),\\r\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\r\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\r\\n            \\\"property\\\":doc.name,\\r\\n            \\\"reservation_status\\\":reservation_status,\\r\\n            \\\"business_source\\\":frappe.form_dict.get('business_source'),\\r\\n            \\\"chart_type\\\":\\\"bar\\\",\\r\\n            \\\"room_type\\\":frappe.form_dict.get('room_type'),\\r\\n            \\\"guest\\\":frappe.form_dict.get('guest'),\\r\\n            \\\"is_active_reservation\\\":frappe.form_dict.get('is_active_reservation'),\\r\\n            \\\"order_by\\\":frappe.form_dict.get('order_by'),\\r\\n            \\\"sort_order\\\":frappe.form_dict.get('sort_order'),\\r\\n            \\\"summary_filter\\\":frappe.form_dict.get('summary_filter'),\\r\\n            \\\"group_by\\\":frappe.form_dict.get('group_by')\\r\\n        }\\r\\n    )\\r\\n%}\\r\\n\\r\\n<table class='report-list occupied-001' style=\\\"width:60%;margin-top:7px;\\\">\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th>{{_(\\\"Summary By \\\")}}{{frappe.form_dict.summary_filter or ''}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Pax(A/C)\\\")}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Debit\\\")}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Credit\\\")}}</th>\\r\\n        </tr>\\r\\n    </thead>\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Business Source\\\" %}\\r\\n    <tbody>\\r\\n        {% for business_source in data.result |  map(attribute='business_source') | unique %}\\r\\n        <tr>\\r\\n            {% if business_source %}\\r\\n            <td>{{business_source or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n        {% if frappe.form_dict.summary_filter ==\\\"Arrival Date\\\" %}\\r\\n    <tbody>\\r\\n        {% for arrival_date in data.result |  map(attribute='arrival_date') | unique %}\\r\\n        <tr>\\r\\n            {% if arrival_date %}\\r\\n            <td>{{arrival_date or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Departure Date\\\" %}\\r\\n    <tbody>\\r\\n        {% for departure_date in data.result |  map(attribute='departure_date') | unique %}\\r\\n        <tr>\\r\\n            {% if departure_date %}\\r\\n            <td>{{departure_date or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Reservation\\\" %}\\r\\n    <tbody>\\r\\n        {% for reservation in data.result |selectattr(\\\"indent\\\", \\\"equalto\\\", 1)|  map(attribute='reservation') | unique %}\\r\\n        <tr>\\r\\n            {% if reservation %}\\r\\n            <td>{{reservation or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    \\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Reservation Date\\\" %}\\r\\n    <tbody>\\r\\n        {% for reservation_date in data.result |  map(attribute='reservation_date') | unique %}\\r\\n        <tr>\\r\\n            {% if reservation_date %}\\r\\n            <td>{{reservation_date or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Reservation Type\\\" %}\\r\\n    <tbody>\\r\\n        {% for reservation_type in data.result |  map(attribute='reservation_type') | unique %}\\r\\n        <tr>\\r\\n            {% if reservation_type %}\\r\\n            <td>{{reservation_type or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Guest\\\" %}\\r\\n    <tbody>\\r\\n        {% for guest in data.result |  map(attribute='guest') | unique %}\\r\\n        <tr>\\r\\n            {% if guest %}\\r\\n            <td>{{guest or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Room Type\\\" %}\\r\\n    <tbody>\\r\\n        {% for room_types in data.result |  map(attribute='room_types') | unique %}\\r\\n        <tr>\\r\\n            {% if room_types %}\\r\\n            <td>{{room_types or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Business Source Type\\\" %}\\r\\n    <tbody>\\r\\n        {% for business_source_type in data.result |  map(attribute='business_source_type') | unique %}\\r\\n        <tr>\\r\\n            {% if business_source_type %}\\r\\n            <td>{{business_source_type or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Nationality\\\" %}\\r\\n    <tbody>\\r\\n        {% for nationality in data.result |  map(attribute='nationality') | unique %}\\r\\n        <tr>\\r\\n            {% if nationality %}\\r\\n            <td>{{nationality or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Rate Type\\\" %}\\r\\n    <tbody>\\r\\n        {% for rate_type in data.result |  map(attribute='rate_type') | unique %}\\r\\n        <tr>\\r\\n            {% if rate_type %}\\r\\n            <td>{{rate_type or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Reservation Status\\\" %}\\r\\n    <tbody>\\r\\n        {% for reservation_status in data.result |  map(attribute='reservation_status') | unique %}\\r\\n        <tr>\\r\\n            {% if reservation_status %}\\r\\n            <td>{{reservation_status or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    <tfoot>\\r\\n    {% if frappe.form_dict.get('group_by') %}\\r\\n    {% for d in data.result %}\\r\\n    {% if d.is_grand_total == 1 %}\\r\\n        <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n            <td><strong>{{d.reservation}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{(data.result | list| length) - (data.result |selectattr(\\\"indent\\\", \\\"equalto\\\", 0) |list|length)}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{d.room_nights}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{d.total_pax}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{frappe.format(d.total_debit,{\\\"fieldtype\\\":\\\"Currency\\\"})}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{frappe.format(d.total_credit,{\\\"fieldtype\\\":\\\"Currency\\\"})}}</strong></td>\\r\\n        </tr>\\r\\n    {% endif %}\\r\\n    {% endfor %}\\r\\n    {% else %}\\r\\n    {% for d in data.result %}\\r\\n    {% if d.is_total_row == 1 %}\\r\\n        <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n            <td><strong>{{_(\\\"Grand Total\\\")}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{(data.result | list| length) - (data.result |selectattr(\\\"indent\\\", \\\"equalto\\\", 0) |list|length)}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{d.room_nights}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{d.total_pax}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{frappe.format(d.total_debit,{\\\"fieldtype\\\":\\\"Currency\\\"})}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{frappe.format(d.total_credit,{\\\"fieldtype\\\":\\\"Currency\\\"})}}</strong></td>\\r\\n        </tr>\\r\\n    {% endif %}\\r\\n    {% endfor %}\\r\\n    {% endif %}\\r\\n    </tfoot>\\r\\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-20 14:13:02.978801",
  "module": "eDoor",
  "name": "Group Booking List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Arrival Stay Over Departure Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            total_debit,\\r\\n            total_credit,\\r\\n            balance,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            total_room_rate ,\\r\\n            require_drop_off,\\r\\n            TIME_FORMAT(drop_off_time, '%H:%i %p') as drop_off_time,\\r\\n            departure_flight_number,\\r\\n            is_early_checked_out\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and  \\r\\n            name in (select reservation_stay from `tabRoom Occupy` where is_arrival = 1 and is_active = 1 and is_active_reservation and date between '{1}' and '{2}') and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and\\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    \\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-right\\\">ADR</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reference_number or ''}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.drop_off_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.departure_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td class=\\\"nowrap\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-right nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-right break-all\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            rs.name,\\r\\n            r.date,\\r\\n            r.reservation,\\r\\n            r.reservation_stay,\\r\\n            r.room_number,\\r\\n            r.room_type_alias,\\r\\n            r.reservation_type,\\r\\n            rs.arrival_date, \\r\\n            rs.departure_date, \\r\\n            rs.business_source, \\r\\n            rs.note,\\r\\n            rs.room_nights,\\r\\n            rs.adr,\\r\\n            rs.adult,\\r\\n            rs.reservation_status,\\r\\n            rs.child,\\r\\n            rs.guest,\\r\\n            rs.guest_name\\r\\n        from `tabRoom Occupy` r\\r\\n        inner join `tabReservation Stay` rs on r.reservation_stay = rs.name\\r\\n        where \\r\\n            rs.property= '{0}' and \\r\\n            rs.arrival_date <= '{1}' and \\r\\n            rs.departure_date > '{2}' and \\r\\n            rs.keyword like '%{3}%' and \\r\\n            rs.business_source = if('{4}'='', rs.business_source,'{4}') and \\r\\n            rs.room_types like '%{5}%' and \\r\\n            rs.reservation_status = if('{6}' = '', rs.reservation_status, '{6}') and\\r\\n            rs.is_active_reservation=1 and\\r\\n            r.date between '{1}' and '{2}'\\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or '',\\r\\n                frappe.form_dict.get('reservation_status') or '',\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n\\r\\n    \\r\\n    {% set dates =  data|map(attribute='date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Stay Over Guest\\\")}}</h3>\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%;'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Nights</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-end\\\">ADR</th>\\r\\n                <th>Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for date in dates%}\\r\\n                <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n                </tr>\\r\\n             {%for d in data|selectattr('date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reference_number or ''}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.room_number}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n    \\r\\n                    <td class=\\\"nowrap\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end break-all\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"1\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n\\r\\n    \"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            total_debit,\\r\\n            total_credit,\\r\\n            balance,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            require_drop_off,\\r\\n            TIME_FORMAT(drop_off_time, '%H:%i %p') as drop_off_time,\\r\\n            departure_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 and\\r\\n             name in (\\r\\n            select reservation_stay from `tabRoom Occupy` r\\r\\n            where \\r\\n                property= '{0}' and \\r\\n                date between '{1}' and '{2}' and\\r\\n             is_departure=1\\r\\n            )\\r\\n        order by \\r\\n            arrival_date asc\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='departure_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Departure Guest\\\")}}</h3>\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%;'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th style=\\\"width:110px\\\">Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-right\\\">ADR</th>\\r\\n                <th>Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('departure_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reference_number or ''}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.drop_off_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.departure_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td class=\\\"nowrap\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end  break-all\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('departure_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n\\r\\n    \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            arrival_date,\\r\\n            departure_date,\\r\\n            business_source,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            child\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n\\r\\n    <h3>{{_(\\\"Arrival Summary \\\")}}</h3>\\r\\n    <table  class='report-list occupied-001' width=\\\"100%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"  \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            child\\r\\n\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date < '{1}' and \\r\\n            departure_date > '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            reservation_status = if('{6}' = '', reservation_status, '{6}') and\\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date asc\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or '',\\r\\n                frappe.form_dict.get('reservation_status') or '',\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    <h3>{{_(\\\"Stay Over Summary\\\")}}</h3>\\r\\n       <table  class='report-list occupied-001' width=\\\"100%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            departure_date,\\r\\n            business_source,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            child\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n\\r\\n    <h3>{{_(\\\"Departure Summary\\\")}}</h3>\\r\\n    <table  class='report-list occupied-001' width=\\\"100%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2024-01-16 15:44:57.580267",
  "module": "eDoor",
  "name": "Front Desk Arrival Stay Over Departure Guest",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Pickup - Drop off Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Arrival Mode\\\")}} : <strong>{{frappe.form_dict.arrival_modes or \\\"All Arrival Mode\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Departure Mode\\\")}} : <strong>{{frappe.form_dict.departure_mode or \\\"All Departure Mode\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            room_types,\\r\\n            pickup_location,\\r\\n            child,\\r\\n            arrival_mode,\\r\\n            require_pickup,\\r\\n            pickup_driver_name,\\r\\n            TIME_FORMAT(pickup_time, '%H:%i') as pickup_time,\\r\\n            arrival_flight_number,\\r\\n            pickup_note\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            require_pickup = 1 and\\r\\n            property= '{0}' and \\r\\n            arrival_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            ifnull(arrival_mode,''  ) = if('{5}'='', ifnull(arrival_mode,''),'{5}') and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('arrival_modes') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Pickup Guest\\\")}}</h3>\\r\\n\\r\\n    <table class='report-list occupied-001' style='width:100%;padding:10px'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center nowrap\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center nowrap\\\">Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                <th class=\\\"text-center\\\">Pickup Date</th>\\r\\n                <th>Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th >Mode-Station</th>\\r\\n                <th>Driver</th>\\r\\n                <th>Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation or '-'}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name or '-'}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reference_number or '-'}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type or '-'}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms or '-'}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} {{d.pickup_time or '-'}}</td>\\r\\n                    <td class=\\\"nowrap\\\">\\r\\n                            {{d.arrival_flight_number or '-'}}\\r\\n                    </td>\\r\\n    \\r\\n                    <td class=\\\"nowrap\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name or '-'}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult or '0'}}/{{d.child or '0'}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source or '-'}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.arrival_mode or ''}} - {{d.pickup_location or ''}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.pickup_driver_name or '-'}}</td>\\r\\n                    <td class=\\\"text-end break-all\\\">{{d.pickup_note or '-'}}</td>\\r\\n                    \\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"6\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"6\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n\\r\\n    \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            drop_off_location,\\r\\n            departure_mode,\\r\\n            require_drop_off,\\r\\n            drop_off_driver_name,\\r\\n            TIME_FORMAT(drop_off_time, '%H:%i') as drop_off_time,\\r\\n            departure_flight_number,\\r\\n            drop_off_note\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            require_drop_off = 1 and\\r\\n            property= '{0}' and \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            ifnull(departure_mode,''  ) = if('{5}'='', ifnull(departure_mode,''),'{5}') and \\r\\n            is_active_reservation=1 \\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('departure_mode') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    {% set dates =  data|map(attribute='departure_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Drop Off Guest\\\")}}</h3>\\r\\n\\r\\n    <table class='report-list occupied-001' style='width:100%;'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center nowrap\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center nowrap\\\">Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n\\t\\t        <th class=\\\"text-center\\\">Room</th>\\r\\n                <th class=\\\"text-center\\\">Drop Off Date</th>\\r\\n                <th>Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th>Mode-Station</th>\\r\\n                <th>Driver</th>\\r\\n                <th>Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('departure_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation or '-'}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name or '-'}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reference_number or '-'}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type or '-'}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms or '-'}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}} {{d.drop_off_time or '-'}}</td>\\r\\n                    <td>\\r\\n                            {{d.departure_flight_number or '-'}}\\r\\n                    </td>\\r\\n    \\r\\n                    <td class=\\\"nowrap\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name or '-'}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult or '0'}}/{{d.child or '0'}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source or '-'}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.departure_mode or ''}} - {{d.drop_off_location or ''}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.drop_off_driver_name or '-'}}</td>\\r\\n                    <td class=\\\"text-end break-all\\\">{{d.drop_off_note or '-'}}</td>\\r\\n                    \\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"6\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('departure_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"6\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2024-01-01 14:47:29.785334",
  "module": "eDoor",
  "name": "Front Desk Pickup - Drop Off Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Housekeeping Stay Over Guest\\\")}}</h2>\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n           {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            rs.name,\\r\\n            r.date,\\r\\n            r.reservation,\\r\\n            r.reservation_stay,\\r\\n            r.room_number,\\r\\n            r.room_type_alias,\\r\\n            r.reservation_type,\\r\\n            rs.arrival_date, \\r\\n            rs.departure_date, \\r\\n            rs.business_source, \\r\\n            rs.note,\\r\\n            rs.room_nights,\\r\\n            rs.adr,\\r\\n            rs.adult,\\r\\n            rs.reservation_status,\\r\\n            rs.child,\\r\\n            rs.guest,\\r\\n            rs.guest_name,\\r\\n            rs.reference_number,\\r\\n            rs.housekeeping_note\\r\\n        from `tabRoom Occupy` r\\r\\n        inner join `tabReservation Stay` rs on r.reservation_stay = rs.name\\r\\n        where \\r\\n            rs.property= '{0}' and \\r\\n            rs.arrival_date <= '{1}' and \\r\\n            rs.departure_date > '{2}' and \\r\\n            rs.keyword like '%{3}%' and \\r\\n            rs.business_source = if('{4}'='', rs.business_source,'{4}') and \\r\\n            rs.room_types like '%{5}%' and \\r\\n            rs.reservation_status = if('{6}' = '', rs.reservation_status, '{6}') and\\r\\n            rs.is_active_reservation=1 and\\r\\n            r.date between '{1}' and '{2}'\\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or '',\\r\\n                frappe.form_dict.get('reservation_status') or '',\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n\\r\\n    \\r\\n      {% set dates =  data|map(attribute='date')|unique|list|sort  %}\\r\\n    \\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th>Status</th>\\r\\n                <th class=\\\"text-center\\\">HK Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for date in dates%}\\r\\n                <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n                </tr>\\r\\n             {%for d in data|selectattr('date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reference_number or ''}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.room_number}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"nowrap\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"break-all\\\">{{d.housekeeping_note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan='1' ></td>\\r\\n                    <td colspan=\\\"4\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"1\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td>\\r\\n                    <td></td>\\r\\n                    <td></td>\\r\\n                    <td></td>\\r\\n                    <td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"4\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n<!--    <br/>\\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>-->\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-12-29 14:52:10.485326",
  "module": "eDoor",
  "name": "Housekeeping Stay Over Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Departure List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{% if frappe.form_dict.get(\\\"action\\\") == \\\"view_departure\\\" %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        business_source,\\n        reference_number,\\n        reservation_date,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date,\\n        DATE_FORMAT(departure_date, '%Y-%m-%d')  as departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        DATE_FORMAT(checked_out_system_date, '%Y-%m-%d')  as checked_out_system_date,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n      name in (\\n                        select reservation_stay from `tabRoom Occupy`\\n                        where\\n                            date = '{1}' and \\n                            property='{0}' and \\n                            is_departure = 1 and \\n                            is_active_reservation= 1\\n\\n                    ) and\\n        reservation_status = if('{5}' = '', reservation_status, '{5}') \\n        and\\n        ifnull(keyword,'') like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n                frappe.form_dict.get('reservation_status') or '',\\n        ),as_dict=1)\\n%}\\n{%set date = frappe.form_dict.get('date')%}\\n\\n{% if (data|length) >0 %}\\n    <table class='report-list occupied-001' style='width:100%'>\\n     \\n            <tr> \\n                <th class=\\\"text-center\\\">No.</th>\\n                <th class=\\\"text-center\\\">Reservation #</th>\\n                <th class=\\\"text-center\\\">Stay #</th>\\n                <th>Ref. #</th>\\n                <th class=\\\"text-center\\\">Type</th>\\n                <th class=\\\"text-center\\\">Res. Date</th>\\n                <th class=\\\"text-center\\\">Stay Date</th>\\n                <th class=\\\"text-center\\\">Room Nights</th>\\n                <th>Room(s)</th>\\n                <th>Guest</th>\\n                <th>Source</th>\\n                {% if can_view_rate==1%}\\n                <th class=\\\"text-end\\\">ADR</th>\\n                <th class=\\\"text-end\\\">Total Room Rate</th>\\n                {%endif%}\\n                <th class=\\\"text-center\\\">Status</th>\\n            </tr>\\n      \\n            {%for d in data%}\\n                <tr>\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                    <td>{{d.reference_number or \\\"\\\"}}</td>\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                   \\n                    <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                    <td>\\n                        {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                        {% if (rooms|length)>0 %}\\n                            {% for room in rooms %}\\n                              <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                            {% endfor %}\\n                        {% endif %}\\n                    </td>\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                    <td>{{d.business_source}}</td>\\n                    {%if can_view_rate==1 %}\\n                    <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                    <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                    {%endif%}\\n                    <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                </tr>\\n           \\n            {%endfor%}\\n         \\n    </table>\\n    {% else %}\\n        <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n    {% endif %}\\n{% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Departure Remaining\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{% if frappe.form_dict.get(\\\"action\\\") == \\\"view_departure_remaining\\\" %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        business_source,\\n        reservation_date,\\n        reference_number,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n       name in (\\n                        select reservation_stay from `tabRoom Occupy`\\n                        where\\n                            date = '{1}' and \\n                            property='{0}' and \\n                            is_departure = 1 and \\n                            is_active_reservation= 1\\n\\n                    ) and\\n        ifnull(keyword,'') like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status != 'Checked Out'\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or ''\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n    <table class='report-list occupied-001' style='width:100%'>\\n     \\n            <tr>\\n                <th class=\\\"text-center\\\">No.</th>\\n                <th class=\\\"text-center\\\">Reservation #</th>\\n                <th class=\\\"text-center\\\">Stay #</th>\\n                <th>Ref. #</th>\\n                <th class=\\\"text-center\\\">Type</th>\\n                <th class=\\\"text-center\\\">Res. Date</th>\\n                <th class=\\\"text-center\\\">Stay Date</th>\\n                <th class=\\\"text-center\\\">Room Nights</th>\\n                <th>Room(s)</th>\\n                <th>Guest</th>\\n                <th>Source</th>\\n            {%if can_view_rate==1%}\\n                <th class=\\\"text-end\\\">ADR</th>\\n                <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n                <th class=\\\"text-center\\\">Status</th>\\n            </tr>\\n      \\n            {%for d in data%}\\n                <tr>\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                    <td>{{d.reference_number or \\\"\\\"}}</td>\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                    <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                    <td>\\n                        {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                        {% if (rooms|length)>0 %}\\n                            {% for room in rooms %}\\n                              <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                            {% endfor %}\\n                        {% endif %}\\n                    </td>\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                    <td>{{d.business_source}}</td>\\n                {%if can_view_rate ==1  %}\\n                    <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                    <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                    <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                </tr>\\n           \\n            {%endfor%}\\n         \\n    </table>\\n    {% else %}\\n       <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n    {% endif %}\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-11 17:42:36.920648",
  "module": "eDoor",
  "name": "eDoor Dashboard Departure Guest",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        group_code,\\n        group_name,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        ifnull(keyword,'') like '%{2}%' and \\n        reservation_type = 'GIT' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        is_active_reservation = 1 and\\n        reservation_status = if('{5}' = '', reservation_status, '{5}')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n        ),as_dict=1)\\n%}\\n\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th>Type</th>\\n            <th class=\\\"text-center\\\">Group Code</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td>{{d.reservation_type or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.group_code or \\\"\\\"}}{{ \\\"/\\\" if d.group_code and d.group_name else \\\"\\\" }}{{d.group_name or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-11 17:45:23.168909",
  "module": "eDoor",
  "name": "eDoor GIT Arrival Guest",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "table{\n        box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n   {%\\r\\n        set sql = \\\"\\r\\n           select\\r\\n            name,\\r\\n            room_number,\\r\\n            block_date,\\r\\n            start_date,\\r\\n            end_date,\\r\\n            reason,\\r\\n            room_type,\\r\\n            owner,\\r\\n            creation,\\r\\n            status_color,\\r\\n            total_night_count,\\r\\n            room_type,\\r\\n            is_unblock\\r\\n        from `tabRoom Block` \\r\\n        where \\r\\n        \\r\\n            property='{0}' and \\r\\n            '{1}' between start_date and DATE_ADD(end_date, INTERVAL -1 DAY) and \\r\\n            room_number like '%{2}%' and \\r\\n            docstatus=1 and \\r\\n            is_unblock=0\\\"\\r\\n            .format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get(\\\"date\\\"),\\r\\n                frappe.form_dict.get(\\\"keyword\\\") or ''\\r\\n        )\\r\\n    %}\\r\\n    {%\\r\\n        set data = frappe.db.sql(sql,as_dict=1)\\r\\n    %}\\r\\n     {% set room_type_alias = frappe.get_doc(\\\"Room Type\\\",doc.room_type) %}\\r\\n    <div>\\r\\n<table class='report-list' style='width:100%'>\\r\\n    <tr>\\r\\n        <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" >Today Blocked Room</th>\\r\\n    </tr>\\r\\n    {% if (data|length) > 0 %}\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\" >No</th>\\r\\n                <th class=\\\"text-center\\\" >Blocked Number</th>\\r\\n                <th class=\\\"text-center\\\" >Blocked Date</th>\\r\\n                <th class=\\\"text-center\\\" >Start Date</th>\\r\\n                <th class=\\\"text-center\\\" >Release Date</th>\\r\\n                <th class=\\\"text-center\\\" >Night</th>\\r\\n                <th class=\\\"text-center\\\" >Room(s)</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th>Blocked By</th>\\r\\n                <th style=\\\"width:20%\\\">Reason</th>\\r\\n            </tr>\\r\\n            {% for d in data %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\" >{{loop.index}}</td>\\r\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_room_block_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.block_date or '',{'fieldtype':'Date'})}} </td>\\r\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.start_date,{'fieldtype':'Date'})}} </td>\\r\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.end_date,{'fieldtype':'Date'})}} </td>\\r\\n                    <td class=\\\"text-center\\\">{{d.total_night_count}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_number}} {{\\\"/\\\" if d.room_number else \\\"\\\"}}{{room_type_alias.alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        <span class=\\\"rounded-pill py-1 px-2 text-white\\\" style=\\\"background: {{d.status_color}}\\\">\\r\\n                            <svg version=\\\"1.2\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"18\\\" height=\\\"18\\\">\\r\\n                            \\t<title>lock-svgrepo-com-svg</title>\\r\\n                            \\t<style>\\r\\n                            \\t\\t.s0 { fill: transparent;stroke: #ffffff;stroke-linecap: round;stroke-linejoin: round;stroke-width: 2 } \\r\\n                            \\t</style>\\r\\n                            \\t<path id=\\\"Layer\\\" fill-rule=\\\"evenodd\\\" class=\\\"s0\\\" d=\\\"m7 10v-2c0-2.8 2.2-5 5-5 2.8 0 5 2.2 5 5v2m1.4 0.3c0.5 0.3 1 0.8 1.3 1.3 0.3 0.7 0.3 1.5 0.3 3.2v1.4c0 1.7 0 2.5-0.3 3.2-0.3 0.5-0.8 1-1.3 1.3-0.7 0.3-1.5 0.3-3.2 0.3h-6.4c-1.7 0-2.5 0-3.2-0.3-0.5-0.3-1-0.8-1.3-1.3-0.3-0.7-0.3-1.5-0.3-3.2v-1.4c0-1.7 0-2.5 0.3-3.2 0.3-0.5 0.8-1 1.3-1.3 0.4-0.2 0.8-0.2 1.4-0.3h10c0.6 0.1 1 0.1 1.4 0.3zm-3.2-0.3h-6.4c-0.7 0-1.3 0-1.8 0h10c-0.5 0-1.1 0-1.8 0z\\\"/>\\r\\n                            </svg>\\r\\n                            {{\\\"Blocked\\\" if d.is_unblock==0 else \\\"Release\\\"}}\\r\\n                        </span>\\r\\n                    </td>\\r\\n                     <td>{{d.owner.split(\\\"@\\\")[0]}}</td>\\r\\n                     <td style=\\\"width:20%\\\">{{d.reason or ''}}</td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n            {% else %}\\r\\n    </table>\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {% endif %}\\r\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n   {%\\r\\n        set sql = \\\"\\r\\n           select\\r\\n            name,\\r\\n            room_number,\\r\\n            block_date,\\r\\n            start_date,\\r\\n            end_date,\\r\\n            reason,\\r\\n            room_type,\\r\\n            owner,\\r\\n            creation,\\r\\n            status_color,\\r\\n            is_unblock\\r\\n        from `tabRoom Block` \\r\\n        where \\r\\n        \\r\\n            property='{0}' and \\r\\n            start_date > '{1}' and \\r\\n            room_number like '%{2}%' and \\r\\n            docstatus=1 and \\r\\n            is_unblock=0\\\"\\r\\n            .format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get(\\\"date\\\"),\\r\\n                frappe.form_dict.get(\\\"keyword\\\") or ''\\r\\n        )\\r\\n    %}\\r\\n    {%\\r\\n        set data = frappe.db.sql(sql,as_dict=1)\\r\\n    %}\\r\\n     \\r\\n\\r\\n   {%\\r\\n        set sql = \\\"\\r\\n           select\\r\\n            name,\\r\\n            room_number,\\r\\n            block_date,\\r\\n            start_date,\\r\\n            end_date,\\r\\n            reason,\\r\\n            room_type,\\r\\n            owner,\\r\\n            creation,\\r\\n            total_night_count,\\r\\n            status_color,\\r\\n            is_unblock\\r\\n        from `tabRoom Block` \\r\\n        where \\r\\n        \\r\\n            property='{0}' and \\r\\n            start_date > '{1}' and \\r\\n            room_number like '%{2}%' and \\r\\n            docstatus=1 and \\r\\n            is_unblock=0\\\"\\r\\n            .format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get(\\\"date\\\"),\\r\\n                frappe.form_dict.get(\\\"keyword\\\") or ''\\r\\n        )\\r\\n    %}\\r\\n    {%\\r\\n        set data = frappe.db.sql(sql,as_dict=1)\\r\\n    %}\\r\\n     \\r\\n  {% set room_type_alias = frappe.get_doc(\\\"Room Type\\\",doc.room_type) %}\\r\\n    <div>\\r\\n<table class='report-list' style='width:100%'>\\r\\n    <tr>\\r\\n        <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" >Future Blocked Room</th>\\r\\n    </tr>\\r\\n    {% if (data|length) > 0 %}\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\" >No</th>\\r\\n                <th class=\\\"text-center\\\" >Blocked Number</th>\\r\\n                <th class=\\\"text-center\\\" >Blocked Date</th>\\r\\n                <th class=\\\"text-center\\\" >Start Date</th>\\r\\n                <th class=\\\"text-center\\\" >Release Date</th>\\r\\n                <th class=\\\"text-center\\\" >Night</th>\\r\\n                <th class=\\\"text-center\\\" >Room(s)</th>\\r\\n                <th class=\\\"text-center\\\" >Status</th>\\r\\n                <th>Blocked By</th>\\r\\n                <th style=\\\"width:20%\\\">Reason</th>\\r\\n            </tr>\\r\\n            {% for d in data %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\" >{{loop.index}}</td>\\r\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_room_block_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.block_date or '',{'fieldtype':'Date'})}} </td>\\r\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.start_date,{'fieldtype':'Date'})}} </td>\\r\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.end_date,{'fieldtype':'Date'})}} </td>\\r\\n                    <td class=\\\"text-center\\\">{{d.total_night_count}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_number}} {{\\\"/\\\" if d.room_number else \\\"\\\"}}{{room_type_alias.alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        <span class=\\\"rounded-pill py-1 px-2 text-white\\\" style=\\\"background: {{d.status_color}}\\\">\\r\\n                            <svg version=\\\"1.2\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"18\\\" height=\\\"18\\\">\\r\\n                            \\t<title>lock-svgrepo-com-svg</title>\\r\\n                            \\t<style>\\r\\n                            \\t\\t.s0 { fill: transparent;stroke: #ffffff;stroke-linecap: round;stroke-linejoin: round;stroke-width: 2 } \\r\\n                            \\t</style>\\r\\n                            \\t<path id=\\\"Layer\\\" fill-rule=\\\"evenodd\\\" class=\\\"s0\\\" d=\\\"m7 10v-2c0-2.8 2.2-5 5-5 2.8 0 5 2.2 5 5v2m1.4 0.3c0.5 0.3 1 0.8 1.3 1.3 0.3 0.7 0.3 1.5 0.3 3.2v1.4c0 1.7 0 2.5-0.3 3.2-0.3 0.5-0.8 1-1.3 1.3-0.7 0.3-1.5 0.3-3.2 0.3h-6.4c-1.7 0-2.5 0-3.2-0.3-0.5-0.3-1-0.8-1.3-1.3-0.3-0.7-0.3-1.5-0.3-3.2v-1.4c0-1.7 0-2.5 0.3-3.2 0.3-0.5 0.8-1 1.3-1.3 0.4-0.2 0.8-0.2 1.4-0.3h10c0.6 0.1 1 0.1 1.4 0.3zm-3.2-0.3h-6.4c-0.7 0-1.3 0-1.8 0h10c-0.5 0-1.1 0-1.8 0z\\\"/>\\r\\n                            </svg>\\r\\n                            {{\\\"Blocked\\\" if d.is_unblock==0 else \\\"Release\\\"}}\\r\\n                        </span>\\r\\n                    </td>\\r\\n                     <td>{{d.owner.split(\\\"@\\\")[0]}}</td>\\r\\n                     <td style=\\\"width:20%\\\">{{d.reason or ''}}</td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n            {% else %}\\r\\n    </table>\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {% endif %}\\r\\n</div>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-28 14:25:24.225685",
  "module": "eDoor",
  "name": "eDoor Room Block",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\r\\n\\r\\n{%\\r\\n\\r\\nset data = frappe.db.sql(\\\"\\r\\n    select \\r\\n        name,\\r\\n        reservation,\\r\\n        reservation_type,\\r\\n        reference_number,\\r\\n        reservation_date,\\r\\n        business_source,\\r\\n        group_code,\\r\\n        group_name,\\r\\n        guest,\\r\\n        guest_name, \\r\\n        business_source, \\r\\n        arrival_date, \\r\\n        departure_date,\\r\\n        reservation_status,\\r\\n        room_type_alias,\\r\\n        status_color,\\r\\n        rooms,\\r\\n        room_nights,\\r\\n        adr,\\r\\n        total_room_rate \\r\\n    from `tabReservation Stay` \\r\\n    where \\r\\n          name in (\\r\\n                select reservation_stay from `tabRoom Occupy`\\r\\n                where\\r\\n                   type='Reservation' and  \\r\\n                   is_stay_over = 1 and \\r\\n                   is_active_reservation= 1 and \\r\\n                   date = '{1}' \\r\\n                ) and   \\r\\n        property= '{0}' and \\r\\n        ifnull(keyword,'') like '%{2}%' and \\r\\n        is_active_reservation = 1 and\\r\\n        business_source = if('{3}'='', business_source,'{3}') and \\r\\n        room_types like '%{4}%' and \\r\\n        reservation_status = if('{5}' = '', reservation_status, '{5}')\\r\\n        \\\".format(\\r\\n            doc.name,\\r\\n            frappe.form_dict.get('date'),\\r\\n            frappe.form_dict.get('keyword') or '',\\r\\n            frappe.form_dict.get('business_source') or '',\\r\\n            frappe.form_dict.get('room_type') or '',\\r\\n            frappe.form_dict.get('reservation_status') or '',\\r\\n        ),as_dict=1)\\r\\n%}\\r\\n\\r\\n{% if (data|length) >0 %}\\r\\n<table class='report-list occupied-001' style='width:100%'>\\r\\n \\r\\n        <tr>\\r\\n            <th class=\\\"text-center\\\">No.</th>\\r\\n            <th class=\\\"text-center\\\">Reservation #</th>\\r\\n            <th class=\\\"text-center\\\">Stay #</th>\\r\\n            <th>Ref. #</th>\\r\\n            <th class=\\\"text-center\\\">Type</th>\\r\\n            \\r\\n            <th class=\\\"text-center\\\">Group Code</th>\\r\\n            <th class=\\\"text-center\\\">Res. Date</th>\\r\\n            \\r\\n            <th class=\\\"text-center\\\">Stay Date</th>\\r\\n            <th class=\\\"text-center\\\">Room Nights</th>\\r\\n            <th>Room(s)</th>\\r\\n            <th>Guest</th>\\r\\n            <th>Source</th>\\r\\n        {%if can_view_rate==1%}\\r\\n            <th class=\\\"text-end\\\">ADR</th>\\r\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\r\\n        {%endif%}\\r\\n            <th class=\\\"text-center\\\">Status</th>\\r\\n        </tr>\\r\\n        {%for d in data%}\\r\\n            <tr>\\r\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\r\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.group_code or \\\"\\\"}}{{ \\\"/\\\" if d.group_code and d.group_name else \\\"\\\" }}{{d.group_name or \\\"\\\"}}</td>\\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\r\\n               \\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                <td>\\r\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\r\\n                    {% if (rooms|length)>0 %}\\r\\n                        {% for room in rooms %}\\r\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\r\\n                        {% endfor %}\\r\\n                    {% endif %}\\r\\n                </td>\\r\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\r\\n                <td>{{d.business_source}}</td> \\r\\n            {%if can_view_rate==1%}\\r\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n            {%endif%}\\r\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\r\\n            </tr>\\r\\n        {%endfor%}\\r\\n     \\r\\n</table>\\r\\n{% else %}\\r\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n<div class=\\\"isemtyIcon\\\"></div> \\r\\n<small class=\\\"text-emty\\\">No Data </small>\\r\\n</div>\\r\\n{%endif%}\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-11 17:40:09.639214",
  "module": "eDoor",
  "name": "eDoor Dashboard Stay Over Guest",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%\\r\\nset data = frappe.db.sql(\\\"\\r\\n    select \\r\\n    name,\\r\\n    creation,\\r\\n    custom_note_date,\\r\\n    custom_posting_date,\\r\\n    reference_name,\\r\\n    reference_doctype,\\r\\n    content,\\r\\n    comment_by\\r\\n    from `tabComment` \\r\\n    where  \\r\\n        custom_note_date >= '{0}' and \\r\\n        custom_property= '{1}' and \\r\\n        custom_is_audit_trail = 1 and \\r\\n        custom_is_note = 1 \\\"\\r\\n    .format(\\r\\n        frappe.form_dict.get('date'),\\r\\n        frappe.form_dict.get('name')\\r\\n    ),as_dict=1)\\r\\n%}\\r\\n{% if (data|length)>0 %}\\r\\n<table class=\\\"report-list w-100 \\\">\\r\\n     <tbody>\\r\\n    <tr>\\r\\n        <th class=\\\"text-center\\\">No.</th>\\r\\n        <th >Reference Doctype</th>\\r\\n        <th >Reference Name</th>\\r\\n        <th class=\\\"text-center\\\">Created Date</th>\\r\\n        <th class=\\\"text-center\\\">Created By</th>\\r\\n        <th style=\\\"width:40%;\\\">Note</th>\\r\\n        \\r\\n    </tr>\\r\\n   \\r\\n        {%for d in data%}\\r\\n    \\r\\n        <tr>\\r\\n        <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n        <td>{% if d.reference_doctype %} {{d.reference_doctype}} {%else%} General Note {%endif%}</td>  \\r\\n        <td class=\\\"p-0\\\" onclick=\\\"window.parent.postMessage('view_' + '{{d.reference_doctype}}'.replace(/ /g, '_').toLowerCase() + '_detail|{{d.reference_name}}', '*')\\\">\\r\\n            \\r\\n             {% if d.reference_name %}<span class=\\\"link_line_action1\\\">{{d.reference_name}}</span>  {%endif%} </td>\\r\\n\\r\\n\\t\\t<td class=\\\"text-center\\\" align =\\\"center\\\"> {{frappe.utils.pretty_date(d.creation)}}</td>\\r\\n\\t\\t<td class=\\\"text-center\\\">{{d.comment_by}}</td>\\r\\n\\t\\t<td class=\\\"\\\">{{d.content}}</td>\\r\\n\\t\\t\\r\\n        </tr>\\r\\n            \\r\\n        {%endfor%}\\r\\n    </tbody>\\r\\n</table>\\r\\n{%else%}\\r\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n</div>\\r\\n{%endif%}\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-06 17:16:20.980146",
  "module": "eDoor",
  "name": "eDoor Up Coming Note",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.total_debit{\n    padding:15px!important;\n    background-color:#f0f0f0!important;\n    border-color:#c4c4c4!important;\n    width:300px!important;\n    border:1px!important;\n    border-radius: 0.5rem!important;\n    height: 50px!important;\n    text-transform:uppercase!important;\n    color:#9e9e9e!important;\n    font-size:14px!important;\n}\n.balance{\n    padding:15px!important;\n    background-color:#f0f0f0!important;\n    border-color:#c4c4c4!important;\n    width:300px!important;\n    border:1px!important;\n    border-radius: 0.5rem!important;\n    height: 50px!important;\n    text-transform:uppercase!important;\n    color:#9e9e9e!important;\n    font-size:14px!important;\n}\nspan{\n    font-weight:600!important;\n    font-size:18px!important;\n    color:black!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\n    <h2>Reservation Detail</h2>\\n    <h2>{{doc.name}}</h2>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Working Day Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set s = frappe.get_doc(\\\"Cashier Shift\\\",doc.cashier_shift) %}\\n\\n<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Working Day Information\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width: 100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='150px'>{{_(\\\"Working Day\\\")}}</td>\\n        <td width='160px'>: {{doc.working_day or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Working Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.working_date, {'fieldtype': 'Date'}) }}</td>\\n    </tr>\\n    <tr>\\n        <td width='150px'>{{_(\\\"Cashier Shift\\\")}}</td>\\n        <td width='160px'>: {{doc.cashier_shift or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Shift\\\")}}</td>\\n        <td width='160px'>: {{s.shift_name or ''}}</td>\\n\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Property\\\")}}</td>\\n        <td width='160px'>: {{doc.property or ''}}</td>\\n        \\n    </tr>    \\n\\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Guest Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Guest Information\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width: 100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='180px'>{{_(\\\"Guest\\\")}}</td>\\n        <td width='160px'>: {{doc.guest_name or ''}}</td>\\n    \\n        <td width='150px'>{{_(\\\"Nationality\\\")}}</td>\\n        <td width='160px'>: {{doc.nationality or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Phone\\\")}}</td>\\n        <td width='160px'>: {{doc.guest_phone_number or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Email\\\")}}</td>\\n        <td width='160px'>: {{doc.guest_email or ''}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Reservation Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Reservation Information\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width:100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='180px'>{{_(\\\"Ref #\\\")}}</td>\\n        <td width='160px'>: {{doc.reference_number or ''}}</td>\\n\\n        <td width='150px'>{{_(\\\"Res #\\\")}}</td>\\n        <td width='160px'>: {{doc.name or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Res Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.reservation_date, {'fieldtype': 'Date'}) }}</td>\\n        \\n        <td width='150px'>{{_(\\\"Res Type\\\")}}</td>\\n        <td width='160px'>: {{doc.reservation_type or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Arrival Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.arrival_date, {'fieldtype': 'Date'}) }}</td>\\n\\n        <td width='150px'>{{_(\\\"Departure Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.departure_date, {'fieldtype': 'Date'}) }}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Source\\\")}}</td>\\n        <td width='160px'>: {{doc.business_source or ''}} / {{doc.business_source_type}}</td>\\n\\n        <td width='150px'>{{_(\\\"Status\\\")}}</td>\\n        <td width='160px'>: {{doc.reservation_status or ''}}</td>\\n    </tr>\\n</table>\\n\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Stay Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\n                select \\n                        rs.name, \\n                        rs.arrival_date, \\n                        rs.departure_date, \\n                        rs.rooms, \\n                        rs.room_type_alias,\\n                        rs.require_pickup,\\n                        rs.require_drop_off,\\n                        rs.guest_name, \\n                        rs.pickup_time,\\n                        rs.pickup_location,\\n                        rs.drop_off_time,\\n                        rs.drop_off_location,\\n                        rs.total_room_rate, \\n                        rs.total_debit,\\n                        rs.total_credit, \\n                        rs.balance, \\n                        rs.reservation_status,\\n                        rs.room_rate_discount,\\n                        rs.total_room_rate_tax\\n                from `tabReservation Stay` rs\\n                inner join `tabReservation` r on r.name = rs.reservation\\n                where \\n                        r.name ='{0}'\\n\\\".format(doc.name),as_dict=1)%}\\n\\n<div style=\\\"font-size:16px;margin-top:10px\\\"><strong>{{_(\\\"Stay Information\\\")}}</strong></div>\\n<table class='report-list occupied-001' style='width:100%;font-size:12px;'>\\n    <tr>\\n        <th>{{_(\\\"No.\\\")}}</th>\\n        <th>{{_(\\\"Stay #\\\")}}</th>\\n        <th class = \\\"text-center\\\">{{_(\\\"Stay Date\\\")}}</th>\\n        <th class = \\\"text-center\\\">{{_(\\\"Room\\\")}}</th>\\n        <th>{{_(\\\"Guest\\\")}}</th>\\n        <th>{{_(\\\"Pickup\\\")}}</th>\\n        <th>{{_(\\\"Drop Off\\\")}}</th>\\n        <th class = \\\"text-right\\\">{{_(\\\"Rate\\\")}}</th>\\n        <th class = \\\"text-right\\\">{{_(\\\"Discount\\\")}}</th>\\n        <th class = \\\"text-right\\\">{{_(\\\"Tax\\\")}}</th>\\n        <th class = \\\"text-right\\\">{{_(\\\"Debit\\\")}}</th>\\n        <th class = \\\"text-right\\\">{{_(\\\"Credit\\\")}}</th>\\n        <th class = \\\"text-right\\\">{{_(\\\"Balance\\\")}}</th>\\n        <th class = \\\"text-center\\\">{{_(\\\"Status\\\")}}</th>\\n    </tr>\\n    {% for d in data %}\\n    <tr>\\n        <td>{{loop.index}}</td>\\n        <td>{{d.name}}</td>\\n        <td class = \\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n        <td class = \\\"text-center\\\">{{d.room_type_alias}}{{'/' if d.rooms else ''}}{{d.rooms}}</td>\\n        <td>{{d.guest_name}}</td>\\n        <td>\\n            {% if d.require_pickup %}\\n                {{frappe.format(d.pickup_time or '',{'fieldtype':'Time'})}}, {{d.pickup_location or ''}}\\n            {% endif %}\\n        </td>\\n        <td>\\n            {% if d.require_drop_off %}\\n                {{frappe.format(d.drop_off_time or '',{'fieldtype':'Time'})}}, {{d.drop_off_location or ''}}\\n            {% endif %}\\n        </td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.room_rate_discount,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.total_room_rate_tax,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.total_debit,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.total_credit,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.balance,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-center\\\">{{d.reservation_status}}</td>\\n    </tr>\\n    {% endfor %}\\n    <tr>\\n        <td colspan='6'></td>\\n        <td><strong>{{_(\\\"Total :\\\")}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='total_room_rate'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='room_rate_discount'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='total_room_rate_tax'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='total_debit'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='total_credit'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='balance'),{'fieldtype':'Currency'})}}</strong></td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set folio_transaction = frappe.db.sql(\\\"\\n                    select \\n                            ft.transaction_number,\\n                            r.name, \\n                            ft.reservation_stay,\\n                            if(ifnull(ft.parent_reference,'') = '',ft.name,ft.parent_reference) as folio_transaction,\\n                            ft.account_name,\\n                            ft.guest_name,\\n                            rf.guest_name as guest,\\n                            rf.name as folio_number,\\n                            rf.posting_date as rf_posting_date, \\n                            ft.posting_date as ft_posting_date,\\n                            ft.room_number,\\n                            ft.quantity,\\n                            ft.total_tax,\\n                            ft.bank_fee,\\n                            ft.amount,\\n                            ft.total_amount,\\n                            ft.discount_amount,\\n                            ft.bank_fee_amount,\\n                            ft.parent_reference,\\n                            ft.note,\\n                            ac.allow_enter_quantity\\n                    from `tabReservation` r\\n                    inner join `tabFolio Transaction` ft on r.name = ft.reservation\\n                    inner join `tabReservation Folio` rf on ft.transaction_number = rf.name\\n                    inner join `tabAccount Code` ac on ft.account_code = ac.name\\n                    where \\n                            ft.transaction_type = 'Reservation Folio' and\\n                            r.name = '{0}'\\n\\\".format(doc.name),as_dict=1)%}\\n{% if folio_transaction %}\\n<div style=\\\"font-size:16px;margin-top:10px\\\"><strong>\\n    {{_(\\\"Folio Transaction\\\")}}\\n</strong></div>\\n<table class='report-list occupied-001' style='width:100%;font-size:12px;margin-bottom:10px;'>\\n    <tr>\\n        <th>{{_(\\\"Folio Tran.#\\\")}}</th>\\n        <th>{{_(\\\"Post Date\\\")}}</th>\\n        <th>{{_(\\\"Room\\\")}}</th>\\n        <th>{{_(\\\"Account Code\\\")}}</th>\\n        <th>{{_(\\\"QTY\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Amount\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Discount\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Tax\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Bank Fee\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Total Amount\\\")}}</th>\\n        <th class='text-center'>{{_(\\\"Note\\\")}}</th>\\n    </tr>\\n    {%for reservation_stay in folio_transaction | map(attribute='reservation_stay') | unique%}\\n     {% for folio_number in folio_transaction |selectattr(\\\"reservation_stay\\\", \\\"equalto\\\", reservation_stay)| map(attribute='folio_number') | unique  %}\\n        {% for rf_posting_date in folio_transaction |selectattr(\\\"folio_number\\\", \\\"equalto\\\", folio_number) |map(attribute='rf_posting_date') | unique  %}\\n            {% for guest in folio_transaction |selectattr(\\\"folio_number\\\", \\\"equalto\\\", folio_number) |map(attribute='guest') | unique  %}\\n                <tr>\\n                    <td style=\\\"white-space: nowrap;\\\"><strong>\\n                        {{reservation_stay}}, {{folio_number}}<br>\\n                        {{guest}}, \\n                        {{frappe.format(rf_posting_date,{'fieldtype':'Date'})}}\\n                    </strong></td>\\n                </tr>\\n                {% for d in folio_transaction |selectattr(\\\"guest\\\", \\\"equalto\\\", guest)%}\\n                    {% if not d.parent_reference %}\\n                    <tr>\\n                        <td style=\\\"white-space: nowrap;\\\">{{d.folio_transaction}}</td>\\n                        <td style=\\\"white-space: nowrap;\\\">{{frappe.format(d.ft_posting_date,{'fieldtype':'Date'})}}</td>\\n                        <td>{{d.room_number}}</td>\\n                        <td >{{d.account_name}}</td>\\n                        <td>\\n                            {% if d.allow_enter_quantity%}\\n                            {{d.quantity or ''}}\\n                            {% else %}\\n                            {% endif %}\\n                        </td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">{{frappe.format(d.amount,{'fieldtype':'Currency'})}}</td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">{{frappe.format(d.discount_amount or 0,{'fieldtype':'Currency'})}}</td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">\\n                            {{frappe.format(d.total_tax or 0,{'fieldtype':'Currency'})}}\\n                        </td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">\\n                            {{frappe.format(d.bank_fee_amount,{'fieldtype':'Currency'})}}{{'(' if d.bank_fee else ''}}{{d.bank_fee or ''}}{{' %)' if d.bank_fee else ''}}\\n                        </td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">\\n                            {{frappe.format(d.total_amount,{'fieldtype':'Currency'})}}\\n                        </td>\\n                        <td width=\\\"300px\\\">\\n                            {{d.note or ''}}\\n                        </td>\\n                    </tr>\\n                    {% endif %}\\n                {% endfor %}\\n            {% endfor %}\\n        {% endfor %}\\n    {% endfor %}\\n     <tr>\\n        <td colspan='3'></td>\\n        <td><strong>{{_(\\\"Total :\\\")}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>\\n            {% if folio_transaction.allow_enter_quantity %}\\n            {{folio_transaction|sum(attribute='quantity')}}\\n            {% else %}\\n            {% endif %}\\n        </strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(folio_transaction|sum(attribute='amount'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(folio_transaction|sum(attribute='discount_amount'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(folio_transaction|sum(attribute='total_tax'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(folio_transaction|sum(attribute='bank_fee_amount'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(folio_transaction|sum(attribute='total_amount'),{'fieldtype':'Currency'})}}</strong></td>\\n    </tr>\\n    {% endfor %}\\n    {% endif %}\\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size:16px;margin-top:10px\\\"><strong>\\n    {{_(\\\"Summary\\\")}}\\n</strong></div>\\n\\n<table style = \\\"justify-content: center;margin-top:10px\\\">\\n    <tr>\\n        <td width=\\\"65px\\\"></td>\\n        <td class=\\\"text-right total_debit\\\">\\n            Total Debit<br>\\n            <span>{{frappe.format(doc.total_debit,{'fieldtype':'Currency'})}}</span>\\n        </td>\\n        <td width=\\\"30px\\\"></td>\\n        <td class=\\\"text-right total_debit\\\">\\n            Total Credit<br>\\n            <span>{{frappe.format(doc.total_credit,{'fieldtype':'Currency'})}}</span>\\n        </td>\\n        <td width=\\\"30px\\\"></td>\\n        <td class=\\\"text-right balance\\\">\\n            Balance<br>\\n            <span>{{frappe.format(doc.balance,{'fieldtype':'Currency'})}}</span>\\n        </td>\\n        <td width=\\\"30px\\\"></td>\\n    </tr>\\n</table>\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_reservation_charge_summary\\\",reservation=doc.name) %}\\n<table class='report-list occupied-001' style='width:100%;font-size:12px;margin-top:10px'>\\n    <tr>\\n        <th>{{_(\\\"No.\\\")}}</th>\\n        <th>{{_(\\\"Description\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Amount\\\")}}</th>\\n    </tr>\\n    {% for d in data %}\\n    <tr>\\n        <td>{{loop.index}}</td>\\n        <td>{{d.account_category}}</td>\\n        <td class='text-right'>{{frappe.format(d.amount,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    {% endfor %}\\n</table>\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-28 14:25:40.516698",
  "module": "eDoor",
  "name": "Reservation Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: 1px!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.border{\r\n    border-bottom:solid 1px #000!important;\r\n    padding:0px!important;\r\n}\r\n\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n\r\n.print-format .table-bordered td, .print-format .table-bordered th{\r\n    border:0px solid #000!important;\r\n    padding:6px 10px!important;\r\n}\r\n.print-format .table-bordered {\r\n    border: 0!important;\r\n    margin-top: -5px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>Comfirmation Voucher</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px;margin-bottom: 15px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Comfirmation No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Reference No.\\\")}}</td>\\n        <td>: {{doc.reference_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone\\\")}}</td>\\n        <td>: {{doc.guest_phone_number or ''}}</td>\\n        <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n        <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Pax (A/C)\\\")}}</td>\\n        <td>: {{doc.adult}} / {{doc.child}}</td>\\n        <td>{{_(\\\"Room Nights\\\")}}</td>\\n        <td>: {{doc.room_nights}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n        <td></td>\\n        <td></td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_room_rate = frappe.db.sql(\\\"select \\n            rr.date, \\n            rr.room_number,\\n            rr.input_rate,\\n            rr.discount_amount,\\n            rr.total_tax,\\n            rr.total_rate,\\n            rr.rate_type,\\n            rr.rate,\\n            rr.room_type_alias\\n            from `tabReservation Stay` rs\\n        inner join \\n            `tabReservation Room Rate` rr \\n        on \\n            rs.name = rr.reservation_stay\\n        where \\n            rs.name = '{}'\\n\\\".format(doc.name),as_dict=1) %}\\n<table class=\\\"table report-list\\\" style = \\\"font-size:13px;word-break: break-all;white-space: nowrap;\\\">\\n    <tr>\\n        <th class=\\\"text-center\\\">{{_(\\\"No.\\\")}}</th>\\n        <th class=\\\"text-center\\\">{{_(\\\"Date\\\")}}</th>\\n        <th class=\\\"text-center\\\">{{_(\\\"Room\\\")}}</th>\\n        <th class=\\\"text-center\\\">{{_(\\\"Rate Type\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Rate\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Discount\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Tax\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Total Rate\\\")}}</th>\\n    </tr>\\n{% for rs in reservation_room_rate %}\\n    <tr>\\n        <td align=\\\"center\\\">{{loop.index}}</td>\\n        <td align=\\\"center\\\">{{frappe.format(rs.date,{'fieldtype':'Date'}) or ''}}</td>\\n        <td align=\\\"center\\\">{{rs.room_number or ''}} ({{rs.room_type_alias}})</td>\\n        <td align=\\\"center\\\">{{rs.rate_type or ''}}</td>\\n        <td align=\\\"right\\\">{{frappe.format(rs.rate,{'fieldtype':'Currency'})}}</td>\\n        <td align=\\\"right\\\">{{frappe.format(rs.discount_amount,{'fieldtype':'Currency'})}}</td>\\n        <td align=\\\"right\\\">{{frappe.format(rs.total_tax,{'fieldtype':'Currency'})}}</td>\\n        <td align=\\\"right\\\">{{frappe.format(rs.total_rate,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n{% endfor %}\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_room_rate = frappe.db.sql(\\\"select \\n                                    rr.date, \\n                                    rr.room_number,\\n                                    rr.input_rate,\\n                                    rr.discount_amount,\\n                                    rr.total_tax,\\n                                    rr.total_rate,\\n                                    rr.rate,\\n                                    rr.rate_type\\n                                    from `tabReservation Stay` rs\\n                                inner join \\n                                    `tabReservation Room Rate` rr \\n                                on \\n                                    rs.name = rr.reservation_stay\\n                                where \\n                                    rs.name = '{}'\\n                        \\\".format(doc.name),as_dict=1) %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <tr>\\n        <th colspan='2'>Summary</th>    \\n        \\n    </tr>\\n\\n        <tr>\\n            <td>{{_(\\\"Room Rate\\\")}}  </td>\\n            <td align=\\\"right\\\">{{frappe.format(reservation_room_rate | sum(attribute = 'rate'),{'fieldtype':'Currency'})}} </td>\\n        </tr>\\n        <tr>\\n            <td>{{_(\\\"Discount\\\")}}  </td>\\n            <td align=\\\"right\\\"> {{frappe.format(reservation_room_rate | sum(attribute = 'discount_amount'),{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        <tr>\\n            <td>{{_(\\\"Total Tax\\\")}}  </td>\\n            <td align=\\\"right\\\"> {{frappe.format(reservation_room_rate | sum(attribute = 'total_tax'),{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        <tr>\\n            <td>{{_(\\\"Total Room Rate\\\")}}  </td>\\n            <td align=\\\"right\\\"> {{frappe.format(reservation_room_rate | sum(attribute = 'total_rate'),{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set property = frappe.get_doc(\\\"Business Branch\\\", doc.property)%}\\n<h4>{{_(\\\"Cancellation Policy\\\")}}</h4>\\n<table style=\\\"width:100%\\\" class=\\\"table table-border\\\">\\n    <tr>\\n        <td>{{property.cancellation_policy or ''}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table style=\\\"width:100%;margin-top:50px\\\" >\\n  <tr>\\n      <td width=\\\"150\\\">{{_(\\\"Prepare By\\\")}} </td>\\n      <td class=\\\"border\\\">:</td>\\n      <td width=\\\"50px\\\"></td>\\n      <td width=\\\"150\\\">{{_(\\\"Guest's Sign\\\")}} </td>\\n      <td class=\\\"border\\\">:</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-22 11:44:10.049043",
  "module": "eDoor",
  "name": "eDoor Reservation Stay Confirmation Voucher",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Customer",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{% set guest_detail = frappe.db.sql(\\\"select * from `tabReservation Stay` \\nwhere guest = '{}'\\\".format(doc.name),as_dict=1)%}\\n\\n{% if (guest_detail|length) >0 %}\\n<table class=\\\"report-list w-100 \\\" style=\\\"white-space: nowrap;\\\">\\n    <tr>\\n        <td class=\\\"text-center\\\">{{_(\\\"No.\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Reservation #\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Stay #\\\")}}</td>\\n        <td>{{_(\\\"Ref. #\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Type\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Group Code\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Res Date\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Stay Date\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</td>\\n        <td>{{_(\\\"Rooms\\\")}}</td>\\n        <td>{{_(\\\"Guest\\\")}}</td>\\n        <td>{{_(\\\"Source\\\")}}</td>\\n        {% if can_view_rate==1%}\\n        <td class=\\\"text-end\\\">{{_(\\\"ADR\\\")}}</td>\\n        <td class=\\\"text-end\\\">{{_(\\\"Total Room Rate\\\")}}</td>\\n        {%endif%}\\n        <td class=\\\"text-center\\\">{{_(\\\"Status\\\")}}</td>\\n    </tr>\\n    {% for rs in guest_detail %}\\n    <tr>\\n        <td class=\\\"text-center\\\">{{loop.index}}</td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{rs.reservation}}', '*')\\\">{{rs.reservation}}</a></td>\\n        <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{rs.name}}', '*')\\\">{{rs.name}}</a></td>\\n        <td>{{rs.reference_number if rs.reference_number else \\\"\\\"}}</td>\\n        <td class=\\\"text-center\\\">{{rs.reservation_type}}</td>\\n        <td>{{rs.group_code}}</td>\\n        <td class=\\\"text-center\\\">{{frappe.format(rs.reservation_date,{'fieldtype':'Date'})}}</td>\\n        <td class=\\\"text-center\\\">{{frappe.format(rs.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(rs.departure_date,{'fieldtype':'Date'})}}</td>\\n        <td class=\\\"text-center\\\">{{rs.room_nights}}</td>\\n        <td>\\n            {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(rs.name),as_dict=1) %}\\n            {% if (rooms|length)>0 %}\\n                {% for room in rooms %}\\n                  <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{rs.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                {% endfor %}\\n            {% endif %}\\n        </td>\\n        <td>{{rs.guest_name}}</td>\\n        <td>{{rs.business_source}}</td>\\n        {% if can_view_rate==1%}\\n        <td class=\\\"text-end\\\">{{frappe.format(rs.adr,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(rs.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n        {%endif%}\\n        <td class=\\\"text-center\\\">\\n            <span class=\\\"rounded-pill py-1 px-2 text-white\\\" style=\\\"background:{{rs.status_color}}\\\" >{{rs.reservation_status}}</span>    \\n        </td>\\n    </tr>\\n    {% endfor %}\\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-26 15:15:11.078921",
  "module": "eDoor",
  "name": "eDoor Guest Stay History",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\n\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.total_debit{\n    padding:15px!important;\n    background-color:#f0f0f0!important;\n    border-color:#c4c4c4!important;\n    width:300px!important;\n    border:1px!important;\n    border-radius: 0.5rem!important;\n    height: 50px!important;\n    text-transform:uppercase!important;\n    color:#9e9e9e!important;\n    font-size:14px!important;\n}\n.balance{\n    padding:15px!important;\n    background-color:#f0f0f0!important;\n    border-color:#c4c4c4!important;\n    width:300px!important;\n    border:1px!important;\n    border-radius: 0.5rem!important;\n    height: 50px!important;\n    text-transform:uppercase!important;\n    color:#9e9e9e!important;\n    font-size:14px!important;\n}\nspan{\n    font-weight:600!important;\n    font-size:18px!important;\n    color:black!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\n    <h2>Reservation Stay Detail</h2>\\n    <h2>{{doc.name}}</h2>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Working Day Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set s = frappe.get_doc(\\\"Cashier Shift\\\",doc.cashier_shift) %}\\n\\n<div style=\\\"font-size:16px;margin-top:10px\\\"><strong>{{_(\\\"Working Day Information\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width: 100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='150px'>{{_(\\\"Working Day\\\")}}</td>\\n        <td width='160px'>: {{doc.working_day or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Working Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.working_date, {'fieldtype': 'Date'}) }}</td>\\n    </tr>\\n    <tr>\\n        <td width='150px'>{{_(\\\"Cashier Shift\\\")}}</td>\\n        <td width='160px'>: {{doc.cashier_shift or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Shift\\\")}}</td>\\n        <td width='160px'>: {{s.shift_name or ''}}</td>\\n\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Property\\\")}}</td>\\n        <td width='160px'>: {{doc.property or ''}}</td>\\n        \\n    </tr>    \\n\\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Guest Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size:16px;margin-top:10px\\\"><strong>{{_(\\\"Guest Information\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width: 100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='180px'>{{_(\\\"Guest\\\")}}</td>\\n        <td width='160px'>: {{doc.guest_name or ''}}</td>\\n    \\n        <td width='150px'>{{_(\\\"Nationality\\\")}}</td>\\n        <td width='160px'>: {{doc.nationality or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Phone\\\")}}</td>\\n        <td width='160px'>: {{doc.guest_phone_number or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Email\\\")}}</td>\\n        <td width='160px'>: {{doc.guest_email or ''}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Additional Guest Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if doc.additional_guests %}\\n<div style=\\\"font-size:16px;margin-top:10px\\\"><strong>{{_(\\\"Additional Guest Information\\\")}}</strong></div>\\n<table class=\\\"table report-list\\\" style = \\\"font-size:13px\\\">\\n    <tr>\\n        <th>{{_(\\\"No.\\\")}}</th>\\n       <th>{{_(\\\"Guest Name\\\")}}</th>\\n       <th>{{_(\\\"Phone\\\")}}</th>\\n       <th>{{_(\\\"Email\\\")}}</th>\\n    </tr>\\n    {% for g in doc.additional_guests %}\\n    <tr>\\n        <td>{{loop.index}}</td>\\n        <td>{{g.guest_name or ''}}</td>\\n        <td>{{ \\\"{} / {}\\\".format((g.phone_number_1|string),(g.phone_number_2|string))  if   g.phone_number_2 else g.phone_number_1 }}</td>\\n        <td>{{g.email_address or ''}}</td>\\n    </tr>\\n    {% endfor %}\\n</table>\\n{% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Stay Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size:16px;margin-top:10px\\\"><strong>{{_(\\\"Stay Information\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width:100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='180px'>{{_(\\\"Ref #\\\")}}</td>\\n        <td width='160px'>: {{doc.reference_number or ''}}</td>\\n\\n        <td width='150px'>{{_(\\\"Res #\\\")}}</td>\\n        <td width='160px'>: {{doc.reservation or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Stay #\\\")}}</td>\\n        <td width='160px'>: {{doc.name or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Res Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.reservation_date, {'fieldtype': 'Date'}) }}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Res Type\\\")}}</td>\\n        <td width='160px'>: {{doc.reservation_type or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Source\\\")}}</td>\\n        <td width='160px'>: {{doc.business_source or ''}} / {{doc.business_source_type}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Arrival Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.arrival_date, {'fieldtype': 'Date'}) }}</td>\\n\\n        <td width='150px'>{{_(\\\"Departure Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.departure_date, {'fieldtype': 'Date'}) }}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Status\\\")}}</td>\\n        <td width='160px'>: {{doc.reservation_status or ''}}</td>\\n    </tr>\\n</table>\\n\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Pickup and Drop Off Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if doc.require_pickup or doc.require_drop_off %}\\n    <div style=\\\"font-size:16px;margin-top:10px\\\"><strong>{{_(\\\"Pickup and Drop Off Information\\\")}}</strong></div>\\n{% endif %}\\n\\n{% if doc.require_pickup %}\\n<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Pickup\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width:100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='180px'>{{_(\\\"Pickup Driver\\\")}}</td>\\n        <td width='160px'>: {{doc.pickup_driver_name or ''}}</td>\\n   \\n        <td width='150px'>{{_(\\\"Phone\\\")}}</td>\\n        <td width='160px'>: {{doc.pickup_driver_phone_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Pickup Time\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.pickup_time, {'fieldtype': 'Time'}) }}</td>\\n    \\n        <td width='150px'>{{_(\\\"Flight Number\\\")}}</td>\\n        <td width='160px'>: {{doc.arrival_flight_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Pickup Location\\\")}}</td>\\n        <td width='160px'>: {{doc.pickup_location or ''}}</td>\\n\\n        <td width='150px'>{{_(\\\"Pickup Mode\\\")}}</td>\\n        <td width='160px'>: {{doc.arrival_mode or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Note\\\")}}</td>\\n        <td width='160px'>: {{doc.pickup_note or ''}}</td>\\n    </tr>\\n</table>\\n{% endif %}\\n\\n{% if doc.require_drop_off %}\\n<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Drop Off\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width:100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='180px'>{{_(\\\"Drop Off Driver\\\")}}</td>\\n        <td width='160px'>: {{doc.drop_off_driver_name or ''}}</td>\\n    \\n        <td width='150px'>{{_(\\\"Phone\\\")}}</td>\\n        <td width='160px'>: {{doc.drop_off_driver_phone_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Drop Off Time\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.drop_off_time, {'fieldtype': 'Time'}) }}</td>\\n    \\n        <td width='150px'>{{_(\\\"Flight Number\\\")}}</td>\\n        <td width='160px'>: {{doc.departure_flight_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Drop Off Location\\\")}}</td>\\n        <td width='160px'>: {{doc.drop_off_location or ''}}</td>\\n   \\n        <td width='150px'>{{_(\\\"Drop Off Mode\\\")}}</td>\\n        <td width='160px'>: {{doc.departure_mode or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Note\\\")}}</td>\\n        <td width='160px'>: {{doc.drop_off_note or ''}}</td>\\n    </tr>\\n</table>\\n{% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<div style=\\\"font-size:16px;margin-top:10px\\\"><strong>{{_(\\\"Room Rate\\\")}}</strong></div>\\n<table class=\\\"table report-list\\\" style = \\\"font-size:12px;word-break: break-all;white-space: nowrap;\\\">\\n    <tr>\\n        <th>{{_(\\\"No.\\\")}}</th>\\n        <th class=\\\"text-center\\\">{{_(\\\"Room (s)\\\")}}</th>\\n        <th class=\\\"text-center\\\">{{_(\\\"Stay Date\\\")}}</th>\\n        <th class=\\\"text-center\\\">{{_(\\\"Room Night\\\")}}</th>\\n        <th>{{_(\\\"Rate Type\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Rate\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Discount\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Tax\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Total Rate\\\")}}</th>\\n    </tr>\\n    {% for r in doc.stays %}\\n    <tr>\\n        <td>{{loop.index}}</td>\\n        <td class=\\\"text-center\\\">{{r.room_type_alias}}{{'/' if r.room_number else ''}}{{r.room_number}}</td>\\n        <td class=\\\"text-center\\\">{{ frappe.format(r.start_date, {'fieldtype': 'Date'}) }}-{{ frappe.format(r.end_date, {'fieldtype': 'Date'}) }}</td>\\n        <td class=\\\"text-center\\\">{{r.room_nights}}</td>\\n        <td>{{r.rate_type}}</td>\\n        <td class=\\\"text-right\\\">{{ frappe.format(r.input_rate, {'fieldtype': 'Currency'}) }}</td>\\n        <td class=\\\"text-right\\\">{{ frappe.format(r.discount_amount, {'fieldtype': 'Currency'}) }}</td>\\n        <td class=\\\"text-right\\\">{{ frappe.format(r.total_tax, {'fieldtype': 'Currency'}) }}</td>\\n        <td class=\\\"text-right\\\">{{ frappe.format(r.total_rate, {'fieldtype': 'Currency'}) }}</td>\\n    </tr>\\n    {% endfor %}\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table class=\\\"table report-list\\\" style = \\\"font-size:13px\\\">\\n    <tr>\\n        <td><strong>{{_(\\\"Total Room Rate\\\")}}</strong></td>\\n        <td class=\\\"text-right\\\">: {{frappe.format(doc.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    <tr>\\n        <td><strong>{{_(\\\"Discount\\\")}}</strong></td>\\n        <td class=\\\"text-right\\\">: {{frappe.format(doc.room_rate_discount,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    <tr>\\n        <td><strong>{{_(\\\"Total Tax\\\")}}</strong></td>\\n        <td class=\\\"text-right\\\">: {{frappe.format(doc.total_room_rate_tax,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set folio_transaction = frappe.db.sql(\\\"\\n                    select \\n                            ft.transaction_number,\\n                            rs.name, \\n                            ft.reservation_stay,\\n                            if(ifnull(ft.parent_reference,'') = '',ft.name,ft.parent_reference) as folio_transaction,\\n                            ft.account_name,\\n                            ft.guest_name,\\n                            rf.guest_name as guest,\\n                            rf.name as folio_number,\\n                            rf.posting_date as rf_posting_date, \\n                            ft.posting_date as ft_posting_date,\\n                            ft.room_number,\\n                            ft.quantity,\\n                            ft.total_tax,\\n                            ft.bank_fee,\\n                            ft.amount,\\n                            ft.total_amount,\\n                            ft.discount_amount,\\n                            ft.note,\\n                            ac.allow_enter_quantity\\n                    from `tabReservation Stay` rs\\n                    inner join `tabFolio Transaction` ft on rs.name = ft.reservation_stay\\n                    inner join `tabReservation Folio` rf on ft.transaction_number = rf.name\\n                    inner join `tabAccount Code` ac on ft.account_code = ac.name\\n                    where \\n                            ft.transaction_type = 'Reservation Folio' and\\n                            rs.name = '{0}'\\n\\\".format(doc.name),as_dict=1)%}\\n\\n{% if folio_transaction %}\\n<div style=\\\"font-size:16px;margin-top:10px\\\"><strong>\\n    {{_(\\\"Folio Transaction\\\")}}\\n</strong></div>\\n<table class='report-list occupied-001' style='width:100%;font-size:12px;margin-bottom'>\\n    <tr>\\n        <th>{{_(\\\"Folio Tran.#\\\")}}</th>\\n        <th>{{_(\\\"Post Date\\\")}}</th>\\n        <th>{{_(\\\"Room\\\")}}</th>\\n        <th>{{_(\\\"Account Code\\\")}}</th>\\n        <th>{{_(\\\"QTY\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Amount\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Discount\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Tax\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Bank Fee\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Total Amount\\\")}}</th>\\n        <th></th>\\n        <th class='text-center'>{{_(\\\"Note\\\")}}</th>\\n    </tr>\\n     {% for folio_number in folio_transaction | map(attribute='folio_number') | unique  %}\\n        {% for rf_posting_date in folio_transaction |selectattr(\\\"folio_number\\\", \\\"equalto\\\", folio_number) |map(attribute='rf_posting_date') | unique  %}\\n            {% for guest in folio_transaction |selectattr(\\\"folio_number\\\", \\\"equalto\\\", folio_number) |map(attribute='guest') | unique  %}\\n                <tr>\\n                    <td style=\\\"white-space: nowrap;\\\"><strong>\\n                        {{folio_number}},\\n                        {{guest}}<br>\\n                        {{frappe.format(rf_posting_date,{'fieldtype':'Date'})}}\\n                    </strong></td>\\n                </tr>\\n                {% for d in folio_transaction |selectattr(\\\"guest\\\", \\\"equalto\\\", guest)%}\\n                    {% if not d.parent_reference %}\\n                    <tr>\\n                        <td style=\\\"white-space: nowrap;\\\">{{d.folio_transaction}}</td>\\n                        <td style=\\\"white-space: nowrap;\\\">{{frappe.format(d.ft_posting_date,{'fieldtype':'Date'})}}</td>\\n                        <td>{{d.room_number}}</td>\\n                        <td >{{d.account_name}}</td>\\n                        <td>\\n                            {% if d.allow_enter_quantity%}\\n                            {{d.quantity or ''}}\\n                            {% else %}\\n                            {% endif %}\\n                        </td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">{{frappe.format(d.amount,{'fieldtype':'Currency'})}}</td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">{{frappe.format(d.discount_amount or 0,{'fieldtype':'Currency'})}}</td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">\\n                            {{frappe.format(d.total_tax or 0,{'fieldtype':'Currency'})}}\\n                        </td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">\\n                            {{d.bank_fee or ''}}{{' %' if d.bank_fee else ''}}\\n                        </td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">\\n                            {{frappe.format(d.total_amount,{'fieldtype':'Currency'})}}\\n                        </td>\\n                        <td></td>\\n                        <td style=\\\"width:300px;\\\">\\n                            {{d.note or ''}}\\n                        </td>\\n                    </tr>\\n                    {% endif %}\\n                {% endfor %}\\n            {% endfor %}\\n        {% endfor %}\\n    {% endfor %}\\n    {% endif %}\\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size:16px;margin-top:10px\\\"><strong>\\n    {{_(\\\"Summary\\\")}}\\n</strong></div>\\n\\n    <table style = \\\"justify-content: center;margin-left:40px;margin-top:10px\\\">\\n    <tr>\\n        <td width=\\\"30px\\\"></td>\\n        <td class=\\\"text-right total_debit\\\">\\n            Total Debit<br>\\n            <span>{{frappe.format(doc.total_debit,{'fieldtype':'Currency'})}}</span>\\n        </td>\\n        <td width=\\\"30px\\\"></td>\\n        <td class=\\\"text-right total_debit\\\">\\n            Total Credit<br>\\n            <span>{{frappe.format(doc.total_credit,{'fieldtype':'Currency'})}}</span>\\n        </td>\\n        <td width=\\\"30px\\\"></td>\\n        <td class=\\\"text-right balance\\\">\\n            Balance<br>\\n            <span>{{frappe.format(doc.balance,{'fieldtype':'Currency'})}}</span>\\n        </td>\\n        <td width=\\\"50px\\\"></td>\\n    </tr>\\n</table>\\n\\n\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_reservation_charge_summary\\\",reservation_stay=doc.name) %}\\n<table class='report-list occupied-001' style='width:100%;font-size:12px;margin-top:10px'>\\n    <tr>\\n        <th>{{_(\\\"No.\\\")}}</th>\\n        <th>{{_(\\\"Description\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Amount\\\")}}</th>\\n    </tr>\\n    {% for d in data %}\\n    <tr>\\n        <td>{{loop.index}}</td>\\n        <td>{{d.account_category}}</td>\\n        <td class='text-right'>{{frappe.format(d.amount,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    {% endfor %}\\n</table>\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-28 14:25:57.683958",
  "module": "eDoor",
  "name": "Reservation Stay Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\r\\n{%\\r\\nset data = frappe.db.sql(\\\"\\r\\n    select \\r\\n        name,\\r\\n        reservation,\\r\\n        reservation_type,\\r\\n        guest,\\r\\n        guest_name, \\r\\n        business_source, \\r\\n        arrival_date, \\r\\n        departure_date,\\r\\n        reservation_status,\\r\\n        room_types,\\r\\n        room_type_alias,\\r\\n        status_color,\\r\\n        rooms,\\r\\n        room_nights,\\r\\n        adr,\\r\\n        total_room_rate,\\r\\n        cancelled_date,\\r\\n        cancelled_note,\\r\\n        cancelled_by\\r\\n    from `tabReservation Stay` \\r\\n    where \\r\\n        property= '{0}' and \\r\\n        reservation_status = 'Void' and \\r\\n        cancelled_date = '{1}'\\r\\n        \\\".format(\\r\\n            doc.name,\\r\\n            frappe.form_dict.get('date')\\r\\n        ),as_dict=1)\\r\\n%}\\r\\n\\r\\n<div>\\r\\n    <table class='report-list' style='width:100%'>\\r\\n        <tr>\\r\\n            <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" >Today Void</th>\\r\\n        </tr>\\r\\n        {% if (data|length) >0 %}\\r\\n        <tr class=\\\"font-widht-tr-header\\\" >\\r\\n            <td class=\\\"text-center\\\">No.</td>\\r\\n            <td class=\\\"text-center\\\">Reservation #</td>\\r\\n            <td class=\\\"text-center\\\">Stay #</td>\\r\\n            <td class=\\\"text-center\\\">Type</td>\\r\\n            <td class=\\\"text-center\\\">Stay Date</td>\\r\\n            <td class=\\\"text-center\\\">Nights</td>\\r\\n            <td>Room(s)</td>\\r\\n            <td>Guest</td>\\r\\n            {% if can_view_rate==1%}\\r\\n            <td class=\\\"text-end\\\">ADR</td>\\r\\n            <td class=\\\"text-end\\\">Total Room Rate</td>\\r\\n            {%endif%}\\r\\n            <td>Status</td>\\r\\n            <td >Void By</td>\\r\\n            <td >Void Date</td>\\r\\n            <td>Void Note</td>\\r\\n        </tr>\\r\\n        {%for d in data%}\\r\\n            <tr>\\r\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\r\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                <td>{{d.rooms}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.room_type_alias}}</td>\\r\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\r\\n                {% if can_view_rate==1%}\\r\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n                {%endif%}\\r\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\r\\n                 <td>{{d.cancelled_by}}</td>\\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.cancelled_date,{'fieldtype':'Date'})}}</td>\\r\\n                <td>{{d.cancelled_note}}</td>\\r\\n            </tr>\\r\\n        {%endfor%}\\r\\n        {% else %}\\r\\n    </table>\\r\\n</div>\\r\\n\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n<div class=\\\"isemtyIcon\\\"></div> \\r\\n<small class=\\\"text-emty\\\">No Data </small>\\r\\n</div>\\r\\n{% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_types,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        cancelled_by,\\n        cancelled_date,\\n        cancelled_note,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        reservation_status = 'Void' and \\n        arrival_date = '{1}'\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n\\n\\n<div>\\n    <table class='report-list' style='width:100%'>\\n        <tr>\\n            <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" >Void</th>\\n        </tr>\\n        {% if (data|length) >0 %}\\n        <tr class=\\\"font-widht-tr-header\\\" >\\n            <td class=\\\"text-center\\\">No.</td>\\n            <td class=\\\"text-center\\\">Reservation #</td>\\n            <td class=\\\"text-center\\\">Stay #</td>\\n            <td class=\\\"text-center\\\">Type</td>\\n            <td class=\\\"text-center\\\">Stay Date</td>\\n            <td class=\\\"text-center\\\">Nights</td>\\n            <td>Room(s)</td>\\n            <td>Guest</td>\\n            <td class=\\\"text-end\\\">ADR</td>\\n            <td class=\\\"text-end\\\">Total Room Rate</td>\\n            <td>Status</td>\\n            <td >Void By</td>\\n            <td >Void Date</td>\\n            <td>Void Note</td>\\n        </tr>\\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>{{d.rooms}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.room_type_alias}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                {% if can_view_rate==1%}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                 <td>{{d.cancelled_by}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.cancelled_date,{'fieldtype':'Date'})}}</td>\\n                <td>{{d.cancelled_note}}</td>\\n            </tr>\\n        {%endfor%}\\n        {% else %}\\n    </table>\\n</div>\\n\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-05 16:55:48.655490",
  "module": "eDoor",
  "name": "eDoor Void Reservation List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "table{\n        box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        status_color, \\n        room_types,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        cancelled_by,\\n        cancelled_note,\\n        cancelled_date\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        reservation_status = 'No Show' and \\n        cancelled_date = '{1}' \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n<div>\\n<table class='report-list mt-3' style='width:100%'>\\n    <tr>\\n        <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"18\\\" >Today No Show</th>\\n    </tr>\\n    {% if (data|length) > 0 %}\\n      <tr>\\n            <td class=\\\"text-center\\\">No</td>\\n            <td class=\\\"text-center\\\">Reservation #</td>\\n            <td class=\\\"text-center\\\">Stay #</td>\\n            <td class=\\\"text-center\\\">Type</td>\\n            <td class=\\\"text-center\\\">Stay Date</td>\\n            <td class=\\\"text-center\\\">Nights</td>\\n            <td>Room(s)</td>\\n            <td>Guest</td>\\n            {% if can_view_rate==1%}\\n            <td class=\\\"text-end\\\">ADR</td>\\n            <td class=\\\"text-end\\\">Total Room Rate</td>\\n            {%endif%}\\n            <td class=\\\"text-center\\\">Status</td>\\n            <td>No-Show By</td>\\n            <td class=\\\"text-center\\\">No Show Date</td>\\n            <td>No-Show Note</td>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation or ''}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name or ''}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>{{d.room_type_alias}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.rooms}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                {% if can_view_rate==1%}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status or ''}}</span></td>\\n                <td>{{d.cancelled_by or ''}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.cancelled_date,{'fieldtype':'Date'})}}</td>\\n                <td>{{d.cancelled_note or ''}}</td>\\n            </tr>\\n        {%endfor%}\\n        {%else%}\\n</table>\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        status_color, \\n        room_types,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        cancelled_by,\\n        cancelled_note,\\n        cancelled_date\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        reservation_status = 'No Show' and \\n        is_reserved_room = 1 and\\n        name in (\\n            select distinct reservation_stay from `tabRoom Occupy` \\n            where\\n                property= '{0}' and \\n                reservation_status = 'No Show' and\\n                is_active_reservation = 0 and \\n                date = '{1}'\\n        )\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n<div>\\n<table class='report-list' style='width:100%'>\\n    <tr>\\n        <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"18\\\" >No Show with Reserved Room</th>\\n    </tr>\\n    {% if (data|length) > 0 %}\\n        <tr>\\n            <td class=\\\"text-center\\\">No</td>\\n            <td class=\\\"text-center\\\">Reservation #</td>\\n            <td class=\\\"text-center\\\">Stay #</td>\\n            <td class=\\\"text-center\\\">Type</td>\\n            <td class=\\\"text-center\\\">Stay Date</td>\\n            <td class=\\\"text-center\\\">Nights</td>\\n            <td>Room(s)</td>\\n            <td>Guest</td>\\n            {% if can_view_rate==1%}\\n            <td class=\\\"text-end\\\">ADR</td>\\n            <td class=\\\"text-end\\\">Total Room Rate</td>\\n            {%endif%}\\n            <td class=\\\"text-center\\\">Status</td>\\n            <td>No-Show By</td>\\n            <td class=\\\"text-center\\\">No Show Date</td>\\n            <td>No-Show Note</td>\\n        </tr>\\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation or ''}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name or ''}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>{{d.room_type_alias}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.rooms}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                {% if can_view_rate==1%}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status or ''}}</span></td>\\n                <td>{{d.cancelled_by or ''}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.cancelled_date,{'fieldtype':'Date'})}}</td>\\n                <td>{{d.cancelled_note or ''}}</td>\\n            </tr>\\n        {%endfor%}\\n        {%else%}\\n     \\n</table>\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n</div>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-19 09:33:51.227438",
  "module": "eDoor",
  "name": "eDoor No Show Reservation List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".test{margin:10px}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Today Unassign Rooms\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and\\n        arrival_date = '{1}' and\\n        name in  (\\n                    SELECT \\n                        distinct  reservation_stay \\n                    FROM `tabTemp Room Occupy` \\n                    WHERE \\n                        `date` = '{1}' AND \\n                        property = '{0}' and \\n                        type='Reservation' and \\n                        ifnull(room_id,'') = ''\\n        ) and \\n        ifnull( keyword , '') like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and\\n        is_active_reservation = 1\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date') or '',\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n        ),as_dict=1)\\n%}\\n<div>\\n    <table class='report-list' style='width:100%'>\\n        <tr>\\n            <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" >Today Unassign Rooms</th>\\n        </tr>\\n        {% if (data|length) >0 %}\\n           <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Nights</th>\\n            <th class=\\\"text-center\\\">Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            {%if can_view_rate==1 %}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n        \\n               {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td align=\\\"center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td class=\\\"text-center\\\">\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n        {% else %}\\n    </table>\\n</div>\\n\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Future Unassign Rooms\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and\\n        \\n        arrival_date >= '{4}' and\\n        name in  (\\n                    SELECT \\n                        distinct  reservation_stay \\n                    FROM `tabTemp Room Occupy` \\n                    WHERE \\n                        `date` >= '{4}' and\\n                        property = '{0}' and \\n                        type='Reservation' and \\n                        ifnull(room_id,'') = ''\\n        ) and \\n        ifnull(keyword , '') like '%{1}%' and \\n        business_source = if('{2}'='', business_source,'{2}') and \\n        room_types like '%{3}%' and\\n        is_active_reservation=1\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('date'),\\n        ),as_dict=1)\\n%}\\n\\n\\n<div>\\n    <table class='report-list' style='width:100%'>\\n        <tr>\\n            <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" >Total Unassign Rooms</th>\\n        </tr>\\n        {% if (data|length) >0 %}\\n           <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Nights</th>\\n            <th class=\\\"text-center\\\">Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            {%if can_view_rate==1 %}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n               {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td align=\\\"center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td class=\\\"text-center\\\">\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n        {% else %}\\n    </table>\\n</div>\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-11 17:45:23.784054",
  "module": "eDoor",
  "name": "eDoor Unassign Room Reservation List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        \\n        name in (\\n            select \\n                reservation_stay \\n            from `tabRoom Occupy` \\n            where \\n                property = '{0}' and \\n                type='Reservation' and\\n                is_active = 1 and \\n                date = '{1}'\\n        ) and \\n        ifnull(keyword,'') like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status = if('{5}' = '', reservation_status, '{5}')\\n \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or ''\\n        ),as_dict=1)\\n%}\\n{% if (data|length)>0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\" align=\\\"center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\" align=\\\"center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\" align=\\\"center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td align=\\\"center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                   \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {% if can_view_rate==1%}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{%else%}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-12 11:27:31.393688",
  "module": "eDoor",
  "name": "eDoor Room Occupy List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival Remaining\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n\\n\\n{% if frappe.form_dict.get('action')=='view_arrival_remaining' %}\\n\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_date,\\n        reference_number,\\n        reservation_type,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        ifnull(keyword,'') like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status in ('Reserved','Confirmed')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or ''\\n        ),as_dict=1)\\n%}\\n\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            \\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n             {%endif%}\\n             <th class=\\\"text-center\\\">Status</th> \\n            \\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                    <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td> \\n                    <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                   \\n                {%endif%}\\n                 <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                \\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n\\n{% if frappe.form_dict.get('action')=='view_arrival' %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        name in (select reservation_stay from `tabRoom Occupy` where is_arrival=1 and is_active=1 and is_active_reservation = 1 and date = '{1}') and\\n        is_active_reservation = 1 and\\n        property= '{0}' and \\n        ifnull(keyword,'') like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status = if('{5}' = '', reservation_status, '{5}') \\n       \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n            frappe.form_dict.get('floor') or ''\\n            \\n        ),as_dict=1)\\n%}\\n\\n    {% if (data|length) >0 %}\\n\\n    <table class='report-list occupied-001' style='width:100%'>\\n     \\n            <tr>\\n                <th class=\\\"text-center\\\">No.</th>\\n                <th class=\\\"text-center\\\">Reservation #</th>\\n                <th class=\\\"text-center\\\">Stay #</th>\\n                <th>Ref. #</th>\\n                <th class=\\\"text-center\\\">Type</th>\\n                <th class=\\\"text-center\\\">Res. Date</th>\\n                \\n                <th class=\\\"text-center\\\">Stay Date</th>\\n                <th class=\\\"text-center\\\">Room Nights</th>\\n                <th>Room(s)</th>\\n                <th>Guest</th>\\n                <th>Source</th>\\n                {%if can_view_rate==1%}\\n                    <th class=\\\"text-end\\\">ADR</th>\\n                    <th class=\\\"text-end\\\">Total Room Rate</th>\\n                {%endif%}\\n                <th class=\\\"text-center\\\">Status</th>\\n            </tr>\\n      \\n            {%for d in data%}\\n                <tr>\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                    <td>{{d.reference_number or \\\"\\\"}}</td>\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                   \\n                    <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                    <td>\\n                        {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                        {% if (rooms|length)>0 %}\\n                            {% for room in rooms %}\\n                              <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                            {% endfor %}\\n                        {% endif %}\\n                    </td>\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                    <td>{{d.business_source}}</td>\\n                    {%if can_view_rate ==1  %}\\n                        <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                        <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                    {%endif%}\\n                    <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                </tr>\\n            {%endfor%}\\n         \\n    </table>\\n    {% else %}\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n        <div class=\\\"isemtyIcon\\\"></div> \\n        <small class=\\\"text-emty\\\">No Data </small>\\n    </div>\\n    {%endif%}\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-18 09:34:34.419883",
  "module": "eDoor",
  "name": "eDoor Dashboard Arrival Guest",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "table{\n        box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reference_number,\\n        reservation_date,\\n        reservation_type,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        status_color, \\n        room_type_alias,\\n        rooms,\\n        room_nights,\\n        pickup_time,\\n        arrival_mode,\\n        arrival_time,\\n        pickup_location,\\n        arrival_flight_number,\\n        pickup_driver_name,\\n        pickup_driver_phone_number,\\n        pickup_note\\n        \\n    from `tabReservation Stay` \\n    where\\n        property= '{0}' and \\n        is_active_reservation = 1 and \\n        require_pickup = 1 and \\n        arrival_date = '{1}' and \\n        ifnull(keyword,'') like '%{2}%' and \\n        ifnull(business_source,'') = if('{3}'='', ifnull(business_source,''),'{3}') and \\n        ifnull(room_types,'') like '%{4}%' and \\n        reservation_status = if('{5}' = '', reservation_status, '{5}') and \\n        ifnull(arrival_mode,'') = if('{6}' = '', ifnull(arrival_mode,''), '{6}')  and \\n        ifnull(pickup_location,'') = if('{7}' = '', ifnull(pickup_location,''), '{7}')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n            frappe.form_dict.get('transportation_mode') or '',\\n            frappe.form_dict.get('transportation_company') or ''\\n            \\n        ),as_dict=1)\\n%}\\n\\n<div>\\n<table class='report-list' style='width:100%'>\\n    <tr>\\n        <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" >Pickup Guest</th>\\n    </tr>\\n    {% if (data|length) > 0 %}\\n        <tr class=\\\"font-widht-tr-header\\\" >\\n            <td class=\\\"text-center\\\">No.</td>\\n            <td class=\\\"text-center\\\">Reservation #</td>\\n            <td class=\\\"text-center\\\">Stay #</td>\\n            <td class=\\\"text-center\\\">Ref. #</td>\\n            <td class=\\\"text-center\\\">Type</td>\\n            <td class=\\\"text-center\\\">Res. Date</td>\\n            <td class=\\\"text-center\\\">Stay Date</td>\\n            <td class=\\\"text-center\\\">Nights</td>\\n            <td>Room(s)</td>\\n            <td >Guest</td>\\n            <td>Source</td>\\n            <td>Arrival Mode</td>\\n            <td>Arrival #</td>\\n            <td class=\\\"text-center\\\">Pickup Time</td>\\n            <td>Pickup Driver</td>\\n            <td>Pickup Note</td>\\n            <td class=\\\"text-center\\\">Status</td>\\n        </tr>\\n\\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center p-0\\\"  ><a class=\\\"link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td align=\\\"center\\\">{{d.reference_number or ''}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>       \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias or '-'}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a  class=\\\"link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest or ''}} - {{d.guest_name or ''}}</a></td>\\n                <td>{{d.business_source or '-'}}</td>\\n                <td>{{d.arrival_mode or \\\"\\\"}} <div> {{ \\\" {}\\\".format(d.pickup_location) if d.pickup_location else '-' }}</div> </td>\\n                <td>{{d.arrival_flight_number or '-'}}</td>\\n                <td class=\\\"text-center\\\" >{{ frappe.utils.get_time(d.pickup_time).strftime('%I:%M %p') or '-'}}</td>\\n                <td>{{d.pickup_driver_name or \\\"\\\"}} {{\\\"<br> {}\\\".format(d.pickup_driver_phone_number) if d.pickup_driver_phone_number else \\\"\\\" }}</td>\\n                <td>{{(d.pickup_note or \\\"\\\")|truncate(50) or '-'}}</td>\\n                <td class=\\\"text-center\\\" >\\n                <span style=\\\"background: {{d.status_color}}\\\" class=\\\"text-center rounded-pill py-1 px-2 text-white\\\" > {{d.reservation_status}}</span>   \\n                </td>\\n            </tr>\\n        {%endfor%}\\n    {%else%} \\n</table>\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Pickup Guest</small>\\n</div>\\n{%endif%}\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reference_number,\\n        reservation_date,\\n        reservation_type,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        status_color, \\n        room_type_alias,\\n        rooms,\\n        room_nights,\\n        drop_off_time,\\n        departure_mode,\\n        drop_off_location,\\n        departure_flight_number,\\n        drop_off_driver_name,\\n        drop_off_driver_phone_number,\\n        drop_off_note\\n    from `tabReservation Stay` \\n    where\\n        property= '{0}' and \\n        is_active_reservation = 1 and  \\n        require_drop_off = 1 and \\n        if(is_early_checked_out=1,checked_out_system_date, departure_date) = '{1}' and \\n        ifnull(keyword,'') like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        ifnull(room_types,'') like '%{4}%' and \\n        reservation_status = if('{5}' = '', reservation_status, '{5}') and \\n        ifnull(departure_mode,'') = if('{6}' = '', ifnull(departure_mode,''), '{6}')  and \\n        ifnull(drop_off_location,'') = if('{7}' = '', ifnull(drop_off_location,''), '{7}') \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n            frappe.form_dict.get('transportation_mode') or '',\\n            frappe.form_dict.get('transportation_company') or ''\\n            \\n            \\n        ),as_dict=1)\\n%}\\n<table class='report-list mt-3' style='width:100%'>\\n     <tr>\\n        <th class=\\\"bg-header-table p-2 text-white fw-semibold\\\" colspan=\\\"18\\\" >Drop Off Guest</th>\\n    </tr>\\n    {% if (data|length) > 0 %}\\n        <tr class=\\\"font-widht-tr-header\\\">\\n            <td class=\\\"text-center\\\">No.</td>\\n            <td class=\\\"text-center\\\">Reservation #</td>\\n            <td class=\\\"text-center\\\">Stay #</td>\\n            <td class=\\\"text-center\\\">Ref. #</td>\\n            <td class=\\\"text-center\\\">Type</td>\\n            <td class=\\\"text-center\\\">Res. Date</td>\\n            <td class=\\\"text-center\\\">Stay Date</td>\\n            <td class=\\\"text-center\\\">Room Nights</td>\\n            <td>Room(s)</td>\\n            <td>Guest</td>\\n            <td>Source</td>\\n            <td>Departure Mode</td>\\n            <td class=\\\"text-center\\\">Departure #</td>\\n            <td class=\\\"text-center\\\">Drop off Time</td>\\n            <td>Drop off Driver</td>\\n            <td>Drop off Note</td>\\n            <td class=\\\"text-center\\\">Status</td>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                 <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or ''}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias or '-'}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a  class=\\\"link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest or ''}} - {{d.guest_name or ''}}</a></td>\\n                <td>{{d.business_source or '-'}}</td>\\n                <td>{{d.departure_mode or \\\"-\\\"}} <div> {{ \\\" {}\\\".format(d.drop_off_location) if d.drop_off_location else \\\"\\\" }}</div> </td>\\n                <td>{{d.departure_flight_number or '-'}}</td>\\n                <td class=\\\"text-center\\\">{{ frappe.utils.get_time(d.drop_off_time).strftime('%I:%M %p') or '-'}}</td>\\n                <td>{{d.drop_off_driver_name or \\\"-\\\"}} <div> {{\\\"{}\\\".format(d.pickup_driver_phone_number) if d.pickup_driver_phone_number else \\\"\\\" }}</div></td>\\n                <td>{{(d.drop_off_note or \\\"\\\")|truncate(50) or '-'}}</td>\\n                <td class=\\\"d-flex justify-content-center\\\">\\n                <span style=\\\"background:{{d.status_color}}\\\" class=\\\"text-center rounded-pill py-1 px-2 text-white\\\" >\\n                    {{d.reservation_status or ''}}\\n                </span>  \\n                    </td>\\n            </tr>\\n        {%endfor%}\\n     {%else%}\\n</table>\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Drop Off Guest</small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-15 09:14:55.379829",
  "module": "eDoor",
  "name": "eDoor Pickup and Drop Off Reservation List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set sql=\\\"\\\"\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_date,\\n        reference_number,\\n        reservation_type,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay`\\n    where \\n        property='{0}' and \\n        arrival_date>='{1}' and \\n        {2} = '{3}'  \\n\\\"\\\"\\\".format(\\n    doc.name,\\n    frappe.form_dict.get(\\\"date\\\") ,\\n    frappe.form_dict.get(\\\"fieldname\\\") ,\\n    frappe.form_dict.get(\\\"value\\\")\\n)\\n%}\\n\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            \\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n             {%endif%}\\n             <th class=\\\"text-center\\\">Status</th> \\n            \\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                    <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td> \\n                    <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                   \\n                {%endif%}\\n                 <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                \\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-28 14:26:37.385598",
  "module": "eDoor",
  "name": "eDoor Existed Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "table.tb-secd-stk {\n    border-collapse: collapse;\n    border: 1px solid rgba(204, 204, 204, 0.3);\n    width: 100%;\n}\ntable.tb-secd-stk tr td{\n    border-width: 1px !important;\n    border-style: solid;\n    padding: 0.5rem !important;\n}\ntable.tb-secd-stk tr td:first-child{\n    width: auto;\n    white-space: nowrap;\n    background: rgb(243, 243, 243);\n}\ntable.tb-secd-stk tr td:last-child{\n    width: 100%;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Source",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\n    <!--<h2>-->\\n    <!--    <small class=\\\"sub-heading\\\">{{doc.name}}</small>-->\\n    <!--</h2>-->\\n    \\n    <table class=\\\"tb-secd-stk table-print-format\\\" style=\\\"width:100%\\\">\\n        <tr>\\n            <td>Business Source Type</td>\\n            <td>{{doc.business_source_type}}</td>\\n        </tr>\\n        <tr>\\n            <td>Business Source</td>\\n            <td>{{doc.business_source}}</td>\\n        </tr>\\n        <tr>\\n            <td>Country</td>\\n            <td>{{doc.country or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>City</td>\\n            <td>{{doc.city or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Contact Name</td>\\n            <td>{{doc.contact_name or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Phone Number</td>\\n            <td>{{doc.phone_number or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Email</td>\\n            <td>{{doc.email or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Bank name</td>\\n            <td>{{doc.bank_name or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Credit Card Number</td>\\n            <td>{{doc.credit_card_number or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Card Holder Name</td>\\n            <td>{{doc.card_holder_name or \\\"\\\"}}</td>\\n        </tr>\\n    </table>\\n</div>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-22 10:26:12.846356",
  "module": "eDoor",
  "name": "eDoor Business Source Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\r\n*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.print-format .table-bordered {\r\n    border: 0!important;\r\n    margin-top: 10px!important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: 1px!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.border{\r\n    border-bottom:solid 1px #000!important;\r\n    padding:0px!important;\r\n    width:100px!important;\r\n}\r\n\r\n.print-format td, .print-format th{\r\n    padding: 7px 0px!important;\r\n}\r\n\r\n.print-format .table-bordered td, .print-format .table-bordered th{\r\n    border:1px solid #000!important;\r\n    padding:6px 10px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center><h1>Guest Registration Card</h1></center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_stay = frappe.db.sql(\\\"\\n                                select rs.rooms, \\n                                rs.room_types, \\n                                rs.arrival_date, \\n                                rs.departure_date, \\n                                rs.adult, \\n                                rs.child,\\n                                rs.room_nights, \\n                                rs.guest_name,\\n                                rs.name,\\n                                rs.business_source,\\n                                rs.reference_number\\n                            from  `tabReservation Stay` rs \\n                        where rs.name = '{0}'\\n                        \\n\\\".format(doc.name\\n        ),as_dict=1)%}\\n\\n<table style=\\\"width:100%\\\">\\n{% for rs in reservation_stay %}\\n    <tr>\\n        <td width=\\\"100px\\\">{{_(\\\"Reservation No.\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.name or ''}}</td>\\n        <td width=\\\"100px\\\">{{_(\\\"Check-in Date\\\")}}</td>\\n        <td class = \\\"border\\\">: {{frappe.format(rs.arrival_date,{'fieldtype':'Date'})}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"100px\\\">{{_(\\\"Reference No.\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.reference_number or ''}}</td>\\n        <td width=\\\"100px\\\">{{_(\\\"Check-out Date\\\")}}</td>\\n        <td class = \\\"border\\\">: {{frappe.format(rs.departure_date,{'fieldtype':'Date'})}}</td>\\n    </tr>\\n    \\n    <tr>\\n        <td width=\\\"100px\\\">{{_(\\\"Roon No.\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.rooms or ''}}</td>\\n        <td width=\\\"100px\\\">{{_(\\\"Room Nights\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.room_nights}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"100px\\\">{{_(\\\"Roon Type\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.room_types or ''}}</td>\\n        <td width=\\\"100px\\\">{{_(\\\"No of Person\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.adult or 0}} / {{rs.child or 0}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"100px\\\">{{_(\\\"Business Source\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.business_source or ''}}</td>\\n        <td></td>\\n        <td></td>\\n    </tr>\\n {% endfor %}   \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_stay = frappe.db.sql(\\\"\\n                                select rs.rooms, \\n                                rs.room_types, \\n                                rs.arrival_date, \\n                                rs.departure_date, \\n                                rs.adult, \\n                                rs.child,\\n                                rs.room_nights, \\n                                rs.name,\\n                                rs.reference_number\\n                            from `tabReservation Stay` rs\\n                            where rs.name = '{0}'\\n                        \\n                           \\n\\\".format(doc.name,\\n\\n        ),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered\\\" style=\\\"margin-top:150px\\\">\\n\\n{% set c = frappe.get_doc(\\\"Customer\\\",frappe.form_dict.get('customer')) %}\\n{% for rs in reservation_stay %}\\n    <tr>\\n        <td>{{_(\\\"Title:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Guest Name:\\\")}}</td>\\n        <td>{{c.customer_name_en or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Address:\\\")}}</td>\\n        <td>{{c.province or ''}} {{',' if c.country and c.province}} {{c.country or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"City:\\\")}}</td>\\n        <td>{{c.province or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"300px\\\">{{_(\\\"Country:\\\")}}</td>\\n        <td width=\\\"400px\\\">{{c.country or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Email:\\\")}}</td>\\n        <td>{{c.email_address or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Phone:\\\")}}</td>\\n        <td>{{c.phone_number or ''}} {{'/' if c.phone_number and c.phone_number_2}} {{c.phone_number_2 or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td colspan=\\\"2\\\"><strong>{{_(\\\"Identity Information\\\")}}</strong></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Type:\\\")}}</td>\\n        <td>{{c.identity_type or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Expired Date:\\\")}}</td>\\n        <td>{{ \\\"{}-{}\\\".format( (c.expired_date|string).split(\\\"-\\\")[1],(c.expired_date|string).split(\\\"-\\\")[0])  if   c.expired_date else \\\"\\\" }}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Number:\\\")}}</td>\\n        <td>{{c.id_card_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Country:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n{% endfor %}\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table style=\\\"width:100%;margin-top:20px\\\" >\\n  <tr>\\n      <td width=\\\"150\\\">{{_(\\\"Check-in By\\\")}} </td>\\n      <td class=\\\"border\\\">:</td>\\n      <td width=\\\"50px\\\"></td>\\n      <td width=\\\"150\\\">{{_(\\\"Guest's Sign\\\")}} </td>\\n      <td class=\\\"border\\\">:</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-10 17:06:49.376012",
  "module": "eDoor",
  "name": "eDoor Guest Registration Card",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".currency-balance-custom{\n    width: 100%;\n    margin-bottom: 1rem;\n    margin-top: 1rem;\n    gap: 1rem;\n    display: flex;\n}\n.shadow-charge-total{\n    box-shadow: rgba(255, 255, 255, 1) 0px 1px 0px 0px;\n    padding: 0.5rem;\n    flex-direction: column;\n    display: flex;\n    background-color: #ffffff;\n    border: 1px solid #e5e7eb;\n    border-radius: 0.5rem;\n    flex-grow: 1;\n    \n}\n.ttl{\n    font-size: 0.875rem;\n    text-transform: uppercase;\n    text-align: end;\n    color: #9E9E9E;\n}\n.value{\n    letter-spacing: -0.08rem;\n    line-height: 1.25 !important;\n    font-size: 1.25rem !important;\n    font-weight: 600 !important;\n    text-align: end;\n}\n.shadow-charge-total.green-edoor{\n    border: 1px solid #50ac58;\n    background-color: #f4fcf7;\n}\n.sp-wrapper{\n    white-space: nowrap;\n}\n.hder-bg{\n    background-color: rgb(226 232 240 / 1);\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Folio",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div>\\n    \\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"currency-balance-custom row px-3 gap-3 text-uppercase \\\">\\n    <div class=\\\"col d-flex flex-column p-2 shadow-charge-total rounded-3 text-end border\\\">\\n        <span class=\\\"ttl\\\">Total Debit</span> \\n        <span class=\\\"value fw-bolder fs-5\\\">\\n            <span>{{frappe.format_value(doc.total_debit,\\\"Currency\\\")}}</span>\\n        </span>\\n    </div>\\n    <div class=\\\"col d-flex flex-column px-2 p-2 shadow-charge-total rounded-3 text-end border\\\">\\n        <span class=\\\"ttl\\\">Total Credit</span>\\n        <span class=\\\"value fw-bolder fs-5\\\"><span>{{frappe.format_value(doc.total_credit,\\\"Currency\\\")}}</span></span>\\n    </div>\\n    <div style=\\\"background:#f4fcf7;\\\" class=\\\"col d-flex flex-column p-2  shadow-charge-total rounded-3 green-edoor text-end border\\\">\\n        <span class=\\\"ttl\\\">Balance</span>\\n        <span class=\\\"value fw-bolder fs-5\\\"><span>{{frappe.format_value(doc.balance,\\\"Currency\\\")}} </span></span>\\n    </div>\\n</div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n{%set stay = frappe.get_doc(\\\"Reservation Stay\\\", doc.reservation_stay)%}\\r\\n<div class=\\\"mt-3 row\\\">\\r\\n    <div class=\\\"col-6\\\">\\r\\n        <table class=\\\"table-print-format\\\" style=\\\"width:100%\\\">\\r\\n            <tr>\\r\\n                <td class=\\\"py-2 mt-1 border font-medium text-center hder-bg\\\" colspan=\\\"4\\\">Guest Detail</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Guest Name\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{doc.guest}} - {{doc.guest_name}}\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Nationality\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"country\\\")}}\\r\\n                </td>\\r\\n            </tr>\\r\\n            \\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Business Source\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{stay.business_source}}\\r\\n                </td>\\r\\n            </tr>\\r\\n            \\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Address\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"address\\\") or \\\"\\\"}}\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n    <div class=\\\"col-6\\\">\\r\\n        <table class=\\\"table-print-format\\\" style=\\\"width:100%\\\">\\r\\n            <tr>\\r\\n                <td class=\\\"py-2 mt-1 border font-medium text-center hder-bg\\\" colspan=\\\"4\\\">Folio Detail</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Folio Number\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{doc.name}}\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Rooms\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{doc.rooms}}\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Arrival\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{frappe.format_value(stay.arrival_date,\\\"Date\\\")}}\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Departure\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{frappe.format_value(stay.departure_date,\\\"Date\\\")}}\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Credit Debit Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if frappe.db.get_default(\\\"folio_transaction_style_credit_debit\\\")==\\\"1\\\"%}\\n{% endif %}\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.db.get_default(\\\"folio_transaction_style_credit_debit\\\")==\\\"0\\\"%}\\n\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-28 14:27:07.302484",
  "module": "eDoor",
  "name": "eDoor Folio Detail UI",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set sql = \\\"\\n    select \\n    *\\n    from `tabRoom` \\n    where \\n        property = '{0}' and \\n        room_number like '%{1}%' and \\n        building = if('{2}'='',building,'{2}') and \\n        floor = if('{3}'='',floor,'{3}') and \\n        room_type_group = if('{4}' = '',room_type_group,'{4}') and \\n        room_type = if('{5}'='',room_type,'{5}')    and \\n        housekeeping_status = if('{6}'='',housekeeping_status,'{6}')\\n    \\\".format(\\n        doc.name,\\n        frappe.form_dict.get(\\\"keyword\\\") or \\\"\\\",\\n        frappe.form_dict.get(\\\"building\\\") or \\\"\\\",\\n        frappe.form_dict.get(\\\"floor\\\") or \\\"\\\",\\n        frappe.form_dict.get(\\\"room_type_group\\\") or \\\"\\\",  \\n        frappe.form_dict.get(\\\"room_type\\\") or \\\"\\\"    ,\\n        frappe.form_dict.get(\\\"housekeeping_status\\\") or \\\"\\\"    \\n        \\n    )%}\\n{%\\n\\nset data = frappe.db.sql(sql,as_dict=1)\\n%}\\n\\n<table class='report-list' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Room #</th>\\n            <th>Room Type</th>\\n            <th>Room Type Group</th>\\n            <th class=\\\"text-center\\\">Building</th>\\n            <th class=\\\"text-center\\\">Floor</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Guest</th>\\n            <th>Housekeeper</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n             \\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n                <td align=\\\"center\\\">{{d.room_type}}</td>\\n                <td align=\\\"center\\\">{{d.room_type_group}}</td>\\n                <td class=\\\"text-center\\\">{{d.building}}</td>\\n                <td class=\\\"text-center\\\">{{d.floor}}</td>\\n                {% if d.reservation_stay %}\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay}}</a></td>\\n                {% else %}\\n                     <td class=\\\"text-center\\\"></td>\\n                {% endif %}\\n                {% if d.guest %}\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                {% else %}\\n                     <td class=\\\"text-center\\\"></td>\\n                {% endif %}\\n              \\n                <td>{{d.housekeeper or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">\\n                    <span class=\\\"text-center rounded-pill py-1 px-2 text-white\\\" style=\\\"background:{{d.status_color}}\\\"> {{d.housekeeping_status}}</span>\\n                   </td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-09 09:43:03.853380",
  "module": "eDoor",
  "name": "eDoor Room List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".header-name{\n    cursor: pointer;\n    padding: .5rem;\n    font-size: 13px;\n    font-weight: 600 !important;\n    background-color: rgb(226 232 240);\n    color: #343a40;\n}\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Customer",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set sale = frappe.db.sql(\\\"select sp.product_name, sp.quantity, sp.price, sp.discount_amount, sp.amount, s.name from  `tabSale Product` sp\\ninner join `tabSale` s on s.name=sp.parent\\nwhere s.customer = '{}'\\\".format(doc.name),as_dict=1) %}\\n{%set main_currency = frappe.get_doc(\\\"Currency\\\",frappe.db.get_default(\\\"currency\\\"))%}\\n{%set second_currency = frappe.get_doc(\\\"Currency\\\",frappe.db.get_default(\\\"second_currency\\\"))%}\\n<div class=\\\"w-100\\\">\\n{% if sale %}\\n<!---->\\n<div class=\\\"mt-3\\\" style=\\\"margin-right:1rem;\\\">\\n  <div class=\\\"accordion\\\" id=\\\"accordionExample\\\">\\n      \\n    {% for name in sale | map(attribute='name') | unique %}\\n \\n\\n      <div class=\\\"accordion-item\\\">\\n        <h2 class=\\\"accordion-header\\\" id=\\\"heading{{ loop.index }}\\\">\\n          <button class=\\\"accordion-button {% if loop.first %} {% else %} collapsed {% endif %}\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#collapse{{ loop.index }}\\\">\\n                <div class=\\\"w-100 d-flex justify-content-between\\\">\\n                    <span><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_sale_detail|{{name}}', '*')\\\">{{ name }}</a></span>\\n                    <span class=\\\"me-5\\\"> Total Amount: {{ frappe.utils.fmt_money(sale|selectattr(\\\"name\\\", \\\"equalto\\\", name)|sum(attribute='amount'), currency=main_currency.name, precision=main_currency.custom_currency_precision) }} </span>\\n                </div>\\n          </button>\\n        </h2>\\n        <div id=\\\"collapse{{ loop.index }}\\\" class=\\\"accordion-collapse collapse{% if loop.first %} show {% endif %}\\\">\\n          <div class=\\\"accordion-body\\\">\\n            <table class=\\\"table\\\">\\n              <thead>\\n                <tr>\\n                  <th class=\\\"text-center\\\">{{ _(\\\"No.\\\") }}</th>\\n                  <th>{{ _(\\\"Product Name\\\") }}</th>\\n                  <th class=\\\"text-center\\\">{{ _(\\\"QTY\\\") }}</th>\\n                  <th class=\\\"text-end\\\">{{ _(\\\"Price\\\") }}</th>\\n                  <th class=\\\"text-end\\\">{{ _(\\\"Discount\\\") }}</th>\\n                  <th class=\\\"text-end\\\">{{ _(\\\"Amount\\\") }}</th>\\n                </tr>\\n              </thead>\\n              <tbody>\\n                {% for s in sale | selectattr(\\\"name\\\", \\\"equalto\\\", name) %}\\n                  <tr>\\n                    <td class=\\\"text-center\\\" >{{ loop.index }}</td>\\n                    <td>{{ s.product_name }}</td>\\n                    <td class=\\\"text-center\\\">{{ s.quantity }}</td>\\n                    <td align=\\\"right\\\">{{ frappe.utils.fmt_money(s.price, currency=main_currency.name, precision=main_currency.custom_currency_precision) }}</td>\\n                    <td align=\\\"right\\\">{{ frappe.utils.fmt_money(s.discount_amount, currency=main_currency.name, precision=main_currency.custom_currency_precision) }}</td>\\n                    <td align=\\\"right\\\">{{ frappe.utils.fmt_money(s.amount, currency=main_currency.name, precision=main_currency.custom_currency_precision) }}</td>\\n                  </tr>\\n                {% endfor %}\\n              </tbody>\\n            </table>\\n          </div>\\n        </div>\\n      </div>\\n    {% endfor %}\\n  </div>\\n</div>\\n<!---->\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n</div>\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-10 17:21:52.198508",
  "module": "eDoor",
  "name": "eDoor Guest POS/Misc. Sale",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Customer",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set note = frappe.db.sql(\\\"\\n    select \\n        n.name,\\n        n.content,\\n        n.creation,\\n        n.modified_by\\n    from `tabNote` n\\n    inner join `tabCustomer` c\\n    on c.name = n.customer \\n    where c.name = '{}'\\n    \\n\\\".format(doc.name), as_dict=1) %}\\n{% if (note|length) > 0 %}\\n<table>\\n    <tbody>\\n{% for n in note  %}\\n    <tr>\\n        <td>{{n.name}}</td>\\n        <td>{{n.modified_by}}</td>\\n        <td>{{ frappe.format(n.creation, {'fieldtype': 'Date'}) }}</td>\\n        <td>{{n.content}}</td>\\n    </tr>\\n{% endfor %}\\n</tbody>\\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-28 14:29:13.212405",
  "module": "eDoor",
  "name": "eDoor Guest Note",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".p.text-center.small.page-number.visible-pdf{\n    display:none;\n}\n.profile{\n   width: 100px !important;\n    height: 100px !important;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 10px;\n    overflow: hidden;\n    margin-top: 20px;\n    object-fit: cover;\n}\n.margin-right-1rem{\n    margin-right:0rem;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Customer",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"w-100 d-flex justify-content-center\\\">\\n    {% if doc.photo %}\\n        <img src=\\\"{{doc.photo}}\\\" class=\\\"img-thumbnail profile rounded-circle\\\" alt=\\\"profile\\\" width=\\\"100px\\\" height=\\\"100px\\\">\\n    {% else %}      \\n        <div class=\\\"profile bg-light rounded-circle\\\">\\n       <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" version=\\\"1.1\\\" id=\\\"Layer_1\\\" x=\\\"0px\\\" y=\\\"0px\\\" width=\\\"48px\\\" height=\\\"48px\\\" viewBox=\\\"0 0 48 48\\\" style=\\\"enable-background:new 0 0 48 48;\\\" xml:space=\\\"preserve\\\">\\n<style type=\\\"text/css\\\">\\n\\t.st0{fill:#495057;}\\n</style>\\n<g>\\n\\t<path class=\\\"st0\\\" d=\\\"M14.6,13.6c0,5.2,4.2,9.4,9.4,9.4s9.4-4.2,9.4-9.4S29.2,4.3,24,4.3l0,0C18.8,4.3,14.6,8.5,14.6,13.6z    M29.7,13.6c0,3.1-2.5,5.6-5.6,5.6c-3.1,0-5.6-2.5-5.6-5.6c0-3.1,2.5-5.6,5.6-5.6C27.1,8,29.6,10.5,29.7,13.6L29.7,13.6L29.7,13.6z   \\\"/>\\n\\t<path class=\\\"st0\\\" d=\\\"M32.5,41.8c1.6-0.7,3-1.7,4.3-2.8c1-0.8,1.3-2.2,0.7-3.3l-2.5-4.9c-0.7-1.4-2.1-2.2-3.6-2.2H16.5   c-1.5,0-2.9,0.9-3.6,2.2l-2.5,4.9c-0.5,1.1-0.2,2.5,0.7,3.3c1.8,1.5,3.9,2.7,6.1,3.5C22.2,44.4,27.7,44.1,32.5,41.8z\\\"/>\\n</g>\\n</svg>\\n        </div>\\n    {% endif %}\\n</div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row mt-4\\\">\\n    <div class=\\\"col-6\\\">\\n        \\n    <div class=\\\"bg-header-table text-center p-2 text-white \\\"> Guest </div>\\n        <table class=\\\"table-print-format\\\">\\n    <tr>\\n        <td width=\\\"130px\\\">{{_(\\\"Guest ID\\\")}}</td>\\n        <td>{{doc.name or ''}}</td>\\n    </tr>\\n{% if doc.customer_name_en %}\\n    <tr>\\n        <td>{{_(\\\"English Name\\\")}}</td>\\n        <td>{{doc.customer_name_en or ''}}</td>\\n    </tr>\\n{% endif %}\\n{% if doc.customer_name_kh %}\\n    <tr>\\n        <td>{{_(\\\"Khmer Name\\\")}}</td>\\n        <td>{{doc.customer_name_kh or ''}}</td>\\n    </tr>\\n{% endif %}\\n    <tr>\\n        <td>{{_(\\\"Gender\\\")}}</td>\\n        <td>{{doc.gender or ''}}</td>\\n    </tr>\\n     <tr>\\n        <td>{{_(\\\"Guest Group\\\")}}</td>\\n        <td>{{doc.customer_group or ''}}</td>\\n    </tr>\\n     <tr>\\n                <td>{{_(\\\"Company Name\\\")}}</td>\\n                <td>{{doc.company_name or ''}}</td>\\n            </tr>   \\n    <tr>\\n        <td>{{_(\\\"Date of Birth\\\")}}</td>\\n        <td>{{frappe.format(doc.date_of_birth,{'fieldtype':'Date'} or '')}}</td>\\n    </tr>\\n     <tr>\\n        <td>{{_(\\\"Nationality\\\")}}</td>\\n        <td>{{doc.country or ''}}</td>\\n    </tr>\\n    </table>\\n    </div>\\n    <div class=\\\"col-6\\\">\\n         <div class=\\\"bg-header-table text-center p-2 text-white\\\">Contact </div>\\n        <table class=\\\"table-print-format\\\">\\n            <tr>\\n        <td>{{_(\\\"Tel\\\")}}</td>\\n        <td>{{doc.phone_number or ''}}</td>\\n    </tr>\\n{% if doc.phone_number_2%}\\n    <tr>\\n        <td>{{_(\\\"Tel\\\")}}</td>\\n        <td>{{doc.phone_number_2 or ''}}</td>\\n    </tr>\\n{% endif %}\\n    <tr>\\n        <td>{{_(\\\"Email\\\")}}</td>\\n        <td>{{doc.email_address or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Address\\\")}}</td>\\n        <td>{{doc.province or ''}} {{',' if doc.country and doc.province}} {{doc.country or ''}}</td>\\n    </tr>\\n    </table>\\n    </div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row mt-4\\\">\\n    <div class=\\\"col-12\\\">\\n        <div class=\\\"bg-header-table text-center p-2 text-white \\\"> Identity </div>\\n        <table class=\\\"table-print-format\\\">\\n            <tr>\\n                <td width=\\\"130px\\\">{{_(\\\"Identity Type\\\")}}</td>\\n                <td>{{doc.identity_type or ''}}</td>\\n            </tr>\\n            <tr>\\n                <td>{{_(\\\"ID\\\")}}</td>\\n                <td>{{doc.id_card_number or ''}}</td>\\n            </tr>\\n            <tr>\\n                <td>{{_(\\\"Expired Date\\\")}}</td>\\n                <td>{{frappe.format(doc.expired_date,{'fieldtype':'Date'} or '')}}</td>\\n            </tr>\\n            {% if doc.market_segment %}\\n             <tr>\\n                <td>{{_(\\\"Market Segment\\\")}}</td>\\n                <td>{{doc.market_segment or ''}}</td>\\n            </tr>\\n            {% endif %}\\n        </table>\\n    </div>\\n</div>\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-10 17:04:40.417257",
  "module": "eDoor",
  "name": "eDoor Guest Detail General Information",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival Remaining\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('action')=='view_arrival_remaining' %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_date,\\n        reference_number,\\n        reservation_type,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        keyword like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status in ('Reserved','Confirmed')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or ''\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('action')=='view_arrival' %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        keyword like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status = if('{5}' = '', reservation_status, '{5}')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<div class=\\\"ms-info\\\">\\n    In here, include the list of <b>no shows</b>  and <b>cancellations</b>  on the current working day.\\n</div>\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-28 14:29:34.630757",
  "module": "eDoor",
  "name": "eDoor Dashboard Arrival Guest Custom",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"ms-info\\\">Total vacant rooms in this list might be difference from total vacant room in KPI. Because some reservations haven't assign room yet.</div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        *\\n    from `tabRoom` \\n    where \\n        property = '{0}' and \\n        name not in (\\n            select \\n                ifnull(room_id,'') \\n            from `tabRoom Occupy` \\n            where \\n                is_active = 1 and\\n                is_departure = 0 and\\n                `date` = '{1}' AND \\n                property = '{0}' and \\n                type in ('Reservation','Block') \\n        ) and \\n        concat(room_number,' ',ifnull(housekeeper,'')) like '%{2}%' and\\n        building = if('{3}'='',building, '{3}') and \\n        floor = if('{4}'='',floor, '{4}') and \\n        room_type = if('{5}'='',room_type, '{5}') and \\n        housekeeping_status = if('{6}'='',housekeeping_status, '{6}') \\n    \\n    \\\".format(\\n        doc.name,\\n        frappe.form_dict.get(\\\"date\\\"),\\n        frappe.form_dict.get(\\\"keyword\\\") or '',\\n        frappe.form_dict.get(\\\"building\\\")  or '',\\n        frappe.form_dict.get(\\\"floor\\\")  or '',\\n        frappe.form_dict.get(\\\"room_type\\\")  or '',\\n        frappe.form_dict.get(\\\"housekeeping_status\\\")  or ''\\n    ),as_dict=1)\\n%}\\n{% if (data|length)>0 %}\\n<table class='report-list' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Room #</th>\\n            <th>Room Type</th>\\n            <th class=\\\"text-center\\\">Building</th>\\n            <th class=\\\"text-center\\\">Floor</th>\\n          \\n            <th>Housekeeper</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\" align=\\\"center\\\">{{d.room_number}}</td>\\n                <td align=\\\"center\\\">{{d.room_type}}</td>\\n                <td class=\\\"text-center\\\" align=\\\"center\\\">{{d.building}}</td>\\n                <td class=\\\"text-center\\\" align=\\\"center\\\">{{d.floor}}</td>\\n               \\n              \\n                <td>{{d.housekeeper or \\\"\\\"}}</td>\\n                <td class=\\\"d-flex justify-content-center\\\" >\\n                    <span style=\\\"background:{{d.status_color}}\\\" class=\\\"text-center rounded-pill py-1 px-2 text-white\\\" >\\n                        {{d.housekeeping_status}}    \\n                    </span>\\n                </td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{%else%}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-16 09:57:32.045822",
  "module": "eDoor",
  "name": "eDoor Vacant Room",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 10px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: 1px!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.border{\r\n    border-bottom:solid 1px #000!important;\r\n    padding:0px!important;\r\n}\r\n\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n\r\n.print-format .table-bordered td, .print-format .table-bordered th{\r\n    border:1px solid #000!important;\r\n    padding:6px 10px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<hr/>\\n<center>\\n  <div style=\\\"margin-top:5px;font-size:16px;font-family:Khmer OS System\\\">\\n    <strong>\\u179c\\u17b7\\u1780\\u17d2\\u1780\\u1799\\u1794\\u178f\\u17d2\\u179a\\u17a2\\u17b6\\u1780\\u179a</strong><br>\\n    <strong>TAX INVOICE</strong>\\n  </div>  \\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<table style=\\\"width:100%;font-size:13px;font-family:Khmer OS System\\\">\\n    <tr>\\n        <td width=\\\"200px\\\">{{_(\\\"\\u17a2\\u178f\\u17b7\\u1790\\u17b7\\u1787\\u1793 / Customer:\\\")}}</td>\\n        <td>{{doc.guest_name or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>\\n            {{_(\\\"\\u1788\\u17d2\\u1798\\u17c4\\u17c7\\u179f\\u17a0\\u1782\\u17d2\\u179a\\u17b6\\u179f \\u17ac\\u17a2\\u178f\\u17b7\\u1790\\u17b7\\u1787\\u1793\\\")}}<br>\\n            {{_(\\\"Enterprise Name / Customer\\\")}}\\n        </td>\\n        <td>{{doc.business_source}}</td>\\n    </tr>\\n    <tr>\\n        <td>\\n            {{_(\\\"\\u17a2\\u17b6\\u179f\\u1799\\u178a\\u17d2\\u178b\\u17b6\\u1793\\\")}}<br>\\n            {{_(\\\"Address\\\")}}\\n        </td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>\\n            {{_(\\\"\\u1791\\u17bc\\u179a\\u179f\\u17d0\\u1796\\u17d2\\u1791\\u179b\\u17c1\\u1781\\\")}}<br>\\n            {{_(\\\"Telephone No\\\")}}\\n        </td>\\n        <td>{{doc.guest_phone_number}}</td>\\n    </tr>\\n    \\n</table>\\n\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<table style=\\\"margin-left:60px;width:100%;font-size:13px;font-family:Khmer OS System\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">\\n            {{_(\\\"\\u179b\\u17c1\\u1781\\u179a\\u17c0\\u1784\\u179c\\u17b7\\u1780\\u17d2\\u1780\\u1799\\u1794\\u178f\\u17d2\\u179a\\\")}}<br>\\n            {{_(\\\"Invoice No.\\\")}}\\n        </td>\\n        <td>{{frappe.form_dict.get(\\\"folio\\\") or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>\\n            {{_(\\\"\\u1780\\u17b6\\u179b\\u1794\\u179a\\u17b7\\u1785\\u17d2\\u1786\\u17c1\\u1791\\u17d6\\\")}}<br>\\n            {{_(\\\"Date\\\")}}\\n            </td>\\n        <td>{{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"font-size:13px;font-family:Khmer OS System\\\">\\n    <thead>\\n        <tr>\\n            <th class = \\\"text-center\\\">\\n                {{_(\\\"\\u179b.\\u179a\\\")}}<br>\\n                {{_(\\\"No.\\\")}}\\n            </th>\\n            <th class = \\\"text-center\\\">\\n                {{_(\\\"\\u1794\\u179a\\u17b7\\u1799\\u17b6\\u1799\\u1798\\u17bb\\u1781\\u1791\\u17c6\\u1793\\u17b7\\u1789 \\u17ac\\u179f\\u17c1\\u179c\\u17b6\\\")}}<br>\\n                {{_(\\\"Decription of Goods or Service\\\")}}\\n            </th>\\n            <th class = \\\"text-center\\\">\\n                {{_(\\\"\\u1794\\u179a\\u17b7\\u1798\\u17b6\\u178e\\\")}}<br>\\n                {{_(\\\"Quantity\\\")}}\\n            </th>\\n            <th class = \\\"text-center\\\">\\n                {{_(\\\"\\u1790\\u17d2\\u179b\\u17c3\\u17af\\u1780\\u178f\\u17b6\\\")}}<br>\\n                {{_(\\\"Unit Price\\\")}}\\n            </th>\\n            <th class = \\\"text-center\\\">\\n                {{_(\\\"\\u1790\\u17d2\\u179b\\u17c3\\u1791\\u17c6\\u1793\\u17b7\\u1789\\\")}}<br>\\n                {{_(\\\"Amount\\\")}}\\n            </th>\\n        </tr>\\n    </thead>\\n  \\n <tbody>\\n    {% for rs in doc.stays %}\\n    <tr>\\n        <td class = \\\"text-center\\\">{{loop.index}}</td> \\n        <td>{{_(\\\"Booking Reference : \\\")}} \\n        {{doc.reference_number or ''}} <br>\\n        {{_(\\\"Check-in : \\\")}} {{frappe.format(rs.arrival_date,{'fieldtype':'Date'}) or ''}}, \\n        {{_(\\\"Check-out : \\\")}} {{frappe.format(rs.departure_date,{'fieldtype':'Date'}) or ''}} <br>\\n        {{rs.room_type_alias or ''}}, \\n        x {{rs.room_nights or 0}} Nights\\n        </td>\\n        <td class = \\\"text-center\\\">{{rs.room_nights}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(rs.input_rate,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(rs.total_rate,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n{% endfor %}\\n </tbody>  \\n\\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% set grand_total = doc.room_rate_tax_2_amount + doc.total_room_rate + doc.room_rate_tax_3_amount + doc.room_rate_tax_1_amount%}\\n<table class=\\\"table report-list\\\"  style=\\\"font-size:13px;font-family:Khmer OS System\\\">\\n        <tr>\\n            <td width=\\\"200px\\\">{{_(\\\"\\u1794\\u1793\\u17d2\\u1791\\u1794\\u17cb\\u1782\\u17c1\\u1784 / Room Rate\\\")}}  </td>\\n            <td align=\\\"right\\\"> {{frappe.format(doc.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        {% if doc.room_rate_tax_2_amount > 0 %}\\n        <tr>\\n            <td>{{doc.tax_2_name}} {{doc.tax_2_rate}}%   </td>\\n            <td align=\\\"right\\\"> {{frappe.format(doc.room_rate_tax_2_amount,{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        <tr class=\\\"border\\\">\\n            <td>{{_(\\\"\\u178f\\u1798\\u17d2\\u179b\\u17c3\\u1794\\u1793\\u17d2\\u1791\\u1794\\u17cb\\u179a\\u17bd\\u1798\\u17a2\\u17b6\\u1780\\u179a\\u179b\\u17be\\u1780\\u17b6\\u179a\\u179f\\u17d2\\u1793\\u17b6\\u1780\\u17cb\\u1793\\u17c5 / Total Room Include AT\\\")}} </td>\\n            <td align=\\\"right\\\"> {{frappe.format(doc.room_rate_tax_2_amount + doc.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n            \\n        </tr>\\n        {% endif %}\\n        <tr>\\n            <td>{{_(\\\"\\u179f\\u179a\\u17bb\\u1794 / Total\\\")}}</td>\\n            <td align=\\\"right\\\"> {{frappe.format(doc.room_rate_tax_2_amount + doc.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        {% if doc.room_rate_tax_1_amount > 0 %}\\n        <tr class=\\\"border\\\">\\n            <td>{{_(\\\"\\u179f\\u17c1\\u179c\\u17b6\\u179b\\u17be\\u178f\\u1798\\u17d2\\u179b\\u17c3\\u1794\\u1793\\u17d2\\u1790\\u17c2\\u1798 / \\\")}}{{doc.tax_1_name}} {{doc.tax_1_rate}}%  </td>\\n            <td align=\\\"right\\\"> {{frappe.format(doc.room_rate_tax_1_amount,{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        {% endif %}\\n        {% if doc.room_rate_tax_3_amount > 0 %}\\n        <tr class=\\\"border\\\">\\n            <td>{{_(\\\"\\u17a2\\u17b6\\u1780\\u179a\\u179b\\u17be\\u178f\\u1798\\u17d2\\u179b\\u17c3\\u1794\\u1793\\u17d2\\u1790\\u17c2\\u1798 / \\\")}}{{doc.tax_3_name}} {{doc.tax_3_rate}}%   </td>\\n            <td align=\\\"right\\\"> {{frappe.format(doc.room_rate_tax_3_amount,{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        {% endif %}\\n        <tr class=\\\"border\\\">\\n            <td>{{_(\\\"\\u179f\\u179a\\u17bb\\u1794\\u179a\\u17bd\\u1798 / Grand Total\\\")}}   </td>\\n            <td align=\\\"right\\\"> {{frappe.format(grand_total,{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        <!--<tr class=\\\"border\\\">-->\\n        <!--    <td>{{_(\\\"Exchange Rate\\\")}}   </td>-->\\n        <!--    <td align=\\\"right\\\"> {{frappe.format(grand_total,{'fieldtype':'Currency'})}}</td>-->\\n        <!--</tr>-->\\n        <!--<tr class=\\\"border\\\">-->\\n        <!--    <td>{{_(\\\"Grand Total with Riel\\\")}}   </td>-->\\n        <!--    <td align=\\\"right\\\"> {{frappe.format(grand_total,{'fieldtype':'Currency'})}}</td>-->\\n        <!--</tr>-->\\n        \\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table style=\\\"width:100%;margin-top:200px;font-size:13px;font-family:Khmer OS System\\\" >\\n    <tr>\\n       <td class=\\\"border\\\"></td>\\n       <td width=\\\"50px\\\"></td>\\n       <td class=\\\"border\\\"></td>\\n    </tr>\\n    <tr>\\n        <td class=\\\"text-center\\\"><strong>\\n            {{_(\\\"\\u17a0\\u178f\\u17d2\\u1790\\u179b\\u17c1\\u1781\\u17b6 \\u1793\\u17b7\\u1784\\u1788\\u17d2\\u1798\\u17c4\\u17c7\\u17a2\\u17d2\\u1793\\u1780\\u1791\\u17b7\\u1789\\\")}}<br>\\n            {{_(\\\"Customer's Signature & Name\\\")}}\\n        </strong></td>\\n        <td width=\\\"50px\\\"></td>\\n        <td class=\\\"text-center\\\"><strong>\\n            {{_(\\\"\\u17a0\\u178f\\u17d2\\u1790\\u179b\\u17c1\\u1781\\u17b6 \\u1793\\u17b7\\u1784\\u1788\\u17d2\\u1798\\u17c4\\u17c7\\u17a2\\u17d2\\u1793\\u1780\\u179b\\u1780\\u17cb\\\")}}<br>\\n            {{_(\\\"Seller's Signature & Name\\\")}}\\n        </strong></td>\\n    </tr>  \\n</table>\\n\\n<div style=\\\"margin-top:10px;font-family:Khmer OS System\\\">\\n    {{_(\\\"\\u179f\\u1798\\u17d2\\u1782\\u17b6\\u179b\\u17cb\\u17d6 \\u1785\\u17d2\\u1794\\u17b6\\u1794\\u17cb\\u178a\\u17be\\u1798\\u179f\\u1798\\u17d2\\u179a\\u17b6\\u1794\\u17cb\\u17a2\\u17d2\\u1793\\u1780\\u1791\\u17b7\\u1789 \\u1785\\u17d2\\u1794\\u17b6\\u1794\\u17cb\\u1785\\u1798\\u17d2\\u179b\\u1784\\u179f\\u1798\\u17d2\\u179a\\u17b6\\u1794\\u17cb\\u17a2\\u17d2\\u1793\\u1780\\u179b\\u1780\\u17cb\\u17d4\\\")}}<br>\\n    {{_(\\\"Note : Original Invoice for Customer, Copied Invoice for Seller.\\\")}}\\n</div>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-28 14:29:52.584220",
  "module": "eDoor",
  "name": "Folio Tax Invoice Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>Reservation Stay Folio Detail </div><br><small class=\\\"sub-heading\\\">{{ doc.name }}</small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"Folio: {{frappe.form_dict.get(\\\"folio\\\")}}\\n \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-28 14:29:58.268711",
  "module": "eDoor",
  "name": "Test Custom Reservation Report 2",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>Reservation Stay Folio Detail </div><br><small class=\\\"sub-heading\\\">{{ doc.name }}</small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"Folio: {{frappe.form_dict.get(\\\"folio\\\")}}\\n \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-28 14:30:03.152329",
  "module": "eDoor",
  "name": "Test Custom Reservation Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Customer",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set doc = frappe.db.sql(\\\"select * from `tabFile` where attached_to_name = '{}'\\\".format(doc.name), as_dict=1)%}\\n\\n{% for f in doc %}\\n<table>\\n    <tr>\\n        <td><img src={{f.file_url}} ></td>\\n    </tr>\\n</table>\\n{% endfor %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-28 14:30:07.782171",
  "module": "eDoor",
  "name": "eDoor Guest Document",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"\\r\\n<h2 class=\\\"text-center\\\">{{_(\\\"Arrival Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width: 100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n\\r\\n        <br>\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n        </td> \\r\\n        <td class=\\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            room_rate,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            total_room_rate ,\\r\\n            require_drop_off,\\r\\n            TIME_FORMAT(drop_off_time, '%H:%i %p') as drop_off_time,\\r\\n            departure_flight_number,\\r\\n            is_early_checked_out\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            name in (select reservation_stay from `tabRoom Occupy` where is_arrival = 1 and is_active = 1 and is_active_reservation and date between '{1}' and '{2}') and\\r\\n            property= '{0}' and  \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and\\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    \\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Ref #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-right\\\">ADR</th>\\r\\n                <th class=\\\"text-right\\\">Rate</th>\\r\\n                <th class=\\\"text-right\\\">Total Rate</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reference_number or ''}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.drop_off_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.departure_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td class=\\\"nowrap\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-right nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-right nowrap\\\">{{frappe.format(d.room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-right nowrap\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"nowrap\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-right break-all\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                    <td></td><td></td><td></td><td></td><td></td><td></td><td></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\" class=\\\"nowrap\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n                <td></td><td></td><td></td><td></td><td></td><td></td><td></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n    <br/>\\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2024-01-16 15:48:45.029840",
  "module": "eDoor",
  "name": "Front Desk Arrival Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 11:35:22.485698",
  "module": "eDoor",
  "name": "eDoor Config Room Assignment and Over Booking Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>FOLIO DETAIL BY RESERVATION</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"guest_name\", \"print_hide\": 0, \"label\": \"Guest Name\"}, {\"fieldname\": \"nationality\", \"print_hide\": 0, \"label\": \"Nationality\"}, {\"fieldname\": \"business_source\", \"print_hide\": 0, \"label\": \"Business Source\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Address\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t\\t{{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"address\\\") or \\\"\\\"}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rate_type\", \"print_hide\": 0, \"label\": \"Rate Type\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Reservation #\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t{{doc.name}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rooms\", \"print_hide\": 0, \"label\": \"Rooms\"}, {\"fieldname\": \"arrival_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check In\"}, {\"fieldname\": \"departure_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check Out\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n {% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\", transaction_type=\\\"Reservation Folio\\\" ,transaction_number=frappe.form_dict.get(\\\"folio\\\")) %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>    \\n        <th class='text-center'>Date</th>    \\n        {% if show_room_number=='1'%}\\n            <th class='text-center'>Room</th>    \\n        {%endif%}\\n        <th>Description</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Debit</th>    \\n        <th class='text-right'>Credit</th>    \\n        <th class='text-right'>Balance</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            <td class='text-center'>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            {% if show_room_number=='1'%}\\n                <td class='text-center'>{{d.room_number or \\\"\\\"}}</td>\\n            {%endif%}\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            \\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data |sum(attribute='quantity'),'Float')}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n\\n{%endif%}\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        room_number,\\n        account_code,\\n        account_code_sort_order,\\n        posting_date,\\n        report_description,\\n        report_quantity as quantity,\\n        (price  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',-1,1) as bank_fee_amount,\\n        (total_amount - bank_fee_amount) * if(type='Debit',1,-1)  as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{0}' and \\n        ifnull(parent_reference,'')=''\\n        \\n    order by \\n    posting_date,\\n    name\\n\\\"\\\"\\\".format(\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            <th class=\\\"text-center\\\">Date</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,'Date')}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' and transaction_type='Reservation Folio' group by account_category order by account_category_sort_order\\\".format(frappe.form_dict.get(\\\"folio\\\")),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>Summary</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-center\\\">{{frappe.format_value(d.quantity,\\\"Float\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n        \\n    </tbody>\\n   <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-12-08 11:35:21.328808",
  "module": "eDoor",
  "name": "eDoor Folio  Transaction Detail  by Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>INVOICE</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px; margin-bottom:4px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Folio No.\\\")}}</td>\\n        <td>: {{frappe.form_dict.get(\\\"folio\\\") or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n        <td>{{_(\\\"Date\\\")}}</td>\\n        <td>: {{ frappe.format_value(frappe.db.get_value(\\\"Reservation Folio\\\",frappe.form_dict.get(\\\"folio\\\"),\\\"posting_date\\\"),\\\"Date\\\")}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n        <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>\\n        <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.rooms or ''}}</td>\\n\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Credit Debit Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type='Reservation Folio', transaction_number=frappe.form_dict.get(\\\"folio\\\"),sort_by_field='account_category_sort_order',show_room_number=frappe.form_dict.get(\\\"show_room_number\\\"),show_account_code=frappe.form_dict.get(\\\"show_account_code\\\")) %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>  \\n            {%if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>    \\n            {%endif%}\\n            <th>Description</th>    \\n            <th class='text-center'>QTY</th>\\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            {%if show_room_number==\\\"1\\\" %}\\n                <td class='text-center'>{{d.room_number or ''}}</td>\\n            {%endif%}\\n            <td>{{d.description or ''}}</td>\\n            <td class='text-center'>{{ frappe.format_value(d.quantity,'Float') }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"{{ 3 if show_room_number=='1' else 2 }}\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                \\n                <td class=\\\"text-center\\\"><strong>\\n                    {{ frappe.format_value(data|sum(attribute='quantity'),'Float')}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        {0}\\n        account_code,\\n        report_description,\\n        sum(report_quantity) as quantity,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',-1,1)) as bank_fee_amount,\\n        sum((total_amount - bank_fee_amount) * if(type='Debit',1,-1) ) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{1}' and \\n        ifnull(parent_reference,'')=''\\n    group by \\n        {0}\\n        account_code,\\n        price,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1),\\n        report_description ,\\n        account_code_sort_order\\n        \\n    order by \\n    {0}\\n    account_code_sort_order\\n\\\"\\\"\\\".format(\\n        '' if frappe.form_dict.get(\\\"show_room_number\\\") ==\\\"0\\\" else \\\"room_number,\\\",\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{3 if show_room_number=='1' else 2}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data | sum(attribute='quantity'),\\\"Float\\\")}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order,sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' group by account_category order by account_category_sort_order\\\".format(frappe.form_dict.get(\\\"folio\\\")),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>{{_('Summary')}}</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n        <td class='text-center'>{{ frappe.format(d.quantity,'Float') }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n   \\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 11:35:20.842792",
  "module": "eDoor",
  "name": "eDoor Reservation Folio List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\r\n    .custom-counter {\r\n      counter-reset: section;\r\n    }\r\n    .custom-counter li::before {\r\n      counter-increment: step-counter;\r\n      content: counter(step-counter);\r\n      background: #000;\r\n    }\r\n     .custom-counter li{\r\n         background: #000;\r\n     }",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>Business Branch</div><br><small class=\\\"sub-heading\\\">{{ doc.name }}</small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"wrp-shortcut-key\\\"> \\r\\n<ul>\\r\\n    <li><span>Open global search</span> <kbd>Ctrl + k</kbd></li>\\r\\n    <hr class=\\\"hrme\\\">\\r\\n    <li><span>Create New FIT Reservation</span> <kbd>Ctrl + f</kbd></li>\\r\\n    <hr class=\\\"hrme\\\">\\r\\n</ul>\\r\\n</div>\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 11:35:19.956692",
  "module": "Configuration",
  "name": "eDoor Shortcut Menu Help",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Arrival Guest\\\")}}</h2>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            total_room_rate ,\\r\\n            pickup_time,\\r\\n            arrival_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date = '{1}' and \\r\\n            keyword like '%{2}%' and \\r\\n            business_source = if('{3}'='', business_source,'{3}') and \\r\\n            room_types like '%{4}%' and \\r\\n            is_active_reservation=1\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n     \\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Ref. #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-end\\\">ADR</th>\\r\\n                <th class=\\\"text-end\\\">Total Room Rate</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n            </tr>\\r\\n      \\r\\n            {%for d in data%}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.pickup_time}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.arrival_flight_number or \\\"\\\"}}</td>\\r\\n                    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n         \\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-12-08 11:35:22.691255",
  "module": "eDoor",
  "name": "Front Desk Arrival Guest Report Test",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>INVOICE</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px; margin-bottom:4px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Folio No.\\\")}}</td>\\n        <td>: {{frappe.form_dict.get(\\\"folio\\\") or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n        <td>{{_(\\\"Date\\\")}}</td>\\n        <td>: {{ frappe.format_value(frappe.db.get_value(\\\"Reservation Folio\\\",frappe.form_dict.get(\\\"folio\\\"),\\\"posting_date\\\"),\\\"Date\\\")}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n        <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>\\n        <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.rooms or ''}}</td>\\n\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Credit Debit Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type='Reservation Folio', transaction_number=frappe.form_dict.get(\\\"folio\\\"),sort_by_field='account_category_sort_order',show_room_number=frappe.form_dict.get(\\\"show_room_number\\\"),show_account_code=frappe.form_dict.get(\\\"show_account_code\\\")) %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>  \\n            {%if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>    \\n            {%endif%}\\n            <th>Description</th>    \\n            <th class='text-center'>QTY</th>\\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            {%if show_room_number==\\\"1\\\" %}\\n                <td class='text-center'>{{d.room_number or ''}}</td>\\n            {%endif%}\\n            <td>{{d.description or ''}}</td>\\n            <td class='text-center'>{{ frappe.format_value(d.quantity,'Float') }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"{{ 3 if show_room_number=='1' else 2 }}\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                \\n                <td class=\\\"text-center\\\"><strong>\\n                    {{ frappe.format_value(data|sum(attribute='quantity'),'Float')}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        {0}\\n        account_code,\\n        report_description,\\n        sum(report_quantity) as quantity,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',-1,1)) as bank_fee_amount,\\n        sum((total_amount - bank_fee_amount) * if(type='Debit',1,-1) ) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{1}' and \\n        ifnull(parent_reference,'')=''\\n    group by \\n        {0}\\n        account_code,\\n        price,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1),\\n        report_description ,\\n        account_code_sort_order\\n        \\n    order by \\n    {0}\\n    account_code_sort_order\\n\\\"\\\"\\\".format(\\n        '' if frappe.form_dict.get(\\\"show_room_number\\\") ==\\\"0\\\" else \\\"room_number,\\\",\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{3 if show_room_number=='1' else 2}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data | sum(attribute='quantity'),\\\"Float\\\")}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order,sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' group by account_category order by account_category_sort_order\\\".format(frappe.form_dict.get(\\\"folio\\\")),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>{{_('Summary')}}</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n        <td class='text-center'>{{ frappe.format(d.quantity,'Float') }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n   \\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 11:35:21.995401",
  "module": "eDoor",
  "name": "eDoor Reservation Stay Folio Summary Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>INVOICE</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"guest_name\", \"print_hide\": 0, \"label\": \"Guest Name\"}, {\"fieldname\": \"nationality\", \"print_hide\": 0, \"label\": \"Nationality\"}, {\"fieldname\": \"business_source\", \"print_hide\": 0, \"label\": \"Business Source\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Address\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t\\t{{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"address\\\") or \\\"\\\"}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rate_type\", \"print_hide\": 0, \"label\": \"Rate Type\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Folio #\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t{{frappe.form_dict.get(\\\"folio\\\")}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Date\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t{{frappe.format_value(frappe.db.get_value(\\\"Reservation Folio\\\",frappe.form_dict.get(\\\"folio\\\"),\\\"posting_date\\\"),\\\"Date\\\")}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rooms\", \"print_hide\": 0, \"label\": \"Rooms\"}, {\"fieldname\": \"arrival_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check In\"}, {\"fieldname\": \"departure_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check Out\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n {% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\", transaction_type=\\\"Reservation Folio\\\" ,transaction_number=frappe.form_dict.get(\\\"folio\\\")) %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>    \\n        <th class='text-center'>Date</th>    \\n        {% if show_room_number=='1'%}\\n            <th class='text-center'>Room</th>    \\n        {%endif%}\\n        <th>Description</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Debit</th>    \\n        <th class='text-right'>Credit</th>    \\n        <th class='text-right'>Balance</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            <td class='text-center'>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            {% if show_room_number=='1'%}\\n                <td class='text-center'>{{d.room_number or \\\"\\\"}}</td>\\n            {%endif%}\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            \\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data |sum(attribute='quantity'),'Float')}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n\\n{%endif%}\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        room_number,\\n        account_code,\\n        account_code_sort_order,\\n        posting_date,\\n        report_description,\\n        report_quantity as quantity,\\n        (price  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',-1,1) as bank_fee_amount,\\n        (total_amount - bank_fee_amount) * if(type='Debit',1,-1)  as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{0}' and \\n        ifnull(parent_reference,'')=''\\n        \\n    order by \\n    posting_date,\\n    name\\n\\\"\\\"\\\".format(\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            <th class=\\\"text-center\\\">Date</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,'Date')}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' and transaction_type='Reservation Folio' group by account_category order by account_category_sort_order\\\".format(frappe.form_dict.get(\\\"folio\\\")),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>Summary</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-center\\\">{{frappe.format_value(d.quantity,\\\"Float\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n        \\n    </tbody>\\n   <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-12-08 11:35:21.692381",
  "module": "eDoor",
  "name": "eDoor Reservation Stay Folio Detail Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div>\\t\\n   \\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Conflict Room\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\n                with a as (select \\n                                room_id,\\n                                date \\n                        from `tabTemp Room Occupy` \\n                        where \\n                                ifnull(room_id,'')!='' and \\n                                is_departure=0 and date>='{0}' and \\n                                type='Reservation' and \\n                                reservation_status!='Checked Out' \\n                        group by \\n                                date,\\n                                room_id \\n                        having count(room_id)>1)\\n                ,b as (select distinct \\n                                reservation_stay \\n                        from `tabTemp Room Occupy` \\n                        where \\n                                room_id in(select room_id from a) and \\n                                date in (select date from a))\\n                        select * from `tabReservation Stay` where name in (select reservation_stay from b)\\n\\\".format(doc.name,\\n        frappe.form_dict.get('date')\\n        ),as_dict=1)%}\\n\\n<div style=\\\"font-size:16px;margin-top:7px\\\"><strong>{{_(\\\"Conflict Room Assignment\\\")}}</strong></div>\\n {% if data %}\\n<table class='report-list occupied-001' style=\\\"width:100%;margin-top:7px;\\\">\\n        <tr>\\n            <th class=\\\"text-center\\\">{{_(\\\"No.\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Res #\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Stay #\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Type\\\")}}</th>\\n            <th>{{_(\\\"Res Date\\\")}}</th>\\n            <th>{{_(\\\"Arrival Date\\\")}}</th>\\n            <th>{{_(\\\"Departure Date\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Room Night\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Room\\\")}}</th>\\n            <th>{{_(\\\"Guest\\\")}}</th>\\n            <th>{{_(\\\"Source\\\")}}</th>\\n            <th class=\\\"text-end nowrap\\\">{{_(\\\"ADR\\\")}}</th>\\n            <th class=\\\"text-end nowrap\\\">{{_(\\\"Total Room Rate\\\")}}</th>\\n            <th class=\\\"text-end nowrap\\\">{{_(\\\"Status\\\")}}</th>\\n        </tr>\\n        {% for d in data  %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation or ''}}</a></td>\\n            <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name or ''}}</a></td>\\n            <td class=\\\"text-center\\\">{{d.reservation_type or ''}}</td>\\n            <td>{{frappe.format(d.reservation_date or '',{'fieldtype':'Date'})}}</td>\\n            <td> {{frappe.format(d.arrival_date or '',{'fieldtype':'Date'})}}</td>\\n            <td> {{frappe.format(d.departure_date or '',{'fieldtype':'Date'})}}</td>\\n            <td class=\\\"text-center\\\">{{d.room_nights or 0}}</td>\\n            <td class=\\\"text-center\\\">{{d.room_type_alias or ''}}/{{d.rooms or ''}}</td>\\n            <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name or ''}}</a></td>\\n            <td>{{d.business_source or ''}}</td>\\n            <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr or '',{'fieldtype':'Currency'})}}</td>\\n            <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_room_rate or '',{'fieldtype':'Currency'})}}</td>\\n            <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n        </tr>\\n        {% endfor %}\\n</table>\\n{% else %}\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n    </div>\\n    {% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Over Booking Reservation\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\r\\n                with a as (select \\r\\n                                room_type,\\r\\n                                room_type_id,\\r\\n                                count(name) as total_room \\r\\n                from `tabRoom` \\r\\n                group by room_type_id)\\r\\n                ,b as (select \\r\\n                                sum(type='Reservation') as total_booking, \\r\\n                                sum(type='Block') as total_block, \\r\\n                                room_type_id,date \\r\\n                from `tabTemp Room Occupy` \\r\\n                group by \\r\\n                                date,\\r\\n                                room_type_id)\\r\\n                select *, \\r\\n                                (b.total_booking-a.total_room) as total_over_booking,\\r\\n                                (a.total_room-b.total_block) as total_available \\r\\n                                \\r\\n                from a \\r\\n                inner join b on a.room_type_id = b.room_type_id \\r\\n                where \\r\\n                                b.total_booking > (a.total_room-b.total_block) \\r\\n                order by \\r\\n                                b.date,\\r\\n                                a.room_type\\r\\n\\r\\n\\\".format(doc.name\\r\\n        ),as_dict=1)%}\\r\\n        \\r\\n<div style = \\\"font-size:16px;margin-top:15px\\\"><strong>{{_(\\\"Over Booking Reservation\\\")}}</strong></div>\\r\\n\\r\\n{% if data %}\\r\\n<table class='report-list occupied-001' style=\\\"width:100%;margin-top:7px;\\\">\\r\\n    <tr>\\r\\n        <th class=\\\"text-center\\\">{{_(\\\"No.\\\")}}</th>\\r\\n        <th>{{_(\\\"Room Type\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Room\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Block\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Available\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Booking\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Over Booking\\\")}}</th>\\r\\n    </tr>\\r\\n    {% for date in data | map(attribute='date') | unique | list |sort %}\\r\\n    <tr>\\r\\n        <td><strong><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage({action:'view_property_data_sumary_by_date', date:'{{date}}'}, '*')\\\">{{frappe.format(date,{'fieldtype':'Date'})}}</a></strong></td>\\r\\n        <td></td>\\r\\n        <td></td>\\r\\n        <td></td>\\r\\n        <td></td><td></td>\\r\\n        <td></td>\\r\\n    </tr>\\r\\n        {% for d in data | selectattr('date', 'equalto', date) %}\\r\\n            <tr>\\r\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage({action:'view_property_data_sumary_by_date', date:'{{d.date}}',room_type_id:'{{d.room_type_id}}',room_type:'{{d.room_type}}'}, '*')\\\">{{d.room_type}}</a></td>\\r\\n                <td>{{d.total_room }}</td>\\r\\n                <td>{{d.total_block | round | int}}</td>\\r\\n                <td>{{d.total_available | round | int}}</td>\\r\\n                <td>{{d.total_booking | round | int}}</td>\\r\\n                <td>{{d.total_over_booking | round | int}}</td>\\r\\n            </tr>\\r\\n        {% endfor %}\\r\\n    {% endfor %}\\r\\n</table>\\r\\n{% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {% endif %}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 11:35:22.301195",
  "module": "eDoor",
  "name": "eDoor Conflict Room Assignment and Over Booking Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: 1px!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.border{\r\n    border-bottom:solid 1px #000!important;\r\n    padding:0px!important;\r\n}\r\n\r\n.print-format td, .print-format th{\r\n    padding: 7px 0px!important;\r\n}\r\n\r\n.print-format .table-bordered td, .print-format .table-bordered th{\r\n    border:1px solid #000!important;\r\n    padding:6px 10px!important;\r\n}\r\n.print-format .table-bordered {\r\n    border: 0!important;\r\n    margin-top: 10px!important;\r\n}\r\n\r\n.report-summary {\r\n    width: 500px;\r\n    background-color: red;\r\n    border-radius: var(--border-radius-md, 8px);\r\n    border-bottom: 1px solid var(--border-color);\r\n    margin: 1rem;\r\n    padding: 5px 5px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    align-items: center;\r\n   justify-content: center;\r\n    \r\n    display: -webkit-box; /* wkhtmltopdf uses this one */\r\n    -webkit-box-pack: center; /* wkhtmltopdf uses this one */\r\n    \r\n}\r\n\r\n\r\n\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center><h1>Guest Registration Card</h1></center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"report-summary\\\" style=\\\"\\\"><div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Room</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value red\\\">9</div>\\r\\n\\t\\t</div><div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Reservation</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value red\\\">3</div>\\r\\n\\t\\t</div><div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Room Nights</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value blue\\\">16</div>\\r\\n\\t\\t</div><div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Pax(A/C)</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value \\\">17/8</div>\\r\\n\\t\\t</div><div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Debit</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value red\\\">$ 566.98</div>\\r\\n\\t\\t</div><div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Credit</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value green\\\">$ 566.98</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Balance</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value blue\\\">$ 0.00</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Balance</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value blue\\\">$ 0.00</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Balance</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value blue\\\">$ 0.00</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Balance</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value blue\\\">$ 0.00</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Balance</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value blue\\\">$ 0.00</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Balance</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value blue\\\">$ 0.00</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Balance</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value blue\\\">$ 0.00</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Balance</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value blue\\\">$ 0.00</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"summary-item\\\">\\r\\n\\t\\t\\t<span class=\\\"summary-label\\\">Total Balance</span>\\r\\n\\t\\t\\t<div class=\\\"summary-value blue\\\">$ 0.00</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%\\\">\\n    <tr>\\n        <td width=\\\"150\\\">{{_(\\\"Reservation No.\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n        <td width=\\\"50px\\\"></td>\\n        <td width=\\\"150\\\">{{_(\\\"Check-in Date\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150\\\">{{_(\\\"Roon No.\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n        <td width=\\\"50px\\\"></td>\\n        <td width=\\\"150\\\">{{_(\\\"Check-out Date\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n    </tr>\\n    \\n    <tr>\\n        <td width=\\\"150\\\">{{_(\\\"Roon Type\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n        <td width=\\\"50px\\\"></td>\\n        <td width=\\\"150\\\">{{_(\\\"No of Person\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150\\\">{{_(\\\"Business Source\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n        <td width=\\\"50px\\\"></td>\\n        <td width=\\\"150\\\"></td>\\n        <td></td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table class=\\\"table table-bordered\\\" style=\\\"margin-top:50px\\\">\\n    <tr>\\n        <td>{{_(\\\"Title:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"First Name:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Last Name:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Address:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"City:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"300px\\\">{{_(\\\"Country:\\\")}}</td>\\n        <td width=\\\"400px\\\"></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Email:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Phone:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td colspan=\\\"2\\\">{{_(\\\"Identity Information\\\")}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Type:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Expired Date:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Number:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Country:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table style=\\\"width:100%;margin-top:100px\\\" >\\n  <tr>\\n      <td width=\\\"150\\\">{{_(\\\"Check-in By\\\")}} </td>\\n      <td class=\\\"border\\\">:</td>\\n      <td width=\\\"50px\\\"></td>\\n      <td width=\\\"150\\\">{{_(\\\"Guest's Sign\\\")}} </td>\\n      <td class=\\\"border\\\">:</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-20 12:22:34.624346",
  "module": "Configuration",
  "name": "eDoor Blank Guest Registration Card",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Deposit Ledger",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>DEPOSIT VOUCHER</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Deposit No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n        \\n              \\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone Number\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'phone_number') or ''}}</td>\\n          <td width=\\\"150px\\\">{{_(\\\"Deposit Date\\\")}}</td>\\n        <td>: {{frappe.format(doc.posting_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n        \\n\\n        \\n    </tr>\\n\\n    <tr>\\n         <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'country') or '' }}</td>\\n       \\n        \\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.room_number or ''}}</td>\\n    </tr>\\n  <tr>\\n      \\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'email_address') or ''}}</td>\\n       <td></td>\\n       <td></td>\\n  </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type=\\\"Deposit Ledger\\\", transaction_number=doc.name,sort_by_field='account_code_sort_order') %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td>{{d.description or ''}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"4\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n    \\n</table>\\n{%endif%}\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        account_code,\\n        room_number,\\n        account_name,\\n        sum(if(allow_enter_quantity=1,quantity,0)) as quantity,\\n        sum(price * if(type='Debit',1,-1)) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',1,-1)) as bank_fee_amount,\\n        sum(total_amount * if(type='Debit',1,-1)) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Deposit Ledger' and\\n        transaction_number = '{}'\\n    group by \\n        account_code,\\n        account_name ,\\n        room_number\\n    order by \\n    account_code_sort_order\\n\\\"\\\"\\\".format(doc.name)%}\\n\\n \\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{%set show_account_code = frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"show_account_code_in_folio_transaction\\\")%}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee> 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==1 else \\\"\\\"}}{{d.account_name or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{d.quantity}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 11:35:18.116199",
  "module": "eDoor",
  "name": "eDoor Deposit Ledger Invoice Summary",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Deposit Ledger",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>DEPOSIT VOUCHER</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Deposit No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n        \\n              \\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone Number\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'phone_number')}}</td>\\n          <td width=\\\"150px\\\">{{_(\\\"Deposit Date\\\")}}</td>\\n        <td>: {{frappe.format(doc.posting_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n\\n    </tr>\\n\\n    <tr>\\n         <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'country')}}</td>\\n       \\n        \\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.room_number or ''}}</td>\\n    </tr>\\n  <tr>\\n      \\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'email_address') or ''}}</td>\\n       <td></td>\\n       <td></td>\\n  </tr>\\n  </table>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\", transaction_type=\\\"Deposit Ledger\\\" ,transaction_number=doc.name) %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class=\\\"text-center\\\">No</th>    \\n        <th class=\\\"text-center\\\">Date</th>    \\n        <th>Description</th>    \\n        <th>Debit</th>    \\n        <th>Credit</th>    \\n        <th>Balance</th>    \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"5\\\">\\n                <strong>Balance</strong>\\n            </td>\\n            <td class=\\\"text-right\\\"><strong>\\n                {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n            </strong></td>\\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{% set sql=\\\"\\\"\\\"\\n    select \\n        allow_enter_quantity, \\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',1,-1) as bank_fee_amount,\\n        total_amount * if(type='Debit',1,-1) as total_amount, \\n        price * if(type='Debit',1,-1) as price, \\n        room_number,\\n        account_code,\\n        account_name, \\n        posting_date\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type='Deposit Ledger' and \\n        transaction_number='{}' and \\n        ifnull(parent_reference,'')=''\\n    \\\"\\\"\\\".format(doc.name) %}\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n\\n\\n{%set show_account_code = frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"show_account_code_in_folio_transaction\\\")%}\\n {% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class=\\\"text-center\\\">No</th>    \\n        <th class=\\\"text-center\\\">Date</th>       \\n        <th>Description</th>    \\n        <th>QTY</th>    \\n        <th class=\\\"text-right\\\">Rate</th>    \\n        <th class=\\\"text-right\\\">Dis.</th>    \\n        {% if total_tax> 0 %}\\n            <th class=\\\"text-right\\\">Tax</th>    \\n        {%endif%}\\n        \\n        {% if total_bank_fee> 0 %}\\n            <th class=\\\"text-right\\\">Bank Fee</th>    \\n        {%endif%}\\n        <th class=\\\"text-right\\\">Total Amt</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n       <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            <td>{{d.account_code + \\\"-\\\" if show_account_code==1 else \\\"\\\"}}{{d.account_name or \\\"\\\"}}</td>\\n            <td class='text-center'>{{d.quantity if d.allow_enter_quantity==1 else \\\"\\\"}}</td>\\n            <td class=\\\"text-right\\\" >{{frappe.format_value(d.price ,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n            \\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"3\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data |selectattr(\\\"allow_enter_quantity\\\",\\\"equalto\\\",1)|sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"show_summary\\\") or \\\"0\\\") ==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' group by account_category order by account_category_sort_order\\\".format(doc.name),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th colspan='2'>Summary</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td><strong>{{_(\\\"Balance\\\")}}</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount') or 0,\\\"Currency\\\") }}</strong></td>\\n        </tr>\\n        \\n        \\n    </tfoot>\\n   \\n</table>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-12-08 11:35:22.154592",
  "module": "eDoor",
  "name": "eDoor Deposit Ledger Invoice Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}\nh2{\n    font-size:16px !important;\n    margin-top: 10px !important;\n}\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"No Show, Cancel & Void Report\\\")}}</h2>\\r\\n{% set data = frappe.db.sql(\\\"\\r\\n            select parent_system_report\\r\\n            from \\r\\n                `tabSystem Report` \\r\\n            where \\r\\n                parent_system_report = 'Night Audit'\\\") %}\\r\\n<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if data %}\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Working Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Working Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n            {% endif %}\\r\\n             \\r\\n            {% else %}\\r\\n            \\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n            {% endif %}\\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Base on Transaction Date\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\n    set sql =\\\"\\\"\\\"\\n        select \\n            name,\\n            reservation,\\n            arrival_date,\\n            departure_date,\\n            room_nights,\\n            guest,\\n            guest_name,\\n            reservation_status,\\n            cancelled_note,\\n            business_source,\\n            room_nights,\\n            rooms,\\n            room_type_alias,\\n            reservation_type,\\n            reference_number,\\n            cancelled_by,\\n            cancelled_date,\\n            total_room_rate,\\n            adult,\\n            child,\\n            adr\\n        from `tabReservation Stay`\\n        where\\n            cancelled_date between '{0}' and '{1}' and \\n            property = '{2}' and \\n            reservation_status in ('No Show','Cancelled','Void') and \\n            reservation_type = if('{3}'='',reservation_type,'{3}') and\\n            business_source = if('{4}'='', business_source,'{4}')\\n    \\\"\\\"\\\".format(\\n        frappe.form_dict.get(\\\"start_date\\\"),\\n        frappe.form_dict.get(\\\"end_date\\\"),\\n        doc.name,\\n        frappe.form_dict.get(\\\"reservation_type\\\") or '',\\n        frappe.form_dict.get(\\\"business_source\\\") or '',\\n    )\\n    \\n%}\\n\\n{% set data = frappe.db.sql(sql,as_dict=1)%}\\n{% set reservation_status =  data|map(attribute='reservation_status')|unique|list %}\\n<h2 class=\\\"mt-3\\\" style=\\\"text-transform:capitalize !important;text-align:left !important\\\">Today No Show, Cancel & Void Reservation</h2>\\n\\n{% if data|length > 0 %}\\n<table class='report-list occupied-001' style=\\\"width:100%\\\">\\n    <thead>\\n        <tr>\\n             <th class=\\\"text-center\\\">No</th>\\n             <th>Reservation #</th> \\n             <th>Ref. #</th>\\n             <th class=\\\"text-center\\\">Type</th>\\n             <th class=\\\"text-center\\\">Stay Date</th>\\n             <th class=\\\"text-center\\\">Room Nights</th>\\n             <th>Room(s)</th>\\n             <th>Guest</th>\\n             <th>Source</th>\\n             <th class=\\\"text-right\\\">ADR</th>\\n             <th class=\\\"text-right\\\">Total Room Rate</th>\\n             <th>Status</th>\\n             <th>By</th>\\n             <th class=\\\"text-center\\\">Date</th>\\n             <th>Note</th> \\n             \\n        </tr>\\n        \\n    </thead>\\n    <tbody>\\n        {%for g in reservation_status%}\\n            <tr>\\n                <td colspan=\\\"6\\\"><b>{{g}}</b></td>\\n            </tr>\\n     \\n            {% for d in data|selectattr('reservation_status', 'equalto', g)|list %}\\n\\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\n                    <br/>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\n                </td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or ''}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{\\\"fieldtype\\\":\\\"Date\\\"})}} - {{frappe.format( d.departure_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td >{{d.room_type_alias}}/{{d.rooms or 'Unassign'}}</td>\\n                <td><a onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td>{{d.reservation_status}} </td>\\n                <td>{{d.cancelled_by}} </td>\\n                <td class=\\\"text-center\\\">{{d.cancelled_date}} </td>\\n                <td>{{d.cancelled_note or ''}} </td> \\n            </tr> \\n            {%endfor%} \\n         {%endfor%} \\n    </tbody> \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Base on Arrival Date\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\n    set sql =\\\"\\\"\\\"\\n        select \\n            name,\\n            reservation,\\n            cancelled_date,\\n            arrival_date,\\n            departure_date,\\n            room_nights,\\n            guest,\\n            guest_name,\\n            reservation_status,\\n            cancelled_note,\\n            business_source,\\n            room_nights,\\n            rooms,\\n            room_type_alias,\\n            reservation_type,\\n            reference_number,\\n            cancelled_by,\\n            cancelled_date,\\n            total_room_rate,\\n            adult,\\n            child,\\n            adr\\n        from `tabReservation Stay`\\n        where\\n            arrival_date between '{0}' and '{1}' and \\n            property = '{2}' and \\n            reservation_status in ('No Show','Cancelled','Void')\\n    \\\"\\\"\\\".format(\\n        frappe.form_dict.get(\\\"start_date\\\"),\\n        frappe.form_dict.get(\\\"end_date\\\"),\\n        doc.name\\n    )\\n    \\n%}\\n\\n{% set data = frappe.db.sql(sql,as_dict=1)%}\\n{% set reservation_status =  data|map(attribute='reservation_status')|unique|list %}\\n<h2 class=\\\"mt-3\\\" style=\\\"text-transform:capitalize !important;text-align:left !important\\\">No Show, Cancel & Void Reservation</h2>\\n\\n{% if data|length >0 %}\\n<table class='report-list occupied-001' style=\\\"width:100%\\\">\\n    <thead>\\n        <tr>\\n             <th class=\\\"text-center\\\">No</th>\\n             <th>Reservation #</th> \\n             <th>Ref. #</th>\\n             <th class=\\\"text-center\\\">Type</th>\\n             <th class=\\\"text-center\\\">Stay Date</th>\\n             <th class=\\\"text-center\\\">Room Nights</th>\\n             <th>Room(s)</th>\\n             <th>Guest</th>\\n             <th>Source</th>\\n             <th class=\\\"text-right\\\">ADR</th>\\n             <th class=\\\"text-right\\\">Total Room Rate</th>\\n             <th>Status</th>\\n             <th>By</th>\\n             <th class=\\\"text-center\\\">Date</th>\\n             <th>Note</th> \\n             \\n        </tr>\\n        \\n    </thead>\\n    \\n    <tbody> \\n        {%for g in reservation_status%}\\n            <tr>\\n                <td colspan=\\\"6\\\"><b>{{g}}</b></td>\\n            </tr>\\n     \\n            {% for d in data|selectattr('reservation_status', 'equalto', g)|list %} \\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\n                    <br/>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\n                </td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or ''}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{\\\"fieldtype\\\":\\\"Date\\\"})}} - {{frappe.format( d.departure_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td >{{d.room_type_alias}}/{{d.rooms or 'Unassign'}}</td>\\n                <td><a onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td>{{d.reservation_status}} </td>\\n                <td>{{d.cancelled_by}} </td>\\n                <td class=\\\"text-center\\\">{{d.cancelled_date}} </td>\\n                <td>{{d.cancelled_note or ''}} </td> \\n            </tr>\\n            \\n            {%endfor%}\\n        {%endfor%} \\n    </tbody> \\n</table> \\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\n    set sql =\\\"\\\"\\\"\\n        select \\n            name,\\n            reservation,\\n            cancelled_date,\\n            arrival_date,\\n            departure_date,\\n            room_nights,\\n            guest,\\n            guest_name,\\n            reservation_status,\\n            cancelled_note,\\n            business_source,\\n            room_nights,\\n            rooms,\\n            room_type_alias,\\n            reservation_type,\\n            reference_number,\\n            cancelled_by,\\n            cancelled_date,\\n            total_room_rate,\\n            adult,\\n            child,\\n            adr\\n        from `tabReservation Stay`\\n        where\\n            arrival_date <= '{0}' and \\n            departure_date > '{1}' and\\n            property = '{2}' and \\n            reservation_status = 'No Show'\\n    \\\"\\\"\\\".format(\\n        frappe.form_dict.get(\\\"start_date\\\"),\\n        frappe.form_dict.get(\\\"end_date\\\"),\\n        doc.name\\n    )\\n    \\n%}\\n\\n{% set data = frappe.db.sql(sql,as_dict=1)%}\\n{% set reservation_status =  data|map(attribute='reservation_status')|unique|list %}\\n<h2 style=\\\"text-transform:capitalize !important;text-align:left !important\\\">No Show(Reserved)</h2>\\n\\n{% if data|length >0 %}\\n<table class='report-list occupied-001' style=\\\"width:100%\\\">\\n    <thead>\\n        <tr>\\n             <th class=\\\"text-center\\\">No</th>\\n             <th>Reservation #</th> \\n             <th>Ref. #</th>\\n             <th class=\\\"text-center\\\">Type</th>\\n             <th class=\\\"text-center\\\">Stay Date</th>\\n             <th class=\\\"text-center\\\">Room Nights</th>\\n             <th>Room(s)</th>\\n             <th>Guest</th>\\n             <th>Source</th>\\n             <th class=\\\"text-right\\\">ADR</th>\\n             <th class=\\\"text-right\\\">Total Room Rate</th>\\n             <th>Status</th>\\n             <th>By</th>\\n             <th class=\\\"text-center\\\">Date</th>\\n             <th>Note</th> \\n             \\n        </tr>\\n        \\n    </thead>\\n    \\n    <tbody> \\n        {%for g in reservation_status%}\\n            <tr>\\n                <td colspan=\\\"6\\\"><b>{{g}}</b></td>\\n            </tr>\\n     \\n            {% for d in data|selectattr('reservation_status', 'equalto', g)|list %} \\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\n                    <br/>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\n                </td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or ''}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type or ''}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{\\\"fieldtype\\\":\\\"Date\\\"})}} - {{frappe.format( d.departure_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td >{{d.room_type_alias}}/{{d.rooms or 'Unassign'}}</td>\\n                <td><a onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td>{{d.reservation_status}} </td>\\n                <td>{{d.cancelled_by}} </td>\\n                <td class=\\\"text-center\\\">{{d.cancelled_date}} </td>\\n                <td>{{d.cancelled_note or ''}} </td> \\n            </tr>\\n            \\n            {%endfor%}\\n        {%endfor%} \\n    </tbody> \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-03 08:38:08.454672",
  "module": "eDoor",
  "name": "eDoor No Show Cancel Void Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Desk Folio",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>DESK FOLIO VOUCHER</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Deposit No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n        \\n              \\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone Number\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'phone_number')}}</td>\\n          <td width=\\\"150px\\\">{{_(\\\"Deposit Date\\\")}}</td>\\n        <td>: {{frappe.format(doc.posting_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n\\n    </tr>\\n\\n    <tr>\\n         <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'country')}}</td>\\n       \\n        \\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.room_number or ''}}</td>\\n    </tr>\\n  <tr>\\n      \\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'email_address') or ''}}</td>\\n       <td></td>\\n       <td></td>\\n  </tr>\\n  </table>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type='Desk Folio', transaction_number=doc.name,sort_by_field='account_code_sort_order') %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td>{{d.description or ''}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"4\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n    \\n</table>\\n{%endif%}\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        account_code,\\n        room_number,\\n        account_name,\\n        sum(if(allow_enter_quantity=1,quantity,0)) as quantity,\\n        sum(price * if(type='Debit',1,-1)) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',1,-1)) as bank_fee_amount,\\n        sum(total_amount * if(type='Debit',1,-1)) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Desk Folio' and\\n        transaction_number = '{}'\\n    group by \\n        account_code,\\n        account_name ,\\n        room_number\\n    order by \\n    account_code_sort_order\\n\\\"\\\"\\\".format(doc.name)%}\\n\\n \\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{%set show_account_code = frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"show_account_code_in_folio_transaction\\\")%}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee> 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==1 else \\\"\\\"}}{{d.account_name or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{d.quantity}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"show_summary\\\") or \\\"0\\\") ==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' group by account_category order by account_category_sort_order\\\".format(doc.name),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th colspan='2'>Summary</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n   \\n</table>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-12-08 11:34:57.627022",
  "module": "eDoor",
  "name": "eDoor Desk Folio Invoice Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Desk Folio",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>DESK FOLIO VOUCHER</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Desk No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n        \\n              \\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone Number\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'phone_number')}}</td>\\n          <td width=\\\"150px\\\">{{_(\\\"Deposit Date\\\")}}</td>\\n        <td>: {{frappe.format(doc.posting_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n        \\n\\n        \\n    </tr>\\n\\n    <tr>\\n         <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'country')}}</td>\\n       \\n        \\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.room_number or ''}}</td>\\n    </tr>\\n  <tr>\\n      \\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'email_address') or ''}}</td>\\n       <td></td>\\n       <td></td>\\n  </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\", transaction_type=\\\"Desk Folio\\\" ,transaction_number=doc.name) %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class=\\\"text-center\\\">No</th>    \\n        <th class=\\\"text-center\\\">Date</th>    \\n        <th>Description</th>    \\n        <th>Debit</th>    \\n        <th>Credit</th>    \\n        <th>Balance</th>    \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"5\\\">\\n                <strong>Balance</strong>\\n            </td>\\n            <td class=\\\"text-right\\\"><strong>\\n                {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n            </strong></td>\\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{% set sql=\\\"\\\"\\\"\\n    select \\n        allow_enter_quantity, \\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',1,-1) as bank_fee_amount,\\n        total_amount * if(type='Debit',1,-1) as total_amount, \\n        price * if(type='Debit',1,-1) as price, \\n        room_number,\\n        account_code,\\n        account_name, \\n        posting_date\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type='Desk Folio' and \\n        transaction_number='{}' and \\n        ifnull(parent_reference,'')=''\\n    \\\"\\\"\\\".format(doc.name) %}\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n\\n\\n{%set show_account_code = frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"show_account_code_in_folio_transaction\\\")%}\\n {% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class=\\\"text-center\\\">No</th>    \\n        <th class=\\\"text-center\\\">Date</th>       \\n        <th>Description</th>    \\n        <th class=\\\"text-center\\\">QTY</th>    \\n        <th class=\\\"text-right\\\">Rate</th>    \\n        <th class=\\\"text-right\\\">Dis.</th>    \\n        {% if total_tax> 0 %}\\n            <th class=\\\"text-right\\\">Tax</th>    \\n        {%endif%}\\n        \\n        {% if total_bank_fee> 0 %}\\n            <th class=\\\"text-right\\\">Bank Fee</th>    \\n        {%endif%}\\n        <th class=\\\"text-right\\\">Total Amt</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n       <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            <td>{{d.account_code + \\\"-\\\" if show_account_code==1 else \\\"\\\"}}{{d.account_name or \\\"\\\"}}</td>\\n            <td class='text-center'>{{d.quantity if d.allow_enter_quantity==1 else \\\"\\\"}}</td>\\n            <td class=\\\"text-right\\\" >{{frappe.format_value(d.price ,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n            \\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"3\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{data |selectattr(\\\"allow_enter_quantity\\\",\\\"equalto\\\",1)|sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 11:34:56.270250",
  "module": "eDoor",
  "name": "eDoor Desk Folio Invoice Summary",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>FOLIO SUMMARY</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px; margin-bottom:4px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Reservation Stay #\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n         <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n         <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n \\n      </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>        <td>{{_(\\\"Room\\\")}}</td>\\n                <td>: {{doc.rooms or ''}}</td>\\n         </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n       <td></td>\\n       <td></td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Credit Debit Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type='Reservation Folio', reservation_stay=doc.name,sort_by_field='account_category_sort_order',show_room_number=frappe.form_dict.get(\\\"show_room_number\\\"),show_account_code=frappe.form_dict.get(\\\"show_account_code\\\")) %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>  \\n            {%if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>    \\n            {%endif%}\\n            <th>Description</th>    \\n            <th class='text-center'>QTY</th>\\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            {%if show_room_number==\\\"1\\\" %}\\n                <td class='text-center'>{{d.room_number or ''}}</td>\\n            {%endif%}\\n            <td>{{d.description or ''}}</td>\\n            <td class='text-center'>{{ frappe.format_value(d.quantity,'Float') }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"{{ 3 if show_room_number=='1' else 2 }}\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                \\n                <td class=\\\"text-center\\\"><strong>\\n                    {{ frappe.format_value(data|sum(attribute='quantity'),'Float')}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        {0}\\n        account_code,\\n        report_description,\\n        sum(report_quantity) as quantity,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',-1,1)) as bank_fee_amount,\\n        sum((total_amount - bank_fee_amount) * if(type='Debit',1,-1) ) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{1}' and \\n        ifnull(parent_reference,'')=''\\n    group by \\n        {0}\\n        account_code,\\n        price,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1),\\n        report_description ,\\n        account_code_sort_order\\n        \\n    order by \\n    {0}\\n    account_code_sort_order\\n\\\"\\\"\\\".format(\\n        '' if frappe.form_dict.get(\\\"show_room_number\\\") ==\\\"0\\\" else \\\"room_number,\\\",\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{3 if show_room_number=='1' else 2}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data | sum(attribute='quantity'),\\\"Float\\\")}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n\\n{%set summary_data = frappe.db.sql(\\\"\\\"\\\"\\n    select \\n        account_category,\\n        account_category_sort_order,\\n        sum(report_quantity) as quantity, \\n        sum(amount * if(type='Debit',1,-1)) as amount \\n    from `tabFolio Transaction` \\n    where \\n        transaction_type='Reservation Folio' and \\n        reservation_stay ='{}'\\n    group by \\n        account_category \\n    order by \\n        account_category_sort_order\\n    \\\"\\\"\\\".format(\\n        doc.name\\n    ),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>{{_('Summary')}}</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n        <td class='text-center'>{{ frappe.format(d.quantity,'Float') }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n   \\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 11:35:21.837680",
  "module": "eDoor",
  "name": "eDoor Folio Transaction Summary by Reservation Stay",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>FOLIO SUMMARY</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px; margin-bottom:4px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Reservation #\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n         <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n         <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n \\n      </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>        <td>{{_(\\\"Room\\\")}}</td>\\n                <td>: {{doc.rooms or ''}}</td>\\n         </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n       <td></td>\\n       <td></td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Credit Debit Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type='Reservation Folio', reservation=doc.name,sort_by_field='account_category_sort_order',show_room_number=frappe.form_dict.get(\\\"show_room_number\\\"),show_account_code=frappe.form_dict.get(\\\"show_account_code\\\")) %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>  \\n            {%if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>    \\n            {%endif%}\\n            <th>Description</th>    \\n            <th class='text-center'>QTY</th>\\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            {%if show_room_number==\\\"1\\\" %}\\n                <td class='text-center'>{{d.room_number or ''}}</td>\\n            {%endif%}\\n            <td>{{d.description or ''}}</td>\\n            <td class='text-center'>{{ frappe.format_value(d.quantity,'Float') }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"{{ 3 if show_room_number=='1' else 2 }}\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                \\n                <td class=\\\"text-center\\\"><strong>\\n                    {{ frappe.format_value(data|sum(attribute='quantity'),'Float')}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        {0}\\n        account_code,\\n        report_description,\\n        sum(report_quantity) as quantity,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',-1,1)) as bank_fee_amount,\\n        sum((total_amount - bank_fee_amount) * if(type='Debit',1,-1) ) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        reservation = '{1}' and \\n        ifnull(parent_reference,'')=''\\n    group by \\n        {0}\\n        account_code,\\n        price,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1),\\n        report_description ,\\n        account_code_sort_order\\n        \\n    order by \\n    {0}\\n    account_code_sort_order\\n\\\"\\\"\\\".format(\\n        '' if frappe.form_dict.get(\\\"show_room_number\\\") ==\\\"0\\\" else \\\"room_number,\\\",\\n        doc.name\\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{3 if show_room_number=='1' else 2}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data | sum(attribute='quantity'),\\\"Float\\\")}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n\\n{%set summary_data = frappe.db.sql(\\\"\\\"\\\"\\n    select \\n        account_category,\\n        account_category_sort_order,\\n        sum(report_quantity) as quantity, \\n        sum(amount * if(type='Debit',1,-1)) as amount \\n    from `tabFolio Transaction` \\n    where \\n        transaction_type='Reservation Folio' and \\n        reservation ='{}'\\n    group by \\n        account_category \\n    order by \\n        account_category_sort_order\\n    \\\"\\\"\\\".format(\\n        doc.name\\n    ),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>{{_('Summary')}}</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n        <td class='text-center'>{{ frappe.format(d.quantity,'Float') }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n   \\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 11:35:21.542603",
  "module": "eDoor",
  "name": "eDoor Folio Transaction Summary by Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>FOLIO DETAIL BY RESERVATION</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"guest_name\", \"print_hide\": 0, \"label\": \"Guest Name\"}, {\"fieldname\": \"nationality\", \"print_hide\": 0, \"label\": \"Nationality\"}, {\"fieldname\": \"business_source\", \"print_hide\": 0, \"label\": \"Business Source\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Address\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t\\t{{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"address\\\") or \\\"\\\"}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rate_type\", \"print_hide\": 0, \"label\": \"Rate Type\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Reservation #\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t{{doc.name}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rooms\", \"print_hide\": 0, \"label\": \"Rooms\"}, {\"fieldname\": \"arrival_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check In\"}, {\"fieldname\": \"departure_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check Out\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n {% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\",reservation=doc.name,transaction_type='Reservation Folio') %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>    \\n        <th class='text-center'>Date</th>    \\n        {% if show_room_number=='1'%}\\n            <th class='text-center'>Room</th>    \\n        {%endif%}\\n        <th>Description</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Debit</th>    \\n        <th class='text-right'>Credit</th>    \\n        <th class='text-right'>Balance</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            <td class='text-center'>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            {% if show_room_number=='1'%}\\n                <td class='text-center'>{{d.room_number or \\\"\\\"}}</td>\\n            {%endif%}\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            \\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data |sum(attribute='quantity'),'Float')}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n\\n{%endif%}\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        room_number,\\n        account_code,\\n        account_code_sort_order,\\n        posting_date,\\n        report_description,\\n        report_quantity as quantity,\\n        (price  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',-1,1) as bank_fee_amount,\\n        (total_amount - bank_fee_amount) * if(type='Debit',1,-1)  as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        reservation = '{0}' and \\n        ifnull(parent_reference,'')=''\\n        \\n    order by \\n    posting_date,\\n    name\\n\\\"\\\"\\\".format(\\n        doc.name\\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            <th class=\\\"text-center\\\">Date</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,'Date')}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where reservation = '{}' and transaction_type='Reservation Folio' group by account_category order by account_category_sort_order\\\".format(doc.name),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>Summary</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-center\\\">{{frappe.format_value(d.quantity,\\\"Float\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n        \\n    </tbody>\\n   <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-12-08 11:35:21.179850",
  "module": "eDoor",
  "name": "eDoor Folio Transaction Detail by Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>FOLIO DETAIL BY RESERVATION</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"guest_name\", \"print_hide\": 0, \"label\": \"Guest Name\"}, {\"fieldname\": \"nationality\", \"print_hide\": 0, \"label\": \"Nationality\"}, {\"fieldname\": \"business_source\", \"print_hide\": 0, \"label\": \"Business Source\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Address\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t\\t{{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"address\\\") or \\\"\\\"}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rate_type\", \"print_hide\": 0, \"label\": \"Rate Type\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Reservation #\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t{{doc.name}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rooms\", \"print_hide\": 0, \"label\": \"Rooms\"}, {\"fieldname\": \"arrival_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check In\"}, {\"fieldname\": \"departure_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check Out\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n {% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\",reservation=doc.name,transaction_type='Reservation Folio') %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>    \\n        <th class='text-center'>Date</th>    \\n        {% if show_room_number=='1'%}\\n            <th class='text-center'>Room</th>    \\n        {%endif%}\\n        <th>Description</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Debit</th>    \\n        <th class='text-right'>Credit</th>    \\n        <th class='text-right'>Balance</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            <td class='text-center'>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            {% if show_room_number=='1'%}\\n                <td class='text-center'>{{d.room_number or \\\"\\\"}}</td>\\n            {%endif%}\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            \\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data |sum(attribute='quantity'),'Float')}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n\\n{%endif%}\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        room_number,\\n        account_code,\\n        account_code_sort_order,\\n        posting_date,\\n        report_description,\\n        report_quantity as quantity,\\n        (price  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',-1,1) as bank_fee_amount,\\n        (total_amount - bank_fee_amount) * if(type='Debit',1,-1)  as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        reservation = '{0}' and \\n        ifnull(parent_reference,'')=''\\n        \\n    order by \\n    posting_date,\\n    name\\n\\\"\\\"\\\".format(\\n        doc.name\\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            <th class=\\\"text-center\\\">Date</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,'Date')}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where reservation = '{}' and transaction_type='Reservation Folio' group by account_category order by account_category_sort_order\\\".format(doc.name),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>Summary</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-center\\\">{{frappe.format_value(d.quantity,\\\"Float\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n        \\n    </tbody>\\n   <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-12-08 11:35:21.019728",
  "module": "eDoor",
  "name": "eDoor Folio Transaction Detail by Reservation Stay",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>FOLIO LIST BY RESERVATION STAY</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px; margin-bottom:4px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Reservation #\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n         <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n       \\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n       <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>\\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.rooms or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n        <td></td>\\n        <td></td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set sql=\\\"\\n        select \\n            name,\\n            posting_date,\\n            guest_name,\\n            rooms,\\n            total_credit,\\n            total_debit,\\n            balance\\n        from `tabReservation Folio`\\n        where\\n            reservation_stay = '{}'\\n        \\\".format(doc.name)\\n%}\\n\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>\\n        <th class='text-center'>Folio #</th>\\n        <th class='text-center'>Date</th>\\n        <th>Guest</th>\\n        <th class='text-center'>Room</th>\\n        <th class='text-right'>Debit</th>\\n        <th class='text-right'>Credit</th>\\n        <th class='text-right'>Balance</th>\\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data%}\\n            <tr>\\n                <td class='text-center'>{{loop.index}}</td>\\n                <td class='text-center'>{{d.name}}</td>\\n                <td class='text-center'>{{frappe.format_value(d.posting_date,'Date')}}</td>\\n                <td>{{d.guest_name}}</td>\\n                <td class='text-center'>{{d.rooms}}</td>\\n                <td class='text-right'>{{frappe.format_value(d.total_debit,'Currency')}}</td>\\n                <td class='text-right'>{{frappe.format_value(d.total_credit,'Currency')}}</td>\\n                <td class='text-right'>{{frappe.format_value(d.balance,'Currency')}}</td>\\n            </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n            <tr>\\n                <td  colspan=\\\"5\\\"><strong>Total</strong></td>\\n                <td class='text-right'><strong>{{frappe.format_value(data|sum(attribute = ('total_debit')),'Currency')}}</strong></td>\\n                <td class='text-right'><strong>{{frappe.format_value(data|sum(attribute =('total_credit')),'Currency')}}</strong></td>\\n                <td class='text-right'><strong>{{frappe.format_value(data|sum(attribute = ('balance')),'Currency')}}</strong></td>\\n                \\n            </tr>\\n    </tfoot>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        {0}\\n        account_code,\\n        report_description,\\n        sum(report_quantity) as quantity,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',-1,1)) as bank_fee_amount,\\n        sum((total_amount - bank_fee_amount) * if(type='Debit',1,-1) ) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{1}' and \\n        ifnull(parent_reference,'')=''\\n    group by \\n        {0}\\n        account_code,\\n        price,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1),\\n        report_description ,\\n        account_code_sort_order\\n        \\n    order by \\n    {0}\\n    account_code_sort_order\\n\\\"\\\"\\\".format(\\n        '' if frappe.form_dict.get(\\\"show_room_number\\\") ==\\\"0\\\" else \\\"room_number,\\\",\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{3 if show_room_number=='1' else 2}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data | sum(attribute='quantity'),\\\"Float\\\")}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 11:35:20.653518",
  "module": "eDoor",
  "name": "eDoor Folio List by Reservation Stay",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>FOLIO LIST BY RESERVATION</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px; margin-bottom:4px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Reservation #\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n         <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n       \\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n       <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>\\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.room_numbers or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n        <td></td>\\n        <td></td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set sql=\\\"\\n        select \\n            name,\\n            reservation_stay,\\n            posting_date,\\n            guest_name,\\n            rooms,\\n            total_credit,\\n            total_debit,\\n            balance\\n        from `tabReservation Folio`\\n        where\\n            reservation = '{}'\\n        \\\".format(doc.name)\\n%}\\n\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>\\n        <th class='text-center'>Stay #</th>\\n        <th class='text-center'>Folio #</th>\\n        <th class='text-center'>Date</th>\\n        <th>Guest</th>\\n        <th class='text-center'>Room</th>\\n        <th class='text-right'>Debit</th>\\n        <th class='text-right'>Credit</th>\\n        <th class='text-right'>Balance</th>\\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data%}\\n            <tr>\\n                <td class='text-center'>{{loop.index}}</td>\\n                <td class='text-center'>{{d.reservation_stay}}</td>\\n                <td class='text-center'>{{d.name}}</td>\\n                <td class='text-center'>{{frappe.format_value(d.posting_date,'Date')}}</td>\\n                <td>{{d.guest_name}}</td>\\n                <td class='text-center'>{{d.rooms}}</td>\\n                <td class='text-right'>{{frappe.format_value(d.total_debit,'Currency')}}</td>\\n                <td class='text-right'>{{frappe.format_value(d.total_credit,'Currency')}}</td>\\n                <td class='text-right'>{{frappe.format_value(d.balance,'Currency')}}</td>\\n            </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n            <tr>\\n                <td  colspan=\\\"6\\\"><strong>Total</strong></td>\\n                <td class='text-right'><strong>{{frappe.format_value(data|sum(attribute = ('total_debit')),'Currency')}}</strong></td>\\n                <td class='text-right'><strong>{{frappe.format_value(data|sum(attribute =('total_credit')),'Currency')}}</strong></td>\\n                <td class='text-right'><strong>{{frappe.format_value(data|sum(attribute = ('balance')),'Currency')}}</strong></td>\\n                \\n            </tr>\\n    </tfoot>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        {0}\\n        account_code,\\n        report_description,\\n        sum(report_quantity) as quantity,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',-1,1)) as bank_fee_amount,\\n        sum((total_amount - bank_fee_amount) * if(type='Debit',1,-1) ) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{1}' and \\n        ifnull(parent_reference,'')=''\\n    group by \\n        {0}\\n        account_code,\\n        price,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1),\\n        report_description ,\\n        account_code_sort_order\\n        \\n    order by \\n    {0}\\n    account_code_sort_order\\n\\\"\\\"\\\".format(\\n        '' if frappe.form_dict.get(\\\"show_room_number\\\") ==\\\"0\\\" else \\\"room_number,\\\",\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{3 if show_room_number=='1' else 2}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data | sum(attribute='quantity'),\\\"Float\\\")}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-28 09:34:08.187299",
  "module": "eDoor",
  "name": "eDoor Folio List by Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\n    set data = frappe.call(\\\"edoor.api.housekeeping.get_room_list\\\",filter={'property':doc.name,'date':frappe.form_dict.get(\\\"date\\\"),'housekeeping_status':[frappe.form_dict.get('housekeeping_status')]})\\n%}   \\n    {% if data %}\\n    <table class=\\\"w-100 report-list\\\" style=\\\"white-space: nowrap;\\\">\\n            <tr>\\n                <th class=\\\"text-center\\\">No.</th>\\n                <th class=\\\"text-center\\\">Room #</th>\\n                <th>Room Type</th>\\n                <th>Floor</th>\\n                <th class=\\\"text-left\\\">Building</th>\\n                <th>Guest</th>\\n                <th class=\\\"text-center\\\">Stay #</th>\\n                <th>Housekeeper</th>\\n                <th class=\\\"text-center\\\">Housekeeping Status</th>\\n            </tr>\\n            {% for d in data %}\\n                <tr>\\n                    <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                    <td class=\\\"text-center\\\">{{d.room_number or ''}}</td>\\n                    <td>{{d.room_type or ''}}</td>\\n                    <td>{{d.floor or ''}}</td>\\n                    <td>{{d.building or ''}}</td>\\n                    <td>\\n                    {% if d.guest %}\\n                        <span class=\\\"link_line_action1\\\">\\n                            <a onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">\\n                                {{d.guest_name or ''}} - {{d.guest or ''}}\\n                            </a>\\n                        </span>\\n                    {% endif %}\\n                    </td>\\n                    <td class=\\\"text-center\\\">\\n                    {% if d.guest %}\\n                        <span class=\\\"link_line_action1\\\">\\n                            <a onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">\\n                               {{d.reservation_stay or ''}}\\n                            </a>\\n                        </span>\\n                    {% endif %}\\n                    </td>\\n                    <td>{{d.housekeeper}}</td>\\n                    <td class=\\\"text-center\\\"><span class=\\\"rounded-pill py-1 px-2 text-white\\\" style=\\\"background:{{d.status_color}}\\\">{{d.housekeeping_status}}</span></td>\\n                </tr>\\n            {%endfor%}\\n    </table>\\n    {% else %}\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n    </div>\\n    {% endif %}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-05 15:20:17.874048",
  "module": "eDoor",
  "name": "eDoor Housekeeping Status",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Audit Trail\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n           \\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set select_filter = None if  not frappe.form_dict.get('select_filter') else frappe.form_dict.get('select_filter').split(',') %}\\r\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\r\\n        report_name=\\\"Audit Trail Report\\\",\\r\\n        filters={\\r\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\r\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\r\\n            \\\"property\\\":doc.name,\\r\\n            \\\"select_filter\\\":select_filter,\\r\\n            \\\"select_user\\\":frappe.form_dict.get('select_user'),\\r\\n            \\\"sort_order\\\":frappe.form_dict.get('sort_order'),\\r\\n            \\\"order_by_audit\\\":frappe.form_dict.get('audit_order'),\\r\\n        }\\r\\n    )\\r\\n%} \\r\\n\\r\\n{% if (data.result|length) >0 %}\\r\\n<table class='report-list occupied-001' style='width:100%'>\\r\\n    <tr>\\r\\n        <th class=\\\"text-center\\\">No.</th> \\r\\n        {%for c in data.columns%}\\r\\n        <th style=\\\"width:{{c.width}}px;\\\" class=\\\"{{c.css_class or ''}}\\\">{{c.label}}</th>\\r\\n        {%endfor%} \\r\\n    </tr>\\r\\n    {% for d in data.result %}\\r\\n    <tr>\\r\\n        <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n        {% for c in data.columns %}\\r\\n        <td style=\\\"width:{{c.width}}px;\\\" class=\\\"{{c.css_class}}\\\">{{frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}</td>\\r\\n        {% endfor %}\\r\\n    </tr>\\r\\n    {% endfor %}\\r\\n</table>\\r\\n{% else %}\\r\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n</div>\\r\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 11:35:19.602778",
  "module": "eDoor",
  "name": "Audit Trail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".print-format td, .print-format th{\n    padding:1px 5px !important;\n} \n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Cashier Shift",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"CASHIER SHIFT SUMMARY REPORT\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" colspan=\\\"2\\\">\\r\\n            Shift #: <strong>{{doc.name}}</strong><br>\\r\\n            Shift Name: <strong>{{doc.shift_name}}</strong>\\r\\n        </td>\\r\\n        <td class=\\\"text-right\\\">\\r\\n            {{_(\\\"Printed By\\\")}}: <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong><br>\\r\\n            {{_(\\\"Printed Date\\\")}}: <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td>\\r\\n    </tr>\\r\\n</table>\\r\\n<br/>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-4\\\">\\n\\t\\t<label>Property</label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-1 text-center\\\">\\n        <label>:</label>\\n    </div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{doc.business_branch}}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-4\\\">\\n\\t\\t<label>Working Date</label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-1 text-center\\\">\\n        <label>:</label>\\n    </div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{frappe.format_value(doc.posting_date,\\\"Date\\\")}}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-4\\\">\\n\\t\\t<label>Opened By </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-1 text-center\\\">\\n        <label>:</label>\\n    </div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{doc.owner.split(\\\",\\\")[0]}}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-4\\\">\\n\\t\\t<label>Time in </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-1 text-center\\\">\\n        <label>:</label>\\n    </div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{frappe.format_value(doc.creation,\\\"Datetime\\\")}}\\n\\t</div>\\n</div>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row data-field\\\">\\r\\n    <div class=\\\"col-xs-4\\\">\\r\\n        <label>Closed by</label>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-1 text-center\\\">\\r\\n        <label>:</label>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-5 text-left value\\\">\\r\\n        {{(doc.closed_by or \\\"\\\").split(\\\"@\\\")[0] }}\\r\\n    </div>\\r\\n</div>\\r\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-4\\\">\\n\\t\\t<label>Time Out </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-1 text-center\\\">\\n        <label>:</label>\\n    </div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{frappe.format_value(doc.closed_date,\\\"Datetime\\\")}}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\">\\r\\n    <div class=\\\"col-xs-4\\\">\\r\\n        <label>Opening Amount</label>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-1 text-center\\\">\\r\\n        <label>:</label>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-7 text-left value\\\">\\r\\n         {{frappe.format_value(doc.total_opening_amount,\\\"Currency\\\") }}\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-4\\\">\\n\\t\\t<label>Closing Amount</label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-1 text-center\\\">\\n        <label>:</label>\\n    </div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n         {{frappe.format_value(doc.total_close_amount,\\\"Currency\\\") }}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-4\\\">\\n\\t\\t<label>Status </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-1 text-center\\\">\\n        <label>:</label>\\n    </div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{\\\"Open\\\" if doc.is_closed == 0 else \\\"Closed\\\"}}\\n\\t</div>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Cash Float\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%if (frappe.form_dict.get(\\\"show_cash_float\\\") or \\\"0\\\") == \\\"1\\\" %}\\n<h3>Cash Float</h3>\\n\\n<table class='report-list' style='width:100%; margin-bottom:10px'>\\n    <thead>\\n        <tr>\\n        <th>Type</th>\\n        <th class='text-right'>Open Amount</th>\\n        <th class='text-right'>Expected</th>\\n        <th class='text-right'>Actual</th>\\n        <th class='text-right'>Difference</th>\\n        </tr>\\n        \\n    </thead>\\n    \\n    <tbody>\\n        {% for d in doc.cash_float%}\\n        <tr>\\n        <td>{{d.payment_method}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_system_close_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_close_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_different_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        \\n    </tr>\\n    {%endfor%}\\n    \\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td style=\\\"border-top:dotted 1px #444444!important;\\\"><strong>Total</strong></td>\\n            <td style=\\\"border-top:dotted 1px #444444!important;\\\" class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"opening_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            <td style=\\\"border-top:dotted 1px #444444!important;\\\" class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"system_close_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            <td style=\\\"border-top:dotted 1px #444444!important;\\\" class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"close_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            <td style=\\\"border-top:dotted 1px #444444!important;\\\" class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"different_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Transaction\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{%if (frappe.form_dict.get(\\\"group_by_ledger_type\\\") or \\\"0\\\") == \\\"0\\\" %}\\n{% set show_account_code = (frappe.form_dict.get(\\\"show_account_code\\\") or \\\"0\\\") %}\\n{% set sql = \\\"\\n    select \\n        concat(parent_account_code, '  - ', parent_account_name) as parent_account_name,\\n        concat(account_group , '  - ' , account_group_name) as account_group_name,\\n        concat(account_code, '  - ',account_name) as account_name,\\n        sum(amount * if(type='Debit',1,-1)) as amount,\\n        sum(quantity) as quantity\\n    from `tabFolio Transaction` \\n    where\\n        property = '{}' and \\n        cashier_shift = '{}'\\n    group by\\n        concat(parent_account_code, '  - ', parent_account_name),\\n        concat(account_group , '  - ' , account_group_name),\\n        account_name\\n    order by\\n        account_code_sort_order\\n\\\".format(\\n    doc.business_branch,\\n    doc.name\\n)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n{%set groups =   data | map(attribute='account_group_name')|unique|list %}\\n\\n{% set sql=\\\"\\n    select \\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n    from `tabFolio Transaction` \\n    where \\n        property = '{}' and \\n        creation < '{}'  \\n\\\".format(doc.business_branch, doc.creation)\\n%}\\n\\n{% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}\\n<h3>Folio Transaction</h3>\\n\\n<table class='report-list' style='width:100%'>\\n    <tbody>\\n        <tr class=\\\"f-tb-child\\\">\\n            <td colspan=\\\"4\\\"><strong>Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(opening_balance_data[0][\\\"amount\\\"],\\\"Currency\\\")}}</strong></td>\\n        </tr>\\n        {% for g in groups%}\\n        <tr>\\n            <td colspan=4><strong>{{g if show_account_code ==\\\"1\\\" else g.split(\\\"  - \\\")[1]}}</strong></td>\\n        </tr>\\n        <!--loop account level 2-->\\n        {% for c in data|selectattr('account_group_name','equalto',g) | map(attribute='parent_account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td colspan=3><strong>{{c if show_account_code ==\\\"1\\\" else c.split(\\\"  - \\\")[1]}}</strong></td>\\n        </tr>\\n         <!-- startloop account level 3-->\\n        {% for a in data|selectattr('parent_account_name','equalto',c) | map(attribute='account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td></td>\\n            <td >{{a if show_account_code ==\\\"1\\\" else a.split(\\\"  - \\\")[1]}}</td>\\n            <td class=\\\"text-center\\\"> {{frappe.format_value(data|selectattr('account_name','equalto',a)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</td>\\n            <td class='text-right'> {{ frappe.format_value(data|selectattr('account_name','equalto',a)|list|sum(\\\"amount\\\"),'Currency') }}</td>\\n            \\n        </tr>\\n        \\n        \\n        {%endfor%}\\n        <!--end loop level 3-->\\n        \\n        <!--total level 2-->\\n        <tr>\\n            <td colspan=3 class=\\\"text-right\\\"><strong>*Total {{c}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr('parent_account_name','equalto',c)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr('parent_account_name','equalto',c)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end total level 2-->\\n        \\n        {%endfor%}\\n        <!--end loop level 2-->\\n        \\n            <!--total level 1-->\\n        <tr>\\n            <td colspan=3 class=\\\"text-right\\\"><strong>**Total {{g}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr('account_group_name','equalto',g)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr('account_group_name','equalto',g)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end total level 1-->\\n        \\n        {%endfor%}\\n         <tr>\\n            <td style=\\\"border-top:dotted 1px #444444!important;\\\" colspan=\\\"4\\\"><strong>Ending Balance</strong></td>\\n            <td style=\\\"border-top:dotted 1px #444444!important;\\\" class='text-right'><strong>{{ frappe.format_value( opening_balance_data[0][\\\"amount\\\"] + data|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n    </tbody>\\n \\n</table>\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{%if (frappe.form_dict.get(\\\"group_by_ledger_type\\\") or \\\"0\\\") == \\\"1\\\" %}\\n{% set show_account_code = (frappe.form_dict.get(\\\"show_account_code\\\") or \\\"0\\\") %}\\n{% set sql = \\\"\\n    select \\n        transaction_type,\\n        concat(parent_account_code, '  - ', parent_account_name) as parent_account_name,\\n        concat(account_group , '  - ' , account_group_name) as account_group_name,\\n        concat(account_code, '  - ',account_name) as account_name,\\n        sum(amount * if(type='Debit',1,-1)) as amount,\\n        sum(quantity) as quantity\\n    from `tabFolio Transaction` \\n    where\\n        property = '{}' and \\n        cashier_shift = '{}'\\n    group by\\n        transaction_type,\\n        concat(parent_account_code, '  - ', parent_account_name),\\n        concat(account_group , '  - ' , account_group_name),\\n        account_name\\n    order by\\n        account_code_sort_order\\n\\\".format(\\n    doc.business_branch,\\n    doc.name\\n)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n{% set ledger_types=[\\n    {\\\"label\\\": \\\"Guest Ledger\\\",\\\"value\\\":\\\"Reservation Folio\\\" },\\n    {\\\"label\\\": \\\"Deposit Ledger\\\",\\\"value\\\":\\\"Deposit Ledger\\\" },\\n    {\\\"label\\\": \\\"Desk Folio\\\",\\\"value\\\":\\\"Desk Folio\\\" },\\n    {\\\"label\\\": \\\"Payable Ledger\\\",\\\"value\\\":\\\"Payable Ledger\\\" },\\n    {\\\"label\\\": \\\"City Ledger\\\",\\\"value\\\":\\\"City Ledger\\\" },\\n    {\\\"label\\\": \\\"POS\\\",\\\"value\\\":\\\"Cashier Shift\\\" }\\n    ]\\n%}\\n\\n{% set sql=\\\"\\n    select \\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n    from `tabFolio Transaction` \\n    where \\n        property = '{}' and \\n        creation < '{}'  \\n\\\".format(doc.business_branch, doc.creation)\\n%}\\n{% set total_opening_balance = frappe.db.sql(sql,as_dict=1)[0][\\\"amount\\\"]%}\\n\\n<h3>Folio Transaction</h3>\\n\\n<table class='report-list' style='width:100%'>\\n    <tbody>\\n        <tr class=\\\"f-tb-child\\\">\\n            <td colspan=\\\"4\\\"><strong>Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(total_opening_balance,\\\"Currency\\\")}}</strong></td>\\n        </tr>\\n        {%for t in ledger_types%}\\n        \\n        {%set groups =data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)| map(attribute='account_group_name')|unique|list %}\\n        \\n        {% set sql=\\\"\\n            select \\n                ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n            from `tabFolio Transaction` \\n            where \\n                property = '{}' and \\n                creation < '{}'  and \\n                transaction_type = '{}'\\n        \\\".format(doc.business_branch, doc.creation, t.value)\\n        %}\\n        \\n        {% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}\\n        \\n        \\n        <!--check if ledter type have transactiuon and have opening balance -->\\n        {%if opening_balance_data[0][\\\"amount\\\"] !=0 or groups|length > 0 %}\\n        <tr>\\n            <td colspan=\\\"5\\\"><strong style=\\\"font-size:14px\\\">{{t.label}}</strong>\\n            <hr>\\n            </td>\\n        </tr>\\n        \\n        \\n        <tr>\\n            <td colspan=\\\"4\\\"><strong>{{t.label}} Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(opening_balance_data[0][\\\"amount\\\"],\\\"Currency\\\")}}</strong></td>\\n        </tr>\\n        {% for g in groups%}\\n        <tr>\\n            <td colspan=4><strong>{{g if show_account_code ==\\\"1\\\" else g.split(\\\"  - \\\")[1]}}</strong></td>\\n        </tr>\\n        <!--loop account level 2-->\\n        {% for c in data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g) | map(attribute='parent_account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td colspan=3><strong>{{c if show_account_code ==\\\"1\\\" else c.split(\\\"  - \\\")[1]}}</strong></td>\\n        </tr>\\n         <!-- startloop account level 3-->\\n        {% for a in data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c) | map(attribute='account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td></td>\\n            <td >{{a if show_account_code ==\\\"1\\\" else a.split(\\\"  - \\\")[1]}}</td>\\n            <td class=\\\"text-center\\\"> {{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_name','equalto',a)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</td>\\n            <td class='text-right'> {{ frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_name','equalto',a)|list|sum(\\\"amount\\\"),'Currency') }}</td>\\n            \\n        </tr>\\n        \\n        \\n        {%endfor%}\\n        <!--end loop level 3-->\\n        \\n        <!--total level 2-->\\n        <tr>\\n            <td colspan=3 class=\\\"text-right\\\"><strong>*Total {{c}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end total level 2-->\\n        \\n        {%endfor%}\\n        <!--end loop level 2-->\\n        \\n            <!--total level 1-->\\n        <tr>\\n            <td colspan=3 class=\\\"text-right\\\"><strong>**Total {{g}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end total level 1-->\\n        \\n        {%endfor%}\\n         <tr>\\n            <td colspan=\\\"4\\\"><strong>{{t.label}} Ending Balance </strong></td>\\n            <td class='text-right'><strong>  {{ frappe.format_value( opening_balance_data[0][\\\"amount\\\"] + data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end if check if ledger type has transaction-->\\n        {%endif%}\\n        <!--end loop ledger type-->\\n        {%endfor%}\\n         <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td colspan=\\\"4\\\"><strong>Ending Balance </strong></td>\\n            <td class='text-right'><strong>  {{ frappe.format_value( total_opening_balance + data|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n    </tbody>\\n    \\n</table>\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Cash Count\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%if (frappe.form_dict.get(\\\"show_cash_count\\\") or \\\"0\\\") == \\\"1\\\" %}\\n<br/>\\n<h3>Cash Count</h3>\\n{%set currencies = doc.cash_count| map(attribute='currency')|unique|list %}\\n\\n<table class='report-list' style='width:100%; margin-bottom:10px'>\\n    <thead>\\n        <tr>\\n        <th>Note Type</th>\\n        <th class='text-center'>Total Note</th>\\n        <th class='text-right'>Total Amount</th>\\n    </tr>\\n        \\n    </thead>\\n    \\n    <tbody>\\n        {%for c in currencies %}\\n        \\n        <tr>\\n            <td colspan=\\\"3\\\"><strong>{{c}}</strong></td>\\n        </tr>\\n            {% for d in doc.cash_count|selectattr(\\\"currency\\\",\\\"equalto\\\",c)%}\\n        <tr>\\n            <td><div style=\\\"padding-left:15px\\\">{{d.label}}</div></td>\\n            <td class='text-center'>{{d.total_note}}</td>\\n            <td class='text-right'>{{frappe.utils.fmt_money(d.total_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n            \\n        </tr>\\n        {%endfor%}\\n        <tr>\\n            <td><strong>Total {{c}}</strong></td>\\n            <td class='text-center'><strong>{{doc.cash_count|selectattr('currency','equalto',c)|sum(\\\"total_note\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.utils.fmt_money(doc.cash_count|selectattr('currency','equalto',c)|sum(\\\"total_amount\\\"),currency=c, precision=frappe.db.get_value(\\\"Currency\\\",c,\\\"custom_currency_precision\\\"))}}</strong></td>\\n            \\n        </tr>\\n        \\n        {%endfor%}\\n    \\n    </tbody>\\n    <tfoot>\\n        <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td><strong>Total</strong></td>\\n            <td class='text-center'><strong>{{doc.cash_count|sum(\\\"total_note\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_count|sum(\\\"total_base_currency_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2024-02-02 10:57:35.838726",
  "module": "eDoor",
  "name": "eDoor Cashier Shift Transaction Summary Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Room Complimentary & House Use\\\")}}</h2>\\r\\n{% set data = frappe.db.sql(\\\"\\r\\n            select parent_system_report\\r\\n            from \\r\\n                `tabSystem Report` \\r\\n            where \\r\\n                parent_system_report = 'Night Audit'\\\") %}\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if data %}\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Working Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Working Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n            {% else %}\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n            {% endif %}\\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\n            select date, \\n                reservation, \\n                reservation_stay, \\n                business_source, \\n                room_type_alias, \\n                room_number, \\n                rate_type, rate, \\n                discount_amount, \\n                total_tax, \\n                total_rate \\n            from \\n                `tabReservation Room Rate` \\n            where \\n                reservation_stay in (select name from `tabReservation Stay`) and \\n                is_complimentary = 1 and\\n                property = '{0}' and\\n                date between '{1}' and '{2}'\\n\\\".format(\\n            doc.name,\\n            frappe.form_dict.get('start_date'),\\n            frappe.form_dict.get('end_date')\\n        ),as_dict=1)%}\\n\\n<h5>Complimentary Room</h5>\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n    <tr>\\n        <th class=\\\"text-center\\\">No.</th>\\n        <th>Reservation #</th>\\n        <th class=\\\"text-center\\\">Date</th>\\n        <th>Room Type</th>\\n        <th class=\\\"text-center\\\">Room</th>\\n        <th>Rate Type</th>\\n        <th>Source</th>\\n        <th class=\\\"text-right\\\">Rate</th>\\n        <th class=\\\"text-right\\\">Discount</th>\\n        <th class=\\\"text-right\\\">Tax</th>\\n        <th class=\\\"text-right\\\">Total Rate</th>\\n    </tr>\\n    {% for d in data %}\\n    <tr>\\n        <td class=\\\"text-center\\\">{{loop.index}}</td>\\n        <td>\\n            <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a><br>\\n            <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay}}</a></td>\\n        <td class=\\\"text-center\\\">{{frappe.format(d.date,{'fieldtype':'Date'})}}</td>\\n        <td>{{d.room_type_alias}}</td>\\n        <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n        <td>{{d.rate_type}}</td>\\n        <td>{{d.business_source}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.rate,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.discount_amount,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.total_rate,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    {% endfor %}\\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\n            select date, \\n                reservation, \\n                reservation_stay, \\n                business_source, \\n                room_type_alias, \\n                room_number, \\n                rate_type, rate, \\n                discount_amount, \\n                total_tax, \\n                total_rate \\n            from \\n                `tabReservation Room Rate` \\n            where \\n                reservation_stay in (select name from `tabReservation Stay`) and \\n                is_house_use = 1 and\\n                property = '{0}' and\\n                date between '{1}' and '{2}'\\n\\\".format(\\n            doc.name,\\n            frappe.form_dict.get('start_date'),\\n            frappe.form_dict.get('end_date')\\n        ),as_dict=1)%}\\n\\n<h5>House Use Room</h5>\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n    \\n    <tr>\\n        <th class=\\\"text-center\\\">No.</th>\\n        <th>Reservation #</th>\\n        <th class=\\\"text-center\\\">Date</th>\\n        <th>Room Type</th>\\n        <th class=\\\"text-center\\\">Room</th>\\n        <th>Rate Type</th>\\n        <th>Source</th>\\n        <th class=\\\"text-right\\\">Rate</th>\\n        <th class=\\\"text-right\\\">Discount</th>\\n        <th class=\\\"text-right\\\">Tax</th>\\n        <th class=\\\"text-right\\\">Total Rate</th>\\n    </tr>\\n    {% for d in data %}\\n    <tr>\\n        <td class=\\\"text-center\\\">{{loop.index}}</td>\\n        <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a><br>\\n            <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay}}</a></td>\\n        <td class=\\\"text-center\\\">{{frappe.format(d.date,{'fieldtype':'Date'})}}</td>\\n        <td>{{d.room_type_alias}}</td>\\n        <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n        <td>{{d.rate_type}}</td>\\n        <td>{{d.business_source}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.rate,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.discount_amount,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.total_rate,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    {% endfor %}\\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-20 11:58:51.435489",
  "module": "eDoor",
  "name": "Room Complimentary & House Use Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".staticText { display: inline-block; font-family: Inter; font-size: 14px; font-weight: 400; color: rgb(0, 0, 0); text-align: left; font-style: normal; text-decoration: none; text-transform: none; line-height: 1.25; letter-spacing: 0px; border: 0px solid rgb(0, 0, 0); border-radius: 0px; background-color: rgb(255, 255, 255); padding: 0px; margin: 0px; min-width: 0px; min-height: 0px; box-shadow: none; overflow: hidden; overflow-wrap: break-word; white-space: normal; user-select: none; opacity: 1; z-index: 1; } .dynamicText { display: inline-block; font-family: Inter; font-size: 14px; font-weight: 400; color: rgb(0, 0, 0); text-align: left; font-style: normal; text-decoration: none; text-transform: none; line-height: 1.25; letter-spacing: 0px; border: 0px solid rgb(0, 0, 0); border-radius: 0px; background-color: rgb(255, 255, 255); padding: 0px; margin: 0px; min-width: 0px; min-height: 0px; box-shadow: none; overflow: hidden; overflow-wrap: break-word; white-space: normal; user-select: none; opacity: 1; } .dynamicText .label-text { font-family: Inter; font-size: 14px; font-weight: 600; color: rgb(0, 0, 0); text-align: left; font-style: normal; text-decoration: none; text-transform: none; line-height: 1.25; letter-spacing: 0px; border: 0px solid rgb(0, 0, 0); border-radius: 0px; background-color: rgb(255, 255, 255); padding: 0px; margin: 0px; min-width: 0px; min-height: 0px; box-shadow: none; white-space: normal; user-select: none; opacity: 1; z-index: 1; } .rectangle { display: inline-flex; place-content: flex-start; align-items: flex-start; flex: 1 1 0%; padding: 0px; margin: 0px; white-space: normal; user-select: none; min-width: 0px; min-height: 0px; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); border: 1px solid rgb(0, 0, 0); box-sizing: border-box; outline: none; border-radius: 0px; box-shadow: none; opacity: 1; z-index: 0; } .image { display: block; border: 0px solid rgb(0, 0, 0); border-radius: 0px; padding: 0px; margin: 0px; min-width: 0px; min-height: 0px; box-shadow: none; white-space: normal; user-select: none; object-fit: scale-down; object-position: center center; background-size: contain; background-position: center center; background-repeat: no-repeat; opacity: 1; } .barcode { display: block; border: 0px solid rgb(0, 0, 0); border-radius: 0px; padding: 0px; margin: 0px; min-width: 0px; min-height: 0px; box-shadow: none; white-space: normal; user-select: none; opacity: 1; } .printTable td { font-family: Inter; font-size: 10px; font-weight: 400; color: rgb(0, 0, 0); text-align: left; font-style: normal; text-decoration: none; text-transform: none; line-height: 1.25; letter-spacing: 0px; border: 1px solid rgb(0, 0, 0); border-radius: 0px; background-color: rgb(255, 255, 255); padding: 10px; margin: 0px; min-width: 0px; min-height: 0px; box-shadow: none; overflow-wrap: break-word; white-space: normal; user-select: none; vertical-align: baseline; opacity: 1; } .printTable .label-text { font-family: Inter; font-size: 10px; font-weight: 600; color: rgb(0, 0, 0); text-align: left; font-style: normal; text-decoration: none; text-transform: none; line-height: 1.25; letter-spacing: 0px; border: 0px solid rgb(0, 0, 0); border-radius: 0px; background-color: rgb(255, 255, 255); padding: 0px; margin: 0px; min-width: 0px; min-height: 0px; box-shadow: none; white-space: normal; user-select: none; opacity: 1; vertical-align: baseline; z-index: 1; } .printTable th { font-family: Inter; font-size: 11px; font-weight: 600; color: rgb(0, 0, 0); text-align: left; font-style: normal; text-decoration: none; text-transform: none; line-height: 1.25; letter-spacing: 0px; border: 1px solid rgb(0, 0, 0); border-radius: 0px; background-color: rgb(255, 255, 255); padding: 10px; margin: 0px; min-width: 0px; min-height: 0px; box-shadow: none; white-space: normal; user-select: none; opacity: 1; z-index: 1; } :root { --scale-factor: 1px; --modal-x: 0px; --modal-y: 0px; } :root, ::after, ::before { --print-width: 210.000mm; --print-height: 297.000mm; --print-container-width: 210.000mm; --print-container-height: 297.000mm; --print-margin-top: 0mm; --print-margin-bottom: 0.000mm; --print-margin-left: 0mm; --print-margin-right: 0.000mm; } :root { --scale-factor: 1px; --modal-x: 597px; --modal-y: 119px; } :root { --scale-factor: 1px; --modal-x: 295px; --modal-y: 171px; }@page { size: 210mm 297mm; margin: 0mm; } @page { size: 210mm 297mm; margin: 0mm; }",
  "custom_format": 0,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Cashier Shift",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-30 10:45:22.240651",
  "module": "Selling",
  "name": "eDoor Cashier Shift Folio Transaction Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.filter-section{\n    border:none !important;\n}\n.body-report-style td , tfoot td{\n     border:1px solid #bbbbbb;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n   \n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Housekeeping Status\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Type\\\"}}</strong>\\r\\n        {% if frappe.form_dict.building %}\\r\\n        / {{_(\\\"Building\\\")}} : <strong>{{frappe.form_dict.building}}</strong>\\r\\n        {% endif %}\\r\\n        {% if frappe.form_dict.floor %}\\r\\n        / {{_(\\\"Floor\\\")}} : <strong>{{frappe.form_dict.floor}}</strong>\\r\\n        {% endif %}\\r\\n        {% if frappe.form_dict.housekeeper %}\\r\\n        / {{_(\\\"Housekeeper\\\")}} : <strong>{{frappe.form_dict.housekeeper}}</strong>\\r\\n        {% endif %}\\r\\n        {% if frappe.form_dict.housekeeping_status %}\\r\\n        / {{_(\\\"Status\\\")}} : <strong>{{frappe.form_dict.housekeeping_status}}</strong>\\r\\n        {% endif %}\\r\\n        </td> \\r\\n        <td></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"   {%\\n        set data = frappe.db.sql(\\\"\\n           with a as (select \\n                name,\\n                room_number,\\n                sort_order,\\n                housekeeping_status,\\n                '' as reservation_status,\\n                status_color,\\n                housekeeper,\\n                room_type,\\n                floor,\\n                building,\\n                '' as room_block\\n      from `tabRoom`\\n      where\\n         property = '{0}'  and \\n         housekeeping_status like '%{1}%' and\\n         room_number like '%{2}%' and \\n         room_type like '%{3}%' and \\n         building = if('{4}'='',building,'{4}') and\\n         ifnull(housekeeper,'')= if('{6}'='',ifnull(housekeeper,''),'{6}') and\\n         floor like '%{7}%'\\n            ),\\nb as(select \\n                date,\\n                room_id,\\n                is_arrival,                           \\n                is_departure, \\n                reservation_stay,                      \\n                reservation_status,\\n                type as type_name,\\n                stay_room_id\\n            from `tabRoom Occupy`\\n      where \\n         ifnull(room_id,'') !='' and \\n         date = '{5}' and \\n         room_number like '%{2}%' and \\n         property = '{0}')\\nselect \\n        coalesce(b.date, '{5}') as date,\\n        a.room_number,\\n        a.housekeeping_status,\\n        a.status_color,\\n        a.housekeeper,\\n        a.room_type,\\n        coalesce(b.reservation_stay,'') as reservation_stay,                      \\n        coalesce(b.reservation_status,'') as reservation_status,\\n        coalesce(b.type_name,'') as type_name,\\n        b.is_arrival,                           \\n        b.is_departure\\nfrom a\\nleft join b on a.name = b.room_id and \\nifnull(date,'')= if('{5}'='',ifnull(date,''),'{5}') and\\na.housekeeping_status like '%{1}%'\\norder by a.sort_order,a.room_number\\\"\\n            .format(\\n                doc.name,\\n                frappe.form_dict.get(\\\"housekeeping_status\\\") or '',\\n                frappe.form_dict.get(\\\"rooms\\\") or '',\\n                frappe.form_dict.get(\\\"room_type\\\") or '',\\n                frappe.form_dict.get(\\\"building\\\") or '',\\n                frappe.form_dict.get(\\\"start_date\\\") or '',\\n                frappe.form_dict.get(\\\"housekeeper\\\") or '',\\n                frappe.form_dict.get(\\\"floor\\\") or '',\\n            ),as_dict=1)\\n    %}\\n    {% set working_date = frappe.db.sql(\\\"\\n                                select \\n                                    posting_date \\n                                from `tabWorking Day` \\n                                where \\n                                    business_branch = '{0}' and\\n                                    pos_profile = 'eDoor Profile' and\\n                                    is_closed = 0\\n    \\\".format(doc.name),as_dict=1) %}\\n    <table style=\\\"width:100%;white-space:nowrap;\\\" class=\\\"w-100 report-list body-report-style\\\">\\n            <tr>\\n                <th class=\\\"text-center\\\">No.</th>\\n                <th class=\\\"text-center\\\">Room #</th>\\n                <th class=\\\"text-center\\\">Status</th>\\n                <th>Room Type</th>\\n                <th class=\\\"text-left\\\">Stay #</th>\\n                <th>Guest</th>\\n                <th class=\\\"text-center\\\">Reservation Status</th>\\n                <th>HouseKeeper</th>\\n            </tr>\\n            {% for g in data %}\\n            \\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td class=\\\"text-center\\\">{{g.room_number or ''}}</td>\\n                <td class=\\\"text-center\\\">\\n                    \\n                    <span style=\\\"background:{{g.status_color}};border-radius: 1.5rem;color:white\\\" class=\\\"rounded-pill py-1 px-2\\\">\\n                    {{g.housekeeping_status}}\\n                    </span>\\n                   \\n                </td>\\n                \\n                <td>{{g.room_type or ''}}</td>\\n                <td>\\n                    <span class=\\\"link_line_action1\\\">\\n                        <a onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{g.reservation_stay}}', '*')\\\">\\n                            {{g.reservation_stay or ''}}\\n                        </a>\\n                    </span>\\n                </td>\\n                <td>\\n                    {% if g.reservation_stay %}\\n                    {% set guest, guest_name = frappe.db.get_value('Reservation Stay', g.reservation_stay , ['guest', 'guest_name'])%}\\n                        <span class=\\\"link_line_action1\\\">\\n                            <a onclick=\\\"window.parent.postMessage('view_guest_detail|{{guest}}', '*')\\\">\\n                               {{guest_name}} - {{guest}}\\n                            </a>\\n                        </span>\\n                    {% endif %}\\n                </td>\\n                <td class=\\\"text-center\\\">\\n                    \\n                    {% set working_date = frappe.db.get_value('Reservation Stay', g.reservation_stay , ['working_date'])%}\\n                    {% if g.reservation_status %}\\n                    {% set res_color = frappe.db.get_value('Reservation Status', g.reservation_status , ['color'])%}\\n                    {% if g.is_arrival == 1 and g.reservation_status == 'Reserved'%}\\n                    <span style=\\\"background:{{res_color}};border-radius: 1.5rem;color:#fff\\\" class=\\\"rounded-pill py-1 px-2\\\">{{_(\\\"Arrival\\\")}}</span>\\n                    {% endif %}\\n                    {% if g.is_arrival == 1 and g.reservation_status == 'In-house'%}\\n                    <span style=\\\"background:{{res_color}};border-radius: 1.5rem;color:#fff\\\" class=\\\"rounded-pill py-1 px-2\\\">{{_(\\\"In-house\\\")}}</span>\\n                    \\n                    {% endif %}\\n                    {% if g.is_arrival == 0 and g.reservation_status == 'Reserved'%}\\n                    <span style=\\\"background:{{res_color}};border-radius: 1.5rem;color:#fff\\\" class=\\\"rounded-pill py-1 px-2\\\">{{_(\\\"Reserved\\\")}}</span>\\n                    \\n                    {% endif %}\\n                    \\n                    {% if g.is_departure == 1 and (g.reservation_status =='In-house' or g.reservation_status =='Reserved') %}\\n                    \\n                    <span style=\\\"background:#4f4f4f;border-radius: 1.5rem;color:#fff\\\" class=\\\"rounded-pill py-1 px-2\\\">{{_(\\\"Departure\\\")}}</span>\\n                    {% endif %}\\n                    {% if g.is_arrival == 0 and g.is_departure == 0 and g.reservation_status == 'In-house' %}\\n                    \\n                    <span style=\\\"background:{{res_color}};border-radius: 1.5rem;color:#fff\\\" class=\\\"rounded-pill py-1 px-2\\\">{{_(\\\"Stay Over\\\")}}</span>\\n                    {% endif %}\\n                    {% if g.reservation_status == 'No Show' %}\\n                    \\n                    <span style=\\\"background:#828205;border-radius: 1.5rem;color:#fff\\\" class=\\\"rounded-pill py-1 px-2\\\">{{g.reservation_status}}</span>\\n                    {% endif %}\\n                    {% endif %}\\n                </td>\\n                <td>{{g.housekeeper or ''}}</td>\\n                \\n            </tr>\\n            {% endfor %}\\n            \\n    </table>\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-29 14:44:26.092405",
  "module": "eDoor",
  "name": "eDoor Housekeeping Status Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n@media print{@page {size: landscape}}\n.print-format{\n  \n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:1px 5px !important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Cashier Shift",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"CASHIER SHIFT DETAIL REPORT\\\")}}</h2>\\n\\n\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\n    <tr>\\n        <td class=\\\"filter-section\\\" >\\n        Shift #: <strong>{{doc.name}}</strong><br/>\\n        Audit Date: <strong>{{frappe.format_value( doc.posting_date,\\\"Date\\\")}}</strong><br/>\\n        </td> \\n        <td ></td>\\n\\n        <td class = \\\"text-right\\\">\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\n        <br>\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\n        </td> \\n    </tr>\\n\\n</table>\\n<br/>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"business_branch\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Property\"}, {\"fieldname\": \"posting_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Working Date\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Opened By: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{doc.owner.split(\\\",\\\")[0]}}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Time in: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{frappe.format_value(doc.creation,\\\"Datetime\\\")}}\\n\\t</div>\\n</div>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Closed by: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{(doc.closed_by or \\\"\\\").split(\\\"@\\\")[0] }}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Time Out: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{frappe.format_value(doc.closed_date,\\\"Datetime\\\")}}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"total_opening_amount\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Opening Amount\"}, {\"fieldname\": \"total_close_amount\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Closing Amount\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Status: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{\\\"Open\\\" if doc.is_closed == 0 else \\\"Closed\\\"}}\\n\\t</div>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Cash Float\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%if (frappe.form_dict.get(\\\"show_cash_float\\\") or \\\"0\\\") == \\\"1\\\" %}\\n<h3>Cash Float</h3>\\n\\n<table class='report-list' style='width:100%; margin-bottom:10px'>\\n    <thead>\\n        <tr>\\n        <th>Type</th>\\n        <th class='text-right'>Open Amount</th>\\n        <th class='text-right'>Expected</th>\\n        <th class='text-right'>Actual</th>\\n        <th class='text-right'>Difference</th>\\n        </tr>\\n        \\n    </thead>\\n    \\n    <tbody>\\n        {% for d in doc.cash_float%}\\n        <tr>\\n        <td>{{d.payment_method}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_system_close_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_close_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_different_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        \\n    </tr>\\n    {%endfor%}\\n    \\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td><strong>Total</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"opening_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"system_close_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"close_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"different_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Transaction\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%if (frappe.form_dict.get(\\\"group_by_ledger_type\\\") or \\\"0\\\") == \\\"0\\\" %}\\n{% set show_account_code = (frappe.form_dict.get(\\\"show_account_code\\\") or \\\"0\\\") %}\\n{% set sql = \\\"\\n    select \\n        name,\\n        reservation_stay,\\n        concat(parent_account_code, '  - ', parent_account_name) as parent_account_name,\\n        concat(account_group , '  - ' , account_group_name) as account_group_name,\\n        room_number,\\n        guest_name,\\n        transaction_number,\\n        reference_number,\\n        concat(account_code, '  - ',report_description) as account_name,\\n        amount * if(type='Debit',1,-1) as amount,\\n        report_quantity as quantity,\\n        owner,\\n        creation\\n    from `tabFolio Transaction` \\n    where\\n        property = '{}' and \\n        cashier_shift = '{}'\\n    order by\\n        account_code_sort_order,\\n        name\\n\\\".format(\\n    doc.business_branch,\\n    doc.name\\n)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n{%set groups =   data | map(attribute='account_group_name')|unique|list %}\\n\\n{% set sql=\\\"\\n    select \\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n    from `tabFolio Transaction` \\n    where \\n        property = '{}' and \\n        creation < '{}'  \\n\\\".format(doc.business_branch, doc.creation)\\n%}\\n\\n{% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}\\n<h3>Folio Transaction</h3>\\n\\n<table class='report-list' style='width:100%'>\\n    <thead>\\n        <tr>\\n            <th colspan=\\\"3\\\">\\n                Account Code\\n            </th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Tran. #</th>\\n            <th class=\\\"text-center\\\">Room</th>\\n            <th>Guest</th>\\n            <th class=\\\"text-center\\\">QTY</th>\\n            <th class=\\\"text-right\\\">Amount</th>\\n            <th>By</th>\\n            <th>Date</th>\\n        </tr>\\n    </thead>\\n    <tbody>\\n        \\n        <tr>\\n            <td colspan=\\\"9\\\"><strong>Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(opening_balance_data[0][\\\"amount\\\"],\\\"Currency\\\")}}</strong></td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        {% for g in groups%}\\n        <tr>\\n            <td colspan=\\\"12\\\"><strong>{{g if show_account_code ==\\\"1\\\" else g.split(\\\"  - \\\")[1]}}</strong></td>\\n        </tr>\\n        <!--loop account level 2-->\\n        {% for c in data|selectattr('account_group_name','equalto',g) | map(attribute='parent_account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td colspan=11><strong>{{c if show_account_code ==\\\"1\\\" else c.split(\\\"  - \\\")[1]}}</strong></td>\\n        </tr>\\n         <!-- startloop account level 3-->\\n        {% for a in data|selectattr('parent_account_name','equalto',c) |list%}\\n        <tr>\\n            <td></td>\\n            <td></td>\\n            <td >{{a.account_name if show_account_code ==\\\"1\\\" else a.account_name.split(\\\"  - \\\")[1]}}</td>\\n            <td>{{a.reservation_stay or \\\"\\\"}}</td>\\n            <td class='text-center'>{{a.transaction_number}} {{ \\\"\\\" if (a.reference_number or \\\"\\\")==\\\"\\\" else \\\"<br/>\\\" + a.reference_number }} </td>\\n            <td class='text-center'>{{a.name}}</td>\\n            <td class='text-center'>{{a.room_number or \\\"\\\"}}</td>\\n            <td >{{a.guest_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\"> {{frappe.format_value(a.quantity,\\\"Float\\\") if a.quantity>0 else \\\"-\\\" }}</td>\\n            <td class='text-right'> {{ frappe.format_value(a.amount,'Currency') }}</td>\\n            <td>{{a.owner.split(\\\"@\\\")[0]}}</td>\\n            <td>{{frappe.format_value(a.creation, \\\"Datetime\\\")}}</td>\\n            \\n        </tr>\\n        {%endfor%}\\n        <!--end loop level 3-->\\n        \\n        <!--total level 2-->\\n        <tr>\\n            <td colspan=\\\"8\\\" class=\\\"text-right\\\"><strong>*Total {{c}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr('parent_account_name','equalto',c)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr('parent_account_name','equalto',c)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        <!--end total level 2-->\\n        \\n        {%endfor%}\\n        <!--end loop level 2-->\\n        \\n            <!--total level 1-->\\n        <tr>\\n            <td colspan=\\\"8\\\" class=\\\"text-right\\\"><strong>**Total {{g}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr('account_group_name','equalto',g)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr('account_group_name','equalto',g)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        <!--end total level 1-->\\n        \\n        {%endfor%}\\n         <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td colspan=\\\"9\\\"><strong>Ending Balance</strong></td>\\n            <td class='text-right'><strong>{{ frappe.format_value( opening_balance_data[0][\\\"amount\\\"] + data|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n    </tbody>\\n \\n</table>\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{%if (frappe.form_dict.get(\\\"group_by_ledger_type\\\") or \\\"0\\\") == \\\"1\\\" %}\\n{% set show_account_code = (frappe.form_dict.get(\\\"show_account_code\\\") or \\\"0\\\") %}\\n{% set sql = \\\"\\n     select \\n        transaction_type,\\n        name,\\n        reservation_stay,\\n        concat(parent_account_code, '  - ', parent_account_name) as parent_account_name,\\n        concat(account_group , '  - ' , account_group_name) as account_group_name,\\n        room_number,\\n        guest_name,\\n        transaction_number,\\n        reference_number,\\n        concat(account_code, '  - ',report_description) as account_name,\\n        amount * if(type='Debit',1,-1) as amount,\\n        report_quantity as quantity,\\n        owner,\\n        creation\\n    from `tabFolio Transaction` \\n    where\\n        property = '{}' and \\n        cashier_shift = '{}'\\n    order by\\n        account_code_sort_order,\\n        name\\n\\\".format(\\n    doc.business_branch,\\n    doc.name\\n)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n{% set ledger_types=[\\n    {\\\"label\\\": \\\"Guest Ledger\\\",\\\"value\\\":\\\"Reservation Folio\\\" },\\n    {\\\"label\\\": \\\"Deposit Ledger\\\",\\\"value\\\":\\\"Deposit Ledger\\\" },\\n    {\\\"label\\\": \\\"Desk Folio\\\",\\\"value\\\":\\\"Desk Folio\\\" },\\n    {\\\"label\\\": \\\"Payable Ledger\\\",\\\"value\\\":\\\"Payable Ledger\\\" },\\n    {\\\"label\\\": \\\"City Ledger\\\",\\\"value\\\":\\\"City Ledger\\\" },\\n    {\\\"label\\\": \\\"POS\\\",\\\"value\\\":\\\"Cashier Shift\\\" }\\n    ]\\n%}\\n\\n{% set sql=\\\"\\n    select \\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n    from `tabFolio Transaction` \\n    where \\n        property = '{}' and \\n        creation < '{}'  \\n\\\".format(doc.business_branch, doc.creation)\\n%}\\n{% set total_opening_balance = frappe.db.sql(sql,as_dict=1)[0][\\\"amount\\\"]%}\\n\\n<h3>Folio Transaction</h3>\\n\\n<table class='report-list' style='width:100%'>\\n    <thead>\\n        <tr>\\n            <th colspan=\\\"3\\\">\\n                Account Code\\n            </th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Tran. #</th>\\n            <th class=\\\"text-center\\\">Room</th>\\n            <th>Guest</th>\\n            <th class=\\\"text-center\\\">QTY</th>\\n            <th class=\\\"text-right\\\">Amount</th>\\n            <th>By</th>\\n            <th>Date</th>\\n        </tr>\\n    </thead>\\n    <tbody>\\n        <tr>\\n            <td colspan=\\\"9\\\"><strong>Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(total_opening_balance,\\\"Currency\\\")}}</strong></td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        {%for t in ledger_types%}\\n        \\n        {%set groups =data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)| map(attribute='account_group_name')|unique|list %}\\n        \\n        {% set sql=\\\"\\n            select \\n                ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n            from `tabFolio Transaction` \\n            where \\n                property = '{}' and \\n                creation < '{}'  and \\n                transaction_type = '{}'\\n        \\\".format(doc.business_branch, doc.creation, t.value)\\n        %}\\n        \\n        {% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}\\n        \\n        \\n        <!--check if ledter type have transactiuon and have opening balance -->\\n        {%if opening_balance_data[0][\\\"amount\\\"] !=0 or groups|length > 0 %}\\n        <tr>\\n            <td colspan=\\\"12\\\"><strong style=\\\"font-size:14px\\\">{{t.label}}</strong>\\n            <hr>\\n            </td>\\n        </tr>\\n        \\n        \\n        <tr>\\n            <td colspan=\\\"9\\\"><strong>{{t.label}} Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(opening_balance_data[0][\\\"amount\\\"],\\\"Currency\\\")}}</strong></td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        {% for g in groups%}\\n        <tr>\\n            <td colspan=12><strong>{{g if show_account_code ==\\\"1\\\" else g.split(\\\"  - \\\")[1]}}</strong></td>\\n        </tr>\\n        <!--loop account level 2-->\\n        {% for c in data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g) | map(attribute='parent_account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td colspan=11><strong>{{c if show_account_code ==\\\"1\\\" else c.split(\\\"  - \\\")[1]}}</strong></td>\\n        </tr>\\n         <!-- startloop account level 3-->\\n        {% for a in data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list%}\\n        <tr>\\n            <td></td>\\n            <td></td>\\n            <td >{{a.account_name if show_account_code ==\\\"1\\\" else a.account_name.split(\\\"  - \\\")[1]}}</td>\\n            <td>{{a.reservation_stay or \\\"\\\"}}</td>\\n            <td class='text-center'>{{a.transaction_number}} {{ \\\"\\\" if (a.reference_number or \\\"\\\")==\\\"\\\" else \\\"<br/>\\\" + a.reference_number }} </td>\\n            <td class='text-center'>{{a.name}}</td>\\n            <td class='text-center'>{{a.room_number or \\\"\\\"}}</td>\\n            <td >{{a.guest_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\"> {{frappe.format_value(a.quantity,\\\"Float\\\") if a.quantity>0 else \\\"-\\\" }}</td>\\n            <td class='text-right'> {{ frappe.format_value(a.amount,'Currency') }}</td>\\n            <td>{{a.owner.split(\\\"@\\\")[0]}}</td>\\n            <td>{{frappe.format_value(a.creation, \\\"Datetime\\\")}}</td>     \\n        </tr>\\n        \\n        \\n        {%endfor%}\\n        <!--end loop level 3-->\\n        \\n        <!--total level 2-->\\n        <tr>\\n            <td colspan=8 class=\\\"text-right\\\"><strong>*Total {{c}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        <!--end total level 2-->\\n        \\n        {%endfor%}\\n        <!--end loop level 2-->\\n        \\n            <!--total level 1-->\\n        <tr>\\n            <td colspan=8 class=\\\"text-right\\\"><strong>**Total {{g}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        <!--end total level 1-->\\n        \\n        {%endfor%}\\n         <tr>\\n            <td colspan=\\\"9\\\"><strong>{{t.label}} Ending Balance </strong></td>\\n            <td class='text-right'><strong>  {{ frappe.format_value( opening_balance_data[0][\\\"amount\\\"] + data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n            \\n        </tr>\\n        <!--end if check if ledger type has transaction-->\\n        {%endif%}\\n        <!--end loop ledger type-->\\n        {%endfor%}\\n         <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td colspan=\\\"9\\\"><strong>Ending Balance </strong></td>\\n            <td class='text-right'><strong>  {{ frappe.format_value( total_opening_balance + data|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n        </tr>\\n    </tbody>\\n    \\n</table>\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Cash Count\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%if (frappe.form_dict.get(\\\"show_cash_count\\\") or \\\"0\\\") == \\\"1\\\" %}\\n<br/>\\n<h3>Cash Count</h3>\\n{%set currencies = doc.cash_count| map(attribute='currency')|unique|list %}\\n\\n<table class='report-list' style='width:100%; margin-bottom:10px'>\\n    <thead>\\n        <tr>\\n        <th>Note Type</th>\\n        <th class='text-center'>Total Note</th>\\n        <th class='text-right'>Total Amount</th>\\n    </tr>\\n        \\n    </thead>\\n    \\n    <tbody>\\n        {%for c in currencies %}\\n        \\n        <tr>\\n            <td colspan=\\\"3\\\"><strong>{{c}}</strong></td>\\n        </tr>\\n            {% for d in doc.cash_count|selectattr(\\\"currency\\\",\\\"equalto\\\",c)%}\\n        <tr>\\n            <td><div style=\\\"padding-left:15px\\\">{{d.label}}</div></td>\\n            <td class='text-center'>{{d.total_note}}</td>\\n            <td class='text-right'>{{frappe.utils.fmt_money(d.total_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n            \\n        </tr>\\n        {%endfor%}\\n        <tr>\\n            <td><strong>Total {{c}}</strong></td>\\n            <td class='text-center'><strong>{{doc.cash_count|selectattr('currency','equalto',c)|sum(\\\"total_note\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.utils.fmt_money(doc.cash_count|selectattr('currency','equalto',c)|sum(\\\"total_amount\\\"),currency=c, precision=frappe.db.get_value(\\\"Currency\\\",c,\\\"custom_currency_precision\\\"))}}</strong></td>\\n            \\n        </tr>\\n        \\n        {%endfor%}\\n    \\n    </tbody>\\n    <tfoot>\\n        <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td><strong>Total</strong></td>\\n            <td class='text-center'><strong>{{doc.cash_count|sum(\\\"total_note\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_count|sum(\\\"total_base_currency_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2024-02-02 10:58:53.254937",
  "module": "eDoor",
  "name": "eDoor Cashier Shift Transaction Detail Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Cashier Shift",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"CASHIER SHIFT AUDIT TRAIL REPORT\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            Shift #: {{doc.name}} <br/>\\r\\n            Audit Date: {{frappe.format_value(doc.posting_date,\\\"Date\\\")}}\\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%\\n    set sql = \\\"select \\n        custom_posting_date,\\n        custom_posting_date,\\n        subject,\\n        reference_doctype,\\n        reference_name,\\n        content,\\n        comment_by,\\n        creation\\n    from `tabComment`\\n    where\\n        custom_cashier_shift='{}'\\n    order by \\n        creation\\n    \\\".format(doc.name)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n<table class=\\\"report-list\\\" style=\\\"width:100%\\\" >\\n    <thead>\\n        <tr>\\n            <th class='text-center'>No</th>\\n            <th class='text-center'>Audit Date</th>\\n            <th>Ref Type</th>\\n            <th>Ref #</th>\\n            <th>Subject</th>\\n            <th>Content</th>\\n            <th>By</th>\\n            <th class='text-center'>Date & Time</th>\\n        </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data%}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\" style=\\\"white-space: nowrap;\\\">{{frappe.format_value(d.custom_posting_date,'Date')}}</td>\\n            <td style=\\\"white-space: nowrap;\\\">{{d.reference_doctype}}</td>\\n            <td style=\\\"white-space: nowrap;\\\">{{d.reference_name}}</td>\\n            <td style=\\\"white-space: nowrap;\\\">{{d.subject}}</td>\\n            <td>{{d.content}}</td>\\n            <td style=\\\"white-space: nowrap;\\\">{{d.comment_by}}</td>\\n            <td class=\\\"text-center\\\" style=\\\"white-space: nowrap;\\\">{{frappe.format_value(d.creation,'Datetime')}}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 11:35:19.795255",
  "module": "eDoor",
  "name": "eDoor Cashier Shift Audit Trail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".print-format td, .print-format th{\n    padding:1px 5px !important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Working Day",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"END OF DAY SUMMARY REPORT\\\")}}</h2>\\n\\n\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\n    <tr>\\n        <td class=\\\"filter-section\\\" >\\n        Audit Date: <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong><br/>\\n        </td> \\n        <td ></td>\\n\\n        <td class = \\\"text-right\\\">\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\n        <br>\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\n        </td> \\n    </tr>\\n\\n</table>\\n<br/>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.call(\\\"edoor.api.frontdesk.get_day_end_summary_report\\\", property=doc.name ,date=frappe.form_dict.get('start_date')) %}\\n\\n<div style=\\\"font-size:13px;font-weight:650\\\">Summary</div>\\n<table class='report-list' style='width:100%;border-top:1px solid black'>\\n    <tr>\\n        <td>{{_(\\\"Room Revenue\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(data.room_revenue,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Total Room Night\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.room_night|int}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Avg Post/ADR\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(data.adr,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Occupancy\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{'%0.2f'| format(data.occupancy |float)}}%</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Check-in(PAX)\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.check_in|int}}({{data.check_in_adult|int}}/{{data.check_in_child|int}})</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Stay Over(PAX)\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.stay_over|int}}({{data.stay_over_adult|int}}/{{data.stay_over_child|int}})</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Departure(PAX)\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.departure|int}}({{data.departure_adult|int}}/{{data.departure_child|int}})</td>\\n    </tr>\\n</table>\\n\\n<div style=\\\"font-size:13px;font-weight:650;margin-top:10px\\\">In-house at time of Audit</div>\\n<table class='report-list' style='width:100%;border-top:1px solid black;margin-bottom:10px'>\\n    <tr>\\n        <td>{{_(\\\"Room Block\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.room_block|int}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Occupied Rooms\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.room_night|int}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Vacant Room\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.vacant_room|int}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.call(\\\"edoor.api.frontdesk.get_day_end_summary_report\\\", property=doc.name ,date=frappe.form_dict.get('start_date')) %}\\n\\n<div style=\\\"font-size:13px;font-weight:650\\\">Ledger Summary</div>\\n<table class='report-list' style='width:100%;border-top:1px solid black'>\\n    <tr>\\n        <th>{{_(\\\"Ledger Type\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Opening\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Debit\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Credit\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Balance\\\")}}</th>\\n    </tr>\\n    {% for d in data.ledger_summary %}\\n    \\n    <tr>\\n        <td>{{d.label}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.opening,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.debit,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.credit,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format((d.opening + d.debit)-d.credit,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    {% endfor %}\\n    {% set balance = (data.ledger_summary|sum(attribute='opening') + data.ledger_summary|sum(attribute='debit')) - data.ledger_summary|sum(attribute='credit')%}\\n    <tr style=\\\"border-top:1px solid black;\\\">\\n        <td><strong>{{_(\\\"Total\\\")}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data.ledger_summary|sum(attribute='opening'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data.ledger_summary|sum(attribute='debit'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data.ledger_summary|sum(attribute='credit'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(balance,{'fieldtype':'Currency'})}}</strong></td>\\n    </tr>\\n</table>\\n\\n<div style=\\\"font-size:13px;font-weight:650;margin-top:10px\\\">Rate Type Rooms Sold</div>\\n<table class='report-list' style='width:100%;border-top:1px solid black'>\\n    \\n    {% for d in data.room_sold_by_rate_type %}\\n    \\n    <tr>\\n        <td>{{d.rate_type}}</td>\\n        <td class=\\\"text-right\\\">{{d.total_room}}</td>\\n    </tr>\\n    {% endfor %}\\n    \\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Transaction\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n\\r\\n{%if (frappe.form_dict.get(\\\"group_by_ledger_type\\\") or \\\"0\\\") == \\\"0\\\" %}\\r\\n{% set show_account_code = (frappe.form_dict.get(\\\"show_account_code\\\") or \\\"0\\\") %}\\r\\n{% set sql = \\\"\\r\\n    select \\r\\n        concat(parent_account_code, '  - ', parent_account_name) as parent_account_name,\\r\\n        concat(account_group , '  - ' , account_group_name) as account_group_name,\\r\\n        concat(account_code, '  - ',account_name) as account_name,\\r\\n        sum(amount * if(type='Debit',1,-1)) as amount,\\r\\n        sum(quantity) as quantity\\r\\n    from `tabFolio Transaction` \\r\\n    where\\r\\n       property = '{}' and \\r\\n        posting_date = '{}'\\r\\n    group by\\r\\n        concat(parent_account_code, '  - ', parent_account_name),\\r\\n        concat(account_group , '  - ' , account_group_name),\\r\\n        account_name\\r\\n    order by\\r\\n        account_code_sort_order\\r\\n\\\".format(\\r\\n    \\r\\n    doc.name,\\r\\n    frappe.form_dict.get('start_date')\\r\\n)\\r\\n%}\\r\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\r\\n\\r\\n{%set groups =   data | map(attribute='account_group_name')|unique|list %}\\r\\n\\r\\n{% set sql=\\\"\\r\\n    select \\r\\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\r\\n    from `tabFolio Transaction` \\r\\n    where \\r\\n        property = '{}' and \\r\\n        posting_date < '{}'  \\r\\n\\\".format(doc.name,\\r\\n        frappe.form_dict.get('start_date')\\r\\n)\\r\\n%}\\r\\n\\r\\n{% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}\\r\\n<h3>Folio Transaction</h3>\\r\\n\\r\\n<table class='report-list' style='width:100%'>\\r\\n    <tbody>\\r\\n        <tr>\\r\\n            <td colspan=\\\"4\\\"><strong>Opening Balance</strong></td>\\r\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(opening_balance_data[0][\\\"amount\\\"],\\\"Currency\\\")}}</strong></td>\\r\\n        </tr>\\r\\n        {% for g in groups%}\\r\\n        <tr>\\r\\n            <td colspan=4><strong>{{g}}</strong></td>\\r\\n        </tr>\\r\\n        <!--loop account level 2-->\\r\\n        {% for c in data|selectattr('account_group_name','equalto',g) | map(attribute='parent_account_name')|unique|list%}\\r\\n        <tr>\\r\\n            <td></td>\\r\\n            <td colspan=3><strong>{{c if show_account_code ==\\\"1\\\" else c.split(\\\"  - \\\")[1]}}</strong></td>\\r\\n        </tr>\\r\\n         <!-- startloop account level 3-->\\r\\n        {% for a in data|selectattr('parent_account_name','equalto',c) | map(attribute='account_name')|unique|list%}\\r\\n        <tr>\\r\\n            <td></td>\\r\\n            <td></td>\\r\\n            <td >{{a if show_account_code ==\\\"1\\\" else a.split(\\\"  - \\\")[1]}}</td>\\r\\n            <td class=\\\"text-center\\\"> {{frappe.format_value(data|selectattr('account_name','equalto',a)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</td>\\r\\n            <td class='text-right'> {{ frappe.format_value(data|selectattr('account_name','equalto',a)|list|sum(\\\"amount\\\"),'Currency') }}</td>\\r\\n            \\r\\n        </tr>\\r\\n        \\r\\n        \\r\\n        {%endfor%}\\r\\n        <!--end loop level 3-->\\r\\n        \\r\\n        <!--total level 2-->\\r\\n        <tr>\\r\\n            <td colspan=3 class=\\\"text-right\\\"><strong>*Total {{c}}:</strong></td>\\r\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr('parent_account_name','equalto',c)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\r\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr('parent_account_name','equalto',c)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\r\\n        </tr>\\r\\n        <!--end total level 2-->\\r\\n        \\r\\n        {%endfor%}\\r\\n        <!--end loop level 2-->\\r\\n        \\r\\n            <!--total level 1-->\\r\\n        <tr>\\r\\n            <td colspan=3 class=\\\"text-right\\\"><strong>**Total {{g}}:</strong></td>\\r\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr('account_group_name','equalto',g)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\r\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr('account_group_name','equalto',g)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\r\\n        </tr>\\r\\n        <!--end total level 1-->\\r\\n        \\r\\n        {%endfor%}\\r\\n         <tr>\\r\\n            <td colspan=\\\"4\\\"><strong>Ending Balance</strong></td>\\r\\n            <td class='text-right'><strong>{{ frappe.format_value( opening_balance_data[0][\\\"amount\\\"] + data|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\r\\n        </tr>\\r\\n    </tbody>\\r\\n \\r\\n</table>\\r\\n{%endif%}\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{%if (frappe.form_dict.get(\\\"group_by_ledger_type\\\") or \\\"0\\\") == \\\"1\\\" %}\\n{% set show_account_code = (frappe.form_dict.get(\\\"show_account_code\\\") or \\\"0\\\") %}\\n{% set sql = \\\"\\n    select \\n        transaction_type,\\n        concat(parent_account_code, '  - ', parent_account_name) as parent_account_name,\\n        concat(account_group , '  - ' , account_group_name) as account_group_name,\\n        concat(account_code, '  - ',account_name) as account_name,\\n        sum(amount * if(type='Debit',1,-1)) as amount,\\n        sum(quantity) as quantity\\n    from `tabFolio Transaction` \\n    where\\n        property = '{}' and \\n        posting_date = '{}'\\n    group by\\n        transaction_type,\\n        concat(parent_account_code, '  - ', parent_account_name),\\n        concat(account_group , '  - ' , account_group_name),\\n        account_name\\n    order by\\n        account_code_sort_order\\n\\\".format(\\n    doc.name,\\n    frappe.form_dict.get('start_date')\\n)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n{% set ledger_types=[\\n    {\\\"label\\\": \\\"Guest Ledger\\\",\\\"value\\\":\\\"Reservation Folio\\\" },\\n    {\\\"label\\\": \\\"Deposit Ledger\\\",\\\"value\\\":\\\"Deposit Ledger\\\" },\\n    {\\\"label\\\": \\\"Desk Folio\\\",\\\"value\\\":\\\"Desk Folio\\\" },\\n    {\\\"label\\\": \\\"Payable Ledger\\\",\\\"value\\\":\\\"Payable Ledger\\\" },\\n    {\\\"label\\\": \\\"City Ledger\\\",\\\"value\\\":\\\"City Ledger\\\" },\\n    {\\\"label\\\": \\\"POS\\\",\\\"value\\\":\\\"Cashier Shift\\\" }\\n    ]\\n%}\\n\\n{% set sql=\\\"\\n    select \\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n    from `tabFolio Transaction` \\n    where \\n        property = '{}' and \\n        posting_date < '{}' \\n\\\".format(doc.name,\\n        frappe.form_dict.get('start_date')\\n)\\n%}\\n{% set total_opening_balance = frappe.db.sql(sql,as_dict=1)[0][\\\"amount\\\"]%}\\n\\n<h3>Folio Transaction</h3>\\n\\n<table class='report-list' style='width:100%'>\\n    <tbody>\\n        <tr>\\n            <td colspan=\\\"4\\\"><strong>Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(total_opening_balance,\\\"Currency\\\")}}</strong></td>\\n        </tr>\\n        {%for t in ledger_types%}\\n        \\n        {%set groups =data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)| map(attribute='account_group_name')|unique|list %}\\n        \\n        {% set sql=\\\"\\n            select \\n                ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n            from `tabFolio Transaction` \\n            where \\n                property = '{}' and \\n                posting_date < '{}'  and \\n                transaction_type = '{}'\\n        \\\".format(doc.name, frappe.form_dict.get('start_date'), t.value)\\n        %}\\n        \\n        {% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}\\n        \\n        \\n        <!--check if ledter type have transactiuon and have opening balance -->\\n        {%if opening_balance_data[0][\\\"amount\\\"] !=0 or groups|length > 0 %}\\n        <tr>\\n            <td colspan=\\\"5\\\"><strong style=\\\"font-size:14px\\\">{{t.label}}</strong>\\n            <hr>\\n            </td>\\n        </tr>\\n        \\n        \\n        <tr>\\n            <td colspan=\\\"4\\\"><strong>{{t.label}} Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(opening_balance_data[0][\\\"amount\\\"],\\\"Currency\\\")}}</strong></td>\\n        </tr>\\n        {% for g in groups%}\\n        <tr>\\n            <td colspan=4><strong>{{g}}</strong></td>\\n        </tr>\\n        <!--loop account level 2-->\\n        {% for c in data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g) | map(attribute='parent_account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td colspan=3><strong>{{c if show_account_code ==\\\"1\\\" else c.split(\\\"  - \\\")[1]}}</strong></td>\\n        </tr>\\n          <!--startloop account level 3-->\\n        {% for a in data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c) | map(attribute='account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td></td>\\n            <td >{{a if show_account_code ==\\\"1\\\" else a.split(\\\"  - \\\")[1]}}</td>\\n            <td class=\\\"text-center\\\"> {{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_name','equalto',a)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</td>\\n            <td class='text-right'> {{ frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_name','equalto',a)|list|sum(\\\"amount\\\"),'Currency') }}</td>\\n            \\n        </tr>\\n        \\n        \\n        {%endfor%}\\n        <!--end loop level 3-->\\n        \\n        <!--total level 2-->\\n        <tr>\\n            <td colspan=3 class=\\\"text-right\\\"><strong>*Total {{c}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end total level 2-->\\n        \\n        {%endfor%}\\n        <!--end loop level 2-->\\n        \\n            <!--total level 1-->\\n        <tr>\\n            <td colspan=3 class=\\\"text-right\\\"><strong>**Total {{g}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end total level 1-->\\n        \\n        {%endfor%}\\n         <tr>\\n            <td colspan=\\\"4\\\"><strong>{{t.label}} Ending Balance </strong></td>\\n            <td class='text-right'><strong>  {{ frappe.format_value( opening_balance_data[0][\\\"amount\\\"] + data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end if check if ledger type has transaction-->\\n        {%endif%}\\n        <!--end loop ledger type-->\\n        {%endfor%}\\n         <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td colspan=\\\"4\\\"><strong>Ending Balance </strong></td>\\n            <td class='text-right'><strong>  {{ frappe.format_value( total_opening_balance + data|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n    </tbody>\\n    \\n</table>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2024-02-05 11:45:19.201722",
  "module": "eDoor",
  "name": "eDoor Working Day Transaction Summary Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n@media print{@page {size: landscape}}\n.print-format{\n  \n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:1px 5px !important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"END OF DAY DETAIL REPORT\\\")}}</h2>\\n\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\n    <tr>\\n        <td class=\\\"filter-section\\\" >\\n        <!--Working Day #: <strong>{{frappe.form_dict.working_day}}</strong><br/>-->\\n        Audit Date: <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong><br/>\\n        </td> \\n        <td ></td>\\n\\n        <td class = \\\"text-right\\\">\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\n        <br>\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\n        </td> \\n    </tr>\\n\\n</table>\\n<br/>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.call(\\\"edoor.api.frontdesk.get_day_end_summary_report\\\", property=doc.name ,date=frappe.form_dict.get('start_date')) %}\\n\\n<div style=\\\"font-size:13px;font-weight:650\\\">Summary</div>\\n<table class='report-list' style='width:100%;border-top:1px solid black'>\\n    <tr>\\n        <td>{{_(\\\"Room Revenue\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(data.room_revenue,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Total Room Night\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.room_night|int}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Avg Post/ADR\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(data.adr,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Occupancy\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{'%0.2f'| format(data.occupancy|float)}}%</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Check-in(PAX)\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.check_in|int}}({{data.check_in_adult|int}}/{{data.check_in_child|int}})</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Stay Over(PAX)\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.stay_over|int}}({{data.stay_over_adult|int}}/{{data.stay_over_child|int}})</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Departure(PAX)\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.departure|int}}({{data.departure_adult|int}}/{{data.departure_child|int}})</td>\\n    </tr>\\n</table>\\n\\n<div style=\\\"font-size:13px;font-weight:650;margin-top:10px\\\">In-house at time of Audit</div>\\n<table class='report-list' style='width:100%;border-top:1px solid black;margin-bottom:10px'>\\n    <tr>\\n        <td>{{_(\\\"Room Block\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.room_block|int}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Occupied Rooms\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.room_night|int}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Vacant Room\\\")}}</td>\\n        <td class=\\\"text-right\\\">{{data.vacant_room|int}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.call(\\\"edoor.api.frontdesk.get_day_end_summary_report\\\", property=doc.name ,date=frappe.form_dict.get('start_date')) %}\\n\\n<div style=\\\"font-size:13px;font-weight:650\\\">Ledger Summary</div>\\n<table class='report-list' style='width:100%;border-top:1px solid black'>\\n    <tr>\\n        <th>{{_(\\\"Ledger Type\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Opening\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Debit\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Credit\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Balance\\\")}}</th>\\n    </tr>\\n    {% for d in data.ledger_summary %}\\n    \\n    <tr>\\n        <td>{{d.label}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.opening,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.debit,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format(d.credit,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-right\\\">{{frappe.format((d.opening + d.debit)-d.credit,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    {% endfor %}\\n    {% set balance = (data.ledger_summary|sum(attribute='opening') + data.ledger_summary|sum(attribute='debit')) - data.ledger_summary|sum(attribute='credit')%}\\n    <tr style=\\\"border-top:1px solid black;\\\">\\n        <td><strong>{{_(\\\"Total\\\")}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data.ledger_summary|sum(attribute='opening'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data.ledger_summary|sum(attribute='debit'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(data.ledger_summary|sum(attribute='credit'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format(balance,{'fieldtype':'Currency'})}}</strong></td>\\n    </tr>\\n</table>\\n\\n<div style=\\\"font-size:13px;font-weight:650;margin-top:10px\\\">Rate Type Rooms Sold</div>\\n<table class='report-list' style='width:100%;border-top:1px solid black'>\\n    \\n    {% for d in data.room_sold_by_rate_type %}\\n    \\n    <tr>\\n        <td>{{d.rate_type}}</td>\\n        <td class=\\\"text-right\\\">{{d.total_room}}</td>\\n    </tr>\\n    {% endfor %}\\n    \\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Transaction\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%if (frappe.form_dict.get(\\\"group_by_ledger_type\\\") or \\\"0\\\") == \\\"0\\\" %}\\n{% set show_account_code = (frappe.form_dict.get(\\\"show_account_code\\\") or \\\"0\\\") %}\\n{% set sql = \\\"\\n    select \\n        name,\\n        reservation_stay,\\n        concat(parent_account_code, '  - ', parent_account_name) as parent_account_name,\\n        concat(account_group , '  - ' , account_group_name) as account_group_name,\\n        room_number,\\n        guest_name,\\n        transaction_number,\\n        reference_number,\\n        concat(account_code, '  - ',report_description) as account_name,\\n        amount * if(type='Debit',1,-1) as amount,\\n        report_quantity as quantity,\\n        owner,\\n        creation\\n    from `tabFolio Transaction` \\n    where\\n        property = '{}' and \\n        posting_date = '{}'\\n    order by\\n        account_code_sort_order,\\n        name\\n\\\".format(\\n    doc.name,\\n    frappe.form_dict.get('start_date')\\n)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n{%set groups =   data | map(attribute='account_group_name')|unique|list %}\\n\\n{% set sql=\\\"\\n    select \\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n    from `tabFolio Transaction` \\n    where \\n        property = '{}' and \\n        posting_date < '{}'\\n\\\".format(doc.name,\\n        frappe.form_dict.get('start_date')\\n)\\n%}\\n\\n{% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}\\n<h3>Folio Transaction</h3>\\n\\n<table class='report-list' style='width:100%'>\\n    <thead>\\n        <tr>\\n            <th colspan=\\\"3\\\">\\n                Account Code\\n            </th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Tran. #</th>\\n            <th class=\\\"text-center\\\">Room</th>\\n            <th>Guest</th>\\n            <th class=\\\"text-center\\\">QTY</th>\\n            <th class=\\\"text-right\\\">Amount</th>\\n            <th>By</th>\\n            <th>Date</th>\\n        </tr>\\n    </thead>\\n    <tbody>\\n        \\n        <tr>\\n            <td colspan=\\\"9\\\"><strong>Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(opening_balance_data[0][\\\"amount\\\"],\\\"Currency\\\")}}</strong></td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        {% for g in groups%}\\n        <tr>\\n            <td colspan=\\\"12\\\"><strong>{{g }}</strong></td>\\n        </tr>\\n        <!--loop account level 2-->\\n        {% for c in data|selectattr('account_group_name','equalto',g) | map(attribute='parent_account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td colspan=11><strong>{{c if show_account_code ==\\\"1\\\" else c.split(\\\"  - \\\")[1]}}</strong></td>\\n        </tr>\\n         <!-- startloop account level 3-->\\n        {% for a in data|selectattr('parent_account_name','equalto',c) |list%}\\n        <tr>\\n            <td></td>\\n            <td></td>\\n            <td >{{a.account_name if show_account_code ==\\\"1\\\" else a.account_name.split(\\\"  - \\\")[1]}}</td>\\n            <td class=\\\"text-center\\\">{{a.reservation_stay or \\\"\\\"}}</td>\\n            <td class='text-center'>{{a.transaction_number}} {{ \\\"\\\" if (a.reference_number or \\\"\\\")==\\\"\\\" else \\\"<br/>\\\" + a.reference_number }} </td>\\n            <td class='text-center'>{{a.name}}</td>\\n            <td class='text-center'>{{a.room_number or \\\"\\\"}}</td>\\n            <td >{{a.guest_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\"> {{frappe.format_value(a.quantity,\\\"Float\\\") if a.quantity>0 else \\\"-\\\" }}</td>\\n            <td class='text-right'> {{ frappe.format_value(a.amount,'Currency') }}</td>\\n            <td>{{a.owner.split(\\\"@\\\")[0]}}</td>\\n            <td>{{frappe.format_value(a.creation, \\\"Datetime\\\")}}</td>\\n            \\n        </tr>\\n        {%endfor%}\\n        <!--end loop level 3-->\\n        \\n        <!--total level 2-->\\n        <tr>\\n            <td colspan=\\\"8\\\" class=\\\"text-right\\\"><strong>*Total {{c}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr('parent_account_name','equalto',c)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr('parent_account_name','equalto',c)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        <!--end total level 2-->\\n        \\n        {%endfor%}\\n        <!--end loop level 2-->\\n        \\n            <!--total level 1-->\\n        <tr>\\n            <td colspan=\\\"8\\\" class=\\\"text-right\\\"><strong>**Total {{g}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr('account_group_name','equalto',g)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr('account_group_name','equalto',g)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        <!--end total level 1-->\\n        \\n        {%endfor%}\\n         <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td colspan=\\\"9\\\"><strong>Ending Balance</strong></td>\\n            <td class='text-right'><strong>{{ frappe.format_value( opening_balance_data[0][\\\"amount\\\"] + data|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n    </tbody>\\n \\n</table>\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{%if (frappe.form_dict.get(\\\"group_by_ledger_type\\\") or \\\"0\\\") == \\\"1\\\" %}\\n{% set show_account_code = (frappe.form_dict.get(\\\"show_account_code\\\") or \\\"0\\\") %}\\n{% set sql = \\\"\\n     select \\n        transaction_type,\\n        name,\\n        reservation_stay,\\n        concat(parent_account_code, '  - ', parent_account_name) as parent_account_name,\\n        concat(account_group , '  - ' , account_group_name) as account_group_name,\\n        room_number,\\n        guest_name,\\n        transaction_number,\\n        reference_number,\\n        concat(account_code, '  - ',report_description) as account_name,\\n        amount * if(type='Debit',1,-1) as amount,\\n        report_quantity as quantity,\\n        owner,\\n        creation\\n    from `tabFolio Transaction` \\n    where\\n        property = '{}' and \\n         posting_date = '{}'\\n    order by\\n        account_code_sort_order,\\n        name\\n\\\".format(\\n    doc.name,\\n    frappe.form_dict.get('start_date')\\n)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n{% set ledger_types=[\\n    {\\\"label\\\": \\\"Guest Ledger\\\",\\\"value\\\":\\\"Reservation Folio\\\" },\\n    {\\\"label\\\": \\\"Deposit Ledger\\\",\\\"value\\\":\\\"Deposit Ledger\\\" },\\n    {\\\"label\\\": \\\"Desk Folio\\\",\\\"value\\\":\\\"Desk Folio\\\" },\\n    {\\\"label\\\": \\\"Payable Ledger\\\",\\\"value\\\":\\\"Payable Ledger\\\" },\\n    {\\\"label\\\": \\\"City Ledger\\\",\\\"value\\\":\\\"City Ledger\\\" },\\n    {\\\"label\\\": \\\"POS\\\",\\\"value\\\":\\\"Cashier Shift\\\" }\\n    ]\\n%}\\n\\n{% set sql=\\\"\\n    select \\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n    from `tabFolio Transaction` \\n    where \\n        property = '{}' and \\n        posting_date < '{}'\\n\\\".format(doc.name,\\n        frappe.form_dict.get('start_date')\\n)\\n%}\\n{% set total_opening_balance = frappe.db.sql(sql,as_dict=1)[0][\\\"amount\\\"]%}\\n\\n<h3>Folio Transaction</h3>\\n\\n<table class='report-list' style='width:100%'>\\n    <thead>\\n        <tr>\\n            <th colspan=\\\"3\\\">\\n                Account Code\\n            </th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Tran. #</th>\\n            <th class=\\\"text-center\\\">Room</th>\\n            <th>Guest</th>\\n            <th class=\\\"text-center\\\">QTY</th>\\n            <th class=\\\"text-right\\\">Amount</th>\\n            <th>By</th>\\n            <th>Date</th>\\n        </tr>\\n    </thead>\\n    <tbody>\\n        <tr>\\n            <td colspan=\\\"9\\\"><strong>Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(total_opening_balance,\\\"Currency\\\")}}</strong></td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        {%for t in ledger_types%}\\n        \\n        {%set groups =data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)| map(attribute='account_group_name')|unique|list %}\\n        \\n        {% set sql=\\\"\\n            select \\n                ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n            from `tabFolio Transaction` \\n            where \\n                property = '{}' and \\n                transaction_type = '{}' and\\n                posting_date <'{}'\\n        \\\".format(doc.name, t.value,frappe.form_dict.get('start_date'))\\n        %}\\n        \\n        {% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}\\n        \\n        \\n        <!--check if ledter type have transactiuon and have opening balance -->\\n        {%if opening_balance_data[0][\\\"amount\\\"] !=0 or groups|length > 0 %}\\n        <tr>\\n            <td colspan=\\\"12\\\"><strong style=\\\"font-size:14px\\\">{{t.label}}</strong>\\n            <hr>\\n            </td>\\n        </tr>\\n        \\n        \\n        <tr>\\n            <td colspan=\\\"9\\\"><strong>{{t.label}} Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(opening_balance_data[0][\\\"amount\\\"],\\\"Currency\\\")}}</strong></td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        {% for g in groups%}\\n        <tr>\\n            <td colspan=12><strong>{{g }}</strong></td>\\n        </tr>\\n        <!--loop account level 2-->\\n        {% for c in data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g) | map(attribute='parent_account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td colspan=11><strong>{{c if show_account_code ==\\\"1\\\" else c.split(\\\"  - \\\")[1]}}</strong></td>\\n        </tr>\\n         <!-- startloop account level 3-->\\n        {% for a in data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list%}\\n        <tr>\\n            <td></td>\\n            <td></td>\\n            <td >{{a.account_name if show_account_code ==\\\"1\\\" else a.account_name.split(\\\"  - \\\")[1]}}</td>\\n            <td class=\\\"text-center\\\">{{a.reservation_stay or \\\"\\\"}}</td>\\n            <td class='text-center'>{{a.transaction_number}} {{ \\\"\\\" if (a.reference_number or \\\"\\\")==\\\"\\\" else \\\"<br/>\\\" + a.reference_number }} </td>\\n            <td class='text-center'>{{a.name}}</td>\\n            <td class='text-center'>{{a.room_number or \\\"\\\"}}</td>\\n            <td >{{a.guest_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\"> {{frappe.format_value(a.quantity,\\\"Float\\\") if a.quantity>0 else \\\"-\\\" }}</td>\\n            <td class='text-right'> {{ frappe.format_value(a.amount,'Currency') }}</td>\\n            <td>{{a.owner.split(\\\"@\\\")[0]}}</td>\\n            <td>{{frappe.format_value(a.creation, \\\"Datetime\\\")}}</td>     \\n        </tr>\\n        \\n        \\n        {%endfor%}\\n        <!--end loop level 3-->\\n        \\n        <!--total level 2-->\\n        <tr>\\n            <td colspan=8 class=\\\"text-right\\\"><strong>*Total {{c}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        <!--end total level 2-->\\n        \\n        {%endfor%}\\n        <!--end loop level 2-->\\n        \\n            <!--total level 1-->\\n        <tr>\\n            <td colspan=8 class=\\\"text-right\\\"><strong>**Total {{g}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        <!--end total level 1-->\\n        \\n        {%endfor%}\\n         <tr>\\n            <td colspan=\\\"9\\\"><strong>{{t.label}} Ending Balance </strong></td>\\n            <td class='text-right'><strong>  {{ frappe.format_value( opening_balance_data[0][\\\"amount\\\"] + data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n            \\n        </tr>\\n        <!--end if check if ledger type has transaction-->\\n        {%endif%}\\n        <!--end loop ledger type-->\\n        {%endfor%}\\n         <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td colspan=\\\"9\\\"><strong>Ending Balance </strong></td>\\n            <td class='text-right'><strong>  {{ frappe.format_value( total_opening_balance + data|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n        </tr>\\n    </tbody>\\n    \\n</table>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2024-02-05 11:44:58.923423",
  "module": "eDoor",
  "name": "eDoor Working Day Transaction Detail Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Payable Ledger",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>PAYABLE VOUCHER</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Vendor Name\\\")}}</td>\\n        <td>: {{doc.vendor_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Payable No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n        \\n              \\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone Number\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Vendor\\\",doc.vendor,'phone_number')}}</td>\\n          <td width=\\\"150px\\\">{{_(\\\"Date\\\")}}</td>\\n        <td>: {{frappe.format(doc.posting_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n        \\n\\n        \\n    </tr>\\n\\n    <tr>\\n         <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Vendor\\\",doc.vendor)}}</td>\\n       \\n        \\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.room_number or ''}}</td>\\n    </tr>\\n  <tr>\\n      \\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Vendor\\\",doc.vendor,'email_address') or ''}}</td>\\n       <td></td>\\n       <td></td>\\n  </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\", transaction_type=\\\"Payable Ledger\\\" ,transaction_number=doc.name) %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td>{{d.account_name or ''}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"4\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n    \\n</table>\\n{%endif%}\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        account_code,\\n        room_number,\\n        account_name,\\n        sum(if(allow_enter_quantity=1,quantity,0)) as quantity,\\n        sum(price * if(type='Debit',1,-1)) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',1,-1)) as bank_fee_amount,\\n        sum(total_amount * if(type='Debit',1,-1)) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Payable Ledger' and\\n        transaction_number = '{}'\\n    group by \\n        account_code,\\n        account_name ,\\n        room_number\\n    order by \\n    account_code_sort_order\\n\\\"\\\"\\\".format(doc.name)%}\\n\\n \\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{%set show_account_code = frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"show_account_code_in_folio_transaction\\\")%}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee> 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==1 else \\\"\\\"}}{{d.account_name or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{d.quantity}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-06 15:00:48.942919",
  "module": "eDoor",
  "name": "eDoor Payable Ledger Invoice Summary",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Payable Ledger",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>PAYABLE VOUCHER</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Vendor Name\\\")}}</td>\\n        <td>: {{doc.vendor_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Payable No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n        \\n              \\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone Number\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Vendor\\\",doc.ven,'phone_number') or ''}}</td>\\n          <td width=\\\"150px\\\">{{_(\\\"Payable Date\\\")}}</td>\\n        <td>: {{frappe.format(doc.posting_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n\\n    </tr>\\n\\n    <tr>\\n         <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Vendor\\\",doc.vendor)}}</td>\\n       \\n        \\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.room_number or ''}}</td>\\n    </tr>\\n  <tr>\\n      \\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Vendor\\\",doc.vendor,'email_address') or ''}}</td>\\n       <td></td>\\n       <td></td>\\n  </tr>\\n  </table>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\", transaction_type=\\\"Payable Ledger\\\" ,transaction_number=doc.name) %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class=\\\"text-center\\\">No</th>    \\n        <th class=\\\"text-center\\\">Date</th>    \\n        <th>Description</th>    \\n        <th>Debit</th>    \\n        <th>Credit</th>    \\n        <th>Balance</th>    \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"5\\\">\\n                <strong>Balance</strong>\\n            </td>\\n            <td class=\\\"text-right\\\"><strong>\\n                {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n            </strong></td>\\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{% set sql=\\\"\\\"\\\"\\n    select \\n        allow_enter_quantity, \\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',1,-1) as bank_fee_amount,\\n        total_amount * if(type='Debit',1,-1) as total_amount, \\n        price * if(type='Debit',1,-1) as price, \\n        room_number,\\n        account_code,\\n        account_name, \\n        posting_date\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type='Payable Ledger' and \\n        transaction_number='{}' and \\n        ifnull(parent_reference,'')=''\\n    \\\"\\\"\\\".format(doc.name) %}\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n\\n\\n{%set show_account_code = frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"show_account_code_in_folio_transaction\\\")%}\\n {% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class=\\\"text-center\\\">No</th>    \\n        <th class=\\\"text-center\\\">Date</th>       \\n        <th>Description</th>    \\n        <th class=\\\"text-center\\\">QTY</th>    \\n        <th class=\\\"text-right\\\">Rate</th>    \\n        <th class=\\\"text-right\\\">Dis.</th>    \\n        {% if total_tax> 0 %}\\n            <th class=\\\"text-right\\\">Tax</th>    \\n        {%endif%}\\n        \\n        {% if total_bank_fee> 0 %}\\n            <th class=\\\"text-right\\\">Bank Fee</th>    \\n        {%endif%}\\n        <th class=\\\"text-right\\\">Total Amt</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n       <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            <td>{{d.account_code + \\\"-\\\" if show_account_code==1 else \\\"\\\"}}{{d.account_name or \\\"\\\"}}</td>\\n            <td class='text-center'>{{d.quantity if d.allow_enter_quantity==1 else \\\"\\\"}}</td>\\n            <td class=\\\"text-right\\\" >{{frappe.format_value(d.price ,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n            \\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"3\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{data |selectattr(\\\"allow_enter_quantity\\\",\\\"equalto\\\",1)|sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"show_summary\\\") or \\\"0\\\") ==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' group by account_category order by account_category_sort_order\\\".format(doc.name),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th colspan='2'>Summary</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n   \\n</table>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-12-06 14:37:04.076820",
  "module": "eDoor",
  "name": "eDoor Payable Ledger Invoice Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:0.5rem !important;\n    border:1px;\n}\n        /* Style even rows */\n.print-format tr:nth-child(even) {\n            background-color: #f2f2f2;\n        }\n        /* Style odd rows */\n.print-format tr:nth-child(odd) {\n            background-color: #fff;\n        }\n.print-format th{\n    background-color: rgb(226 232 240) !important;\n    font-weight: 600;\n    color: #364963 !important;\n    \n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.total_debit{\n    padding:15px!important;\n    background-color:#f0f0f0!important;\n    border-color:#c4c4c4!important;\n    width:300px!important;\n    border:1px!important;\n    border-radius: 0.5rem!important;\n    height: 70px!important;\n    text-transform:uppercase!important;\n    color:#9e9e9e!important;\n    font-size:14px!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\"><h2><div>Audit Trail for {{frappe.form_dict.get(\\\"ref_doctype\\\")}} </div><small class=\\\"sub-heading\\\">\\n   {{frappe.form_dict.get(\\\"ref_docname\\\")}}\\n    \\n</small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% set fields=[\\\"custom_posting_date\\\", \\\"reference_doctype\\\", \\\"reference_name\\\", \\\"subject\\\", \\\"content\\\", \\\"comment_by\\\", \\\"modified\\\"] %}\\n{% set filters=[[\\\"custom_property\\\",\\\"=\\\",doc.name],[\\\"custom_is_audit_trail\\\",\\\"=\\\",1],[frappe.form_dict.get('filter_key') ,\\\"=\\\",frappe.form_dict.get(\\\"ref_docname\\\") ]]%}\\n\\n{% set order_by = frappe.form_dict.get(\\\"order_by\\\")%}\\n{% set data = frappe.db.get_list(\\\"Comment\\\", filters=filters, fields=fields,order_by=order_by,start=0, page_length=1000000)%}\\n\\n<table style=\\\"width:100%\\\" class=\\\"w-100 report-list\\\">\\n        <tr>\\n            <th>No</th>\\n            <th style=\\\"white-space:nowrap;\\\">Audit Date</th>\\n            <th style=\\\"white-space:nowrap;\\\">Reference Type</th>\\n            <th style=\\\"white-space:nowrap;\\\">Reference Name</th>\\n            <th>Subject</th>\\n            <th>Description</th>\\n            <th style=\\\"white-space:nowrap;\\\">By</th>\\n            <th style=\\\"white-space:nowrap;\\\">Date & Time</th>\\n        </tr>\\n        {%for d in data%}\\n        <tr>\\n            <td>{{loop.index}}</td>\\n            <td style=\\\"white-space:nowrap;\\\">{{frappe.format( d.custom_posting_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n            <td style=\\\"white-space:nowrap;\\\">{{d.reference_doctype}}</td>\\n            <td style=\\\"white-space:nowrap;\\\">{{d.reference_name}}</td>\\n            <td>{{d.subject}}</td>\\n            <td>{{d.content}}</td>\\n            <td style=\\\"white-space:nowrap;\\\">{{d.comment_by}}</td>\\n            <td style=\\\"white-space:nowrap;\\\">{{frappe.format( d.modified,{\\\"fieldtype\\\":\\\"Datetime\\\"})}}</td>\\n        </tr>\\n        {%endfor%}\\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-09 12:14:02.450575",
  "module": "eDoor",
  "name": "Document Audit Trail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Folio Transaction",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>RECEIPT</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td width='150px'>{{_(\\\"Company\\\")}}</td>\\r\\n        <td>: {{frappe.db.get_value(\\\"City Ledger\\\",doc.transaction_number,'city_ledger_name') or ''}}</td>\\r\\n        \\r\\n        <td width='150px'>{{_(\\\"Receipt No\\\")}}</td>\\r\\n        <td>: {{doc.name or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td>{{_(\\\"Phone No\\\")}}</td>\\r\\n        <td>: {{frappe.db.get_value(\\\"City Ledger\\\",doc.transaction_number,'phone_number') or ''}}</td>\\r\\n        \\r\\n        <td>{{_(\\\"Date\\\")}}</td>\\r\\n        <td>: {{frappe.format(doc.posting_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td colspan=\\\"4\\\">\\r\\n            <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{_(\\\"Payment Information\\\")}}</h4>\\r\\n \\r\\n        </td>\\r\\n    </tr>\\r\\n      <tr>\\r\\n        <td width=\\\"150px\\\">{{doc.account_name}}</td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.input_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n    {%if doc.bank_fee_amount %}\\r\\n     <tr>\\r\\n        <td width=\\\"150px\\\"></td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Bank Fee\\\")}} {{doc.bank_fee}}%</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.bank_fee_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n\\r\\n     <tr>\\r\\n        <td width=\\\"150px\\\"></td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Payment Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.total_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n        {%endif%}\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if doc.parent_account_name == 'Credit Card' %}\\n  <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{_(\\\"Card Information\\\")}}</h4>\\n\\n<table class=\\\"table table-bordered report-list\\\" style='font-size:13px'>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Card Number\\\")}}</td>\\n        <td>: {{doc.credit_card_number or ''}}</td>\\n         <td width='150px'>{{_(\\\"Bank Name\\\")}}</td>\\n        <td>: {{doc.bank_name or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Card Holder\\\")}}</td>\\n        <td>:  {{doc.card_holder_name or ''}}</td>\\n        <td>{{_(\\\"Card Expired date\\\")}}</td>\\n        <td>: {{ \\\"{}-{}\\\".format( (doc.credit_expired_date|string).split(\\\"-\\\")[1],(doc.credit_expired_date|string).split(\\\"-\\\")[0])  if   doc.credit_expired_date.split else \\\"\\\" }}</td>\\n\\n    </tr>\\n</table>\\n{% endif %}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h5>{{_(\\\"Remark\\\")}} : {{doc.note or ''}}</h5>\\n<hr style=\\\"margin-bottom:100px;margin-top:20px\\\"/>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table>\\n  <tr>\\n      <td>{{_(\\\"User\\\")}}</td>\\n      <td>:</td>\\n      <td>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</td>\\n  </tr>  \\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style='margin-left:100px'>\\n  <tr>\\n      <td>{{_(\\\"Authorized Signatory\\\")}}</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-28 15:45:30.296581",
  "module": "eDoor",
  "name": "City Ledger Payment Receipt",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "table.tb-secd-stk {\n    border-collapse: collapse;\n    border: 1px solid rgba(204, 204, 204, 0.3);\n    width: 100%;\n}\ntable.tb-secd-stk tr td{\n    border-width: 1px !important;\n    border-style: solid;\n    padding: 0.5rem !important;\n}\ntable.tb-secd-stk tr td:first-child{\n    width: auto;\n    white-space: nowrap;\n    background: rgb(243, 243, 243);\n}\ntable.tb-secd-stk tr td:last-child{\n    width: 100%;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Vendor",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\n    <!--<h2>-->\\n    <!--    <small class=\\\"sub-heading\\\">{{doc.name}}</small>-->\\n    <!--</h2>-->\\n    \\n    <table class=\\\"tb-secd-stk table-print-format\\\" style=\\\"width:100%\\\">\\n        <tr>\\n            <td>Vendor Name</td>\\n            <td>{{doc.vendor_name}}</td>\\n        </tr>\\n        <tr>\\n            <td>Vendor Type</td>\\n            <td>{{doc.vendor_type or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Company</td>\\n            <td>{{doc.company or \\\"\\\"}}</td>\\n        </tr>\\n         <tr>\\n            <td>Vendor Group</td>\\n            <td>{{doc.vendor_group or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Contact Name</td>\\n            <td>{{doc.contact_name or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Email Address</td>\\n            <td>{{doc.email_address or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Phone Number</td>\\n            <td>{{doc.phone_number or \\\"\\\"}}</td>\\n        </tr>\\n         <tr>\\n            <td>Website</td>\\n            <td>{{doc.website or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Province</td>\\n            <td>{{doc.province or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Address</td>\\n            <td>{{doc.address or \\\"\\\"}}</td>\\n        </tr>\\n        \\n    </table>\\n</div>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-08 10:30:03.775452",
  "module": "Purchasing",
  "name": "eDoor Vendor Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Guest Ledger Transaction\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table> \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_status = None if  not frappe.form_dict.get('reservation_status') else frappe.form_dict.get('reservation_status').split(',') %}\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\n        report_name=\\\"Guest Ledger Transaction Report\\\",\\n        filters={\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\n            \\\"property\\\":doc.name,\\n            \\\"business_source\\\":frappe.form_dict.get('business_source'),  \\n            \\\"guest\\\":frappe.form_dict.get('guest'),   \\n            \\\"reservation_stay\\\":frappe.form_dict.get('reservation_stay'),   \\n            \\\"reservation\\\":frappe.form_dict.get('reservation'),   \\n            \\\"is_master\\\":frappe.form_dict.get('is_master'),   \\n        }\\n    )\\n%}  \\n\\n\\n{% set sql = \\\"\\n    select  \\n        ifnull(sum(amount * if(type='Debit', 1, -1)),0) as amount\\n    from `tabFolio Transaction` \\n    where\\n        property = '{0}' and \\n        posting_date between '{1}' and '{2}' and\\n        transaction_type = 'Reservation Folio'\\n    order by\\n        account_code_sort_order,\\n        name\\n\\\".format(\\n    doc.name,\\n    frappe.form_dict.get('start_date'),\\n    frappe.form_dict.get('end_date')\\n)\\n%}\\n\\n{% set end_data=frappe.db.sql(sql,as_dict=1) %} \\n\\n\\n{% set sql=\\\"\\n    select \\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n    from `tabFolio Transaction` \\n    where \\n        property = '{0}' and \\n        posting_date < '{1}' and \\n        transaction_type = 'Reservation Folio'\\n\\\".format(doc.name,\\n        frappe.form_dict.get('start_date')\\n)\\n%}\\n\\n{% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}  \\n\\n{% set total_open_balance = opening_balance_data[0][\\\"amount\\\"]|abs %}\\n{% set end_balance = opening_balance_data[0][\\\"amount\\\"] + end_data|sum(attribute=\\\"amount\\\") %}\\n{% set total_end_balance = end_balance|abs %} \\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>   \\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Folio Number</th>\\n            <th class=\\\"text-center\\\">Date</th>\\n            <th class=\\\"\\\">Guest</th>\\n            <th class=\\\"\\\">Guest Name</th>\\n            <th class=\\\"text-center\\\">Room</th>\\n            <th class=\\\"\\\">Room Type</th> \\n            <th>Source</th>\\n            <th class=\\\"text-right\\\">Debit</th>\\n            <th class=\\\"text-right\\\">Credit</th> \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        <tr>\\n            <td colspan=\\\"{% if opening_balance_data[0]['amount'] >= 0 %}10{% else %}11{% endif %}\\\"><strong>Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(total_open_balance, \\\"Currency\\\") }}</strong></td> \\n        </tr>\\n        {% for d in data.result | list %} \\n            <tr> \\n                {% if 'name' in d %}\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                    {% for c in data.columns %}\\n                        {% if c.show_in_report==1 or 'insert_after_index' in c %} \\n                            <td class=\\\"text-{{c.align}}\\\">\\n                                {% if \\\"post_message_action\\\" in c %} \\n                                    <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('{{c.post_message_action}}|{{d[c.fieldname]}}', '*')\\\">{{frappe.format(d[c.fieldname or ''])}}</a> \\n                                {% else %}\\n                                    {{frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}\\n                                {% endif %}\\n                            </td> \\n                        {% endif %}\\n                    {% endfor %}\\n                {% endif %}\\n            </tr> \\n        {% endfor %} \\n        <tr>\\n            <td style=\\\"border-top:solid 1px #000\\\" colspan=\\\"{% if opening_balance_data[0]['amount'] + end_data|sum('amount') >= 0 %}10{% else %}11{% endif %}\\\"><strong><strong>Ending Balance</strong></td>\\n            <td class='text-right'><strong>{{ frappe.format_value(total_end_balance, 'Currency') }}</strong> </td> \\n        </tr>\\n         \\n    </tbody>\\n</table> \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-02 10:42:26.600111",
  "module": "eDoor",
  "name": "Guest Ledger Transaction Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.total_debit{\n    padding:15px!important;\n    background-color:#f0f0f0!important;\n    border-color:#c4c4c4!important;\n    width:230px!important;\n    border:1px!important;\n    border-radius: 0.5rem!important;\n    height: 50px!important;\n    text-transform:uppercase!important;\n    color:#9e9e9e!important;\n    font-size:14px!important;\n}\n\nspan{\n    font-weight:600!important;\n    font-size:18px!important;\n    color:black!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h1 class=\\\"text-center\\\">Guest Ledger</h1>\\r\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\r\\n        report_name=\\\"Guest Ledger Report\\\",\\r\\n        filters={\\r\\n            \\\"filter_date_by\\\":frappe.form_dict.get('filter_date_by'),\\r\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\r\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\r\\n            \\\"property\\\":doc.name,\\r\\n            \\\"reservation_status\\\":frappe.form_dict.get('reservation_status'),\\r\\n            \\\"reservation\\\":frappe.form_dict.get('reservation'),\\r\\n            \\\"reservation_stay\\\":frappe.form_dict.get('reservation_stay'),\\r\\n            \\\"business_source\\\":frappe.form_dict.get('business_source'),\\r\\n            \\\"guest\\\":frappe.form_dict.get('guest'),\\r\\n            \\\"is_master\\\":frappe.form_dict.get('is_master'),\\r\\n            \\r\\n        }\\r\\n    )\\r\\n%}\\r\\n<table style = \\\"justify-content: center;margin-top:10px\\\">\\r\\n    <tr>\\r\\n        <td width=\\\"10px\\\"></td>\\r\\n        {% for d in data.report_summary %}\\r\\n        <td width=\\\"20px\\\"></td>\\r\\n        <td class=\\\"text-right total_debit\\\">\\r\\n            {{d.label}}<br>\\r\\n            <span>{{d.value}}</span>\\r\\n        </td>\\r\\n       {% endfor %}\\r\\n    </tr>\\r\\n</table>\\r\\n\\r\\n{% if data.result %}\\r\\n    {% set last_index = data.result|length  - 1 %}\\r\\n    {% set last_value = data.result[last_index][-8:] %}\\r\\n    <table class='report-list occupied-001' style='width:100%;font-size:12px;'>\\r\\n    <tr>\\r\\n        <th class=\\\"text-center\\\">No</th>\\r\\n            {%for c in data.columns%}\\r\\n                {% if c.show_in_report==1 or 'insert_after_index' in c %}\\r\\n                <th class=\\\"text-{{c.align}}\\\">{{c.label}}</th>\\r\\n                {% endif %}\\r\\n            {%endfor%}\\r\\n    </tr>\\r\\n    {% if (data.result | length) >0 %}\\r\\n    {% for d in data.result[:-1] %}\\r\\n\\r\\n    <tr>\\r\\n        <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n        <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_folio_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\r\\n        <td class=\\\"text-center\\\">{{frappe.format(d.posting_date,{'fieldtype':'Date'})}}</td>\\r\\n        <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\r\\n        <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay}}</a></td>\\r\\n        <td>{{d.business_source}}</td>\\r\\n        <td class=\\\"text-left\\\">{{d.room}}</td>\\r\\n        <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guests}}</a></td>\\r\\n        <td class = \\\"text-right\\\">{{frappe.format(d.opening_balance,{'fieldtype':'Currency'})}}</td>\\r\\n        <td class = \\\"text-right\\\">{{frappe.format(d.debit,{'fieldtype':'Currency'})}}</td>\\r\\n        <td class = \\\"text-right\\\">{{frappe.format(d.credit,{'fieldtype':'Currency'})}}</td>\\r\\n        <td class = \\\"text-right\\\">{{frappe.format(d.balance,{'fieldtype':'Currency'})}}</td>\\r\\n        <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n    </tr>\\r\\n    {% endfor %}\\r\\n    {% endif %}\\r\\n    {% if (last_value | length) > 0 %}\\r\\n    <tr style=\\\"border-top:solid 1px #000\\\">\\r\\n        <td colspan=\\\"8\\\"><strong>Total</strong></td>\\r\\n        {% for d in last_value %}\\r\\n        <td class = \\\"text-right\\\">\\r\\n        <strong>\\r\\n            {% if d != '' %}\\r\\n                {{frappe.format(d,{\\\"fieldtype\\\":\\\"Currency\\\"})}}\\r\\n            {% endif %}\\r\\n        </strong>\\r\\n        </td>\\r\\n        {% endfor %}\\r\\n    </tr>\\r\\n    {% endif %}\\r\\n    \\r\\n</table>\\r\\n{% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n\\r\\n\\r\\n\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-19 09:09:35.254829",
  "module": "eDoor",
  "name": "Guest Ledger Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Guest Ledger Transaction\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table> \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\n        report_name=\\\"City Ledger Transaction Report\\\",\\n        filters={\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'), \\n            \\\"property\\\":doc.name,\\n            \\\"business_source\\\":frappe.form_dict.get('business_source'), \\n            \\\"city_ledger_type\\\":frappe.form_dict.get('city_ledger_type')\\n        }\\n    )\\n%}  \\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>   \\n            <th class=\\\"text-center\\\">Folio Transaction</th>\\n            <th class=\\\"text-center\\\">Date</th>\\n            <th class=\\\"text-right\\\">Account</th>\\n            <th class=\\\"text-center\\\">Guest</th>\\n            <th class=\\\"text-right\\\">Debit</th>\\n            <th class=\\\"text-right\\\">Credit</th>\\n            <th class=\\\"text-right\\\">Amount</th>\\n            <th class=\\\"\\\">User</th>\\n            <th class=\\\"\\\">Modified By</th>\\n            <th>Status</th>\\n            <th>Note</th>\\n        </tr>\\n    </thead>\\n\\n    <tbody>   \\n        {% for d in data.result | list %} \\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td> \\n                <td class=\\\"text-center\\\">{{d.name}}</td> \\n            </tr>\\n        {% endfor %}    \\n    </tbody>\\n</table> \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-23 15:24:19.728858",
  "module": "eDoor",
  "name": "City Ledger Transaction Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Folio Transaction",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>RECEIPT</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td width='100px'>{{_(\\\"Guest\\\")}}</td>\\r\\n        <td width='100px'>: {{doc.guest_name or ''}}</td>\\r\\n        \\r\\n        <td width='100px'>{{_(\\\"Receipt No\\\")}}</td>\\r\\n        <td>: {{doc.name or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr> \\r\\n        <td>{{_(\\\"Room\\\")}}</td>\\r\\n        <td>: {{doc.room_number or ''}}</td>\\r\\n        \\r\\n        <td>{{_(\\\"Date\\\")}}</td>\\r\\n        <td>: {{frappe.format(doc.posting_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td colspan=\\\"4\\\">\\r\\n            <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{_(\\\"Payment Information\\\")}}</h4>\\r\\n \\r\\n        </td>\\r\\n    </tr>\\r\\n      <tr>\\r\\n        <td width=\\\"150px\\\">{{doc.account_name}}</td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.input_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n    {%if doc.bank_fee_amount %}\\r\\n     <tr>\\r\\n        <td width=\\\"150px\\\"></td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Bank Fee\\\")}} {{doc.bank_fee}}%</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.bank_fee_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n\\r\\n     <tr>\\r\\n        <td width=\\\"150px\\\"></td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Payment Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.total_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n        {%endif%}\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if doc.parent_account_name == 'Credit Card' %}\\n  <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{_(\\\"Card Information\\\")}}</h4>\\n\\n<table class=\\\"table table-bordered report-list\\\" style='font-size:13px'>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Card Number\\\")}}</td>\\n        <td>: {{doc.credit_card_number or ''}}</td>\\n         <td width='150px'>{{_(\\\"Bank Name\\\")}}</td>\\n        <td>: {{doc.bank_name or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Card Holder\\\")}}</td>\\n        <td>:  {{doc.card_holder_name or ''}}</td>\\n        <td>{{_(\\\"Card Expired date\\\")}}</td>\\n        <td>: {{ \\\"{}-{}\\\".format( (doc.credit_expired_date|string).split(\\\"-\\\")[1],(doc.credit_expired_date|string).split(\\\"-\\\")[0])  if   doc.credit_expired_date.split else \\\"\\\" }}</td>\\n\\n    </tr>\\n</table>\\n{% endif %}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h5>{{_(\\\"Remark\\\")}} : {{doc.note or ''}}</h5>\\n<hr style=\\\"margin-bottom:100px;margin-top:20px\\\"/>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table>\\n  <tr>\\n      <td>{{_(\\\"User\\\")}}</td>\\n      <td>:</td>\\n      <td>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</td>\\n  </tr>  \\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style='margin-left:100px'>\\n  <tr>\\n      <td>{{_(\\\"Authorized Signatory\\\")}}</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-23 15:14:07.358048",
  "module": "eDoor",
  "name": "Desk Folio Payment Receipt",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Folio Transaction",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>Extra Charge Voucher</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td width='150px'>{{_(\\\"Pay By\\\")}}</td>\\r\\n        <td width='150px'>: {{doc.payment_by or ''}}</td>\\r\\n        \\r\\n        <td width='150px'>{{_(\\\"No.\\\")}}</td>\\r\\n        <td>: {{doc.name or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td>{{_(\\\"Phone Number\\\")}}</td>\\r\\n        <td>: {{doc.payment_by_phone_number or ''}}</td>\\r\\n        \\r\\n        <td>{{_(\\\"Date\\\")}}</td>\\r\\n        <td>: {{frappe.format(doc.posting_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td colspan=\\\"4\\\">\\r\\n            <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{doc.parent_account_name}}</h4>\\r\\n \\r\\n        </td>\\r\\n    </tr>\\r\\n  \\r\\n    <tr>\\r\\n        <td style=\\\"font-size:15px;\\\">{{doc.report_description}}</td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Amount\\\")}}</strong></td>\\r\\n        <td class=\\\"text-right\\\"> <strong>{{frappe.format(doc.amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n    {% if doc.allow_enter_quantity %}\\r\\n    <tr>\\r\\n        <td colspan='2'></td>\\r\\n        <td><strong>Qty</strong></td>\\r\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format_value(doc.quantity,\\\"Float\\\")}}</strong></td>\\r\\n    </tr>\\r\\n    {% endif %}\\r\\n    {% if doc.tax_rule %}\\r\\n        {% set tax_rule = frappe.get_doc(\\\"Tax Rule\\\",doc.tax_rule) %}\\r\\n    {% endif %}\\r\\n    {% if doc.discount > 0 %}\\r\\n        {% if doc.discount_type == 'Percent' %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td width=\\\"150px\\\">{{_(\\\"Discount\\\")}} {{doc.discount}}%</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.discount_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.discount_type == 'Amount' %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{_(\\\"Discount\\\")}}</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.discount_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n    {% endif %}\\r\\n    \\r\\n    {% if doc.tax_rule %}\\r\\n        {% if doc.tax_1_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_1_name}} {{doc.tax_1_rate}}%</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.tax_1_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.tax_2_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_2_name}} {{doc.tax_2_rate}}%</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.tax_2_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.tax_3_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_3_name}} {{doc.tax_3_rate}}%</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.tax_3_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td><strong>{{_(\\\"Total Amount\\\")}}</strong></td>\\r\\n                <td class=\\\"text-right\\\"> <strong>{{frappe.format(doc.total_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n            </tr>\\r\\n    {% endif %}\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h5>{{_(\\\"Remark\\\")}} : {{doc.note or ''}}</h5>\\n<hr style=\\\"margin-bottom:100px;margin-top:20px\\\"/>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table>\\n  <tr>\\n      <td>{{_(\\\"User\\\")}}</td>\\n      <td>:</td>\\n      <td>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</td>\\n  </tr>  \\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style='margin-left:100px'>\\n  <tr>\\n      <td>{{_(\\\"Authorized Signatory\\\")}}</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-23 12:05:52.170418",
  "module": "eDoor",
  "name": "City Ledger Extra Charge Voucher",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Folio Transaction",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>Extra Charge Voucher</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.get_doc(\\\"Desk Folio\\\", doc.transaction_number) %}\\r\\n<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td>{{_(\\\"Guest\\\")}}</td>\\r\\n        <td>: {{data.guest_name or ''}}</td> \\r\\n        \\r\\n        <td width='150px'>{{_(\\\"No.\\\")}}</td>\\r\\n        <td>: {{doc.name or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td width='150px'>{{_(\\\"Room\\\")}}</td>\\r\\n        <td width='150px'>: {{data.room_number or ''}}</td>\\r\\n        \\r\\n        <td>{{_(\\\"Date\\\")}}</td>\\r\\n        <td>: {{frappe.format(doc.posting_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td colspan=\\\"4\\\">\\r\\n            <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{doc.parent_account_name}}</h4>\\r\\n \\r\\n        </td>\\r\\n    </tr>\\r\\n  \\r\\n    <tr>\\r\\n        <td style=\\\"font-size:15px;\\\">{{doc.report_description}}</td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Amount\\\")}}:</strong></td>\\r\\n        <td class=\\\"\\\"> <strong>{{frappe.format(doc.amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n    {% if doc.allow_enter_quantity %}\\r\\n    <tr>\\r\\n        <td colspan='2'></td>\\r\\n        <td><strong>Qty:</strong></td>\\r\\n        <td class=\\\"\\\"><strong>{{frappe.format_value(doc.quantity,\\\"Float\\\")}}</strong></td>\\r\\n    </tr>\\r\\n    {% endif %}\\r\\n    {% if doc.tax_rule %}\\r\\n        {% set tax_rule = frappe.get_doc(\\\"Tax Rule\\\",doc.tax_rule) %}\\r\\n    {% endif %}\\r\\n    {% if doc.discount > 0 %}\\r\\n        {% if doc.discount_type == 'Percent' %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td width=\\\"150px\\\">{{_(\\\"Discount\\\")}} {{doc.discount}}%</td>\\r\\n                <td class=\\\"\\\"> {{frappe.format(doc.discount_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.discount_type == 'Amount' %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{_(\\\"Discount\\\")}}</td>\\r\\n                <td class=\\\"\\\"> {{frappe.format(doc.discount_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n    {% endif %}\\r\\n    \\r\\n    {% if doc.tax_rule %}\\r\\n        {% if doc.tax_1_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_1_name}} {{doc.tax_1_rate}}%</td>\\r\\n                <td class=\\\"\\\"> {{frappe.format(doc.tax_1_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.tax_2_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_2_name}} {{doc.tax_2_rate}}%</td>\\r\\n                <td class=\\\"\\\"> {{frappe.format(doc.tax_2_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.tax_3_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_3_name}} {{doc.tax_3_rate}}%</td>\\r\\n                <td class=\\\"\\\"> {{frappe.format(doc.tax_3_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td><strong>{{_(\\\"Total Amount\\\")}}:</strong></td>\\r\\n                <td class=\\\"\\\"> <strong>{{frappe.format(doc.total_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n            </tr>\\r\\n    {% endif %}\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h5>{{_(\\\"Remark\\\")}} : {{doc.note or ''}}</h5>\\n<hr style=\\\"margin-bottom:100px;margin-top:20px\\\"/>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table>\\n  <tr>\\n      <td>{{_(\\\"User\\\")}}</td>\\n      <td>:</td>\\n      <td>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</td>\\n  </tr>  \\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style='margin-left:100px'>\\n  <tr>\\n      <td>{{_(\\\"Authorized Signatory\\\")}}</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-28 15:14:36.149154",
  "module": "eDoor",
  "name": "Desk Folio Extra Charge Voucher",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Folio Transaction",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>Extra Charge Voucher</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td width='100px'>{{_(\\\"Vendor\\\")}}</td>\\r\\n        <td width='100px'>: {{doc.guest_name or ''}}</td>\\r\\n        \\r\\n        <td width='100px'>{{_(\\\"No.\\\")}}</td>\\r\\n        <td width='100px'>: {{doc.name or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td>{{_(\\\"Room\\\")}}</td>\\r\\n        <td>: {{doc.room_number or ''}}</td>\\r\\n        \\r\\n        <td>{{_(\\\"Date\\\")}}</td>\\r\\n        <td>: {{frappe.format(doc.posting_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td>{{_(\\\"Room Type\\\")}}</td>\\r\\n        <td>: {{doc.room_type or ''}}</td>\\r\\n    </tr>\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td colspan=\\\"4\\\">\\r\\n            <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{doc.parent_account_name}}</h4>\\r\\n \\r\\n        </td>\\r\\n    </tr>\\r\\n  \\r\\n    <tr>\\r\\n        <td style=\\\"font-size:15px;\\\">{{doc.report_description}}</td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Amount\\\")}}</strong></td>\\r\\n        <td class=\\\"text-right\\\"> <strong>{{frappe.format(doc.amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n    {% if doc.allow_enter_quantity %}\\r\\n    <tr>\\r\\n        <td colspan='2'></td>\\r\\n        <td><strong>Qty</strong></td>\\r\\n        <td class=\\\"text-right\\\"><strong>{{frappe.format_value(doc.quantity,\\\"Float\\\")}}</strong></td>\\r\\n    </tr>\\r\\n    {% endif %}\\r\\n    {% if doc.tax_rule %}\\r\\n        {% set tax_rule = frappe.get_doc(\\\"Tax Rule\\\",doc.tax_rule) %}\\r\\n    {% endif %}\\r\\n    {% if doc.discount > 0 %}\\r\\n        {% if doc.discount_type == 'Percent' %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td width=\\\"150px\\\">{{_(\\\"Discount\\\")}} {{doc.discount}}%</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.discount_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.discount_type == 'Amount' %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{_(\\\"Discount\\\")}}</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.discount_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n    {% endif %}\\r\\n    \\r\\n    {% if doc.tax_rule %}\\r\\n        {% if doc.tax_1_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_1_name}} {{doc.tax_1_rate}}%</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.tax_1_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.tax_2_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_2_name}} {{doc.tax_2_rate}}%</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.tax_2_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.tax_3_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_3_name}} {{doc.tax_3_rate}}%</td>\\r\\n                <td class=\\\"text-right\\\"> {{frappe.format(doc.tax_3_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td><strong>{{_(\\\"Total Amount\\\")}}</strong></td>\\r\\n                <td class=\\\"text-right\\\"> <strong>{{frappe.format(doc.total_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n            </tr>\\r\\n    {% endif %}\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h5>{{_(\\\"Remark\\\")}} : {{doc.note or ''}}</h5>\\n<hr style=\\\"margin-bottom:100px;margin-top:20px\\\"/>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table>\\n  <tr>\\n      <td>{{_(\\\"User\\\")}}</td>\\n      <td>:</td>\\n      <td>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</td>\\n  </tr>  \\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style='margin-left:100px'>\\n  <tr>\\n      <td>{{_(\\\"Authorized Signatory\\\")}}</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-23 14:30:26.665252",
  "module": "eDoor",
  "name": "Payable Ledger Charge Voucher",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Folio Transaction",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>RECEIPT</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td width='150px'>{{_(\\\"Guest\\\")}}</td>\\r\\n        <td width='150px'>: {{doc.guest_name or ''}}</td> \\r\\n        \\r\\n        <td width='150px'>{{_(\\\"Receipt No\\\")}}</td>\\r\\n        <td>: {{doc.name or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr> \\r\\n        <td>{{_(\\\"Room\\\")}}</td>\\r\\n        <td>: {{doc.room_number or ''}}</td>\\r\\n        \\r\\n        <td>{{_(\\\"Date\\\")}}</td>\\r\\n        <td>: {{frappe.format(doc.posting_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td colspan=\\\"4\\\">\\r\\n            <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{_(\\\"Payment Information\\\")}}</h4>\\r\\n \\r\\n        </td>\\r\\n    </tr>\\r\\n      <tr>\\r\\n        <td width=\\\"150px\\\">{{doc.account_name}}</td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.input_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n    {%if doc.bank_fee_amount %}\\r\\n     <tr>\\r\\n        <td width=\\\"150px\\\"></td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Bank Fee\\\")}} {{doc.bank_fee}}%</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.bank_fee_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n\\r\\n     <tr>\\r\\n        <td width=\\\"150px\\\"></td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Payment Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.total_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n        {%endif%}\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if doc.parent_account_name == 'Credit Card' %}\\n  <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{_(\\\"Card Information\\\")}}</h4>\\n\\n<table class=\\\"table table-bordered report-list\\\" style='font-size:13px'>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Card Number\\\")}}</td>\\n        <td>: {{doc.credit_card_number or ''}}</td>\\n         <td width='150px'>{{_(\\\"Bank Name\\\")}}</td>\\n        <td>: {{doc.bank_name or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Card Holder\\\")}}</td>\\n        <td>:  {{doc.card_holder_name or ''}}</td>\\n        <td>{{_(\\\"Card Expired date\\\")}}</td>\\n        <td>: {{ \\\"{}-{}\\\".format( (doc.credit_expired_date|string).split(\\\"-\\\")[1],(doc.credit_expired_date|string).split(\\\"-\\\")[0])  if   doc.credit_expired_date.split else \\\"\\\" }}</td>\\n\\n    </tr>\\n</table>\\n{% endif %}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h5>{{_(\\\"Remark\\\")}} : {{doc.note or ''}}</h5>\\n<hr style=\\\"margin-bottom:100px;margin-top:20px\\\"/>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table>\\n  <tr>\\n      <td>{{_(\\\"User\\\")}}</td>\\n      <td>:</td>\\n      <td>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</td>\\n  </tr>  \\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style='margin-left:100px'>\\n  <tr>\\n      <td>{{_(\\\"Authorized Signatory\\\")}}</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-28 15:01:38.237909",
  "module": "eDoor",
  "name": "Deposit Ledger Payment Receipt",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Folio Transaction",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>RECEIPT</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n{% set vendor = frappe.get_doc(\\\"Payable Ledger\\\",doc.transaction_number) %}\\r\\n<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td width='150px'>{{_(\\\"Vendor\\\")}}</td>\\r\\n        <td width='150px'>: {{vendor.vendor_name or ''}}</td> \\r\\n        \\r\\n        <td width='150px'>{{_(\\\"Receipt No\\\")}}</td>\\r\\n        <td>: {{doc.name or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr> \\r\\n        <td>{{_(\\\"Room\\\")}}</td>\\r\\n        <td>: {{vendor.room_number or ''}}</td>\\r\\n        \\r\\n        <td>{{_(\\\"Date\\\")}}</td>\\r\\n        <td>: {{frappe.format(doc.posting_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td colspan=\\\"4\\\">\\r\\n            <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{_(\\\"Payment Information\\\")}}</h4>\\r\\n \\r\\n        </td>\\r\\n    </tr>\\r\\n      <tr>\\r\\n        <td width=\\\"150px\\\">{{doc.account_name}}</td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.input_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n    {%if doc.bank_fee_amount %}\\r\\n     <tr>\\r\\n        <td width=\\\"150px\\\"></td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Bank Fee\\\")}} {{doc.bank_fee}}%</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.bank_fee_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n\\r\\n     <tr>\\r\\n        <td width=\\\"150px\\\"></td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Payment Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.total_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n        {%endif%}\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if doc.parent_account_name == 'Credit Card' %}\\n  <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{_(\\\"Card Information\\\")}}</h4>\\n\\n<table class=\\\"table table-bordered report-list\\\" style='font-size:13px'>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Card Number\\\")}}</td>\\n        <td>: {{doc.credit_card_number or ''}}</td>\\n         <td width='150px'>{{_(\\\"Bank Name\\\")}}</td>\\n        <td>: {{doc.bank_name or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Card Holder\\\")}}</td>\\n        <td>:  {{doc.card_holder_name or ''}}</td>\\n        <td>{{_(\\\"Card Expired date\\\")}}</td>\\n        <td>: {{ \\\"{}-{}\\\".format( (doc.credit_expired_date|string).split(\\\"-\\\")[1],(doc.credit_expired_date|string).split(\\\"-\\\")[0])  if   doc.credit_expired_date.split else \\\"\\\" }}</td>\\n\\n    </tr>\\n</table>\\n{% endif %}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h5>{{_(\\\"Remark\\\")}} : {{doc.note or ''}}</h5>\\n<hr style=\\\"margin-bottom:100px;margin-top:20px\\\"/>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table>\\n  <tr>\\n      <td>{{_(\\\"User\\\")}}</td>\\n      <td>:</td>\\n      <td>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</td>\\n  </tr>  \\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style='margin-left:100px'>\\n  <tr>\\n      <td>{{_(\\\"Authorized Signatory\\\")}}</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-28 14:55:49.556151",
  "module": "eDoor",
  "name": "Payable Ledger Payment Receipt",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>Business Branch</div><br><small class=\\\"sub-heading\\\">{{ doc.name }}</small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%\\r\\n\\r\\nset data = frappe.db.sql(\\\"\\r\\n    select \\r\\n        name,\\r\\n        room_number,\\r\\n        room_type,\\r\\n        guest,\\r\\n        guest_name,\\r\\n        posting_date,\\r\\n        total_debit,\\r\\n        total_credit,\\r\\n        balance,\\r\\n        modified_by,\\r\\n        creation,\\r\\n        status\\r\\n    from `tabDesk Folio` \\r\\n    where \\r\\n        property = '{0}' and\\r\\n        posting_date = '{1}'\\r\\n    \\\".format(\\r\\n        doc.name,\\r\\n        frappe.form_dict.get('date')\\r\\n    ),as_dict=1)\\r\\n%}\\r\\n\\r\\n{% if (data|length) >0 %}\\r\\n<table class='report-list occupied-001' style='width:100%'>\\r\\n \\r\\n        <tr>\\r\\n            <th class=\\\"text-center\\\">No.</th>\\r\\n            <th class=\\\"text-center\\\">Desk Folio #</th>\\r\\n            <th class=\\\"text-center\\\">Room</th>\\r\\n            <th>Room Type</th>\\r\\n            <th>Guest</th>\\r\\n            <th class=\\\"text-center\\\">Desk Folio. Date</th>\\r\\n            <th class=\\\"text-end\\\">Debit</th>\\r\\n            <th class=\\\"text-end\\\">Credit</th>\\r\\n            <th class=\\\"text-end\\\">Balance</th>\\r\\n            <th>Created By</th>\\r\\n            <th>Creation</th>\\r\\n            <th class=\\\"text-center\\\">Status</th>\\r\\n        </tr>\\r\\n        {%for d in data%}\\r\\n            <tr>\\r\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_desk_folio_detail|{{d.name}}', '*')\\\">{{ d.name }}</a></td>\\r\\n                <td class=\\\"text-center\\\">{{ d.room_number }}</td>\\r\\n                <td>{{ d.room_type }}</td>\\r\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{ d.guest }} - {{ d.guest_name }}</a></td>\\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.posting_date,{'fieldtype':'Date'})}}</td>\\r\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_debit,{'fieldtype':'Currency'})}}</td>\\r\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_credit,{'fieldtype':'Currency'})}}</td>\\r\\n                <td class=\\\"text-end\\\">{{frappe.format(d.balance,{'fieldtype':'Currency'})}}</td>\\r\\n                <td>{{ d.modified_by }}</td>\\r\\n                <td>{{frappe.utils.pretty_date(d.creation)}}</td>\\r\\n                <td class=\\\"text-center\\\"><span style=\\\"{% if d.status == 'Open' %}background:#a0e6ba;color:#188a42;{% else %}background:#EEEEEE;color:#000{% endif %}\\\" class=\\\"px-1 py-1 rounded\\\">{{ d.status }}</span></td>\\r\\n            </tr>\\r\\n        {%endfor%}\\r\\n</table>\\r\\n{% else %}\\r\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n<div class=\\\"isemtyIcon\\\"></div> \\r\\n<small class=\\\"text-emty\\\">No Data </small>\\r\\n</div>\\r\\n{%endif%}\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-19 12:19:55.172186",
  "module": "eDoor",
  "name": "eDoor Desk Folio",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival Remaining\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n\\n\\n{% if frappe.form_dict.get('action')=='view_arrival_remaining' %}\\n\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_date,\\n        reference_number,\\n        reservation_type,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        ifnull(keyword,'') like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status in ('Reserved','Confirmed') \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or ''\\n        ),as_dict=1)\\n%}\\n\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            \\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n             {%endif%}\\n             <th class=\\\"text-center\\\">Status</th> \\n            \\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                    <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td> \\n                    <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                   \\n                {%endif%}\\n                 <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                \\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n\\n{% if frappe.form_dict.get('action')=='view_arrival' %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        is_active_reservation = 1 and\\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        ifnull(keyword,'') like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status = if('{5}' = '', reservation_status, '{5}') \\n       \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n            frappe.form_dict.get('floor') or ''\\n            \\n        ),as_dict=1)\\n%}\\n\\n    {% if (data|length) >0 %}\\n\\n    <table class='report-list occupied-001' style='width:100%'>\\n     \\n            <tr>\\n                <th class=\\\"text-center\\\">No.</th>\\n                <th class=\\\"text-center\\\">Reservation #</th>\\n                <th class=\\\"text-center\\\">Stay #</th>\\n                <th>Ref. #</th>\\n                <th class=\\\"text-center\\\">Type</th>\\n                <th class=\\\"text-center\\\">Res. Date</th>\\n                \\n                <th class=\\\"text-center\\\">Stay Date</th>\\n                <th class=\\\"text-center\\\">Room Nights</th>\\n                <th>Room(s)</th>\\n                <th>Guest</th>\\n                <th>Source</th>\\n                {%if can_view_rate==1%}\\n                    <th class=\\\"text-end\\\">ADR</th>\\n                    <th class=\\\"text-end\\\">Total Room Rate</th>\\n                {%endif%}\\n                <th class=\\\"text-center\\\">Status</th>\\n            </tr>\\n      \\n            {%for d in data%}\\n                <tr>\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                    <td>{{d.reference_number or \\\"\\\"}}</td>\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                   \\n                    <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                    <td>\\n                        {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                        {% if (rooms|length)>0 %}\\n                            {% for room in rooms %}\\n                              <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                            {% endfor %}\\n                        {% endif %}\\n                    </td>\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                    <td>{{d.business_source}}</td>\\n                    {%if can_view_rate ==1  %}\\n                        <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                        <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                    {%endif%}\\n                    <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                </tr>\\n            {%endfor%}\\n         \\n    </table>\\n    {% else %}\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n        <div class=\\\"isemtyIcon\\\"></div> \\n        <small class=\\\"text-emty\\\">No Data </small>\\n    </div>\\n    {%endif%}\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2024-01-15 08:55:44.402712",
  "module": "eDoor",
  "name": "eDoor Testing Print Format",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 }
]