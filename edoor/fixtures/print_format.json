[
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"\\r\\n\\r\\n<h2 class=\\\"text-center\\\">{{_(\\\"Arrival Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width: 150%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n\\r\\n        <br>\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        </td> \\r\\n        <td>\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            child,\\r\\n            total_room_rate ,\\r\\n            require_pickup,\\r\\n            TIME_FORMAT(pickup_time, '%H:%i') as pickup_time,\\r\\n            arrival_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date = '{1}' and \\r\\n            keyword like '%{2}%' and \\r\\n            business_source = if('{3}'='', business_source,'{3}') and \\r\\n            room_types like '%{4}%' and \\r\\n            is_active_reservation=1 \\r\\n        \\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-end\\\">ADR</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {%for d in data%}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.pickup_time}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">{{d.arrival_flight_number or \\\"\\\"}}</td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n            \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"6\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n    \\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\">{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2023-12-04 11:30:39.372586",
  "module": "eDoor",
  "name": "Front Desk Arrival Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-11 16:40:44.485469",
  "module": "eDoor",
  "name": "eDoor Config Room Assignment and Over Booking Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>FOLIO DETAIL BY RESERVATION</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"guest_name\", \"print_hide\": 0, \"label\": \"Guest Name\"}, {\"fieldname\": \"nationality\", \"print_hide\": 0, \"label\": \"Nationality\"}, {\"fieldname\": \"business_source\", \"print_hide\": 0, \"label\": \"Business Source\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Address\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t\\t{{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"address\\\") or \\\"\\\"}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rate_type\", \"print_hide\": 0, \"label\": \"Rate Type\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Reservation #\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t{{doc.name}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rooms\", \"print_hide\": 0, \"label\": \"Rooms\"}, {\"fieldname\": \"arrival_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check In\"}, {\"fieldname\": \"departure_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check Out\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n {% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\", transaction_type=\\\"Reservation Folio\\\" ,transaction_number=frappe.form_dict.get(\\\"folio\\\")) %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>    \\n        <th class='text-center'>Date</th>    \\n        {% if show_room_number=='1'%}\\n            <th class='text-center'>Room</th>    \\n        {%endif%}\\n        <th>Description</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Debit</th>    \\n        <th class='text-right'>Credit</th>    \\n        <th class='text-right'>Balance</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            <td class='text-center'>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            {% if show_room_number=='1'%}\\n                <td class='text-center'>{{d.room_number or \\\"\\\"}}</td>\\n            {%endif%}\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            \\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data |sum(attribute='quantity'),'Float')}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n\\n{%endif%}\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        room_number,\\n        account_code,\\n        account_code_sort_order,\\n        posting_date,\\n        report_description,\\n        report_quantity as quantity,\\n        (price  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',-1,1) as bank_fee_amount,\\n        (total_amount - bank_fee_amount) * if(type='Debit',1,-1)  as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{0}' and \\n        ifnull(parent_reference,'')=''\\n        \\n    order by \\n    posting_date,\\n    name\\n\\\"\\\"\\\".format(\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            <th class=\\\"text-center\\\">Date</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,'Date')}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' and transaction_type='Reservation Folio' group by account_category order by account_category_sort_order\\\".format(frappe.form_dict.get(\\\"folio\\\")),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>Summary</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-center\\\">{{frappe.format_value(d.quantity,\\\"Float\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n        \\n    </tbody>\\n   <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-11-23 08:39:35.441910",
  "module": "eDoor",
  "name": "eDoor Folio  Transaction Detail  by Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>INVOICE</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px; margin-bottom:4px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Folio No.\\\")}}</td>\\n        <td>: {{frappe.form_dict.get(\\\"folio\\\") or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n        <td>{{_(\\\"Date\\\")}}</td>\\n        <td>: {{ frappe.format_value(frappe.db.get_value(\\\"Reservation Folio\\\",frappe.form_dict.get(\\\"folio\\\"),\\\"posting_date\\\"),\\\"Date\\\")}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n        <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>\\n        <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.rooms or ''}}</td>\\n\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Credit Debit Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type='Reservation Folio', transaction_number=frappe.form_dict.get(\\\"folio\\\"),sort_by_field='account_category_sort_order',show_room_number=frappe.form_dict.get(\\\"show_room_number\\\"),show_account_code=frappe.form_dict.get(\\\"show_account_code\\\")) %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>  \\n            {%if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>    \\n            {%endif%}\\n            <th>Description</th>    \\n            <th class='text-center'>QTY</th>\\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            {%if show_room_number==\\\"1\\\" %}\\n                <td class='text-center'>{{d.room_number or ''}}</td>\\n            {%endif%}\\n            <td>{{d.description or ''}}</td>\\n            <td class='text-center'>{{ frappe.format_value(d.quantity,'Float') }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"{{ 3 if show_room_number=='1' else 2 }}\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                \\n                <td class=\\\"text-center\\\"><strong>\\n                    {{ frappe.format_value(data|sum(attribute='quantity'),'Float')}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        {0}\\n        account_code,\\n        report_description,\\n        sum(report_quantity) as quantity,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',-1,1)) as bank_fee_amount,\\n        sum((total_amount - bank_fee_amount) * if(type='Debit',1,-1) ) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{1}' and \\n        ifnull(parent_reference,'')=''\\n    group by \\n        {0}\\n        account_code,\\n        price,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1),\\n        report_description ,\\n        account_code_sort_order\\n        \\n    order by \\n    {0}\\n    account_code_sort_order\\n\\\"\\\"\\\".format(\\n        '' if frappe.form_dict.get(\\\"show_room_number\\\") ==\\\"0\\\" else \\\"room_number,\\\",\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{3 if show_room_number=='1' else 2}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data | sum(attribute='quantity'),\\\"Float\\\")}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order,sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' group by account_category order by account_category_sort_order\\\".format(frappe.form_dict.get(\\\"folio\\\")),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>{{_('Summary')}}</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n        <td class='text-center'>{{ frappe.format(d.quantity,'Float') }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n   \\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-23 15:49:38.267548",
  "module": "eDoor",
  "name": "eDoor Reservation Folio List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\r\n    .custom-counter {\r\n      counter-reset: section;\r\n    }\r\n    .custom-counter li::before {\r\n      counter-increment: step-counter;\r\n      content: counter(step-counter);\r\n      background: #000;\r\n    }\r\n     .custom-counter li{\r\n         background: #000;\r\n     }",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>Business Branch</div><br><small class=\\\"sub-heading\\\">{{ doc.name }}</small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"wrp-shortcut-key\\\"> \\r\\n<ul>\\r\\n    <li><span>Open global search</span> <kbd>Ctrl + k</kbd></li>\\r\\n    <hr class=\\\"hrme\\\">\\r\\n    <li><span>Create New FIT Reservation</span> <kbd>Ctrl + f</kbd></li>\\r\\n    <hr class=\\\"hrme\\\">\\r\\n</ul>\\r\\n</div>\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-01 11:59:55.964904",
  "module": "Configuration",
  "name": "eDoor Shortcut Menu Help",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Arrival Guest\\\")}}</h2>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            total_room_rate ,\\r\\n            pickup_time,\\r\\n            arrival_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date = '{1}' and \\r\\n            keyword like '%{2}%' and \\r\\n            business_source = if('{3}'='', business_source,'{3}') and \\r\\n            room_types like '%{4}%' and \\r\\n            is_active_reservation=1\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n     \\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Ref. #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-end\\\">ADR</th>\\r\\n                <th class=\\\"text-end\\\">Total Room Rate</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n            </tr>\\r\\n      \\r\\n            {%for d in data%}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.pickup_time}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.arrival_flight_number or \\\"\\\"}}</td>\\r\\n                    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n         \\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-08-28 08:46:52.340117",
  "module": "eDoor",
  "name": "Front Desk Arrival Guest Report Test",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>INVOICE</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px; margin-bottom:4px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Folio No.\\\")}}</td>\\n        <td>: {{frappe.form_dict.get(\\\"folio\\\") or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n        <td>{{_(\\\"Date\\\")}}</td>\\n        <td>: {{ frappe.format_value(frappe.db.get_value(\\\"Reservation Folio\\\",frappe.form_dict.get(\\\"folio\\\"),\\\"posting_date\\\"),\\\"Date\\\")}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n        <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>\\n        <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.rooms or ''}}</td>\\n\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Credit Debit Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type='Reservation Folio', transaction_number=frappe.form_dict.get(\\\"folio\\\"),sort_by_field='account_category_sort_order',show_room_number=frappe.form_dict.get(\\\"show_room_number\\\"),show_account_code=frappe.form_dict.get(\\\"show_account_code\\\")) %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>  \\n            {%if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>    \\n            {%endif%}\\n            <th>Description</th>    \\n            <th class='text-center'>QTY</th>\\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            {%if show_room_number==\\\"1\\\" %}\\n                <td class='text-center'>{{d.room_number or ''}}</td>\\n            {%endif%}\\n            <td>{{d.description or ''}}</td>\\n            <td class='text-center'>{{ frappe.format_value(d.quantity,'Float') }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"{{ 3 if show_room_number=='1' else 2 }}\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                \\n                <td class=\\\"text-center\\\"><strong>\\n                    {{ frappe.format_value(data|sum(attribute='quantity'),'Float')}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        {0}\\n        account_code,\\n        report_description,\\n        sum(report_quantity) as quantity,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',-1,1)) as bank_fee_amount,\\n        sum((total_amount - bank_fee_amount) * if(type='Debit',1,-1) ) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{1}' and \\n        ifnull(parent_reference,'')=''\\n    group by \\n        {0}\\n        account_code,\\n        price,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1),\\n        report_description ,\\n        account_code_sort_order\\n        \\n    order by \\n    {0}\\n    account_code_sort_order\\n\\\"\\\"\\\".format(\\n        '' if frappe.form_dict.get(\\\"show_room_number\\\") ==\\\"0\\\" else \\\"room_number,\\\",\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{3 if show_room_number=='1' else 2}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data | sum(attribute='quantity'),\\\"Float\\\")}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order,sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' group by account_category order by account_category_sort_order\\\".format(frappe.form_dict.get(\\\"folio\\\")),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>{{_('Summary')}}</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n        <td class='text-center'>{{ frappe.format(d.quantity,'Float') }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n   \\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-21 23:28:52.614433",
  "module": "eDoor",
  "name": "eDoor Reservation Stay Folio Summary Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>INVOICE</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"guest_name\", \"print_hide\": 0, \"label\": \"Guest Name\"}, {\"fieldname\": \"nationality\", \"print_hide\": 0, \"label\": \"Nationality\"}, {\"fieldname\": \"business_source\", \"print_hide\": 0, \"label\": \"Business Source\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Address\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t\\t{{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"address\\\") or \\\"\\\"}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rate_type\", \"print_hide\": 0, \"label\": \"Rate Type\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Folio #\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t{{frappe.form_dict.get(\\\"folio\\\")}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Date\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t{{frappe.format_value(frappe.db.get_value(\\\"Reservation Folio\\\",frappe.form_dict.get(\\\"folio\\\"),\\\"posting_date\\\"),\\\"Date\\\")}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rooms\", \"print_hide\": 0, \"label\": \"Rooms\"}, {\"fieldname\": \"arrival_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check In\"}, {\"fieldname\": \"departure_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check Out\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n {% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\", transaction_type=\\\"Reservation Folio\\\" ,transaction_number=frappe.form_dict.get(\\\"folio\\\")) %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>    \\n        <th class='text-center'>Date</th>    \\n        {% if show_room_number=='1'%}\\n            <th class='text-center'>Room</th>    \\n        {%endif%}\\n        <th>Description</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Debit</th>    \\n        <th class='text-right'>Credit</th>    \\n        <th class='text-right'>Balance</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            <td class='text-center'>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            {% if show_room_number=='1'%}\\n                <td class='text-center'>{{d.room_number or \\\"\\\"}}</td>\\n            {%endif%}\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            \\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data |sum(attribute='quantity'),'Float')}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n\\n{%endif%}\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        room_number,\\n        account_code,\\n        account_code_sort_order,\\n        posting_date,\\n        report_description,\\n        report_quantity as quantity,\\n        (price  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',-1,1) as bank_fee_amount,\\n        (total_amount - bank_fee_amount) * if(type='Debit',1,-1)  as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{0}' and \\n        ifnull(parent_reference,'')=''\\n        \\n    order by \\n    posting_date,\\n    name\\n\\\"\\\"\\\".format(\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            <th class=\\\"text-center\\\">Date</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,'Date')}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' and transaction_type='Reservation Folio' group by account_category order by account_category_sort_order\\\".format(frappe.form_dict.get(\\\"folio\\\")),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>Summary</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-center\\\">{{frappe.format_value(d.quantity,\\\"Float\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n        \\n    </tbody>\\n   <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-11-22 17:02:45.968999",
  "module": "eDoor",
  "name": "eDoor Reservation Stay Folio Detail Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div>\\t\\n   \\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Conflict Room\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\n                with a as (select \\n                                room_id,\\n                                date \\n                        from `tabTemp Room Occupy` \\n                        where \\n                                ifnull(room_id,'')!='' and \\n                                is_departure=0 and date>='{0}' and \\n                                type='Reservation' and \\n                                reservation_status!='Checked Out' \\n                        group by \\n                                date,\\n                                room_id \\n                        having count(room_id)>1)\\n                ,b as (select distinct \\n                                reservation_stay \\n                        from `tabTemp Room Occupy` \\n                        where \\n                                room_id in(select room_id from a) and \\n                                date in (select date from a))\\n                        select * from `tabReservation Stay` where name in (select reservation_stay from b)\\n\\\".format(doc.name,\\n        frappe.form_dict.get('date')\\n        ),as_dict=1)%}\\n\\n<div style=\\\"font-size:16px;margin-top:7px\\\"><strong>{{_(\\\"Conflict Room Assignment\\\")}}</strong></div>\\n {% if data %}\\n<table class='report-list occupied-001' style=\\\"width:100%;margin-top:7px;\\\">\\n        <tr>\\n            <th class=\\\"text-center\\\">{{_(\\\"No.\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Res #\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Stay #\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Type\\\")}}</th>\\n            <th>{{_(\\\"Res Date\\\")}}</th>\\n            <th>{{_(\\\"Arrival Date\\\")}}</th>\\n            <th>{{_(\\\"Departure Date\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Room Night\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Room\\\")}}</th>\\n            <th>{{_(\\\"Guest\\\")}}</th>\\n            <th>{{_(\\\"Source\\\")}}</th>\\n            <th class=\\\"text-end nowrap\\\">{{_(\\\"ADR\\\")}}</th>\\n            <th class=\\\"text-end nowrap\\\">{{_(\\\"Total Room Rate\\\")}}</th>\\n            <th class=\\\"text-end nowrap\\\">{{_(\\\"Status\\\")}}</th>\\n        </tr>\\n        {% for d in data  %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation or ''}}</a></td>\\n            <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name or ''}}</a></td>\\n            <td class=\\\"text-center\\\">{{d.reservation_type or ''}}</td>\\n            <td>{{frappe.format(d.reservation_date or '',{'fieldtype':'Date'})}}</td>\\n            <td> {{frappe.format(d.arrival_date or '',{'fieldtype':'Date'})}}</td>\\n            <td> {{frappe.format(d.departure_date or '',{'fieldtype':'Date'})}}</td>\\n            <td class=\\\"text-center\\\">{{d.room_nights or 0}}</td>\\n            <td class=\\\"text-center\\\">{{d.room_type_alias or ''}}/{{d.rooms or ''}}</td>\\n            <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name or ''}}</a></td>\\n            <td>{{d.business_source or ''}}</td>\\n            <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr or '',{'fieldtype':'Currency'})}}</td>\\n            <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_room_rate or '',{'fieldtype':'Currency'})}}</td>\\n            <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n        </tr>\\n        {% endfor %}\\n</table>\\n{% else %}\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n    </div>\\n    {% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Over Booking Reservation\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\r\\n                with a as (select \\r\\n                                room_type,\\r\\n                                room_type_id,\\r\\n                                count(name) as total_room \\r\\n                from `tabRoom` \\r\\n                group by room_type_id)\\r\\n                ,b as (select \\r\\n                                sum(type='Reservation') as total_booking, \\r\\n                                sum(type='Block') as total_block, \\r\\n                                room_type_id,date \\r\\n                from `tabTemp Room Occupy` \\r\\n                group by \\r\\n                                date,\\r\\n                                room_type_id)\\r\\n                select *, \\r\\n                                (b.total_booking-a.total_room) as total_over_booking,\\r\\n                                (a.total_room-b.total_block) as total_available \\r\\n                                \\r\\n                from a \\r\\n                inner join b on a.room_type_id = b.room_type_id \\r\\n                where \\r\\n                                b.total_booking > (a.total_room-b.total_block) \\r\\n                order by \\r\\n                                b.date,\\r\\n                                a.room_type\\r\\n\\r\\n\\\".format(doc.name\\r\\n        ),as_dict=1)%}\\r\\n        \\r\\n<div style = \\\"font-size:16px;margin-top:15px\\\"><strong>{{_(\\\"Over Booking Reservation\\\")}}</strong></div>\\r\\n\\r\\n{% if data %}\\r\\n<table class='report-list occupied-001' style=\\\"width:100%;margin-top:7px;\\\">\\r\\n    <tr>\\r\\n        <th class=\\\"text-center\\\">{{_(\\\"No.\\\")}}</th>\\r\\n        <th>{{_(\\\"Room Type\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Room\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Block\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Available\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Booking\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Over Booking\\\")}}</th>\\r\\n    </tr>\\r\\n    {% for date in data | map(attribute='date') | unique | list |sort %}\\r\\n    <tr>\\r\\n        <td><strong><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage({action:'view_property_data_sumary_by_date', date:'{{date}}'}, '*')\\\">{{frappe.format(date,{'fieldtype':'Date'})}}</a></strong></td>\\r\\n        <td></td>\\r\\n        <td></td>\\r\\n        <td></td>\\r\\n        <td></td><td></td>\\r\\n        <td></td>\\r\\n    </tr>\\r\\n        {% for d in data | selectattr('date', 'equalto', date) %}\\r\\n            <tr>\\r\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage({action:'view_property_data_sumary_by_date', date:'{{d.date}}',room_type_id:'{{d.room_type_id}}',room_type:'{{d.room_type}}'}, '*')\\\">{{d.room_type}}</a></td>\\r\\n                <td>{{d.total_room }}</td>\\r\\n                <td>{{d.total_block | round | int}}</td>\\r\\n                <td>{{d.total_available | round | int}}</td>\\r\\n                <td>{{d.total_booking | round | int}}</td>\\r\\n                <td>{{d.total_over_booking | round | int}}</td>\\r\\n            </tr>\\r\\n        {% endfor %}\\r\\n    {% endfor %}\\r\\n</table>\\r\\n{% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {% endif %}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-25 22:31:40.110472",
  "module": "eDoor",
  "name": "eDoor Conflict Room Assignment and Over Booking Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: 1px!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.border{\r\n    border-bottom:solid 1px #000!important;\r\n    padding:0px!important;\r\n}\r\n\r\n.print-format td, .print-format th{\r\n    padding: 7px 0px!important;\r\n}\r\n\r\n.print-format .table-bordered td, .print-format .table-bordered th{\r\n    border:1px solid #000!important;\r\n    padding:6px 10px!important;\r\n}\r\n.print-format .table-bordered {\r\n    border: 0!important;\r\n    margin-top: 10px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center><h1>Guest Registration Card</h1></center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%\\\">\\n    <tr>\\n        <td width=\\\"150\\\">{{_(\\\"Reservation No.\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n        <td width=\\\"50px\\\"></td>\\n        <td width=\\\"150\\\">{{_(\\\"Check-in Date\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150\\\">{{_(\\\"Roon No.\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n        <td width=\\\"50px\\\"></td>\\n        <td width=\\\"150\\\">{{_(\\\"Check-out Date\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n    </tr>\\n    \\n    <tr>\\n        <td width=\\\"150\\\">{{_(\\\"Roon Type\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n        <td width=\\\"50px\\\"></td>\\n        <td width=\\\"150\\\">{{_(\\\"No of Person\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150\\\">{{_(\\\"Business Source\\\")}}</td>\\n        <td class=\\\"border\\\">:</td>\\n        <td width=\\\"50px\\\"></td>\\n        <td width=\\\"150\\\"></td>\\n        <td></td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table class=\\\"table table-bordered\\\" style=\\\"margin-top:50px\\\">\\n    <tr>\\n        <td>{{_(\\\"Title:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"First Name:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Last Name:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Address:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"City:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"300px\\\">{{_(\\\"Country:\\\")}}</td>\\n        <td width=\\\"400px\\\"></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Email:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Phone:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td colspan=\\\"2\\\">{{_(\\\"Identity Information\\\")}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Type:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Expired Date:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Number:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Country:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table style=\\\"width:100%;margin-top:100px\\\" >\\n  <tr>\\n      <td width=\\\"150\\\">{{_(\\\"Check-in By\\\")}} </td>\\n      <td class=\\\"border\\\">:</td>\\n      <td width=\\\"50px\\\"></td>\\n      <td width=\\\"150\\\">{{_(\\\"Guest's Sign\\\")}} </td>\\n      <td class=\\\"border\\\">:</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-27 16:39:33.450310",
  "module": "Configuration",
  "name": "eDoor Blank Guest Registration Card",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Deposit Ledger",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>DEPOSIT VOUCHER</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Deposit No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n        \\n              \\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone Number\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'phone_number')}}</td>\\n          <td width=\\\"150px\\\">{{_(\\\"Deposit Date\\\")}}</td>\\n        <td>: {{frappe.format(doc.posting_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n        \\n\\n        \\n    </tr>\\n\\n    <tr>\\n         <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'country')}}</td>\\n       \\n        \\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.room_number or ''}}</td>\\n    </tr>\\n  <tr>\\n      \\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'email_address') or ''}}</td>\\n       <td></td>\\n       <td></td>\\n  </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type=\\\"Deposit Ledger\\\", transaction_number=doc.name,sort_by_field='account_code_sort_order') %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td>{{d.description or ''}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"4\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n    \\n</table>\\n{%endif%}\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        account_code,\\n        room_number,\\n        account_name,\\n        sum(if(allow_enter_quantity=1,quantity,0)) as quantity,\\n        sum(price * if(type='Debit',1,-1)) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',1,-1)) as bank_fee_amount,\\n        sum(total_amount * if(type='Debit',1,-1)) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Deposit Ledger' and\\n        transaction_number = '{}'\\n    group by \\n        account_code,\\n        account_name ,\\n        room_number\\n    order by \\n    account_code_sort_order\\n\\\"\\\"\\\".format(doc.name)%}\\n\\n \\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{%set show_account_code = frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"show_account_code_in_folio_transaction\\\")%}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee> 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==1 else \\\"\\\"}}{{d.account_name or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{d.quantity}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-18 22:07:43.995017",
  "module": "eDoor",
  "name": "eDoor Deposit Ledger Invoice Summary",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Deposit Ledger",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>DEPOSIT VOUCHER</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Deposit No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n        \\n              \\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone Number\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'phone_number')}}</td>\\n          <td width=\\\"150px\\\">{{_(\\\"Deposit Date\\\")}}</td>\\n        <td>: {{frappe.format(doc.posting_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n\\n    </tr>\\n\\n    <tr>\\n         <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'country')}}</td>\\n       \\n        \\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.room_number or ''}}</td>\\n    </tr>\\n  <tr>\\n      \\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'email_address') or ''}}</td>\\n       <td></td>\\n       <td></td>\\n  </tr>\\n  </table>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\", transaction_type=\\\"Deposit Ledger\\\" ,transaction_number=doc.name) %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class=\\\"text-center\\\">No</th>    \\n        <th class=\\\"text-center\\\">Date</th>    \\n        <th>Description</th>    \\n        <th>Debit</th>    \\n        <th>Credit</th>    \\n        <th>Balance</th>    \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"5\\\">\\n                <strong>Balance</strong>\\n            </td>\\n            <td class=\\\"text-right\\\"><strong>\\n                {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n            </strong></td>\\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{% set sql=\\\"\\\"\\\"\\n    select \\n        allow_enter_quantity, \\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',1,-1) as bank_fee_amount,\\n        total_amount * if(type='Debit',1,-1) as total_amount, \\n        price * if(type='Debit',1,-1) as price, \\n        room_number,\\n        account_code,\\n        account_name, \\n        posting_date\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type='Deposit Ledger' and \\n        transaction_number='{}' and \\n        ifnull(parent_reference,'')=''\\n    \\\"\\\"\\\".format(doc.name) %}\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n\\n\\n{%set show_account_code = frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"show_account_code_in_folio_transaction\\\")%}\\n {% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class=\\\"text-center\\\">No</th>    \\n        <th class=\\\"text-center\\\">Date</th>       \\n        <th>Description</th>    \\n        <th>QTY</th>    \\n        <th class=\\\"text-right\\\">Rate</th>    \\n        <th class=\\\"text-right\\\">Dis.</th>    \\n        {% if total_tax> 0 %}\\n            <th class=\\\"text-right\\\">Tax</th>    \\n        {%endif%}\\n        \\n        {% if total_bank_fee> 0 %}\\n            <th class=\\\"text-right\\\">Bank Fee</th>    \\n        {%endif%}\\n        <th class=\\\"text-right\\\">Total Amt</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n       <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            <td>{{d.account_code + \\\"-\\\" if show_account_code==1 else \\\"\\\"}}{{d.account_name or \\\"\\\"}}</td>\\n            <td class='text-center'>{{d.quantity if d.allow_enter_quantity==1 else \\\"\\\"}}</td>\\n            <td class=\\\"text-right\\\" >{{frappe.format_value(d.price ,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n            \\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"3\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data |selectattr(\\\"allow_enter_quantity\\\",\\\"equalto\\\",1)|sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"show_summary\\\") or \\\"0\\\") ==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' group by account_category order by account_category_sort_order\\\".format(doc.name),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th colspan='2'>Summary</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td><strong>{{_(\\\"Balance\\\")}}</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount') or 0,\\\"Currency\\\") }}</strong></td>\\n        </tr>\\n        \\n        \\n    </tfoot>\\n   \\n</table>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-11-21 10:27:37.774789",
  "module": "eDoor",
  "name": "eDoor Deposit Ledger Invoice Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}\nh2{\n    font-size:16px !important;\n    margin-top: 10px !important;\n}\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"No Show, Cancel & Void Report\\\")}}</h2>\\r\\n{% set data = frappe.db.sql(\\\"\\r\\n            select parent_system_report\\r\\n            from \\r\\n                `tabSystem Report` \\r\\n            where \\r\\n                parent_system_report = 'Night Audit'\\\") %}\\r\\n<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if data %}\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Working Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Working Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n            {% endif %}\\r\\n             \\r\\n            {% else %}\\r\\n            \\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n            {% endif %}\\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Base on Transaction Date\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\n    set sql =\\\"\\\"\\\"\\n        select \\n            name,\\n            reservation,\\n            arrival_date,\\n            departure_date,\\n            room_nights,\\n            guest,\\n            guest_name,\\n            reservation_status,\\n            cancelled_note,\\n            business_source,\\n            room_nights,\\n            rooms,\\n            room_type_alias,\\n            reservation_type,\\n            reference_number,\\n            cancelled_by,\\n            cancelled_date,\\n            total_room_rate,\\n            adult,\\n            child,\\n            adr\\n        from `tabReservation Stay`\\n        where\\n            cancelled_date between '{0}' and '{1}' and \\n            property = '{2}' and \\n            reservation_status in ('No Show','Cancelled','Void') and \\n            reservation_type = if('{3}'='',reservation_type,'{3}') and\\n            business_source = if('{4}'='', business_source,'{4}')\\n    \\\"\\\"\\\".format(\\n        frappe.form_dict.get(\\\"start_date\\\"),\\n        frappe.form_dict.get(\\\"end_date\\\"),\\n        doc.name,\\n        frappe.form_dict.get(\\\"reservation_type\\\") or '',\\n        frappe.form_dict.get(\\\"business_source\\\") or '',\\n    )\\n    \\n%}\\n\\n{% set data = frappe.db.sql(sql,as_dict=1)%}\\n{% set reservation_status =  data|map(attribute='reservation_status')|unique|list %}\\n<h2 class=\\\"mt-3\\\" style=\\\"text-transform:capitalize !important;text-align:left !important\\\">Today No Show, Cancel & Void Reservation</h2>\\n\\n{% if data|length > 0 %}\\n<table class='report-list occupied-001' style=\\\"width:100%\\\">\\n    <thead>\\n        <tr>\\n             <th class=\\\"text-center\\\">No</th>\\n             <th>Reservation #</th> \\n             <th>Ref. #</th>\\n             <th class=\\\"text-center\\\">Type</th>\\n             <th class=\\\"text-center\\\">Stay Date</th>\\n             <th class=\\\"text-center\\\">Room Nights</th>\\n             <th>Room(s)</th>\\n             <th>Guest</th>\\n             <th>Source</th>\\n             <th class=\\\"text-right\\\">ADR</th>\\n             <th class=\\\"text-right\\\">Total Room Rate</th>\\n             <th>Status</th>\\n             <th>By</th>\\n             <th class=\\\"text-center\\\">Date</th>\\n             <th>Note</th> \\n             \\n        </tr>\\n        \\n    </thead>\\n    <tbody>\\n        {%for g in reservation_status%}\\n            <tr>\\n                <td colspan=\\\"6\\\"><b>{{g}}</b></td>\\n            </tr>\\n     \\n            {% for d in data|selectattr('reservation_status', 'equalto', g)|list %}\\n\\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\n                    <br/>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\n                </td>\\n                <td class=\\\"text-center\\\">{{d.reference_number}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{\\\"fieldtype\\\":\\\"Date\\\"})}} - {{frappe.format( d.departure_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td >{{d.room_type_alias}}/{{d.rooms or 'Unassign'}}</td>\\n                <td><a onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-right\\\">{{d.adr}}</td>\\n                <td class=\\\"text-right\\\">{{d.total_room_rate}}</td>\\n                <td>{{d.reservation_status}} </td>\\n                <td>{{d.cancelled_by}} </td>\\n                <td class=\\\"text-center\\\">{{d.cancelled_date}} </td>\\n                <td>{{d.cancelled_note}} </td> \\n            </tr> \\n            {%endfor%} \\n         {%endfor%} \\n    </tbody> \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Base on Arrival Date\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\n    set sql =\\\"\\\"\\\"\\n        select \\n            name,\\n            reservation,\\n            cancelled_date,\\n            arrival_date,\\n            departure_date,\\n            room_nights,\\n            guest,\\n            guest_name,\\n            reservation_status,\\n            cancelled_note,\\n            business_source,\\n            room_nights,\\n            rooms,\\n            room_type_alias,\\n            reservation_type,\\n            reference_number,\\n            cancelled_by,\\n            cancelled_date,\\n            total_room_rate,\\n            adult,\\n            child,\\n            adr\\n        from `tabReservation Stay`\\n        where\\n            arrival_date between '{0}' and '{1}' and \\n            property = '{2}' and \\n            reservation_status in ('No Show','Cancelled','Void')\\n    \\\"\\\"\\\".format(\\n        frappe.form_dict.get(\\\"start_date\\\"),\\n        frappe.form_dict.get(\\\"end_date\\\"),\\n        doc.name\\n    )\\n    \\n%}\\n\\n{% set data = frappe.db.sql(sql,as_dict=1)%}\\n{% set reservation_status =  data|map(attribute='reservation_status')|unique|list %}\\n<h2 class=\\\"mt-3\\\" style=\\\"text-transform:capitalize !important;text-align:left !important\\\">Cancel & Void Reservation</h2>\\n\\n{% if data|length >0 %}\\n<table class='report-list occupied-001' style=\\\"width:100%\\\">\\n    <thead>\\n        <tr>\\n             <th class=\\\"text-center\\\">No</th>\\n             <th>Reservation #</th> \\n             <th>Ref. #</th>\\n             <th class=\\\"text-center\\\">Type</th>\\n             <th class=\\\"text-center\\\">Stay Date</th>\\n             <th class=\\\"text-center\\\">Room Nights</th>\\n             <th>Room(s)</th>\\n             <th>Guest</th>\\n             <th>Source</th>\\n             <th class=\\\"text-right\\\">ADR</th>\\n             <th class=\\\"text-right\\\">Total Room Rate</th>\\n             <th>Status</th>\\n             <th>By</th>\\n             <th class=\\\"text-center\\\">Date</th>\\n             <th>Note</th> \\n             \\n        </tr>\\n        \\n    </thead>\\n    \\n    <tbody> \\n        {%for g in reservation_status%}\\n            <tr>\\n                <td colspan=\\\"6\\\"><b>{{g}}</b></td>\\n            </tr>\\n     \\n            {% for d in data|selectattr('reservation_status', 'equalto', g)|list %} \\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\n                    <br/>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\n                </td>\\n                <td class=\\\"text-center\\\">{{d.reference_number}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{\\\"fieldtype\\\":\\\"Date\\\"})}} - {{frappe.format( d.departure_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td >{{d.room_type_alias}}/{{d.rooms or 'Unassign'}}</td>\\n                <td><a onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-right\\\">{{d.adr}}</td>\\n                <td class=\\\"text-right\\\">{{d.total_room_rate}}</td>\\n                <td>{{d.reservation_status}} </td>\\n                <td>{{d.cancelled_by}} </td>\\n                <td class=\\\"text-center\\\">{{d.cancelled_date}} </td>\\n                <td>{{d.cancelled_note}} </td> \\n            </tr>\\n            \\n            {%endfor%}\\n        {%endfor%} \\n    </tbody> \\n</table> \\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\n    set sql =\\\"\\\"\\\"\\n        select \\n            name,\\n            reservation,\\n            cancelled_date,\\n            arrival_date,\\n            departure_date,\\n            room_nights,\\n            guest,\\n            guest_name,\\n            reservation_status,\\n            cancelled_note,\\n            business_source,\\n            room_nights,\\n            rooms,\\n            room_type_alias,\\n            reservation_type,\\n            reference_number,\\n            cancelled_by,\\n            cancelled_date,\\n            total_room_rate,\\n            adult,\\n            child,\\n            adr\\n        from `tabReservation Stay`\\n        where\\n            arrival_date <= '{0}' and \\n            departure_date > '{1}' and\\n            property = '{2}' and \\n            reservation_status = 'No Show'\\n    \\\"\\\"\\\".format(\\n        frappe.form_dict.get(\\\"start_date\\\"),\\n        frappe.form_dict.get(\\\"end_date\\\"),\\n        doc.name\\n    )\\n    \\n%}\\n\\n{% set data = frappe.db.sql(sql,as_dict=1)%}\\n{% set reservation_status =  data|map(attribute='reservation_status')|unique|list %}\\n<h2 style=\\\"text-transform:capitalize !important;text-align:left !important\\\">No Show(Reserved)</h2>\\n\\n{% if data|length >0 %}\\n<table class='report-list occupied-001' style=\\\"width:100%\\\">\\n    <thead>\\n        <tr>\\n             <th class=\\\"text-center\\\">No</th>\\n             <th>Reservation #</th> \\n             <th>Ref. #</th>\\n             <th class=\\\"text-center\\\">Type</th>\\n             <th class=\\\"text-center\\\">Stay Date</th>\\n             <th class=\\\"text-center\\\">Room Nights</th>\\n             <th>Room(s)</th>\\n             <th>Guest</th>\\n             <th>Source</th>\\n             <th class=\\\"text-right\\\">ADR</th>\\n             <th class=\\\"text-right\\\">Total Room Rate</th>\\n             <th>Status</th>\\n             <th>By</th>\\n             <th class=\\\"text-center\\\">Date</th>\\n             <th>Note</th> \\n             \\n        </tr>\\n        \\n    </thead>\\n    \\n    <tbody> \\n        {%for g in reservation_status%}\\n            <tr>\\n                <td colspan=\\\"6\\\"><b>{{g}}</b></td>\\n            </tr>\\n     \\n            {% for d in data|selectattr('reservation_status', 'equalto', g)|list %} \\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\n                    <br/>\\n                    <a onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\n                </td>\\n                <td class=\\\"text-center\\\">{{d.reference_number}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{\\\"fieldtype\\\":\\\"Date\\\"})}} - {{frappe.format( d.departure_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td >{{d.room_type_alias}}/{{d.rooms or 'Unassign'}}</td>\\n                <td><a onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-right\\\">{{d.adr}}</td>\\n                <td class=\\\"text-right\\\">{{d.total_room_rate}}</td>\\n                <td>{{d.reservation_status}} </td>\\n                <td>{{d.cancelled_by}} </td>\\n                <td class=\\\"text-center\\\">{{d.cancelled_date}} </td>\\n                <td>{{d.cancelled_note}} </td> \\n            </tr>\\n            \\n            {%endfor%}\\n        {%endfor%} \\n    </tbody> \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-02 17:35:08.740344",
  "module": "eDoor",
  "name": "eDoor No Show Cancel Void Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Desk Folio",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>DESK FOLIO VOUCHER</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Deposit No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n        \\n              \\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone Number\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'phone_number')}}</td>\\n          <td width=\\\"150px\\\">{{_(\\\"Deposit Date\\\")}}</td>\\n        <td>: {{frappe.format(doc.posting_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n\\n    </tr>\\n\\n    <tr>\\n         <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'country')}}</td>\\n       \\n        \\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.room_number or ''}}</td>\\n    </tr>\\n  <tr>\\n      \\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'email_address') or ''}}</td>\\n       <td></td>\\n       <td></td>\\n  </tr>\\n  </table>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\", transaction_type=\\\"Desk Folio\\\" ,transaction_number=doc.name) %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class=\\\"text-center\\\">No</th>    \\n        <th class=\\\"text-center\\\">Date</th>    \\n        <th>Description</th>    \\n        <th>Debit</th>    \\n        <th>Credit</th>    \\n        <th>Balance</th>    \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"5\\\">\\n                <strong>Balance</strong>\\n            </td>\\n            <td class=\\\"text-right\\\"><strong>\\n                {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n            </strong></td>\\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{% set sql=\\\"\\\"\\\"\\n    select \\n        allow_enter_quantity, \\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',1,-1) as bank_fee_amount,\\n        total_amount * if(type='Debit',1,-1) as total_amount, \\n        price * if(type='Debit',1,-1) as price, \\n        room_number,\\n        account_code,\\n        account_name, \\n        posting_date\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type='Desk Folio' and \\n        transaction_number='{}' and \\n        ifnull(parent_reference,'')=''\\n    \\\"\\\"\\\".format(doc.name) %}\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n\\n\\n{%set show_account_code = frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"show_account_code_in_folio_transaction\\\")%}\\n {% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class=\\\"text-center\\\">No</th>    \\n        <th class=\\\"text-center\\\">Date</th>       \\n        <th>Description</th>    \\n        <th class=\\\"text-center\\\">QTY</th>    \\n        <th class=\\\"text-right\\\">Rate</th>    \\n        <th class=\\\"text-right\\\">Dis.</th>    \\n        {% if total_tax> 0 %}\\n            <th class=\\\"text-right\\\">Tax</th>    \\n        {%endif%}\\n        \\n        {% if total_bank_fee> 0 %}\\n            <th class=\\\"text-right\\\">Bank Fee</th>    \\n        {%endif%}\\n        <th class=\\\"text-right\\\">Total Amt</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n       <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            <td>{{d.account_code + \\\"-\\\" if show_account_code==1 else \\\"\\\"}}{{d.account_name or \\\"\\\"}}</td>\\n            <td class='text-center'>{{d.quantity if d.allow_enter_quantity==1 else \\\"\\\"}}</td>\\n            <td class=\\\"text-right\\\" >{{frappe.format_value(d.price ,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n            \\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"3\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{data |selectattr(\\\"allow_enter_quantity\\\",\\\"equalto\\\",1)|sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"show_summary\\\") or \\\"0\\\") ==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' group by account_category order by account_category_sort_order\\\".format(doc.name),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th colspan='2'>Summary</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n   \\n</table>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-11-19 11:22:02.485893",
  "module": "eDoor",
  "name": "eDoor Desk Folio Invoice Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Desk Folio",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>DEPOSIT VOUCHER</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Deposit No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n        \\n              \\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone Number\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'phone_number')}}</td>\\n          <td width=\\\"150px\\\">{{_(\\\"Deposit Date\\\")}}</td>\\n        <td>: {{frappe.format(doc.posting_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n        \\n\\n        \\n    </tr>\\n\\n    <tr>\\n         <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'country')}}</td>\\n       \\n        \\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.room_number or ''}}</td>\\n    </tr>\\n  <tr>\\n      \\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'email_address') or ''}}</td>\\n       <td></td>\\n       <td></td>\\n  </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type='Desk Folio', transaction_number=doc.name,sort_by_field='account_code_sort_order') %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td>{{d.description or ''}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"4\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n    \\n</table>\\n{%endif%}\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        account_code,\\n        room_number,\\n        account_name,\\n        sum(if(allow_enter_quantity=1,quantity,0)) as quantity,\\n        sum(price * if(type='Debit',1,-1)) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',1,-1)) as bank_fee_amount,\\n        sum(total_amount * if(type='Debit',1,-1)) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Desk Folio' and\\n        transaction_number = '{}'\\n    group by \\n        account_code,\\n        account_name ,\\n        room_number\\n    order by \\n    account_code_sort_order\\n\\\"\\\"\\\".format(doc.name)%}\\n\\n \\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{%set show_account_code = frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"show_account_code_in_folio_transaction\\\")%}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee> 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==1 else \\\"\\\"}}{{d.account_name or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{d.quantity}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-18 22:07:08.382618",
  "module": "eDoor",
  "name": "eDoor Desk Folio Invoice Summary",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>FOLIO SUMMARY</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px; margin-bottom:4px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Reservation Stay #\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n         <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n         <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n \\n      </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>        <td>{{_(\\\"Room\\\")}}</td>\\n                <td>: {{doc.rooms or ''}}</td>\\n         </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n       <td></td>\\n       <td></td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Credit Debit Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type='Reservation Folio', reservation_stay=doc.name,sort_by_field='account_category_sort_order',show_room_number=frappe.form_dict.get(\\\"show_room_number\\\"),show_account_code=frappe.form_dict.get(\\\"show_account_code\\\")) %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>  \\n            {%if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>    \\n            {%endif%}\\n            <th>Description</th>    \\n            <th class='text-center'>QTY</th>\\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            {%if show_room_number==\\\"1\\\" %}\\n                <td class='text-center'>{{d.room_number or ''}}</td>\\n            {%endif%}\\n            <td>{{d.description or ''}}</td>\\n            <td class='text-center'>{{ frappe.format_value(d.quantity,'Float') }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"{{ 3 if show_room_number=='1' else 2 }}\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                \\n                <td class=\\\"text-center\\\"><strong>\\n                    {{ frappe.format_value(data|sum(attribute='quantity'),'Float')}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        {0}\\n        account_code,\\n        report_description,\\n        sum(report_quantity) as quantity,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',-1,1)) as bank_fee_amount,\\n        sum((total_amount - bank_fee_amount) * if(type='Debit',1,-1) ) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{1}' and \\n        ifnull(parent_reference,'')=''\\n    group by \\n        {0}\\n        account_code,\\n        price,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1),\\n        report_description ,\\n        account_code_sort_order\\n        \\n    order by \\n    {0}\\n    account_code_sort_order\\n\\\"\\\"\\\".format(\\n        '' if frappe.form_dict.get(\\\"show_room_number\\\") ==\\\"0\\\" else \\\"room_number,\\\",\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{3 if show_room_number=='1' else 2}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data | sum(attribute='quantity'),\\\"Float\\\")}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n\\n{%set summary_data = frappe.db.sql(\\\"\\\"\\\"\\n    select \\n        account_category,\\n        account_category_sort_order,\\n        sum(report_quantity) as quantity, \\n        sum(amount * if(type='Debit',1,-1)) as amount \\n    from `tabFolio Transaction` \\n    where \\n        transaction_type='Reservation Folio' and \\n        reservation_stay ='{}'\\n    group by \\n        account_category \\n    order by \\n        account_category_sort_order\\n    \\\"\\\"\\\".format(\\n        doc.name\\n    ),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>{{_('Summary')}}</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n        <td class='text-center'>{{ frappe.format(d.quantity,'Float') }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n   \\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-22 00:13:28.863331",
  "module": "eDoor",
  "name": "eDoor Folio Transaction Summary by Reservation Stay",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>FOLIO SUMMARY</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px; margin-bottom:4px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Reservation #\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n         <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n         <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n \\n      </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>        <td>{{_(\\\"Room\\\")}}</td>\\n                <td>: {{doc.rooms or ''}}</td>\\n         </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n       <td></td>\\n       <td></td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Credit Debit Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type='Reservation Folio', reservation=doc.name,sort_by_field='account_category_sort_order',show_room_number=frappe.form_dict.get(\\\"show_room_number\\\"),show_account_code=frappe.form_dict.get(\\\"show_account_code\\\")) %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>  \\n            {%if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>    \\n            {%endif%}\\n            <th>Description</th>    \\n            <th class='text-center'>QTY</th>\\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            {%if show_room_number==\\\"1\\\" %}\\n                <td class='text-center'>{{d.room_number or ''}}</td>\\n            {%endif%}\\n            <td>{{d.description or ''}}</td>\\n            <td class='text-center'>{{ frappe.format_value(d.quantity,'Float') }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"{{ 3 if show_room_number=='1' else 2 }}\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                \\n                <td class=\\\"text-center\\\"><strong>\\n                    {{ frappe.format_value(data|sum(attribute='quantity'),'Float')}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        {0}\\n        account_code,\\n        report_description,\\n        sum(report_quantity) as quantity,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',-1,1)) as bank_fee_amount,\\n        sum((total_amount - bank_fee_amount) * if(type='Debit',1,-1) ) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        reservation = '{1}' and \\n        ifnull(parent_reference,'')=''\\n    group by \\n        {0}\\n        account_code,\\n        price,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1),\\n        report_description ,\\n        account_code_sort_order\\n        \\n    order by \\n    {0}\\n    account_code_sort_order\\n\\\"\\\"\\\".format(\\n        '' if frappe.form_dict.get(\\\"show_room_number\\\") ==\\\"0\\\" else \\\"room_number,\\\",\\n        doc.name\\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{3 if show_room_number=='1' else 2}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data | sum(attribute='quantity'),\\\"Float\\\")}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n\\n{%set summary_data = frappe.db.sql(\\\"\\\"\\\"\\n    select \\n        account_category,\\n        account_category_sort_order,\\n        sum(report_quantity) as quantity, \\n        sum(amount * if(type='Debit',1,-1)) as amount \\n    from `tabFolio Transaction` \\n    where \\n        transaction_type='Reservation Folio' and \\n        reservation ='{}'\\n    group by \\n        account_category \\n    order by \\n        account_category_sort_order\\n    \\\"\\\"\\\".format(\\n        doc.name\\n    ),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>{{_('Summary')}}</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n        <td class='text-center'>{{ frappe.format(d.quantity,'Float') }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n   \\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-22 17:13:31.812824",
  "module": "eDoor",
  "name": "eDoor Folio Transaction Summary by Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>FOLIO DETAIL BY RESERVATION</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"guest_name\", \"print_hide\": 0, \"label\": \"Guest Name\"}, {\"fieldname\": \"nationality\", \"print_hide\": 0, \"label\": \"Nationality\"}, {\"fieldname\": \"business_source\", \"print_hide\": 0, \"label\": \"Business Source\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Address\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t\\t{{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"address\\\") or \\\"\\\"}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rate_type\", \"print_hide\": 0, \"label\": \"Rate Type\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Reservation #\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t{{doc.name}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rooms\", \"print_hide\": 0, \"label\": \"Rooms\"}, {\"fieldname\": \"arrival_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check In\"}, {\"fieldname\": \"departure_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check Out\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n {% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\",reservation=doc.name,transaction_type='Reservation Folio') %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>    \\n        <th class='text-center'>Date</th>    \\n        {% if show_room_number=='1'%}\\n            <th class='text-center'>Room</th>    \\n        {%endif%}\\n        <th>Description</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Debit</th>    \\n        <th class='text-right'>Credit</th>    \\n        <th class='text-right'>Balance</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            <td class='text-center'>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            {% if show_room_number=='1'%}\\n                <td class='text-center'>{{d.room_number or \\\"\\\"}}</td>\\n            {%endif%}\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            \\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data |sum(attribute='quantity'),'Float')}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n\\n{%endif%}\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        room_number,\\n        account_code,\\n        account_code_sort_order,\\n        posting_date,\\n        report_description,\\n        report_quantity as quantity,\\n        (price  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',-1,1) as bank_fee_amount,\\n        (total_amount - bank_fee_amount) * if(type='Debit',1,-1)  as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        reservation = '{0}' and \\n        ifnull(parent_reference,'')=''\\n        \\n    order by \\n    posting_date,\\n    name\\n\\\"\\\"\\\".format(\\n        doc.name\\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            <th class=\\\"text-center\\\">Date</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,'Date')}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where reservation = '{}' and transaction_type='Reservation Folio' group by account_category order by account_category_sort_order\\\".format(doc.name),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>Summary</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-center\\\">{{frappe.format_value(d.quantity,\\\"Float\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n        \\n    </tbody>\\n   <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-11-23 09:04:29.803200",
  "module": "eDoor",
  "name": "eDoor Folio Transaction Detail by Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>FOLIO DETAIL BY RESERVATION</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"guest_name\", \"print_hide\": 0, \"label\": \"Guest Name\"}, {\"fieldname\": \"nationality\", \"print_hide\": 0, \"label\": \"Nationality\"}, {\"fieldname\": \"business_source\", \"print_hide\": 0, \"label\": \"Business Source\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Address\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t\\t{{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"address\\\") or \\\"\\\"}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rate_type\", \"print_hide\": 0, \"label\": \"Rate Type\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Reservation #\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t{{doc.name}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rooms\", \"print_hide\": 0, \"label\": \"Rooms\"}, {\"fieldname\": \"arrival_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check In\"}, {\"fieldname\": \"departure_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check Out\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n {% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\",reservation=doc.name,transaction_type='Reservation Folio') %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>    \\n        <th class='text-center'>Date</th>    \\n        {% if show_room_number=='1'%}\\n            <th class='text-center'>Room</th>    \\n        {%endif%}\\n        <th>Description</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Debit</th>    \\n        <th class='text-right'>Credit</th>    \\n        <th class='text-right'>Balance</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            <td class='text-center'>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            {% if show_room_number=='1'%}\\n                <td class='text-center'>{{d.room_number or \\\"\\\"}}</td>\\n            {%endif%}\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            \\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data |sum(attribute='quantity'),'Float')}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n\\n{%endif%}\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        room_number,\\n        account_code,\\n        account_code_sort_order,\\n        posting_date,\\n        report_description,\\n        report_quantity as quantity,\\n        (price  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',-1,1) as bank_fee_amount,\\n        (total_amount - bank_fee_amount) * if(type='Debit',1,-1)  as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        reservation = '{0}' and \\n        ifnull(parent_reference,'')=''\\n        \\n    order by \\n    posting_date,\\n    name\\n\\\"\\\"\\\".format(\\n        doc.name\\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            <th class=\\\"text-center\\\">Date</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,'Date')}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where reservation = '{}' and transaction_type='Reservation Folio' group by account_category order by account_category_sort_order\\\".format(doc.name),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>Summary</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-center\\\">{{frappe.format_value(d.quantity,\\\"Float\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n        \\n    </tbody>\\n   <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-11-23 10:28:39.469863",
  "module": "eDoor",
  "name": "eDoor Folio Transaction Detail by Reservation Stay",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>FOLIO LIST BY RESERVATION STAY</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px; margin-bottom:4px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Reservation #\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n         <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n       \\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n       <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>\\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.rooms or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n        <td></td>\\n        <td></td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set sql=\\\"\\n        select \\n            name,\\n            posting_date,\\n            guest_name,\\n            rooms,\\n            total_credit,\\n            total_debit,\\n            balance\\n        from `tabReservation Folio`\\n        where\\n            reservation_stay = '{}'\\n        \\\".format(doc.name)\\n%}\\n\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>\\n        <th class='text-center'>Folio #</th>\\n        <th class='text-center'>Date</th>\\n        <th>Guest</th>\\n        <th class='text-center'>Room</th>\\n        <th class='text-right'>Debit</th>\\n        <th class='text-right'>Credit</th>\\n        <th class='text-right'>Balance</th>\\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data%}\\n            <tr>\\n                <td class='text-center'>{{loop.index}}</td>\\n                <td class='text-center'>{{d.name}}</td>\\n                <td class='text-center'>{{frappe.format_value(d.posting_date,'Date')}}</td>\\n                <td>{{d.guest_name}}</td>\\n                <td class='text-center'>{{d.rooms}}</td>\\n                <td class='text-right'>{{frappe.format_value(d.total_debit,'Currency')}}</td>\\n                <td class='text-right'>{{frappe.format_value(d.total_credit,'Currency')}}</td>\\n                <td class='text-right'>{{frappe.format_value(d.balance,'Currency')}}</td>\\n            </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n            <tr>\\n                <td  colspan=\\\"5\\\"><strong>Total</strong></td>\\n                <td class='text-right'><strong>{{frappe.format_value(data|sum(attribute = ('total_debit')),'Currency')}}</strong></td>\\n                <td class='text-right'><strong>{{frappe.format_value(data|sum(attribute =('total_credit')),'Currency')}}</strong></td>\\n                <td class='text-right'><strong>{{frappe.format_value(data|sum(attribute = ('balance')),'Currency')}}</strong></td>\\n                \\n            </tr>\\n    </tfoot>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        {0}\\n        account_code,\\n        report_description,\\n        sum(report_quantity) as quantity,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',-1,1)) as bank_fee_amount,\\n        sum((total_amount - bank_fee_amount) * if(type='Debit',1,-1) ) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{1}' and \\n        ifnull(parent_reference,'')=''\\n    group by \\n        {0}\\n        account_code,\\n        price,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1),\\n        report_description ,\\n        account_code_sort_order\\n        \\n    order by \\n    {0}\\n    account_code_sort_order\\n\\\"\\\"\\\".format(\\n        '' if frappe.form_dict.get(\\\"show_room_number\\\") ==\\\"0\\\" else \\\"room_number,\\\",\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{3 if show_room_number=='1' else 2}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data | sum(attribute='quantity'),\\\"Float\\\")}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-23 16:33:07.273231",
  "module": "eDoor",
  "name": "eDoor Folio List by Reservation Stay",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>FOLIO LIST BY RESERVATION STAY</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px; margin-bottom:4px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Reservation #\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n         <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n       \\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n       <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>\\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.rooms or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n        <td></td>\\n        <td></td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set sql=\\\"\\n        select \\n            name,\\n            reservation_stay,\\n            posting_date,\\n            guest_name,\\n            rooms,\\n            total_credit,\\n            total_debit,\\n            balance\\n        from `tabReservation Folio`\\n        where\\n            reservation = '{}'\\n        \\\".format(doc.name)\\n%}\\n\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>\\n        <th class='text-center'>Stay #</th>\\n        <th class='text-center'>Folio #</th>\\n        <th class='text-center'>Date</th>\\n        <th>Guest</th>\\n        <th class='text-center'>Room</th>\\n        <th class='text-right'>Debit</th>\\n        <th class='text-right'>Credit</th>\\n        <th class='text-right'>Balance</th>\\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data%}\\n            <tr>\\n                <td class='text-center'>{{loop.index}}</td>\\n                <td class='text-center'>{{d.reservation_stay}}</td>\\n                <td class='text-center'>{{d.name}}</td>\\n                <td class='text-center'>{{frappe.format_value(d.posting_date,'Date')}}</td>\\n                <td>{{d.guest_name}}</td>\\n                <td class='text-center'>{{d.rooms}}</td>\\n                <td class='text-right'>{{frappe.format_value(d.total_debit,'Currency')}}</td>\\n                <td class='text-right'>{{frappe.format_value(d.total_credit,'Currency')}}</td>\\n                <td class='text-right'>{{frappe.format_value(d.balance,'Currency')}}</td>\\n            </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n            <tr>\\n                <td  colspan=\\\"6\\\"><strong>Total</strong></td>\\n                <td class='text-right'><strong>{{frappe.format_value(data|sum(attribute = ('total_debit')),'Currency')}}</strong></td>\\n                <td class='text-right'><strong>{{frappe.format_value(data|sum(attribute =('total_credit')),'Currency')}}</strong></td>\\n                <td class='text-right'><strong>{{frappe.format_value(data|sum(attribute = ('balance')),'Currency')}}</strong></td>\\n                \\n            </tr>\\n    </tfoot>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        {0}\\n        account_code,\\n        report_description,\\n        sum(report_quantity) as quantity,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',-1,1)) as bank_fee_amount,\\n        sum((total_amount - bank_fee_amount) * if(type='Debit',1,-1) ) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        transaction_number = '{1}' and \\n        ifnull(parent_reference,'')=''\\n    group by \\n        {0}\\n        account_code,\\n        price,\\n        (input_amount  + bank_fee_amount) * if(type='Debit',1,-1),\\n        report_description ,\\n        account_code_sort_order\\n        \\n    order by \\n    {0}\\n    account_code_sort_order\\n\\\"\\\"\\\".format(\\n        '' if frappe.form_dict.get(\\\"show_room_number\\\") ==\\\"0\\\" else \\\"room_number,\\\",\\n        frappe.form_dict.get(\\\"folio\\\")\\n\\n        \\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{3 if show_room_number=='1' else 2}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data | sum(attribute='quantity'),\\\"Float\\\")}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-23 16:38:37.025743",
  "module": "eDoor",
  "name": "eDoor Folio List by Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"   {%\\n        set sql = \\\"\\n            select \\n                * \\n            from `tabRoom` \\n            where \\n                property='{0}' and \\n                housekeeping_status='{1}' and \\n                room_number like '%{2}%' and \\n                room_type like '%{3}%' and \\n                building = if('{4}'='',building,'{4}') and\\n                floor = if('{5}'='',floor,'{5}') \\n            order by \\n            sort_order, room_number\\\"\\n            .format(\\n                doc.name,\\n                frappe.form_dict.get(\\\"housekeeping_status\\\"),\\n                frappe.form_dict.get(\\\"keyword\\\") or '',\\n                frappe.form_dict.get(\\\"room_type\\\") or '',\\n                frappe.form_dict.get(\\\"building\\\") or '',\\n                frappe.form_dict.get(\\\"floor\\\") or ''\\n    \\n        \\n            )\\n    %}\\n    {%\\n        set data = frappe.db.sql(sql,as_dict=1)\\n    %}\\n     \\n    {% if data %}\\n    <table class=\\\"w-100 report-list\\\" style=\\\"white-space: nowrap;\\\">\\n            <tr>\\n                <th class=\\\"text-center\\\">No.</th>\\n                <th class=\\\"text-center\\\">Room #</th>\\n                <th>Room Type</th>\\n                <th>Floor</th>\\n                <th class=\\\"text-left\\\">Building</th>\\n                <th>Guest</th>\\n                <th class=\\\"text-center\\\">Stay #</th>\\n                <th>HouseKeeper</th>\\n                <th>Housekeeping Status</th>\\n            </tr>\\n            {% for d in data %}\\n                <tr>\\n                    <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                    <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n                    <td>{{d.room_type}}</td>\\n                    <td>{{d.floor}}</td>\\n                    <td>{{d.building}}</td>\\n                    <td>\\n                    {% if d.guest %}\\n                        <span class=\\\"link_line_action1\\\">\\n                            <a onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">\\n                                {{d.guest_name}} - {{d.guest}}\\n                            </a>\\n                        </span>\\n                    {% endif %}\\n                    </td>\\n                    <td class=\\\"text-center\\\">\\n                    {% if d.guest %}\\n                        <span class=\\\"link_line_action1\\\">\\n                            <a onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">\\n                               {{d.reservation_stay}}\\n                            </a>\\n                        </span>\\n                    {% endif %}\\n                    </td>\\n                    <td>{{d.housekeeper}}</td>\\n                    <td>\\n                        <span style=\\\"background:{{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.housekeeping_status}}</span>\\n                    </td>\\n                </tr>\\n            {%endfor%}\\n    </table>\\n    {% else %}\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n    </div>\\n    {% endif %}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-24 09:39:08.276636",
  "module": "eDoor",
  "name": "eDoor Housekeeping Status",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Audit Trail\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n           \\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set select_filter = None if  not frappe.form_dict.get('select_filter') else frappe.form_dict.get('select_filter').split(',') %}\\r\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\r\\n        report_name=\\\"Audit Trail Report\\\",\\r\\n        filters={\\r\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\r\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\r\\n            \\\"property\\\":doc.name,\\r\\n            \\\"select_filter\\\":select_filter,\\r\\n            \\\"select_user\\\":frappe.form_dict.get('select_user'),\\r\\n            \\\"sort_order\\\":frappe.form_dict.get('sort_order'),\\r\\n            \\\"order_by_audit\\\":frappe.form_dict.get('audit_order'),\\r\\n        }\\r\\n    )\\r\\n%} \\r\\n\\r\\n{% if (data.result|length) >0 %}\\r\\n<table class='report-list occupied-001' style='width:100%'>\\r\\n    <tr>\\r\\n        <th class=\\\"text-center\\\">No.</th> \\r\\n        {%for c in data.columns%}\\r\\n        <th style=\\\"width:{{c.width}}px;\\\" class=\\\"{{c.css_class or ''}}\\\">{{c.label}}</th>\\r\\n        {%endfor%} \\r\\n    </tr>\\r\\n    {% for d in data.result %}\\r\\n    <tr>\\r\\n        <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n        {% for c in data.columns %}\\r\\n        <td style=\\\"width:{{c.width}}px;\\\" class=\\\"{{c.css_class}}\\\">{{frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}</td>\\r\\n        {% endfor %}\\r\\n    </tr>\\r\\n    {% endfor %}\\r\\n</table>\\r\\n{% else %}\\r\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n</div>\\r\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-02 16:39:24.835089",
  "module": "eDoor",
  "name": "Audit Trail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".print-format td, .print-format th{\n    padding:1px 5px !important;\n} \n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Cashier Shift",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"CASHIER SHIFT SUMMARY REPORT\\\")}}</h2>\\n\\n\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\n    <tr>\\n        <td class=\\\"filter-section\\\" >\\n        Shift #: <strong>{{doc.name}}</strong>\\n        </td> \\n        <td ></td>\\n\\n        <td class = \\\"text-right\\\">\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\n        <br>\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\n        </td> \\n    </tr>\\n\\n</table>\\n<br/>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"business_branch\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Property\"}, {\"fieldname\": \"posting_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Working Date\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Opened By: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{doc.owner.split(\\\",\\\")[0]}}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Time in: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{frappe.format_value(doc.creation,\\\"Datetime\\\")}}\\n\\t</div>\\n</div>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Closed by: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{(doc.closed_by or \\\"\\\").split(\\\"@\\\")[0] }}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Time Out: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{frappe.format_value(doc.closed_date,\\\"Datetime\\\")}}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"total_opening_amount\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Opening Amount\"}, {\"fieldname\": \"total_close_amount\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Closing Amount\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Status: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{\\\"Open\\\" if doc.is_closed == 0 else \\\"Closed\\\"}}\\n\\t</div>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Cash Float\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%if (frappe.form_dict.get(\\\"show_cash_float\\\") or \\\"0\\\") == \\\"1\\\" %}\\n<h3>Cash Float</h3>\\n\\n<table class='report-list' style='width:100%; margin-bottom:10px'>\\n    <thead>\\n        <tr>\\n        <th>Type</th>\\n        <th class='text-right'>Open Amount</th>\\n        <th class='text-right'>Expected</th>\\n        <th class='text-right'>Actual</th>\\n        <th class='text-right'>Difference</th>\\n        </tr>\\n        \\n    </thead>\\n    \\n    <tbody>\\n        {% for d in doc.cash_float%}\\n        <tr>\\n        <td>{{d.payment_method}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_system_close_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_close_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_different_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        \\n    </tr>\\n    {%endfor%}\\n    \\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td><strong>Total</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"opening_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"system_close_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"close_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"different_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Transaction\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{%if (frappe.form_dict.get(\\\"group_by_ledger_type\\\") or \\\"0\\\") == \\\"0\\\" %}\\n{% set show_account_code = (frappe.form_dict.get(\\\"show_account_code\\\") or \\\"0\\\") %}\\n{% set sql = \\\"\\n    select \\n        concat(parent_account_code, ' - ', parent_account_name) as parent_account_name,\\n        concat(account_group , ' - ' , account_group_name) as account_group_name,\\n        concat(account_code, ' - ',account_name) as account_name,\\n        sum(amount * if(type='Debit',1,-1)) as amount,\\n        sum(quantity) as quantity\\n    from `tabFolio Transaction` \\n    where\\n        property = '{}' and \\n        cashier_shift = '{}'\\n    group by\\n        concat(parent_account_code, ' - ', parent_account_name),\\n        concat(account_group , ' - ' , account_group_name),\\n        account_name\\n    order by\\n        account_code_sort_order\\n\\\".format(\\n    doc.business_branch,\\n    doc.name\\n)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n{%set groups =   data | map(attribute='account_group_name')|unique|list %}\\n\\n{% set sql=\\\"\\n    select \\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n    from `tabFolio Transaction` \\n    where \\n        property = '{}' and \\n        creation < '{}'  \\n\\\".format(doc.business_branch, doc.creation)\\n%}\\n\\n{% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}\\n<h3>Folio Transaction</h3>\\n\\n<table class='report-list' style='width:100%'>\\n    <tbody>\\n        <tr>\\n            <td colspan=\\\"4\\\"><strong>Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(opening_balance_data[0][\\\"amount\\\"],\\\"Currency\\\")}}</strong></td>\\n        </tr>\\n        {% for g in groups%}\\n        <tr>\\n            <td colspan=4><strong>{{g if show_account_code ==\\\"1\\\" else g.split(\\\" - \\\")[1]}}</strong></td>\\n        </tr>\\n        <!--loop account level 2-->\\n        {% for c in data|selectattr('account_group_name','equalto',g) | map(attribute='parent_account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td colspan=3><strong>{{c if show_account_code ==\\\"1\\\" else c.split(\\\" - \\\")[1]}}</strong></td>\\n        </tr>\\n         <!-- startloop account level 3-->\\n        {% for a in data|selectattr('parent_account_name','equalto',c) | map(attribute='account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td></td>\\n            <td >{{a if show_account_code ==\\\"1\\\" else a.split(\\\" - \\\")[1]}}</td>\\n            <td class=\\\"text-center\\\"> {{frappe.format_value(data|selectattr('account_name','equalto',a)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</td>\\n            <td class='text-right'> {{ frappe.format_value(data|selectattr('account_name','equalto',a)|list|sum(\\\"amount\\\"),'Currency') }}</td>\\n            \\n        </tr>\\n        \\n        \\n        {%endfor%}\\n        <!--end loop level 3-->\\n        \\n        <!--total level 2-->\\n        <tr>\\n            <td colspan=3 class=\\\"text-right\\\"><strong>*Total {{c}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr('parent_account_name','equalto',c)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr('parent_account_name','equalto',c)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end total level 2-->\\n        \\n        {%endfor%}\\n        <!--end loop level 2-->\\n        \\n            <!--total level 1-->\\n        <tr>\\n            <td colspan=3 class=\\\"text-right\\\"><strong>**Total {{g}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr('account_group_name','equalto',g)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr('account_group_name','equalto',g)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end total level 1-->\\n        \\n        {%endfor%}\\n         <tr>\\n            <td colspan=\\\"4\\\"><strong>Ending Balance</strong></td>\\n            <td class='text-right'><strong>{{ frappe.format_value( opening_balance_data[0][\\\"amount\\\"] + data|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n    </tbody>\\n \\n</table>\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{%if (frappe.form_dict.get(\\\"group_by_ledger_type\\\") or \\\"0\\\") == \\\"1\\\" %}\\n{% set show_account_code = (frappe.form_dict.get(\\\"show_account_code\\\") or \\\"0\\\") %}\\n{% set sql = \\\"\\n    select \\n        transaction_type,\\n        concat(parent_account_code, ' - ', parent_account_name) as parent_account_name,\\n        concat(account_group , ' - ' , account_group_name) as account_group_name,\\n        concat(account_code, ' - ',account_name) as account_name,\\n        sum(amount * if(type='Debit',1,-1)) as amount,\\n        sum(quantity) as quantity\\n    from `tabFolio Transaction` \\n    where\\n        property = '{}' and \\n        cashier_shift = '{}'\\n    group by\\n        transaction_type,\\n        concat(parent_account_code, ' - ', parent_account_name),\\n        concat(account_group , ' - ' , account_group_name),\\n        account_name\\n    order by\\n        account_code_sort_order\\n\\\".format(\\n    doc.business_branch,\\n    doc.name\\n)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n{% set ledger_types=[\\n    {\\\"label\\\": \\\"Guest Ledger\\\",\\\"value\\\":\\\"Reservation Folio\\\" },\\n    {\\\"label\\\": \\\"Deposit Ledger\\\",\\\"value\\\":\\\"Deposit Ledger\\\" },\\n    {\\\"label\\\": \\\"Desk Folio\\\",\\\"value\\\":\\\"Desk Folio\\\" },\\n    {\\\"label\\\": \\\"Payable Ledger\\\",\\\"value\\\":\\\"Payable Ledger\\\" },\\n    {\\\"label\\\": \\\"City Ledger\\\",\\\"value\\\":\\\"City Ledger\\\" },\\n    {\\\"label\\\": \\\"POS\\\",\\\"value\\\":\\\"Cashier Shift\\\" }\\n    ]\\n%}\\n\\n{% set sql=\\\"\\n    select \\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n    from `tabFolio Transaction` \\n    where \\n        property = '{}' and \\n        creation < '{}'  \\n\\\".format(doc.business_branch, doc.creation)\\n%}\\n{% set total_opening_balance = frappe.db.sql(sql,as_dict=1)[0][\\\"amount\\\"]%}\\n\\n<h3>Folio Transaction</h3>\\n\\n<table class='report-list' style='width:100%'>\\n    <tbody>\\n        <tr>\\n            <td colspan=\\\"4\\\"><strong>Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(total_opening_balance,\\\"Currency\\\")}}</strong></td>\\n        </tr>\\n        {%for t in ledger_types%}\\n        \\n        {%set groups =data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)| map(attribute='account_group_name')|unique|list %}\\n        \\n        {% set sql=\\\"\\n            select \\n                ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n            from `tabFolio Transaction` \\n            where \\n                property = '{}' and \\n                creation < '{}'  and \\n                transaction_type = '{}'\\n        \\\".format(doc.business_branch, doc.creation, t.value)\\n        %}\\n        \\n        {% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}\\n        \\n        \\n        <!--check if ledter type have transactiuon and have opening balance -->\\n        {%if opening_balance_data[0][\\\"amount\\\"] !=0 or groups|length > 0 %}\\n        <tr>\\n            <td colspan=\\\"5\\\"><strong style=\\\"font-size:14px\\\">{{t.label}}</strong>\\n            <hr>\\n            </td>\\n        </tr>\\n        \\n        \\n        <tr>\\n            <td colspan=\\\"4\\\"><strong>{{t.label}} Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(opening_balance_data[0][\\\"amount\\\"],\\\"Currency\\\")}}</strong></td>\\n        </tr>\\n        {% for g in groups%}\\n        <tr>\\n            <td colspan=4><strong>{{g if show_account_code ==\\\"1\\\" else g.split(\\\" - \\\")[1]}}</strong></td>\\n        </tr>\\n        <!--loop account level 2-->\\n        {% for c in data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g) | map(attribute='parent_account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td colspan=3><strong>{{c if show_account_code ==\\\"1\\\" else c.split(\\\" - \\\")[1]}}</strong></td>\\n        </tr>\\n         <!-- startloop account level 3-->\\n        {% for a in data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c) | map(attribute='account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td></td>\\n            <td >{{a if show_account_code ==\\\"1\\\" else a.split(\\\" - \\\")[1]}}</td>\\n            <td class=\\\"text-center\\\"> {{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_name','equalto',a)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</td>\\n            <td class='text-right'> {{ frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_name','equalto',a)|list|sum(\\\"amount\\\"),'Currency') }}</td>\\n            \\n        </tr>\\n        \\n        \\n        {%endfor%}\\n        <!--end loop level 3-->\\n        \\n        <!--total level 2-->\\n        <tr>\\n            <td colspan=3 class=\\\"text-right\\\"><strong>*Total {{c}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end total level 2-->\\n        \\n        {%endfor%}\\n        <!--end loop level 2-->\\n        \\n            <!--total level 1-->\\n        <tr>\\n            <td colspan=3 class=\\\"text-right\\\"><strong>**Total {{g}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end total level 1-->\\n        \\n        {%endfor%}\\n         <tr>\\n            <td colspan=\\\"4\\\"><strong>{{t.label}} Ending Balance </strong></td>\\n            <td class='text-right'><strong>  {{ frappe.format_value( opening_balance_data[0][\\\"amount\\\"] + data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n        <!--end if check if ledger type has transaction-->\\n        {%endif%}\\n        <!--end loop ledger type-->\\n        {%endfor%}\\n         <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td colspan=\\\"4\\\"><strong>Ending Balance </strong></td>\\n            <td class='text-right'><strong>  {{ frappe.format_value( total_opening_balance + data|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n        </tr>\\n    </tbody>\\n    \\n</table>\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Cash Count\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%if (frappe.form_dict.get(\\\"show_cash_count\\\") or \\\"0\\\") == \\\"1\\\" %}\\n<br/>\\n<h3>Cash Count</h3>\\n{%set currencies = doc.cash_count| map(attribute='currency')|unique|list %}\\n\\n<table class='report-list' style='width:100%; margin-bottom:10px'>\\n    <thead>\\n        <tr>\\n        <th>Note Type</th>\\n        <th class='text-center'>Total Note</th>\\n        <th class='text-right'>Total Amount</th>\\n    </tr>\\n        \\n    </thead>\\n    \\n    <tbody>\\n        {%for c in currencies %}\\n        \\n        <tr>\\n            <td colspan=\\\"3\\\"><strong>{{c}}</strong></td>\\n        </tr>\\n            {% for d in doc.cash_count|selectattr(\\\"currency\\\",\\\"equalto\\\",c)%}\\n        <tr>\\n            <td><div style=\\\"padding-left:15px\\\">{{d.label}}</div></td>\\n            <td class='text-center'>{{d.total_note}}</td>\\n            <td class='text-right'>{{frappe.utils.fmt_money(d.total_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n            \\n        </tr>\\n        {%endfor%}\\n        <tr>\\n            <td><strong>Total {{c}}</strong></td>\\n            <td class='text-center'><strong>{{doc.cash_count|selectattr('currency','equalto',c)|sum(\\\"total_note\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.utils.fmt_money(doc.cash_count|selectattr('currency','equalto',c)|sum(\\\"total_amount\\\"),currency=c, precision=frappe.db.get_value(\\\"Currency\\\",c,\\\"custom_currency_precision\\\"))}}</strong></td>\\n            \\n        </tr>\\n        \\n        {%endfor%}\\n    \\n    </tbody>\\n    <tfoot>\\n        <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td><strong>Total</strong></td>\\n            <td class='text-center'><strong>{{doc.cash_count|sum(\\\"total_note\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_count|sum(\\\"total_base_currency_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2023-12-04 10:41:48.727841",
  "module": "eDoor",
  "name": "eDoor Cashier Shift Transaction Summary Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n@media print{@page {size: landscape}}\n.print-format{\n  \n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:1px 5px !important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Cashier Shift",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"CASHIER SHIFT DETAIL REPORT\\\")}}</h2>\\n\\n\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\n    <tr>\\n        <td class=\\\"filter-section\\\" >\\n        Shift #: <strong>{{doc.name}}</strong><br/>\\n        Audit Date: <strong>{{frappe.format_value( doc.posting_date,\\\"Date\\\")}}</strong><br/>\\n        </td> \\n        <td ></td>\\n\\n        <td class = \\\"text-right\\\">\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\n        <br>\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\n        </td> \\n    </tr>\\n\\n</table>\\n<br/>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"business_branch\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Property\"}, {\"fieldname\": \"posting_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Working Date\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Opened By: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{doc.owner.split(\\\",\\\")[0]}}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Time in: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{frappe.format_value(doc.creation,\\\"Datetime\\\")}}\\n\\t</div>\\n</div>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Closed by: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{(doc.closed_by or \\\"\\\").split(\\\"@\\\")[0] }}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Time Out: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{frappe.format_value(doc.closed_date,\\\"Datetime\\\")}}\\n\\t</div>\\n</div>\"}, {\"fieldname\": \"total_opening_amount\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Opening Amount\"}, {\"fieldname\": \"total_close_amount\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Closing Amount\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" >\\n\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t<label>Status: </label>\\n\\t</div>\\n\\t<div class=\\\"col-xs-7 text-left value\\\">\\n        {{\\\"Open\\\" if doc.is_closed == 0 else \\\"Closed\\\"}}\\n\\t</div>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Cash Float\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%if (frappe.form_dict.get(\\\"show_cash_float\\\") or \\\"0\\\") == \\\"1\\\" %}\\n<h3>Cash Float</h3>\\n\\n<table class='report-list' style='width:100%; margin-bottom:10px'>\\n    <thead>\\n        <tr>\\n        <th>Type</th>\\n        <th class='text-right'>Open Amount</th>\\n        <th class='text-right'>Expected</th>\\n        <th class='text-right'>Actual</th>\\n        <th class='text-right'>Difference</th>\\n        </tr>\\n        \\n    </thead>\\n    \\n    <tbody>\\n        {% for d in doc.cash_float%}\\n        <tr>\\n        <td>{{d.payment_method}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_system_close_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_close_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        <td class='text-right'>{{frappe.utils.fmt_money(d.input_different_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n        \\n    </tr>\\n    {%endfor%}\\n    \\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td><strong>Total</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"opening_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"system_close_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"close_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_float|sum(\\\"different_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Transaction\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%if (frappe.form_dict.get(\\\"group_by_ledger_type\\\") or \\\"0\\\") == \\\"0\\\" %}\\n{% set show_account_code = (frappe.form_dict.get(\\\"show_account_code\\\") or \\\"0\\\") %}\\n{% set sql = \\\"\\n    select \\n        name,\\n        reservation_stay,\\n        concat(parent_account_code, ' - ', parent_account_name) as parent_account_name,\\n        concat(account_group , ' - ' , account_group_name) as account_group_name,\\n        room_number,\\n        guest_name,\\n        transaction_number,\\n        reference_number,\\n        concat(account_code, ' - ',report_description) as account_name,\\n        amount * if(type='Debit',1,-1) as amount,\\n        report_quantity as quantity,\\n        owner,\\n        creation\\n    from `tabFolio Transaction` \\n    where\\n        property = '{}' and \\n        cashier_shift = '{}'\\n    order by\\n        account_code_sort_order,\\n        name\\n\\\".format(\\n    doc.business_branch,\\n    doc.name\\n)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n{%set groups =   data | map(attribute='account_group_name')|unique|list %}\\n\\n{% set sql=\\\"\\n    select \\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n    from `tabFolio Transaction` \\n    where \\n        property = '{}' and \\n        creation < '{}'  \\n\\\".format(doc.business_branch, doc.creation)\\n%}\\n\\n{% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}\\n<h3>Folio Transaction</h3>\\n\\n<table class='report-list' style='width:100%'>\\n    <thead>\\n        <tr>\\n            <th colspan=\\\"3\\\">\\n                Account Code\\n            </th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Tran. #</th>\\n            <th class=\\\"text-center\\\">Room</th>\\n            <th>Guest</th>\\n            <th class=\\\"text-center\\\">QTY</th>\\n            <th class=\\\"text-right\\\">Amount</th>\\n            <th>By</th>\\n            <th>Date</th>\\n        </tr>\\n    </thead>\\n    <tbody>\\n        \\n        <tr>\\n            <td colspan=\\\"9\\\"><strong>Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(opening_balance_data[0][\\\"amount\\\"],\\\"Currency\\\")}}</strong></td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        {% for g in groups%}\\n        <tr>\\n            <td colspan=\\\"12\\\"><strong>{{g if show_account_code ==\\\"1\\\" else g.split(\\\" - \\\")[1]}}</strong></td>\\n        </tr>\\n        <!--loop account level 2-->\\n        {% for c in data|selectattr('account_group_name','equalto',g) | map(attribute='parent_account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td colspan=11><strong>{{c if show_account_code ==\\\"1\\\" else c.split(\\\" - \\\")[1]}}</strong></td>\\n        </tr>\\n         <!-- startloop account level 3-->\\n        {% for a in data|selectattr('parent_account_name','equalto',c) |list%}\\n        <tr>\\n            <td></td>\\n            <td></td>\\n            <td >{{a.account_name if show_account_code ==\\\"1\\\" else a.account_name.split(\\\" - \\\")[1]}}</td>\\n            <td>{{a.reservation_stay or \\\"\\\"}}</td>\\n            <td class='text-center'>{{a.transaction_number}} {{ \\\"\\\" if (a.reference_number or \\\"\\\")==\\\"\\\" else \\\"<br/>\\\" + a.reference_number }} </td>\\n            <td class='text-center'>{{a.name}}</td>\\n            <td class='text-center'>{{a.room_number or \\\"\\\"}}</td>\\n            <td >{{a.guest_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\"> {{frappe.format_value(a.quantity,\\\"Float\\\") if a.quantity>0 else \\\"-\\\" }}</td>\\n            <td class='text-right'> {{ frappe.format_value(a.amount,'Currency') }}</td>\\n            <td>{{a.owner.split(\\\"@\\\")[0]}}</td>\\n            <td>{{frappe.format_value(a.creation, \\\"Datetime\\\")}}</td>\\n            \\n        </tr>\\n        {%endfor%}\\n        <!--end loop level 3-->\\n        \\n        <!--total level 2-->\\n        <tr>\\n            <td colspan=\\\"8\\\" class=\\\"text-right\\\"><strong>*Total {{c}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr('parent_account_name','equalto',c)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr('parent_account_name','equalto',c)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        <!--end total level 2-->\\n        \\n        {%endfor%}\\n        <!--end loop level 2-->\\n        \\n            <!--total level 1-->\\n        <tr>\\n            <td colspan=\\\"8\\\" class=\\\"text-right\\\"><strong>**Total {{g}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr('account_group_name','equalto',g)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr('account_group_name','equalto',g)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        <!--end total level 1-->\\n        \\n        {%endfor%}\\n         <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td colspan=\\\"9\\\"><strong>Ending Balance</strong></td>\\n            <td class='text-right'><strong>{{ frappe.format_value( opening_balance_data[0][\\\"amount\\\"] + data|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n    </tbody>\\n \\n</table>\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{%if (frappe.form_dict.get(\\\"group_by_ledger_type\\\") or \\\"0\\\") == \\\"1\\\" %}\\n{% set show_account_code = (frappe.form_dict.get(\\\"show_account_code\\\") or \\\"0\\\") %}\\n{% set sql = \\\"\\n     select \\n        transaction_type,\\n        name,\\n        reservation_stay,\\n        concat(parent_account_code, ' - ', parent_account_name) as parent_account_name,\\n        concat(account_group , ' - ' , account_group_name) as account_group_name,\\n        room_number,\\n        guest_name,\\n        transaction_number,\\n        reference_number,\\n        concat(account_code, ' - ',report_description) as account_name,\\n        amount * if(type='Debit',1,-1) as amount,\\n        report_quantity as quantity,\\n        owner,\\n        creation\\n    from `tabFolio Transaction` \\n    where\\n        property = '{}' and \\n        cashier_shift = '{}'\\n    order by\\n        account_code_sort_order,\\n        name\\n\\\".format(\\n    doc.business_branch,\\n    doc.name\\n)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n{% set ledger_types=[\\n    {\\\"label\\\": \\\"Guest Ledger\\\",\\\"value\\\":\\\"Reservation Folio\\\" },\\n    {\\\"label\\\": \\\"Deposit Ledger\\\",\\\"value\\\":\\\"Deposit Ledger\\\" },\\n    {\\\"label\\\": \\\"Desk Folio\\\",\\\"value\\\":\\\"Desk Folio\\\" },\\n    {\\\"label\\\": \\\"Payable Ledger\\\",\\\"value\\\":\\\"Payable Ledger\\\" },\\n    {\\\"label\\\": \\\"City Ledger\\\",\\\"value\\\":\\\"City Ledger\\\" },\\n    {\\\"label\\\": \\\"POS\\\",\\\"value\\\":\\\"Cashier Shift\\\" }\\n    ]\\n%}\\n\\n{% set sql=\\\"\\n    select \\n        ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n    from `tabFolio Transaction` \\n    where \\n        property = '{}' and \\n        creation < '{}'  \\n\\\".format(doc.business_branch, doc.creation)\\n%}\\n{% set total_opening_balance = frappe.db.sql(sql,as_dict=1)[0][\\\"amount\\\"]%}\\n\\n<h3>Folio Transaction</h3>\\n\\n<table class='report-list' style='width:100%'>\\n    <thead>\\n        <tr>\\n            <th colspan=\\\"3\\\">\\n                Account Code\\n            </th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Tran. #</th>\\n            <th class=\\\"text-center\\\">Room</th>\\n            <th>Guest</th>\\n            <th class=\\\"text-center\\\">QTY</th>\\n            <th class=\\\"text-right\\\">Amount</th>\\n            <th>By</th>\\n            <th>Date</th>\\n        </tr>\\n    </thead>\\n    <tbody>\\n        <tr>\\n            <td colspan=\\\"9\\\"><strong>Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(total_opening_balance,\\\"Currency\\\")}}</strong></td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        {%for t in ledger_types%}\\n        \\n        {%set groups =data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)| map(attribute='account_group_name')|unique|list %}\\n        \\n        {% set sql=\\\"\\n            select \\n                ifnull(sum(amount*if(type='Debit',1,-1)),0) as amount \\n            from `tabFolio Transaction` \\n            where \\n                property = '{}' and \\n                creation < '{}'  and \\n                transaction_type = '{}'\\n        \\\".format(doc.business_branch, doc.creation, t.value)\\n        %}\\n        \\n        {% set opening_balance_data=frappe.db.sql(sql,as_dict=1) %}\\n        \\n        \\n        <!--check if ledter type have transactiuon and have opening balance -->\\n        {%if opening_balance_data[0][\\\"amount\\\"] !=0 or groups|length > 0 %}\\n        <tr>\\n            <td colspan=\\\"12\\\"><strong style=\\\"font-size:14px\\\">{{t.label}}</strong>\\n            <hr>\\n            </td>\\n        </tr>\\n        \\n        \\n        <tr>\\n            <td colspan=\\\"9\\\"><strong>{{t.label}} Opening Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{ frappe.format_value(opening_balance_data[0][\\\"amount\\\"],\\\"Currency\\\")}}</strong></td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        {% for g in groups%}\\n        <tr>\\n            <td colspan=12><strong>{{g if show_account_code ==\\\"1\\\" else g.split(\\\" - \\\")[1]}}</strong></td>\\n        </tr>\\n        <!--loop account level 2-->\\n        {% for c in data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g) | map(attribute='parent_account_name')|unique|list%}\\n        <tr>\\n            <td></td>\\n            <td colspan=11><strong>{{c if show_account_code ==\\\"1\\\" else c.split(\\\" - \\\")[1]}}</strong></td>\\n        </tr>\\n         <!-- startloop account level 3-->\\n        {% for a in data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list%}\\n        <tr>\\n            <td></td>\\n            <td></td>\\n            <td >{{a.account_name if show_account_code ==\\\"1\\\" else a.account_name.split(\\\" - \\\")[1]}}</td>\\n            <td>{{a.reservation_stay or \\\"\\\"}}</td>\\n            <td class='text-center'>{{a.transaction_number}} {{ \\\"\\\" if (a.reference_number or \\\"\\\")==\\\"\\\" else \\\"<br/>\\\" + a.reference_number }} </td>\\n            <td class='text-center'>{{a.name}}</td>\\n            <td class='text-center'>{{a.room_number or \\\"\\\"}}</td>\\n            <td >{{a.guest_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\"> {{frappe.format_value(a.quantity,\\\"Float\\\") if a.quantity>0 else \\\"-\\\" }}</td>\\n            <td class='text-right'> {{ frappe.format_value(a.amount,'Currency') }}</td>\\n            <td>{{a.owner.split(\\\"@\\\")[0]}}</td>\\n            <td>{{frappe.format_value(a.creation, \\\"Datetime\\\")}}</td>     \\n        </tr>\\n        \\n        \\n        {%endfor%}\\n        <!--end loop level 3-->\\n        \\n        <!--total level 2-->\\n        <tr>\\n            <td colspan=8 class=\\\"text-right\\\"><strong>*Total {{c}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('parent_account_name','equalto',c)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        <!--end total level 2-->\\n        \\n        {%endfor%}\\n        <!--end loop level 2-->\\n        \\n            <!--total level 1-->\\n        <tr>\\n            <td colspan=8 class=\\\"text-right\\\"><strong>**Total {{g}}:</strong></td>\\n           <td class=\\\"text-center\\\"><strong>{{frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g)|list|sum(\\\"quantity\\\"),\\\"Float\\\") }}</strong> </td>\\n            <td class='text-right'><strong>{{ frappe.format_value(data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|selectattr('account_group_name','equalto',g)|list|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n        </tr>\\n        <!--end total level 1-->\\n        \\n        {%endfor%}\\n         <tr>\\n            <td colspan=\\\"9\\\"><strong>{{t.label}} Ending Balance </strong></td>\\n            <td class='text-right'><strong>  {{ frappe.format_value( opening_balance_data[0][\\\"amount\\\"] + data|selectattr(\\\"transaction_type\\\",\\\"equalto\\\",t.value)|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n            <td></td>\\n            \\n        </tr>\\n        <!--end if check if ledger type has transaction-->\\n        {%endif%}\\n        <!--end loop ledger type-->\\n        {%endfor%}\\n         <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td colspan=\\\"9\\\"><strong>Ending Balance </strong></td>\\n            <td class='text-right'><strong>  {{ frappe.format_value( total_opening_balance + data|sum(\\\"amount\\\"),'Currency') }}</strong> </td>\\n            <td></td>\\n        </tr>\\n    </tbody>\\n    \\n</table>\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Cash Count\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%if (frappe.form_dict.get(\\\"show_cash_count\\\") or \\\"0\\\") == \\\"1\\\" %}\\n<br/>\\n<h3>Cash Count</h3>\\n{%set currencies = doc.cash_count| map(attribute='currency')|unique|list %}\\n\\n<table class='report-list' style='width:100%; margin-bottom:10px'>\\n    <thead>\\n        <tr>\\n        <th>Note Type</th>\\n        <th class='text-center'>Total Note</th>\\n        <th class='text-right'>Total Amount</th>\\n    </tr>\\n        \\n    </thead>\\n    \\n    <tbody>\\n        {%for c in currencies %}\\n        \\n        <tr>\\n            <td colspan=\\\"3\\\"><strong>{{c}}</strong></td>\\n        </tr>\\n            {% for d in doc.cash_count|selectattr(\\\"currency\\\",\\\"equalto\\\",c)%}\\n        <tr>\\n            <td><div style=\\\"padding-left:15px\\\">{{d.label}}</div></td>\\n            <td class='text-center'>{{d.total_note}}</td>\\n            <td class='text-right'>{{frappe.utils.fmt_money(d.total_amount,currency=d.currency,precision=d.currency_precision)}}</td>\\n            \\n        </tr>\\n        {%endfor%}\\n        <tr>\\n            <td><strong>Total {{c}}</strong></td>\\n            <td class='text-center'><strong>{{doc.cash_count|selectattr('currency','equalto',c)|sum(\\\"total_note\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.utils.fmt_money(doc.cash_count|selectattr('currency','equalto',c)|sum(\\\"total_amount\\\"),currency=c, precision=frappe.db.get_value(\\\"Currency\\\",c,\\\"custom_currency_precision\\\"))}}</strong></td>\\n            \\n        </tr>\\n        \\n        {%endfor%}\\n    \\n    </tbody>\\n    <tfoot>\\n        <tr style=\\\"border-top:solid 1px #000\\\">\\n            <td><strong>Total</strong></td>\\n            <td class='text-center'><strong>{{doc.cash_count|sum(\\\"total_note\\\")}}</strong></td>\\n            <td class='text-right'><strong>{{frappe.format_value(doc.cash_count|sum(\\\"total_base_currency_amount\\\"),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2023-12-04 09:42:03.000902",
  "module": "eDoor",
  "name": "eDoor Cashier Shift Transaction Detail Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Cashier Shift",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"CASHIER SHIFT AUDIT TRAIL REPORT\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            Shift #: {{doc.name}} <br/>\\r\\n            Audit Date: {{frappe.format_value(doc.posting_date,\\\"Date\\\")}}\\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%\\n    set sql = \\\"select \\n        custom_posting_date,\\n        custom_posting_date,\\n        subject,\\n        reference_doctype,\\n        reference_name,\\n        content,\\n        comment_by,\\n        creation\\n    from `tabComment`\\n    where\\n        custom_cashier_shift='{}'\\n    order by \\n        creation\\n    \\\".format(doc.name)\\n%}\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n<table class=\\\"report-list\\\" style=\\\"width:100%\\\" >\\n    <thead>\\n        <tr>\\n            <th class='text-center'>No</th>\\n            <th class='text-center'>Audit Date</th>\\n            <th>Ref Type</th>\\n            <th>Ref #</th>\\n            <th>Subject</th>\\n            <th>Content</th>\\n            <th>By</th>\\n            <th class='text-center'>Date & Time</th>\\n        </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data%}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\" style=\\\"white-space: nowrap;\\\">{{frappe.format_value(d.custom_posting_date,'Date')}}</td>\\n            <td style=\\\"white-space: nowrap;\\\">{{d.reference_doctype}}</td>\\n            <td style=\\\"white-space: nowrap;\\\">{{d.reference_name}}</td>\\n            <td style=\\\"white-space: nowrap;\\\">{{d.subject}}</td>\\n            <td>{{d.content}}</td>\\n            <td style=\\\"white-space: nowrap;\\\">{{d.comment_by}}</td>\\n            <td class=\\\"text-center\\\" style=\\\"white-space: nowrap;\\\">{{frappe.format_value(d.creation,'Datetime')}}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-12-01 17:56:23.739470",
  "module": "eDoor",
  "name": "eDoor Cashier Shift Audit Trail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 }
]