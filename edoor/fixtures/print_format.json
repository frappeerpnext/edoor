[
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Arrival Guest\\\")}}</h2>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            total_room_rate ,\\r\\n            pickup_time,\\r\\n            arrival_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date = '{1}' and \\r\\n            keyword like '%{2}%' and \\r\\n            business_source = if('{3}'='', business_source,'{3}') and \\r\\n            room_types like '%{4}%' and \\r\\n            is_active_reservation=1\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n     \\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Ref. #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-end\\\">ADR</th>\\r\\n                <th class=\\\"text-end\\\">Total Room Rate</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n            </tr>\\r\\n      \\r\\n            {%for d in data%}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.pickup_time}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.arrival_flight_number or \\\"\\\"}}</td>\\r\\n                    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n         \\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-08-28 08:46:52.340117",
  "module": "eDoor",
  "name": "Front Desk Arrival Guest Report Test",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Departure List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{% if frappe.form_dict.get(\\\"action\\\") == \\\"view_departure\\\" %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        business_source,\\n        reference_number,\\n        reservation_date,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        is_active_reservation = 1 and\\n        departure_date = '{1}' and \\n        keyword like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or ''\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n    <table class='report-list occupied-001' style='width:100%'>\\n     \\n            <tr> \\n                <th class=\\\"text-center\\\">No.</th>\\n                <th class=\\\"text-center\\\">Reservation #</th>\\n                <th class=\\\"text-center\\\">Stay #</th>\\n                <th>Ref. #</th>\\n                <th class=\\\"text-center\\\">Type</th>\\n                <th class=\\\"text-center\\\">Res. Date</th>\\n                <th class=\\\"text-center\\\">Stay Date</th>\\n                <th class=\\\"text-center\\\">Room Nights</th>\\n                <th>Room(s)</th>\\n                <th>Guest</th>\\n                <th>Source</th>\\n                {% if can_view_rate==1%}\\n                <th class=\\\"text-end\\\">ADR</th>\\n                <th class=\\\"text-end\\\">Total Room Rate</th>\\n                {%endif%}\\n                <th class=\\\"text-center\\\">Status</th>\\n            </tr>\\n      \\n            {%for d in data%}\\n                <tr>\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                    <td>{{d.reference_number or \\\"\\\"}}</td>\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                   \\n                    <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                    <td>\\n                        {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                        {% if (rooms|length)>0 %}\\n                            {% for room in rooms %}\\n                              <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                            {% endfor %}\\n                        {% endif %}\\n                    </td>\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                    <td>{{d.business_source}}</td>\\n                    {%if can_view_rate==1 %}\\n                    <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                    <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                    {%endif%}\\n                    <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                </tr>\\n           \\n            {%endfor%}\\n         \\n    </table>\\n    {% else %}\\n        <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n    {% endif %}\\n{% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Departure Remaining\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{% if frappe.form_dict.get(\\\"action\\\") == \\\"view_departure_remaining\\\" %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        business_source,\\n        reservation_date,\\n        reference_number,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        is_active_reservation = 1 and\\n        departure_date = '{1}' and \\n        keyword like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status != 'Checked Out'\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or ''\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n    <table class='report-list occupied-001' style='width:100%'>\\n     \\n            <tr>\\n                <th class=\\\"text-center\\\">No.</th>\\n                <th class=\\\"text-center\\\">Reservation #</th>\\n                <th class=\\\"text-center\\\">Stay #</th>\\n                <th>Ref. #</th>\\n                <th class=\\\"text-center\\\">Type</th>\\n                <th class=\\\"text-center\\\">Res. Date</th>\\n                <th class=\\\"text-center\\\">Stay Date</th>\\n                <th class=\\\"text-center\\\">Room Nights</th>\\n                <th>Room(s)</th>\\n                <th>Guest</th>\\n                <th>Source</th>\\n            {%if can_view_rate==1%}\\n                <th class=\\\"text-end\\\">ADR</th>\\n                <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n                <th class=\\\"text-center\\\">Status</th>\\n            </tr>\\n      \\n            {%for d in data%}\\n                <tr>\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                    <td>{{d.reference_number or \\\"\\\"}}</td>\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                    <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                    <td>\\n                        {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                        {% if (rooms|length)>0 %}\\n                            {% for room in rooms %}\\n                              <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                            {% endfor %}\\n                        {% endif %}\\n                    </td>\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                    <td>{{d.business_source}}</td>\\n                {%if can_view_rate ==1  %}\\n                    <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                    <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                    <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                </tr>\\n           \\n            {%endfor%}\\n         \\n    </table>\\n    {% else %}\\n       <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n    {% endif %}\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-03 16:06:39.889473",
  "module": "eDoor",
  "name": "eDoor Dashboard Departure Guest",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival Remaining\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n\\n\\n{% if frappe.form_dict.get('action')=='view_arrival_remaining' %}\\n\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_date,\\n        reference_number,\\n        reservation_type,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        keyword like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status in ('Reserved','Confirmed')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or ''\\n        ),as_dict=1)\\n%}\\n\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            \\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n             {%endif%}\\n             <th class=\\\"text-center\\\">Status</th> \\n            \\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                    <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td> \\n                    <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                   \\n                {%endif%}\\n                 <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                \\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n\\n{% if frappe.form_dict.get('action')=='view_arrival' %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        keyword like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status = if('{5}' = '', reservation_status, '{5}')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<div class=\\\"ms-info\\\">\\n    In here, include the list of <b>no shows</b>  and <b>cancellations</b>  on the current working day.\\n</div>\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            {%if can_view_rate==1%}\\n                <th class=\\\"text-end\\\">ADR</th>\\n                <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate ==1  %}\\n                    <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                    <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-03 16:00:52.640754",
  "module": "eDoor",
  "name": "eDoor Dashboard Arrival Guest",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".p.text-center.small.page-number.visible-pdf{\n    display:none;\n}\n.profile{\n   width: 100px !important;\n    height: 100px !important;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 10px;\n    overflow: hidden;\n    margin-top: 20px;\n    object-fit: cover;\n}\n.margin-right-1rem{\n    margin-right:0rem;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Customer",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"w-100 d-flex justify-content-center\\\">\\n    {% if doc.photo %}\\n        <img src=\\\"{{doc.photo}}\\\" class=\\\"img-thumbnail profile rounded-circle\\\" alt=\\\"profile\\\" width=\\\"100px\\\" height=\\\"100px\\\">\\n    {% else %}      \\n        <div class=\\\"profile bg-light rounded-circle\\\">\\n       <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" version=\\\"1.1\\\" id=\\\"Layer_1\\\" x=\\\"0px\\\" y=\\\"0px\\\" width=\\\"48px\\\" height=\\\"48px\\\" viewBox=\\\"0 0 48 48\\\" style=\\\"enable-background:new 0 0 48 48;\\\" xml:space=\\\"preserve\\\">\\n<style type=\\\"text/css\\\">\\n\\t.st0{fill:#495057;}\\n</style>\\n<g>\\n\\t<path class=\\\"st0\\\" d=\\\"M14.6,13.6c0,5.2,4.2,9.4,9.4,9.4s9.4-4.2,9.4-9.4S29.2,4.3,24,4.3l0,0C18.8,4.3,14.6,8.5,14.6,13.6z    M29.7,13.6c0,3.1-2.5,5.6-5.6,5.6c-3.1,0-5.6-2.5-5.6-5.6c0-3.1,2.5-5.6,5.6-5.6C27.1,8,29.6,10.5,29.7,13.6L29.7,13.6L29.7,13.6z   \\\"/>\\n\\t<path class=\\\"st0\\\" d=\\\"M32.5,41.8c1.6-0.7,3-1.7,4.3-2.8c1-0.8,1.3-2.2,0.7-3.3l-2.5-4.9c-0.7-1.4-2.1-2.2-3.6-2.2H16.5   c-1.5,0-2.9,0.9-3.6,2.2l-2.5,4.9c-0.5,1.1-0.2,2.5,0.7,3.3c1.8,1.5,3.9,2.7,6.1,3.5C22.2,44.4,27.7,44.1,32.5,41.8z\\\"/>\\n</g>\\n</svg>\\n        </div>\\n    {% endif %}\\n</div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row mt-4\\\">\\n    <div class=\\\"col-6\\\">\\n        \\n    <div class=\\\"bg-header-table text-center p-2 text-white \\\"> Guest </div>\\n        <table class=\\\"table-print-format\\\">\\n    <tr>\\n        <td width=\\\"130px\\\">{{_(\\\"Guest ID\\\")}}</td>\\n        <td>{{doc.name or ''}}</td>\\n    </tr>\\n{% if doc.customer_name_en %}\\n    <tr>\\n        <td>{{_(\\\"English Name\\\")}}</td>\\n        <td>{{doc.customer_name_en or ''}}</td>\\n    </tr>\\n{% endif %}\\n{% if doc.customer_name_kh %}\\n    <tr>\\n        <td>{{_(\\\"Khmer Name\\\")}}</td>\\n        <td>{{doc.customer_name_kh or ''}}</td>\\n    </tr>\\n{% endif %}\\n    <tr>\\n        <td>{{_(\\\"Gender\\\")}}</td>\\n        <td>{{doc.gender or ''}}</td>\\n    </tr>\\n     <tr>\\n        <td>{{_(\\\"Guest Group\\\")}}</td>\\n        <td>{{doc.customer_group or ''}}</td>\\n    </tr>\\n     <tr>\\n                <td>{{_(\\\"Company Name\\\")}}</td>\\n                <td>{{doc.company_name or ''}}</td>\\n            </tr>   \\n    <tr>\\n        <td>{{_(\\\"Date of Birth\\\")}}</td>\\n        <td>{{frappe.format(doc.date_of_birth,{'fieldtype':'Date'} or '')}}</td>\\n    </tr>\\n     <tr>\\n        <td>{{_(\\\"Nationality\\\")}}</td>\\n        <td>{{doc.country or ''}}</td>\\n    </tr>\\n    </table>\\n    </div>\\n    <div class=\\\"col-6\\\">\\n         <div class=\\\"bg-header-table text-center p-2 text-white\\\">Contact </div>\\n        <table class=\\\"table-print-format\\\">\\n            <tr>\\n        <td>{{_(\\\"Tel\\\")}}</td>\\n        <td>{{doc.phone_number or ''}}</td>\\n    </tr>\\n{% if doc.phone_number_2%}\\n    <tr>\\n        <td>{{_(\\\"Tel\\\")}}</td>\\n        <td>{{doc.phone_number_2 or ''}}</td>\\n    </tr>\\n{% endif %}\\n    <tr>\\n        <td>{{_(\\\"Email\\\")}}</td>\\n        <td>{{doc.email_address or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Address\\\")}}</td>\\n        <td>{{doc.country or ''}}, {{doc.province or ''}}</td>\\n    </tr>\\n    </table>\\n    </div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row mt-4\\\">\\n    <div class=\\\"col-12\\\">\\n        <div class=\\\"bg-header-table text-center p-2 text-white \\\"> Identity </div>\\n        <table class=\\\"table-print-format\\\">\\n            <tr>\\n                <td width=\\\"130px\\\">{{_(\\\"Identity Type\\\")}}</td>\\n                <td>{{doc.identity_type or ''}}</td>\\n            </tr>\\n            <tr>\\n                <td>{{_(\\\"ID\\\")}}</td>\\n                <td>{{doc.id_card_number or ''}}</td>\\n            </tr>\\n            <tr>\\n                <td>{{_(\\\"Expired Date\\\")}}</td>\\n                <td>{{frappe.format(doc.expired_date,{'fieldtype':'Date'} or '')}}</td>\\n            </tr>\\n            {% if doc.market_segment %}\\n             <tr>\\n                <td>{{_(\\\"Market Segment\\\")}}</td>\\n                <td>{{doc.market_segment or ''}}</td>\\n            </tr>\\n            {% endif %}\\n        </table>\\n    </div>\\n</div>\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-09-07 16:56:40.515532",
  "module": "eDoor",
  "name": "eDoor Guest Detail General Information",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Customer",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{% set guest_detail = frappe.db.sql(\\\"select * from `tabReservation Stay` \\nwhere guest = '{}'\\\".format(doc.name),as_dict=1)%}\\n\\n{% if (guest_detail|length) >0 %}\\n<table class=\\\"report-list w-100 \\\">\\n    <tr>\\n        <td class=\\\"text-center\\\">{{_(\\\"No.\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Reservation #\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Stay #\\\")}}</td>\\n        <td>{{_(\\\"Ref. #\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Type\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Group Code\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Res Date\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Stay Date\\\")}}</td>\\n        <td class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</td>\\n        <td>{{_(\\\"Rooms\\\")}}</td>\\n        <td>{{_(\\\"Guest\\\")}}</td>\\n        <td>{{_(\\\"Source\\\")}}</td>\\n        {% if can_view_rate==1%}\\n        <td class=\\\"text-end\\\">{{_(\\\"ADR\\\")}}</td>\\n        <td class=\\\"text-end\\\">{{_(\\\"Total Room Rate\\\")}}</td>\\n        {%endif%}\\n        <td class=\\\"text-center\\\">{{_(\\\"Status\\\")}}</td>\\n    </tr>\\n    {% for rs in guest_detail %}\\n    <tr>\\n        <td class=\\\"text-center\\\">{{loop.index}}</td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{rs.reservation}}', '*')\\\">{{rs.reservation}}</a></td>\\n        <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{rs.name}}', '*')\\\">{{rs.name}}</a></td>\\n        <td>{{rs.reference_number if rs.reference_number else \\\"\\\"}}</td>\\n        <td class=\\\"text-center\\\">{{rs.reservation_type}}</td>\\n        <td>{{rs.group_code}}</td>\\n        <td class=\\\"text-center\\\">{{frappe.format(rs.reservation_date,{'fieldtype':'Date'})}}</td>\\n        <td class=\\\"text-center\\\">{{frappe.format(rs.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(rs.departure_date,{'fieldtype':'Date'})}}</td>\\n        <td class=\\\"text-center\\\">{{rs.room_nights}}</td>\\n        <td>\\n            {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(rs.name),as_dict=1) %}\\n            {% if (rooms|length)>0 %}\\n                {% for room in rooms %}\\n                  <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{rs.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                {% endfor %}\\n            {% endif %}\\n        </td>\\n        <td>{{rs.guest_name}}</td>\\n        <td>{{rs.business_source}}</td>\\n        {% if can_view_rate==1%}\\n        <td class=\\\"text-end\\\">{{frappe.format(rs.adr,{'fieldtype':'Currency'})}}</td>\\n        <td class=\\\"text-end\\\">{{frappe.format(rs.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n        {%endif%}\\n        <td class=\\\"text-center\\\">\\n            <span class=\\\"rounded-pill py-1 px-2 text-white\\\" style=\\\"background:{{rs.status_color}}\\\" >{{rs.reservation_status}}</span>    \\n        </td>\\n    </tr>\\n    {% endfor %}\\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-03 14:41:33.019652",
  "module": "eDoor",
  "name": "eDoor Guest Stay History",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\r\\n\\r\\n{%\\r\\n\\r\\nset data = frappe.db.sql(\\\"\\r\\n    select \\r\\n        name,\\r\\n        reservation,\\r\\n        reservation_type,\\r\\n        reference_number,\\r\\n        reservation_date,\\r\\n        business_source,\\r\\n        group_code,\\r\\n        group_name,\\r\\n        guest,\\r\\n        guest_name, \\r\\n        business_source, \\r\\n        arrival_date, \\r\\n        departure_date,\\r\\n        reservation_status,\\r\\n        room_type_alias,\\r\\n        status_color,\\r\\n        rooms,\\r\\n        room_nights,\\r\\n        adr,\\r\\n        total_room_rate \\r\\n    from `tabReservation Stay` \\r\\n    where \\r\\n        property= '{0}' and \\r\\n        arrival_date < '{1}' and \\r\\n        departure_date > '{1}' and\\r\\n        keyword like '%{2}%' and \\r\\n        is_active_reservation = 1 and\\r\\n        business_source = if('{3}'='', business_source,'{3}') and \\r\\n        room_types like '%{4}%' and \\r\\n        reservation_status = if('{5}' = '', reservation_status, '{5}')\\r\\n        \\\".format(\\r\\n            doc.name,\\r\\n            frappe.form_dict.get('date'),\\r\\n            frappe.form_dict.get('keyword') or '',\\r\\n            frappe.form_dict.get('business_source') or '',\\r\\n            frappe.form_dict.get('room_type') or '',\\r\\n            frappe.form_dict.get('reservation_status') or '',\\r\\n        ),as_dict=1)\\r\\n%}\\r\\n{% if (data|length) >0 %}\\r\\n<table class='report-list occupied-001' style='width:100%'>\\r\\n \\r\\n        <tr>\\r\\n            <th class=\\\"text-center\\\">No.</th>\\r\\n            <th class=\\\"text-center\\\">Reservation #</th>\\r\\n            <th class=\\\"text-center\\\">Stay #</th>\\r\\n            <th>Ref. #</th>\\r\\n            <th class=\\\"text-center\\\">Type</th>\\r\\n            \\r\\n            <th class=\\\"text-center\\\">Group Code</th>\\r\\n            <th class=\\\"text-center\\\">Res. Date</th>\\r\\n            \\r\\n            <th class=\\\"text-center\\\">Stay Date</th>\\r\\n            <th class=\\\"text-center\\\">Room Nights</th>\\r\\n            <th>Room(s)</th>\\r\\n            <th>Guest</th>\\r\\n            <th>Source</th>\\r\\n        {%if can_view_rate==1%}\\r\\n            <th class=\\\"text-end\\\">ADR</th>\\r\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\r\\n        {%endif%}\\r\\n            <th class=\\\"text-center\\\">Status</th>\\r\\n        </tr>\\r\\n        {%for d in data%}\\r\\n            <tr>\\r\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\r\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\r\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.group_code or \\\"\\\"}}{{ \\\"/\\\" if d.group_code and d.group_name else \\\"\\\" }}{{d.group_name or \\\"\\\"}}</td>\\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\r\\n               \\r\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                <td>\\r\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\r\\n                    {% if (rooms|length)>0 %}\\r\\n                        {% for room in rooms %}\\r\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\r\\n                        {% endfor %}\\r\\n                    {% endif %}\\r\\n                </td>\\r\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\r\\n                <td>{{d.business_source}}</td> \\r\\n            {%if can_view_rate==1%}\\r\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\r\\n            {%endif%}\\r\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\r\\n            </tr>\\r\\n        {%endfor%}\\r\\n     \\r\\n</table>\\r\\n{% else %}\\r\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n<div class=\\\"isemtyIcon\\\"></div> \\r\\n<small class=\\\"text-emty\\\">No Data </small>\\r\\n</div>\\r\\n{%endif%}\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-05 10:07:46.544243",
  "module": "eDoor",
  "name": "eDoor Dashboard Stay Over Guest",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".header-name{\n    cursor: pointer;\n    padding: .5rem;\n    font-size: 13px;\n    font-weight: 600 !important;\n    background-color: rgb(226 232 240);\n    color: #343a40;\n}\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Customer",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set sale = frappe.db.sql(\\\"select sp.product_name, sp.quantity, sp.price, sp.discount_amount, sp.amount, s.name from  `tabSale Product` sp\\ninner join `tabSale` s on s.name=sp.parent\\nwhere s.customer = '{}'\\\".format(doc.name),as_dict=1) %}\\n{%set main_currency = frappe.get_doc(\\\"Currency\\\",frappe.db.get_default(\\\"currency\\\"))%}\\n{%set second_currency = frappe.get_doc(\\\"Currency\\\",frappe.db.get_default(\\\"second_currency\\\"))%}\\n<div >\\n{% if sale %}\\n<!---->\\n<div class=\\\"mt-3\\\" style=\\\"margin-right:1rem;\\\">\\n  <div class=\\\"accordion\\\" id=\\\"accordionExample\\\">\\n      \\n    {% for name in sale | map(attribute='name') | unique %}\\n \\n\\n      <div class=\\\"accordion-item\\\">\\n        <h2 class=\\\"accordion-header\\\" id=\\\"heading{{ loop.index }}\\\">\\n          <button class=\\\"accordion-button {% if loop.first %} {% else %} collapsed {% endif %}\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#collapse{{ loop.index }}\\\">\\n                <div class=\\\"w-100 d-flex justify-content-between\\\">\\n                    <span><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_sale_detail|{{name}}', '*')\\\">{{ name }}</a></span>\\n                    <span class=\\\"me-5\\\"> Total Amount: {{ frappe.utils.fmt_money(sale|selectattr(\\\"name\\\", \\\"equalto\\\", name)|sum(attribute='amount'), currency=main_currency.name, precision=main_currency.custom_currency_precision) }} </span>\\n                </div>\\n          </button>\\n        </h2>\\n        <div id=\\\"collapse{{ loop.index }}\\\" class=\\\"accordion-collapse collapse{% if loop.first %} show {% endif %}\\\">\\n          <div class=\\\"accordion-body\\\">\\n            <table class=\\\"table\\\">\\n              <thead>\\n                <tr>\\n                  <th class=\\\"text-center\\\">{{ _(\\\"No.\\\") }}</th>\\n                  <th>{{ _(\\\"Product Name\\\") }}</th>\\n                  <th class=\\\"text-center\\\">{{ _(\\\"QTY\\\") }}</th>\\n                  <th class=\\\"text-end\\\">{{ _(\\\"Price\\\") }}</th>\\n                  <th class=\\\"text-end\\\">{{ _(\\\"Discount\\\") }}</th>\\n                  <th class=\\\"text-end\\\">{{ _(\\\"Amount\\\") }}</th>\\n                </tr>\\n              </thead>\\n              <tbody>\\n                {% for s in sale | selectattr(\\\"name\\\", \\\"equalto\\\", name) %}\\n                  <tr>\\n                    <td class=\\\"text-center\\\" >{{ loop.index }}</td>\\n                    <td>{{ s.product_name }}</td>\\n                    <td class=\\\"text-center\\\">{{ s.quantity }}</td>\\n                    <td align=\\\"right\\\">{{ frappe.utils.fmt_money(s.price, currency=main_currency.name, precision=main_currency.custom_currency_precision) }}</td>\\n                    <td align=\\\"right\\\">{{ frappe.utils.fmt_money(s.discount_amount, currency=main_currency.name, precision=main_currency.custom_currency_precision) }}</td>\\n                    <td align=\\\"right\\\">{{ frappe.utils.fmt_money(s.amount, currency=main_currency.name, precision=main_currency.custom_currency_precision) }}</td>\\n                  </tr>\\n                {% endfor %}\\n              </tbody>\\n            </table>\\n          </div>\\n        </div>\\n      </div>\\n    {% endfor %}\\n  </div>\\n</div>\\n<!---->\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n</div>\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-09-25 11:33:13.671775",
  "module": "eDoor",
  "name": "eDoor Guest POS/Misc. Sale",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Customer",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set note = frappe.db.sql(\\\"\\n    select \\n        n.name,\\n        n.content,\\n        n.creation,\\n        n.modified_by\\n    from `tabNote` n\\n    inner join `tabCustomer` c\\n    on c.name = n.customer \\n    where c.name = '{}'\\n    \\n\\\".format(doc.name), as_dict=1) %}\\n{% if (note|length) > 0 %}\\n<table>\\n    <tbody>\\n{% for n in note  %}\\n    <tr>\\n        <td>{{n.name}}</td>\\n        <td>{{n.modified_by}}</td>\\n        <td>{{ frappe.format(n.creation, {'fieldtype': 'Date'}) }}</td>\\n        <td>{{n.content}}</td>\\n    </tr>\\n{% endfor %}\\n</tbody>\\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-09-18 10:40:54.610757",
  "module": "eDoor",
  "name": "eDoor Guest Note",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Customer",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set doc = frappe.db.sql(\\\"select * from `tabFile` where attached_to_name = '{}'\\\".format(doc.name), as_dict=1)%}\\n\\n{% for f in doc %}\\n<table>\\n    <tr>\\n        <td><img src={{f.file_url}} ></td>\\n    </tr>\\n</table>\\n{% endfor %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-05-19 10:33:02.623765",
  "module": "eDoor",
  "name": "eDoor Guest Document",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: 1px!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.border{\r\n    border-bottom:solid 1px #000!important;\r\n    padding:0px!important;\r\n}\r\n\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n\r\n.print-format .table-bordered td, .print-format .table-bordered th{\r\n    border:1px solid #000!important;\r\n    padding:6px 10px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>Comfirmation Voucher</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Comfirmation No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Reference No.\\\")}}</td>\\n        <td>: {{doc.reference_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone\\\")}}</td>\\n        <td>: {{doc.guest_phone_number or ''}}</td>\\n        <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n        <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Pax (A/C)\\\")}}</td>\\n        <td>: {{doc.adult}} / {{doc.child}}</td>\\n        <td>{{_(\\\"Room Nights\\\")}}</td>\\n        <td>: {{doc.room_nights}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n        <td></td>\\n        <td></td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_room_rate = frappe.db.sql(\\\"select \\n                                    rr.date, \\n                                    rr.room_number,\\n                                    rr.input_rate,\\n                                    rr.discount_amount,\\n                                    rr.total_tax,\\n                                    rr.total_rate,\\n                                    rr.rate_type,\\n                                    rr.rate,\\n                                    rr.room_type_alias\\n                                    from `tabReservation Stay` rs\\n                                inner join \\n                                    `tabReservation Room Rate` rr \\n                                on \\n                                    rs.name = rr.reservation_stay\\n                                where \\n                                    rs.name = '{}'\\n                        \\\".format(doc.name),as_dict=1) %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <tr>\\n        <td align=\\\"center\\\">{{_(\\\"No.\\\")}}</td>\\n        <td align=\\\"center\\\">{{_(\\\"Date\\\")}}</td>\\n        <td align=\\\"center\\\">{{_(\\\"Room\\\")}}</td>\\n        <td align=\\\"center\\\">{{_(\\\"Rate Type\\\")}}</td>\\n        <td align=\\\"center\\\">{{_(\\\"Rate\\\")}}</td>\\n        <td align=\\\"center\\\">{{_(\\\"Discount\\\")}}</td>\\n        <td align=\\\"center\\\">{{_(\\\"Tax\\\")}}</td>\\n        <td align=\\\"center\\\">{{_(\\\"Total Rate\\\")}}</td>\\n    </tr>\\n{% for rs in reservation_room_rate %}\\n    <tr>\\n        <td align=\\\"center\\\">{{loop.index}}</td>\\n        <td align=\\\"center\\\">{{frappe.format(rs.date,{'fieldtype':'Date'}) or ''}}</td>\\n        <td align=\\\"center\\\">{{rs.room_number or ''}} ({{rs.room_type_alias}})</td>\\n        <td align=\\\"center\\\">{{rs.rate_type or ''}}</td>\\n        <td align=\\\"right\\\">{{frappe.format(rs.rate,{'fieldtype':'Currency'})}}</td>\\n        <td align=\\\"right\\\">{{frappe.format(rs.discount_amount,{'fieldtype':'Currency'})}}</td>\\n        <td align=\\\"right\\\">{{frappe.format(rs.total_tax,{'fieldtype':'Currency'})}}</td>\\n        <td align=\\\"right\\\">{{frappe.format(rs.total_rate,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n{% endfor %}\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_room_rate = frappe.db.sql(\\\"select \\n                                    rr.date, \\n                                    rr.room_number,\\n                                    rr.input_rate,\\n                                    rr.discount_amount,\\n                                    rr.total_tax,\\n                                    rr.total_rate,\\n                                    rr.rate,\\n                                    rr.rate_type\\n                                    from `tabReservation Stay` rs\\n                                inner join \\n                                    `tabReservation Room Rate` rr \\n                                on \\n                                    rs.name = rr.reservation_stay\\n                                where \\n                                    rs.name = '{}'\\n                        \\\".format(doc.name),as_dict=1) %}\\n    <h4>Summary</h4>\\n<table class=\\\"table report-list\\\">\\n        <tr>\\n            <td>{{_(\\\"Room Rate\\\")}}  </td>\\n            <td align=\\\"right\\\">{{frappe.format(reservation_room_rate | sum(attribute = 'rate'),{'fieldtype':'Currency'})}} </td>\\n        </tr>\\n        <tr>\\n            <td>{{_(\\\"Discount\\\")}}  </td>\\n            <td align=\\\"right\\\"> {{frappe.format(reservation_room_rate | sum(attribute = 'discount_amount'),{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        <tr>\\n            <td>{{_(\\\"Total Tax\\\")}}  </td>\\n            <td align=\\\"right\\\"> {{frappe.format(reservation_room_rate | sum(attribute = 'total_tax'),{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        <tr>\\n            <td>{{_(\\\"Total Room Rate\\\")}}  </td>\\n            <td align=\\\"right\\\"> {{frappe.format(reservation_room_rate | sum(attribute = 'total_rate'),{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set property = frappe.get_doc(\\\"Business Branch\\\", doc.property)%}\\n<h4>{{_(\\\"Cancellation Policy\\\")}}</h4>\\n<table style=\\\"width:100%\\\" class=\\\"table table-border\\\">\\n    <tr>\\n        <td>{{property.cancellation_policy or ''}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table style=\\\"width:100%;margin-top:50px\\\" >\\n  <tr>\\n      <td width=\\\"150\\\">{{_(\\\"Prepare By\\\")}} </td>\\n      <td class=\\\"border\\\">:</td>\\n      <td width=\\\"50px\\\"></td>\\n      <td width=\\\"150\\\">{{_(\\\"Guest's Sign\\\")}} </td>\\n      <td class=\\\"border\\\">:</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-17 14:31:15.620453",
  "module": "eDoor",
  "name": "eDoor Reservation Stay Confirmation Voucher",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"   {%\\n        set sql = \\\"\\n            select \\n                * \\n            from `tabRoom` \\n            where \\n                property='{0}' and \\n                housekeeping_status='{1}' and \\n                room_number like '%{2}%' and \\n                room_type like '%{3}%' and \\n                building = if('{4}'='',building,'{4}') and\\n                floor = if('{5}'='',floor,'{5}') \\n            order by \\n            sort_order, room_number\\\"\\n            .format(\\n                doc.name,\\n                frappe.form_dict.get(\\\"housekeeping_status\\\"),\\n                frappe.form_dict.get(\\\"keyword\\\") or '',\\n                frappe.form_dict.get(\\\"room_type\\\") or '',\\n                frappe.form_dict.get(\\\"building\\\") or '',\\n                frappe.form_dict.get(\\\"floor\\\") or ''\\n    \\n        \\n            )\\n    %}\\n    {%\\n        set data = frappe.db.sql(sql,as_dict=1)\\n    %}\\n     \\n    {% if data %}\\n    <table class=\\\"w-100 report-list\\\" style=\\\"white-space: nowrap;\\\">\\n            <tr>\\n                <th class=\\\"text-center\\\">No.</th>\\n                <th class=\\\"text-center\\\" >Room#</th>\\n                <th class=\\\"text-center\\\" >Floor</th>\\n                <th class=\\\"text-center\\\">Building</th>\\n                <th>Room Type</th>\\n                <th>Guest</th>\\n                <th class=\\\"text-center\\\">Stay #</th>\\n                <th>HouseKeeper</th>\\n                <th class=\\\"text-center\\\">Housekeeping Status</th>\\n            </tr>\\n            {% for d in data %}\\n                <tr>\\n                    <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.room_number}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.floor}}</td>\\n                    <td class=\\\"text-center\\\">{{d.building}}</td>\\n                    <td>{{d.room_type}}</td>\\n                    <!--<td>-->\\n                    <!--{% if d.guest %}-->\\n                    <!--    <span class=\\\"link_line_action1\\\">-->\\n                    <!--        <a onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">-->\\n                    <!--            {{d.guest_name}} - {{d.guest}}-->\\n                    <!--        </a>-->\\n                    <!--    </span>-->\\n                    <!--{% endif %}-->\\n                    <!--</td>-->\\n                    <!--<td class=\\\"text-center\\\">-->\\n                    <!--{% if d.guest %}-->\\n                    <!--    <span class=\\\"link_line_action1\\\">-->\\n                    <!--        <a onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">-->\\n                    <!--           {{d.reservation_stay}}-->\\n                    <!--        </a>-->\\n                    <!--    </span>-->\\n                    <!--{% endif %}-->\\n                    <!--</td>-->\\n                    <td>{{d.guest or \\\"\\\"}}</td>\\n                    <td>{{d.reservation_stay or \\\"\\\"}}</td>\\n                    <td>{{d.housekeeper}}</td>\\n                    <td class=\\\"text-center\\\">\\n                        <span style=\\\"background:{{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.housekeeping_status}}</span>\\n                    </td>\\n                </tr>\\n            {%endfor%}\\n    </table>\\n    {% else %}\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n    </div>\\n    {% endif %}\\n\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-28 09:52:50.024760",
  "module": "eDoor",
  "name": "eDoor Housekeeping Status",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\n    <h2>Invoice</h2>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reserve = frappe.get_doc(\\\"Reservation\\\",doc.reservation)%}\\n<table>\\n    <tr>\\n        <td>{{_(\\\"Guest Name\\\")}}</td>\\n        <td>:</td>\\n        <td>{{doc.guest_name}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Nationality\\\")}}</td>\\n        <td>:</td>\\n        <td>{{doc.nationality}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Booking Source\\\")}}</td>\\n        <td>:</td>\\n        <td>{{reserve.business_source}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"No. of Pax\\\")}}</td>\\n        <td>:</td>\\n        <td>{{doc.pax}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Adult/Child\\\")}}</td>\\n        <td>:</td>\\n        <td>{{doc.adult}}/{{doc.child}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table>\\n    <tr>\\n        <td>{{_(\\\"Ref. No.\\\")}}</td>\\n        <td>:</td>\\n        <td>{{doc.reference_number}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>:</td>\\n        <td>{{doc.rooms}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>:</td>\\n        <td>{{doc.arrival_date}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>:</td>\\n        <td>{{doc.departure_date}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>:</td>\\n        <td>{{doc.rate_type}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set main_currency = frappe.get_doc(\\\"Currency\\\",frappe.db.get_default(\\\"currency\\\"))%}\\n{%set second_currency = frappe.get_doc(\\\"Currency\\\",frappe.db.get_default(\\\"second_currency\\\"))%}\\n\\n<table>\\n    <tr>\\n        <td>{{_(\\\"Date\\\")}}</td>\\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>{{_(\\\"Description\\\")}}</td>\\n        <td>{{_(\\\"Debit\\\")}}</td>\\n        <td>{{_(\\\"Credit\\\")}}</td>\\n        <td>{{_(\\\"Balance\\\")}}</td>\\n    </tr>\\n{% for rs in doc.stays %}\\n    <tr>\\n        <td>{{rs.start_date}}</td>\\n        <td>{{rs.room_number}}</td>\\n        <td></td>\\n        <td></td>\\n        <td></td>\\n        <td></td>\\n    </tr>\\n{% endfor %}\\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-07-15 14:31:57.571835",
  "module": "eDoor",
  "name": "eDoor Confirmation Voucher",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>INVOICE</h2>\\n    </div>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Folio No.\\\")}}</td>\\n        <td>: {{frappe.form_dict.get(\\\"folio\\\") or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{doc.nationality or ''}}</td>\\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.rooms or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Business Source\\\")}}</td>\\n        <td>: {{doc.business_source}}</td>\\n        <td>{{_(\\\"Check-in\\\")}}</td>\\n        <td>: {{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{doc.guest_email or ''}}</td>\\n        <td>{{_(\\\"Check-out\\\")}}</td>\\n        <td>: {{frappe.format(doc.departure_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\"></td>\\n        <td></td>\\n         <td>{{_(\\\"Rate Type\\\")}}</td>\\n        <td>: {{doc.rate_type}}</td>\\n    </tr>\\n    \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\", folio_number=frappe.form_dict.get(\\\"folio\\\")) %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th>Room</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td>{{d.room_number or ''}}</td>\\n            <td>{{d.description or ''}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"4\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n    \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-07-18 11:42:44.226478",
  "module": "eDoor",
  "name": "eDoor Reservation Stay Folio Summary Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>INVOICE</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"guest_name\", \"print_hide\": 0, \"label\": \"Guest Name\"}, {\"fieldname\": \"nationality\", \"print_hide\": 0, \"label\": \"Nationality\"}, {\"fieldname\": \"business_source\", \"print_hide\": 0, \"label\": \"Business Source\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Address\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t\\t{{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"address\\\")}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Folio #\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t\\t{{frappe.form_dict.get(\\\"folio\\\")}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rooms\", \"print_hide\": 0, \"label\": \"Rooms\"}, {\"fieldname\": \"arrival_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check In\"}, {\"fieldname\": \"departure_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check Out\"}, {\"fieldname\": \"rate_type\", \"print_hide\": 0, \"label\": \"Rate Type\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\", transaction_type=\\\"Reservation Folio\\\" ,transaction_number=frappe.form_dict.get(\\\"folio\\\")) %}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>Date</th>    \\n        <th>Room</th>    \\n        <th>Description</th>    \\n        <th>Debit</th>    \\n        <th>Credit</th>    \\n        <th>Balance</th>    \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            <td>{{d.room_number or \\\"\\\"}}</td>\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"5\\\">\\n                <strong>Balance</strong>\\n            </td>\\n            <td class=\\\"text-right\\\"><strong>\\n                {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n            </strong></td>\\n        </tr>\\n    </tfoot>\\n</table>\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' group by account_category order by account_category_sort_order\\\".format(frappe.form_dict.get(\\\"folio\\\")),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th colspan='2'>Summary</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n   \\n</table>\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 5.0,
  "margin_right": 5.0,
  "margin_top": 5.0,
  "modified": "2023-10-17 14:07:07.177697",
  "module": "eDoor",
  "name": "eDoor Reservation Stay Folio Detail Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>Reservation Stay Folio Detail </div><br><small class=\\\"sub-heading\\\">{{ doc.name }}</small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"Folio: {{frappe.form_dict.get(\\\"folio\\\")}}\\n \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-05-30 20:00:20.663990",
  "module": "eDoor",
  "name": "Test Custom Reservation Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>Reservation Stay Folio Detail </div><br><small class=\\\"sub-heading\\\">{{ doc.name }}</small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"Folio: {{frappe.form_dict.get(\\\"folio\\\")}}\\n \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-06-15 11:02:57.992598",
  "module": "eDoor",
  "name": "Test Custom Reservation Report 2",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Folio Transaction",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>RECEIPT</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set guest = frappe.get_doc(\\\"Reservation Folio\\\",doc.transaction_number) %}\\r\\n<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td width='150px'>{{_(\\\"Room\\\")}}</td>\\r\\n        <td>: {{doc.room_number or ''}}</td>\\r\\n        \\r\\n        <td width='150px'>{{_(\\\"Receipt No\\\")}}</td>\\r\\n        <td>: {{doc.name or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td>{{_(\\\"Guest\\\")}}</td>\\r\\n        <td>: {{guest.guest_name or ''}}</td>\\r\\n        \\r\\n        <td>{{_(\\\"Date\\\")}}</td>\\r\\n        <td>: {{frappe.format(doc.posting_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td colspan=\\\"4\\\">\\r\\n            <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{_(\\\"Payment Information\\\")}}</h4>\\r\\n \\r\\n        </td>\\r\\n    </tr>\\r\\n      <tr>\\r\\n        <td width=\\\"150px\\\">{{doc.account_name}}</td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.input_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n    {%if doc.bank_fee_amount %}\\r\\n     <tr>\\r\\n        <td width=\\\"150px\\\"></td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Bank Fee\\\")}} {{doc.bank_fee}}%</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.bank_fee_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n\\r\\n     <tr>\\r\\n        <td width=\\\"150px\\\"></td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Payment Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.total_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n        {%endif%}\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if doc.parent_account_name == 'Credit Card' %}\\n  <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{_(\\\"Card Information\\\")}}</h4>\\n\\n<table class=\\\"table table-bordered report-list\\\" style='font-size:13px'>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Card Number\\\")}}</td>\\n        <td>: {{doc.credit_card_number or ''}}</td>\\n         <td width='150px'>{{_(\\\"Bank Name\\\")}}</td>\\n        <td>: {{doc.bank_name or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Card Holder\\\")}}</td>\\n        <td>:  {{doc.card_holder_name or ''}}</td>\\n        <td>{{_(\\\"Card Expired date\\\")}}</td>\\n        <td>: {{ \\\"{}-{}\\\".format( (doc.credit_expired_date|string).split(\\\"-\\\")[1],(doc.credit_expired_date|string).split(\\\"-\\\")[0])  if   doc.credit_expired_date.split else \\\"\\\" }}</td>\\n\\n    </tr>\\n</table>\\n{% endif %}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{{_(\\\"Remark\\\")}} : {{doc.note or ''}}\\n<hr style=\\\"margin-bottom:100px\\\"/>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table>\\n  <tr>\\n      <td>{{_(\\\"User\\\")}}</td>\\n      <td>:</td>\\n      <td>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</td>\\n  </tr>  \\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style='margin-left:100px'>\\n  <tr>\\n      <td>{{_(\\\"Authorized Signatory\\\")}}</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-20 15:33:59.953357",
  "module": "eDoor",
  "name": "Folio Payment Receipt",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        \\n        name in (\\n            select \\n                reservation_stay \\n            from `tabRoom Occupy` \\n            where \\n                property = '{0}' and \\n                type='Reservation' and \\n                date = '{1}'\\n        ) and \\n        keyword like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status = if('{5}'='', reservation_status,'{5}') \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or ''\\n        ),as_dict=1)\\n%}\\n{% if (data|length)>0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\" align=\\\"center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\" align=\\\"center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\" align=\\\"center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td align=\\\"center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                   \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {% if can_view_rate==1%}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{%else%}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-03 14:04:42.095966",
  "module": "eDoor",
  "name": "eDoor Room Occupy List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"ms-info\\\">Total vacant rooms in this list might be difference from total vacant room in KPI. Because some reservations haven't assign room yet.</div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        *\\n    from `tabRoom` \\n    where \\n        property = '{0}' and \\n        name not in (\\n            select \\n                ifnull(room_id,'') \\n            from `tabRoom Occupy` \\n            where \\n                property = '{0}' and \\n                date = '{1}'\\n        ) and \\n        concat(room_number,' ',ifnull(housekeeper,'')) like '%{2}%' and\\n        building = if('{3}'='',building, '{3}') and \\n        floor = if('{4}'='',floor, '{4}') and \\n        room_type = if('{5}'='',room_type, '{5}') and \\n        housekeeping_status = if('{6}'='',housekeeping_status, '{6}') \\n    \\n    \\\".format(\\n        doc.name,\\n        frappe.form_dict.get(\\\"date\\\"),\\n        frappe.form_dict.get(\\\"keyword\\\") or '',\\n        frappe.form_dict.get(\\\"building\\\")  or '',\\n        frappe.form_dict.get(\\\"floor\\\")  or '',\\n        frappe.form_dict.get(\\\"room_type\\\")  or '',\\n        frappe.form_dict.get(\\\"housekeeping_status\\\")  or ''\\n    ),as_dict=1)\\n%}\\n{% if (data|length)>0 %}\\n<table class='report-list' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Room #</th>\\n            <th>Room Type</th>\\n            <th class=\\\"text-center\\\">Building</th>\\n            <th class=\\\"text-center\\\">Floor</th>\\n          \\n            <th>Housekeeper</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\" align=\\\"center\\\">{{d.room_number}}</td>\\n                <td align=\\\"center\\\">{{d.room_type}}</td>\\n                <td class=\\\"text-center\\\" align=\\\"center\\\">{{d.building}}</td>\\n                <td class=\\\"text-center\\\" align=\\\"center\\\">{{d.floor}}</td>\\n               \\n              \\n                <td>{{d.housekeeper or \\\"\\\"}}</td>\\n                <td class=\\\"d-flex justify-content-center\\\" >\\n                    <span style=\\\"background:{{d.status_color}}\\\" class=\\\"text-center rounded-pill py-1 px-2 text-white\\\" >\\n                        {{d.housekeeping_status}}    \\n                    </span>\\n                </td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{%else%}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-08-08 11:11:11.391552",
  "module": "eDoor",
  "name": "eDoor Vacant Room",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set sql = \\\"\\n    select \\n    *\\n    from `tabRoom` \\n    where \\n        property = '{0}' and \\n        room_number like '%{1}%' and \\n        building = if('{2}'='',building,'{2}') and \\n        floor = if('{3}'='',floor,'{3}') and \\n        room_type_group = if('{4}' = '',room_type_group,'{4}') and \\n        room_type like '%{5}%'     and \\n        housekeeping_status = if('{6}'='',housekeeping_status,'{6}')\\n    \\\".format(\\n        doc.name,\\n        frappe.form_dict.get(\\\"keyword\\\") or \\\"\\\",\\n        frappe.form_dict.get(\\\"building\\\") or \\\"\\\",\\n        frappe.form_dict.get(\\\"floor\\\") or \\\"\\\",\\n        frappe.form_dict.get(\\\"room_type_group\\\") or \\\"\\\",  \\n        frappe.form_dict.get(\\\"room_type\\\") or \\\"\\\"    ,\\n        frappe.form_dict.get(\\\"housekeeping_status\\\") or \\\"\\\"    \\n        \\n    )%}\\n{%\\n\\nset data = frappe.db.sql(sql,as_dict=1)\\n%}\\n\\n<table class='report-list' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Room #</th>\\n            <th>Room Type</th>\\n            <th>Room Type Group</th>\\n            <th class=\\\"text-center\\\">Building</th>\\n            <th class=\\\"text-center\\\">Floor</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Guest</th>\\n            <th>Housekeeper</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n             \\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n                <td align=\\\"center\\\">{{d.room_type}}</td>\\n                <td align=\\\"center\\\">{{d.room_type_group}}</td>\\n                <td class=\\\"text-center\\\">{{d.building}}</td>\\n                <td class=\\\"text-center\\\">{{d.floor}}</td>\\n                {% if d.reservation_stay %}\\n                    <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay}}</a></td>\\n                {% else %}\\n                     <td class=\\\"text-center\\\"></td>\\n                {% endif %}\\n                {% if d.guest %}\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                {% else %}\\n                     <td class=\\\"text-center\\\"></td>\\n                {% endif %}\\n              \\n                <td>{{d.housekeeper or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">\\n                    <span class=\\\"text-center rounded-pill py-1 px-2 text-white\\\" style=\\\"background:{{d.status_color}}\\\"> {{d.housekeeping_status}}</span>\\n                   </td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-09-30 10:41:23.735059",
  "module": "eDoor",
  "name": "eDoor Room List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_types,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        cancelled_by,\\n        cancelled_note,\\n        cancelled_date\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        reservation_status = 'Cancelled' and \\n        arrival_date = '{1}'\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<table class='report-list' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n            <th>Cancelled By</th>\\n            <th>Cancelled Date</th>\\n            <th>Cancelled Note</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>{{d.rooms}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.room_type_alias}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                {% if can_view_rate==1%}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                <td>{{d.cancelled_by}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.cancelled_date,{'fieldtype':'Date'})}}</td>\\n                <td>{{d.cancelled_note}}</td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-28 10:15:41.402196",
  "module": "eDoor",
  "name": "eDoor Cancel Reservation List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        status_color, \\n        room_types,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        no_show_by,\\n        no_show_note,\\n        no_show_date\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        reservation_status = 'No Show' and \\n        arrival_date = '{1}'\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n{% if (data|length) > 0 %}\\n<table class='report-list' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n            <th>No Show By</th>\\n            <th class=\\\"text-center\\\">No Show Date</th>\\n            <th>No Show Note</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>{{d.room_type_alias}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.rooms}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                {% if can_view_rate==1%}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                <td>{{d.no_show_by}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.no_show_date,{'fieldtype':'Date'})}}</td>\\n                <td>{{d.no_show_note}}</td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{%else%}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-19 15:39:35.332811",
  "module": "eDoor",
  "name": "eDoor No Show Reservation List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "table{\n        box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reference_number,\\n        reservation_date,\\n        reservation_type,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        status_color, \\n        room_type_alias,\\n        rooms,\\n        room_nights,\\n        pickup_time,\\n        arrival_mode,\\n        arrival_time,\\n        pickup_location,\\n        arrival_flight_number,\\n        pickup_driver_name,\\n        pickup_driver_phone_number,\\n        pickup_note\\n        \\n    from `tabReservation Stay` \\n    where\\n        property= '{0}' and \\n        is_active_reservation = 1 and \\n        require_pickup = 1 and \\n        arrival_date = '{1}' and \\n        ifnull(keyword,'') like '%{2}%' and \\n        ifnull(business_source,'') = if('{3}'='', ifnull(business_source,''),'{3}') and \\n        ifnull(room_types,'') like '%{4}%' and \\n        reservation_status = if('{5}' = '', reservation_status, '{5}') and \\n        ifnull(arrival_mode,'') = if('{6}' = '', ifnull(arrival_mode,''), '{6}')  and \\n        ifnull(pickup_location,'') = if('{7}' = '', ifnull(pickup_location,''), '{7}')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n            frappe.form_dict.get('transportation_mode') or '',\\n            frappe.form_dict.get('transportation_company') or ''\\n            \\n        ),as_dict=1)\\n%}\\n\\n<div>\\n<table class='report-list' style='width:100%'>\\n    <tr>\\n        <th class=\\\"bg-header-table text-white fw-semibold\\\" colspan=\\\"17\\\" >Pickup Guest</th>\\n    </tr>\\n    {% if (data|length) > 0 %}\\n        <tr class=\\\"font-widht-tr-header\\\" >\\n            <td class=\\\"text-center\\\">No.</td>\\n            <td class=\\\"text-center\\\">Reservation #</td>\\n            <td class=\\\"text-center\\\">Stay #</td>\\n            <td class=\\\"text-center\\\">Ref. #</td>\\n            <td class=\\\"text-center\\\">Type</td>\\n            <td class=\\\"text-center\\\">Res. Date</td>\\n            <td class=\\\"text-center\\\">Stay Date</td>\\n            <td class=\\\"text-center\\\">Nights</td>\\n            <td class=\\\"text-center\\\">Room(s)</td>\\n            <td >Guest</td>\\n            <td>Source</td>\\n            <td class=\\\"text-center\\\">Arrival Mode</td>\\n            <td class=\\\"text-center\\\">Arrival #</td>\\n            <td class=\\\"text-center\\\">Pickup Time</td>\\n            <td>Pickup Driver</td>\\n            <td>Pickup Note</td>\\n            <td class=\\\"text-center\\\">Status</td>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td align=\\\"center\\\"><a class=\\\"link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td align=\\\"center p-0 \\\"  ><a class=\\\"link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td align=\\\"center\\\">{{d.reference_number or ''}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>       \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a  class=\\\"link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td>{{d.arrival_mode or \\\"\\\"}} <div> {{ \\\" {}\\\".format(d.pickup_location) if d.pickup_location else \\\"\\\" }}</div> </td>\\n                <td class=\\\"text-center\\\" >{{d.arrival_flight_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\" >{{ frappe.utils.get_time(d.pickup_time).strftime('%I:%M %p') }}</td>\\n                <td>{{d.pickup_driver_name or \\\"\\\"}} {{\\\"<br> {}\\\".format(d.pickup_driver_phone_number) if d.pickup_driver_phone_number else \\\"\\\" }}</td>\\n                <td>{{(d.pickup_note or \\\"\\\")|truncate(50)}}</td>\\n                <td class=\\\"text-center\\\" >\\n                <span style=\\\"background: {{d.status_color}}\\\" class=\\\"text-center rounded-pill py-1 px-2 text-white\\\" > {{d.reservation_status}}</span>   \\n                </td>\\n            </tr>\\n        {%endfor%}\\n    {%else%} \\n</table>\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Pickup Guest</small>\\n</div>\\n{%endif%}\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reference_number,\\n        reservation_date,\\n        reservation_type,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        status_color, \\n        room_type_alias,\\n        rooms,\\n        room_nights,\\n        drop_off_time,\\n        departure_mode,\\n        drop_off_location,\\n        departure_flight_number,\\n        drop_off_driver_name,\\n        drop_off_driver_phone_number,\\n        drop_off_note\\n    from `tabReservation Stay` \\n    where\\n        property= '{0}' and \\n        is_active_reservation = 1 and  \\n        require_drop_off = 1 and \\n        departure_date = '{1}' and \\n        ifnull(keyword,'') like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        ifnull(room_types,'') like '%{4}%' and \\n        reservation_status = if('{5}' = '', reservation_status, '{5}') and \\n        ifnull(departure_mode,'') = if('{6}' = '', ifnull(departure_mode,''), '{6}')  and \\n        ifnull(drop_off_location,'') = if('{7}' = '', ifnull(drop_off_location,''), '{7}') \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n            frappe.form_dict.get('transportation_mode') or '',\\n            frappe.form_dict.get('transportation_company') or ''\\n            \\n            \\n        ),as_dict=1)\\n%}\\n<table class='report-list mt-3' style='width:100%'>\\n     <tr>\\n        <th class=\\\"bg-header-table p-2 text-white fw-semibold\\\" colspan=\\\"18\\\" >Drop Off Guest</th>\\n    </tr>\\n    {% if (data|length) > 0 %}\\n        <tr class=\\\"font-widht-tr-header\\\">\\n            <td class=\\\"text-center\\\">No.</td>\\n            <td class=\\\"text-center\\\">Reservation #</td>\\n            <td class=\\\"text-center\\\">Stay #</td>\\n            <td class=\\\"text-center\\\">Ref. #</td>\\n            <td class=\\\"text-center\\\">Type</td>\\n            <td class=\\\"text-center\\\">Res. Date</td>\\n            <td class=\\\"text-center\\\">Stay Date</td>\\n            <td class=\\\"text-center\\\">Room Nights</td>\\n            <td>Room(s)</td>\\n            <td>Guest</td>\\n            <td>Source</td>\\n            <td class=\\\"text-center\\\">Departure Mode</td>\\n            <td class=\\\"text-center\\\">Departure #</td>\\n            <td class=\\\"text-center\\\">Drop off Time</td>\\n            <td>Drop off Driver</td>\\n            <td>Drop off Note</td>\\n            <td class=\\\"text-center\\\">Status</td>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                 <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td align=\\\"center\\\"><a class=\\\"link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td align=\\\"center\\\" ><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or ''}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a  class=\\\"link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td>{{d.departure_mode or \\\"-\\\"}} <div> {{ \\\" {}\\\".format(d.drop_off_location) if d.drop_off_location else \\\"\\\" }}</div> </td>\\n                <td>{{d.departure_flight_number or \\\"\\\"}}</td>\\n                <td>{{ frappe.utils.get_time(d.drop_off_time).strftime('%I:%M %p') }}</td>\\n                <td>{{d.drop_off_driver_name or \\\"-\\\"}} <div> {{\\\"{}\\\".format(d.pickup_driver_phone_number) if d.pickup_driver_phone_number else \\\"\\\" }}</div></td>\\n                <td>{{(d.drop_off_note or \\\"\\\")|truncate(50)}}</td>\\n                <td class=\\\"d-flex justify-content-center\\\">\\n                <span style=\\\"background:{{d.status_color}}\\\" class=\\\"text-center rounded-pill py-1 px-2 text-white\\\" >\\n                    {{d.reservation_status}}\\n                </span>  \\n                    </td>\\n            </tr>\\n        {%endfor%}\\n     {%else%}\\n</table>\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Drop Off Guest</small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-09-08 09:16:27.778891",
  "module": "eDoor",
  "name": "eDoor Pickup and Drop Off Reservation List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Folio Transaction",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n  <div class=\\\"print-heading\\\">\\n    <h2>Extra Charge Voucher</h2>\\n  </div>  \\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set guest = frappe.get_doc(\\\"Reservation Folio\\\",doc.transaction_number) %}\\r\\n<table class=\\\"table table-bordered report-list\\\" style = \\\"font-size:13px\\\">\\r\\n    <tr>\\r\\n        <td width='150px'>{{_(\\\"Room\\\")}}</td>\\r\\n        <td>: {{doc.room_number or ''}}</td>\\r\\n        \\r\\n        <td width='150px'>{{_(\\\"No.\\\")}}</td>\\r\\n        <td>: {{doc.name or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td>{{_(\\\"Guest\\\")}}</td>\\r\\n        <td>: {{guest.guest_name or ''}}</td>\\r\\n        \\r\\n        <td>{{_(\\\"Date\\\")}}</td>\\r\\n        <td>: {{frappe.format(doc.posting_date,{'fieldtype':'Date'}) or ''}}</td>\\r\\n        \\r\\n    </tr>\\r\\n    <tr>\\r\\n        <td colspan=\\\"4\\\">\\r\\n            <h4 style=\\\"border-bottom:solid 1px #000;display: inline-block;padding: 10px 7px 3px 3px;\\\">{{doc.parent_account_name}}</h4>\\r\\n \\r\\n        </td>\\r\\n    </tr>\\r\\n  \\r\\n      <tr>\\r\\n        <td width=\\\"150px\\\">{{doc.account_name}}</td>\\r\\n        <td> </td>\\r\\n        <td width='150px'><strong>{{_(\\\"Amount\\\")}}</strong></td>\\r\\n        <td>: <strong>{{frappe.format(doc.amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n    </tr>\\r\\n    {% if doc.tax_rule %}\\r\\n        {% set tax_rule = frappe.get_doc(\\\"Tax Rule\\\",doc.tax_rule) %}\\r\\n    {% endif %}\\r\\n    {% if doc.discount > 0 %}\\r\\n        {% if doc.discount_type == 'Percent' %}\\r\\n            <tr>\\r\\n                <td width=\\\"150px\\\"></td>\\r\\n                <td></td>\\r\\n                <td width=\\\"150px\\\">{{_(\\\"Discount\\\")}} {{doc.discount}}%</td>\\r\\n                <td>: {{frappe.format(doc.discount_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.discount_type == 'Amount' %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{_(\\\"Discount\\\")}} {{doc.discount}}</td>\\r\\n                <td>: {{frappe.format(doc.discount_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n    {% endif %}\\r\\n    \\r\\n    {% if doc.tax_rule %}\\r\\n        {% if doc.tax_1_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_1_name}} {{doc.tax_1_rate}}%</td>\\r\\n                <td>: {{frappe.format(doc.tax_1_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.tax_2_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_2_name}} {{doc.tax_2_rate}}%</td>\\r\\n                <td>: {{frappe.format(doc.tax_2_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n        {% if doc.tax_3_rate > 0 %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td>{{tax_rule.tax_3_name}} {{doc.tax_3_rate}}%</td>\\r\\n                <td>: {{frappe.format(doc.tax_3_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            </tr>\\r\\n        {% endif %}\\r\\n            <tr>\\r\\n                <td></td>\\r\\n                <td></td>\\r\\n                <td><strong>{{_(\\\"Total Amount\\\")}}</strong></td>\\r\\n                <td>: <strong>{{frappe.format(doc.total_amount,{'fieldtype':'Currency'})}}</strong></td>\\r\\n            </tr>\\r\\n    {% endif %}\\r\\n    \\r\\n</table>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{{_(\\\"Remark\\\")}} : {{doc.note or ''}}\\n<hr style=\\\"margin-bottom:100px\\\"/>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table>\\n  <tr>\\n      <td>{{_(\\\"User\\\")}}</td>\\n      <td>:</td>\\n      <td>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</td>\\n  </tr>  \\n</table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style='margin-left:100px'>\\n  <tr>\\n      <td>{{_(\\\"Authorized Signatory\\\")}}</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-08-22 14:04:43.193108",
  "module": "eDoor",
  "name": "Folio Extra Charge Voucher",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Today Unassign Rooms\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and\\n        arrival_date = '{1}' and\\n        name in  (\\n                    SELECT \\n                        distinct  reservation_stay \\n                    FROM `tabRoom Occupy` \\n                    WHERE \\n                        `date` = '{1}' AND \\n                        property = '{0}' and \\n                        type='Reservation' and \\n                        ifnull(room_id,'') = ''\\n        ) and \\n        keyword like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%'\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or ''\\n        ),as_dict=1)\\n%}\\n<h4>Today Unassign Rooms</h4>\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            {%if can_view_rate==1 %}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td align=\\\"center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Future Unassign Rooms\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and\\n        \\n        arrival_date between '{1}' and '{2}' and\\n        name in  (\\n                    SELECT \\n                        distinct  reservation_stay \\n                    FROM `tabRoom Occupy` \\n                    WHERE \\n                        `date` between '{1}' and '{2}' and\\n                        property = '{0}' and \\n                        type='Reservation' and \\n                        ifnull(room_id,'') = ''\\n        ) and \\n        keyword like '%{3}%' and \\n        business_source = if('{4}'='', business_source,'{4}') and \\n        room_types like '%{5}%' and \\n        arrival_date>'{6}'\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('start_date'),\\n            frappe.form_dict.get('end_date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n\\n<h4 class=\\\"mt-3\\\">Future Unassign Rooms</h4>\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            {%if can_view_rate==1 %}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td align=\\\"center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-18 11:43:02.911354",
  "module": "eDoor",
  "name": "eDoor Unassign Room Reservation List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        group_code,\\n        group_name,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        keyword like '%{2}%' and \\n        reservation_type = 'GIT' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        is_active_reservation = 1 and\\n        reservation_status = if('{5}' = '', reservation_status, '{5}')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Group Code</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.group_code or \\\"\\\"}}{{ \\\"/\\\" if d.group_code and d.group_name else \\\"\\\" }}{{d.group_name or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-24 17:06:46.222938",
  "module": "eDoor",
  "name": "eDoor GIT Arrival Guest",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 1 - Welcome \"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"1\\\" %}\\n<div class=\\\"text-center\\\" style=\\\"margin-top:36px\\\">\\n <h1>Welcome to Run Night Audit</h1>\\n <h5>Click on Next button to Continue</h5>\\n</div>\\n<div class=\\\"text-center\\\" style=\\\"margin-top:25px;padding-right:60px\\\">\\n <img width=\\\"250px\\\" src=\\\"/assets/edoor/images/icon-run-night-audit-gray.svg\\\">\\n</div> \\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 2 - Today Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"2\\\" %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate ,\\n        is_active_reservation\\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and\\n        is_active_reservation = 1 and\\n        arrival_date = '{1}' \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<div class=\\\"primary_message\\\">\\n<h2>Today Reservation</h2>\\nToday, you have {{ data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1)|list|length }} arrival reservations.\\n\\n  {%if (data|selectattr(\\\"reservation_status\\\",\\\"equalto\\\",\\\"Reserved\\\")|list|length) + (data|selectattr(\\\"reservation_status\\\",\\\"equalto\\\",\\\"Confirmed\\\")|list|length)>0 %}\\n    <span>There're {{ (data|selectattr(\\\"reservation_status\\\",\\\"equalto\\\",\\\"Reserved\\\")|list|length) + (data|selectattr(\\\"reservation_status\\\",\\\"equalto\\\",\\\"Confirmed\\\")|list|length) }} reservation pending to check-in.<br></span>\\n{%endif%}\\n\\nPlease review your reservation and perform check-in or cancel, then click on button Next to continue\\n</div>\\n\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">Today no arrivals guest to check-in.</small>\\n</div>\\n{%endif%}\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 3 - Today Departure\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"3\\\" %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        departure_date = '{1}' and \\n        reservation_status in ('Checked Out', 'In-House')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<div class=\\\"primary_message\\\">\\n<h2>Today Departure</h2>\\n\\nYou have {{data|length}} rooms to check out today. \\n {%if  data|selectattr(\\\"reservation_status\\\",\\\"equalto\\\",\\\"In-house\\\")|list|length >0 %}\\n    There're {{data|selectattr(\\\"reservation_status\\\",\\\"equalto\\\",\\\"In-house\\\")|list|length}} room pending to check out. <br>\\n    Please review your reservation and perform check out or extend stay then click on button Next to continue\\n{%else%}\\n    <br/> Click on Next to continue.\\n{%endif%}\\n\\n\\n\\n</div>\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>{{d.rooms}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.room_type_alias}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div>\\n    <small class=\\\"text-emty\\\">Today no pending reservations to check out.</small>\\n</div>\\n{%endif%}\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 4 - Room Charge Posting\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"4\\\" %}\\n \\n {%\\n    set sql = \\\"\\n        select \\n            name,\\n            business_source,\\n            reservation,\\n            reservation_stay,\\n            input_rate, \\n            rate, \\n            total_tax, \\n            total_rate, \\n            room_number, \\n            room_type,\\n            discount,\\n            rate_type,\\n            guest,\\n            guest_name,\\n            is_manual_rate\\n        \\n    from `tabReservation Room Rate`\\n    where\\n        date = date_add('{0}',interval 1 day) and \\n        property = '{1}' and \\n        is_active_reservation=1\\n    \\\".format(\\n        frappe.form_dict.get('date'),\\n       doc.name\\n    )\\n%}\\n{%\\n    set data = frappe.db.sql(sql, as_dict=1)\\n    \\n %}\\n \\n <div class=\\\"primary_message\\\">\\n <h2>Posting Room Charge</h2>\\n Your have {{data|length}} stay over guest, Room change will be auto post to master folio after system date change.<br>\\n Please make sure room rate is correct, then click on button Next to continue\\n </div>\\n \\n     {% if (data|length)>0 %}\\n      \\n      <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n              <th>Room(s)</th>\\n            <th class=\\\"text-center\\\">Rate Type</th>\\n          \\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">Rate</th>\\n            <th class=\\\"text-end\\\">Discount</th>\\n            <th class=\\\"text-end\\\">Tax</th>\\n            <th class=\\\"text-center\\\">Total Rate</th>\\n            <th class=\\\"text-center\\\">Use Rate Plan</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay}}</a></td>\\n\\n                <td>{{d.room_number}} / {{d.room_type}}</td>\\n                <td>{{d.rate_type}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_edit_room_rate|{{d.name}}', '*')\\\">{{frappe.format(d.rate,{'fieldtype':'Currency'})}}</a></td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.discount,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\">{{\\\"Yes\\\" if d.is_manual_rate == 0 else \\\"No\\\"}}</td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n      \\n     {% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">You don't have pending reservation to check out</small>\\n</div>\\n     {%endif%}\\n     \\n \\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 5 - Folio Posting & Deposit\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"5\\\" %}\\n{%\\n    set sql = \\\"\\n            select \\n                name,\\n                reservation_stay,\\n                reservation,\\n                folio_number,\\n                posting_date,\\n                room_number,\\n                room_type,\\n                parent_reference,\\n                type,\\n                guest,\\n                guest_name,\\n                account_code,\\n                account_name,\\n                quantity * allow_enter_quantity as quantity,\\n                input_amount,\\n                price,\\n                amount,\\n                discount_amount,\\n                total_tax,\\n                total_amount,\\n                bank_fee_amount,\\n                ifnull(note,'') as note,\\n                creation,\\n                owner,\\n                modified,\\n                modified_by\\n            from `tabFolio Transaction` \\n            where\\n                posting_date = '{0}'and\\n                property = '{1}' and \\n                ifnull(parent_reference,'') = '' and \\n                is_auto_post = 0\\n    \\\".format(\\n        frappe.form_dict.get('date'),\\n        doc.name\\n    )\\n\\n%}\\n{%\\n    set data = frappe.db.sql(sql, as_dict=1)\\n%}\\n\\n\\n \\n {% if (data|length) > 0 %}\\n <div class=\\\"primary_message\\\">\\n <h2>Posting Folio & Deposit</h2>\\n Today you have {{data|length}} folio transactions posted to the system.<br>\\n Please verify Account Code & Rate. If everything is correct please tick on checkbox confirm folio posting then click on Next to continue.\\n </div>\\n    <table class='report-list occupied-001' style='width:100%'>\\n        <tr>\\n           <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Folio #</th>\\n            <th class=\\\"text-center\\\">Folio Tran. #</th>\\n             <th>Room(s)</th>\\n             <th>Guest</th>\\n            <th>Account</th>\\n            <th class=\\\"text-center\\\">QTY</th>\\n            \\n            <th class=\\\"text-end\\\">Amount/Rate</th>\\n            <th class=\\\"text-end\\\">Discount</th>\\n            <th class=\\\"text-center\\\">Tax</th>\\n            <th class=\\\"text-center\\\">Bank Fee</th>\\n            <th class=\\\"text-center\\\">Total Amount</th>\\n            <th class=\\\"text-center\\\">Note</th>\\n            <th class=\\\"text-center\\\">By</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_folio_detail|{{d.folio_number}}', '*')\\\">{{d.folio_number}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_folio_transaction_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n\\n                <td>{{d.room_number}} / {{d.room_type}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\n                <td>{{d.account_code}} - {{d.account_name}}</td>\\n                <td class=\\\"text-end\\\">{{d.quantity if d.quantity> 0 else \\\"\\\" }}</td>\\n                \\n                <td class=\\\"text-end\\\">{{frappe.format(d.price,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.discount_amount,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.bank_fee,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_amount,{'fieldtype':'Currency'})}}</td>\\n                <td>{{d.note}}</td> \\n                <td>{{d.owner}}</td> \\n            </tr>\\n            \\n         \\n        {%endfor%}   \\n    </table>\\n\\n    {%set summary_data = frappe.db.sql(\\\"\\n            select \\n                account_category,\\n                account_category_sort_order, \\n                sum(amount * if(type='Debit',1,-1)) as amount \\n            from `tabFolio Transaction` \\n            where \\n                posting_date = '{0}' and \\n                property = '{1}'  \\n            group by \\n                account_category \\n            order by \\n                account_category_sort_order\\n        \\\".format(\\n            frappe.form_dict.get(\\\"date\\\"),\\n            doc.name    \\n        ),as_dict=1)%}\\n <br>\\n    <table class=\\\"table-print-format\\\">\\n        <tr>\\n            <th colspan=\\\"2\\\">   \\n                <h3>Summary</h3>\\n            </th>\\n        </tr>\\n        <tbody>\\n            {%for d in summary_data %}\\n            <tr>\\n               <td width=\\\"350px\\\">{{ d.account_category }}</td>\\n               <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n            </tr>\\n            {%endfor%}\\n        </tbody>\\n      \\n    </table>\\n\\n        \\n {% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">There're no folio transaction posting for today</small>\\n</div>\\n{%endif%}     \\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 6 - Today Shift\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"6\\\" %}\\n{%set sql = \\\"select \\n                * \\n            from `tabCashier Shift` \\n            where \\n                posting_date = '{0}' and\\n                business_branch = '{1}'   \\n        \\n            \\\".format(\\n                frappe.form_dict.get(\\\"date\\\"),\\n                doc.name\\n            )\\n%}\\n{%\\n    set data = frappe.db.sql(sql,as_dict=1)\\n%}\\n<div class=\\\"primary_message\\\">\\n <h2>Today Shift</h2>\\n {%if data|selectattr(\\\"is_closed\\\",\\\"equalto\\\",0)|list|length > 0 %}\\n    You have {{data|selectattr(\\\"is_closed\\\",\\\"equalto\\\",0)|list|length}} open shift. Please close all open shift, then click on button Next\\n{%else%}\\n    All shift is closed. Click on button Next to continue.\\n {%endif%}\\n</div>\\n<table class='report-list occupied-001' style='width:100%'>\\n     <tr>\\n         <th class=\\\"text-center\\\">No</th>\\n         <th class=\\\"text-center\\\">Shift #</th>\\n         <th class=\\\"text-center\\\">Open Date</th>\\n         <th>Open By</th>\\n         <th class=\\\"text-end\\\">Opening Amount</th>\\n         <th class=\\\"text-end\\\">Close Amount</th>\\n\\n         <th class=\\\"text-center\\\">Close Date</th>\\n          <th>Close By</th>\\n         <th class=\\\"text-center\\\">Shift Type</th>\\n         <th class=\\\"text-center\\\">Status</th>\\n     </tr>\\n     {%for d in data %}\\n        <tr>\\n         <td class=\\\"text-center\\\">{{loop.index}}</td>\\n         \\n         <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_cashier_shift_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n         <td class=\\\"text-center\\\">{{frappe.format_value(d.creation,\\\"Datetime\\\")}}</td>\\n         <td>{{d.owner}}</td>\\n         <td class=\\\"text-end\\\">{{frappe.format_value(d.total_opening_amount,\\\"Currency\\\")}}</td>\\n         <td class=\\\"text-end\\\">{{frappe.format_value(d.total_close_amount,\\\"Currency\\\")}}</td>\\n         \\n         <td class=\\\"text-center\\\">{{frappe.format_value(d.closed_date,\\\"Datetime\\\") if d.is_closed ==\\\"1\\\" else \\\"\\\"}}</td>\\n            <td>{{ d.modified_by if d.is_closed ==\\\"1\\\" else \\\"\\\" }}</td>\\n         <td class=\\\"text-center\\\"> {{ \\\"eDoor Shift\\\" if d.is_edoor_shift ==1 else \\\"ePOS Shift\\\" }}</td>\\n         <td class=\\\"text-center\\\"> {{ \\\"Closed\\\" if d.is_closed ==1 else \\\"Open\\\" }}</td>\\n       \\n         \\n     </tr>\\n     {%endfor%}\\n </table>\\n \\n \\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 7 - Finsh\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"7\\\" %}\\n<div class=\\\"primary_message\\\">\\nPlease verify the information below. Once you have confirmed that everything is correct, click the \\\"Finish\\\" button to run the Night Audit.\\n</div>\\n<table class=\\\"table-print-format\\\">\\n    <tr>\\n       <th colspan=\\\"2\\\"><h3>Summary</h3></th>\\n    </tr>\\n    <tbody>\\n        <tr>\\n           <td width=\\\"250px\\\">Total Arrival</td>\\n           <td class=\\\"text-right\\\">5</td>\\n        </tr>\\n        <tr>\\n           <td>Departure</td>\\n           <td class=\\\"text-right\\\">7</td>\\n        </tr>\\n        <tr>\\n           <td>Stay Over</td>\\n           <td class=\\\"text-right\\\">5</td>\\n        </tr>\\n        <tr>\\n           <td>No Show</td>\\n           <td class=\\\"text-right\\\">0</td>\\n        </tr>\\n        <tr>\\n           <td>Cancel</td>\\n           <td class=\\\"text-right\\\">0</td>\\n        </tr>\\n        <tr>\\n           <td>Void</td>\\n           <td class=\\\"text-right\\\">0</td>\\n        </tr>\\n    </tbody>\\n</table>\\n<hr/>\\nNext Day is: 20 Jul 2023\\n\\n{%endif%}\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Step 8 -  Thank You\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get(\\\"step\\\") ==\\\"8\\\" %}\\n <h1>Congratulation!</h1>\\n <p>You have successfully completed the Run Night Audit process.</p> \\n <p>The system date has been changed to 20-07-2023 (Static).</p> \\n <p>Please print report below to your supervisor.</p>\\n <hr/>\\n \\n the report list \\n \\n <ul>\\n     <li>Report 1</li>\\n     <li>Report 2</li>\\n     <li>Report 3</li>\\n     <li>Report 4</li>\\n </ul>\\n{%endif%}\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-02 23:46:08.193253",
  "module": "eDoor",
  "name": "eDoor Run Night Audit Step",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".currency-balance-custom{\n    width: 100%;\n    margin-bottom: 1rem;\n    margin-top: 1rem;\n    gap: 1rem;\n    display: flex;\n}\n.shadow-charge-total{\n    box-shadow: rgba(255, 255, 255, 1) 0px 1px 0px 0px;\n    padding: 0.5rem;\n    flex-direction: column;\n    display: flex;\n    background-color: #ffffff;\n    border: 1px solid #e5e7eb;\n    border-radius: 0.5rem;\n    flex-grow: 1;\n    \n}\n.ttl{\n    font-size: 0.875rem;\n    text-transform: uppercase;\n    text-align: end;\n    color: #9E9E9E;\n}\n.value{\n    letter-spacing: -0.08rem;\n    line-height: 1.25 !important;\n    font-size: 1.25rem !important;\n    font-weight: 600 !important;\n    text-align: end;\n}\n.shadow-charge-total.green-edoor{\n    border: 1px solid #50ac58;\n    background-color: #f4fcf7;\n}\n.sp-wrapper{\n    white-space: nowrap;\n}\n.hder-bg{\n    background-color: rgb(226 232 240 / 1);\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Folio",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div>\\n    \\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"currency-balance-custom row px-3 gap-3 text-uppercase \\\">\\n    <div class=\\\"col d-flex flex-column p-2 shadow-charge-total rounded-3 text-end border\\\">\\n        <span class=\\\"ttl\\\">Total Debit</span> \\n        <span class=\\\"value fw-bolder fs-5\\\">\\n            <span>{{frappe.format_value(doc.total_debit,\\\"Currency\\\")}}</span>\\n        </span>\\n    </div>\\n    <div class=\\\"col d-flex flex-column px-2 p-2 shadow-charge-total rounded-3 text-end border\\\">\\n        <span class=\\\"ttl\\\">Total Credit</span>\\n        <span class=\\\"value fw-bolder fs-5\\\"><span>{{frappe.format_value(doc.total_credit,\\\"Currency\\\")}}</span></span>\\n    </div>\\n    <div style=\\\"background:#f4fcf7;\\\" class=\\\"col d-flex flex-column p-2  shadow-charge-total rounded-3 green-edoor text-end border\\\">\\n        <span class=\\\"ttl\\\">Balance</span>\\n        <span class=\\\"value fw-bolder fs-5\\\"><span>{{frappe.format_value(doc.balance,\\\"Currency\\\")}} </span></span>\\n    </div>\\n</div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n{%set stay = frappe.get_doc(\\\"Reservation Stay\\\", doc.reservation_stay)%}\\r\\n<div class=\\\"mt-3 row\\\">\\r\\n    <div class=\\\"col-6\\\">\\r\\n        <table class=\\\"table-print-format\\\" style=\\\"width:100%\\\">\\r\\n            <tr>\\r\\n                <td class=\\\"py-2 mt-1 border font-medium text-center hder-bg\\\" colspan=\\\"4\\\">Guest Detail</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Guest Name\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{doc.guest}} - {{doc.guest_name}}\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Nationality\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"country\\\")}}\\r\\n                </td>\\r\\n            </tr>\\r\\n            \\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Business Source\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{stay.business_source}}\\r\\n                </td>\\r\\n            </tr>\\r\\n            \\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Address\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"address\\\") or \\\"\\\"}}\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n    <div class=\\\"col-6\\\">\\r\\n        <table class=\\\"table-print-format\\\" style=\\\"width:100%\\\">\\r\\n            <tr>\\r\\n                <td class=\\\"py-2 mt-1 border font-medium text-center hder-bg\\\" colspan=\\\"4\\\">Folio Detail</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Folio Number\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{doc.name}}\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Rooms\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{doc.rooms}}\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Arrival\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{frappe.format_value(stay.arrival_date,\\\"Date\\\")}}\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td class=\\\"w-auto border p-2\\\">\\r\\n                    <label class=\\\"fw-normal sp-wrapper\\\">\\r\\n                    {{_(\\\"Departure\\\")}}\\r\\n                    </label>\\r\\n                </td>\\r\\n                <td class=\\\"w-100 border p-2 fw-semibold\\\">\\r\\n                    {{frappe.format_value(stay.departure_date,\\\"Date\\\")}}\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Credit Debit Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if frappe.db.get_default(\\\"folio_transaction_style_credit_debit\\\")==\\\"1\\\"%}\\n{% endif %}\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple Style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.db.get_default(\\\"folio_transaction_style_credit_debit\\\")==\\\"0\\\"%}\\n\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-06 09:35:31.551980",
  "module": "eDoor",
  "name": "eDoor Folio Detail UI",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 10px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: 1px!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.border{\r\n    border-bottom:solid 1px #000!important;\r\n    padding:0px!important;\r\n}\r\n\r\n.print-format td, .print-format th{\r\n    padding: 4px 0px!important;\r\n}\r\n\r\n.print-format .table-bordered td, .print-format .table-bordered th{\r\n    border:1px solid #000!important;\r\n    padding:6px 10px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<hr/>\\n<center>\\n  <div style=\\\"margin-top:5px;font-size:16px;font-family:Khmer OS System\\\">\\n    <strong>\\u179c\\u17b7\\u1780\\u17d2\\u1780\\u1799\\u1794\\u178f\\u17d2\\u179a\\u17a2\\u17b6\\u1780\\u179a</strong><br>\\n    <strong>TAX INVOICE</strong>\\n  </div>  \\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<table style=\\\"width:100%;font-size:13px;font-family:Khmer OS System\\\">\\n    <tr>\\n        <td width=\\\"200px\\\">{{_(\\\"\\u17a2\\u178f\\u17b7\\u1790\\u17b7\\u1787\\u1793 / Customer:\\\")}}</td>\\n        <td>{{doc.guest_name or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>\\n            {{_(\\\"\\u1788\\u17d2\\u1798\\u17c4\\u17c7\\u179f\\u17a0\\u1782\\u17d2\\u179a\\u17b6\\u179f \\u17ac\\u17a2\\u178f\\u17b7\\u1790\\u17b7\\u1787\\u1793\\\")}}<br>\\n            {{_(\\\"Enterprise Name / Customer\\\")}}\\n        </td>\\n        <td>{{doc.business_source}}</td>\\n    </tr>\\n    <tr>\\n        <td>\\n            {{_(\\\"\\u17a2\\u17b6\\u179f\\u1799\\u178a\\u17d2\\u178b\\u17b6\\u1793\\\")}}<br>\\n            {{_(\\\"Address\\\")}}\\n        </td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>\\n            {{_(\\\"\\u1791\\u17bc\\u179a\\u179f\\u17d0\\u1796\\u17d2\\u1791\\u179b\\u17c1\\u1781\\\")}}<br>\\n            {{_(\\\"Telephone No\\\")}}\\n        </td>\\n        <td>{{doc.guest_phone_number}}</td>\\n    </tr>\\n    \\n</table>\\n\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<table style=\\\"margin-left:60px;width:100%;font-size:13px;font-family:Khmer OS System\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">\\n            {{_(\\\"\\u179b\\u17c1\\u1781\\u179a\\u17c0\\u1784\\u179c\\u17b7\\u1780\\u17d2\\u1780\\u1799\\u1794\\u178f\\u17d2\\u179a\\\")}}<br>\\n            {{_(\\\"Invoice No.\\\")}}\\n        </td>\\n        <td>{{frappe.form_dict.get(\\\"folio\\\") or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>\\n            {{_(\\\"\\u1780\\u17b6\\u179b\\u1794\\u179a\\u17b7\\u1785\\u17d2\\u1786\\u17c1\\u1791\\u17d6\\\")}}<br>\\n            {{_(\\\"Date\\\")}}\\n            </td>\\n        <td>{{frappe.format(doc.arrival_date,{'fieldtype':'Date'}) or ''}}</td>\\n    </tr>\\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"font-size:13px;font-family:Khmer OS System\\\">\\n    <thead>\\n        <tr>\\n            <th class = \\\"text-center\\\">\\n                {{_(\\\"\\u179b.\\u179a\\\")}}<br>\\n                {{_(\\\"No.\\\")}}\\n            </th>\\n            <th class = \\\"text-center\\\">\\n                {{_(\\\"\\u1794\\u179a\\u17b7\\u1799\\u17b6\\u1799\\u1798\\u17bb\\u1781\\u1791\\u17c6\\u1793\\u17b7\\u1789 \\u17ac\\u179f\\u17c1\\u179c\\u17b6\\\")}}<br>\\n                {{_(\\\"Decription of Goods or Service\\\")}}\\n            </th>\\n            <th class = \\\"text-center\\\">\\n                {{_(\\\"\\u1794\\u179a\\u17b7\\u1798\\u17b6\\u178e\\\")}}<br>\\n                {{_(\\\"Quantity\\\")}}\\n            </th>\\n            <th class = \\\"text-center\\\">\\n                {{_(\\\"\\u1790\\u17d2\\u179b\\u17c3\\u17af\\u1780\\u178f\\u17b6\\\")}}<br>\\n                {{_(\\\"Unit Price\\\")}}\\n            </th>\\n            <th class = \\\"text-center\\\">\\n                {{_(\\\"\\u1790\\u17d2\\u179b\\u17c3\\u1791\\u17c6\\u1793\\u17b7\\u1789\\\")}}<br>\\n                {{_(\\\"Amount\\\")}}\\n            </th>\\n        </tr>\\n    </thead>\\n  \\n <tbody>\\n    {% for rs in doc.stays %}\\n    <tr>\\n        <td class = \\\"text-center\\\">{{loop.index}}</td> \\n        <td>{{_(\\\"Booking Reference : \\\")}} \\n        {{doc.reference_number or ''}} <br>\\n        {{_(\\\"Check-in : \\\")}} {{frappe.format(rs.arrival_date,{'fieldtype':'Date'}) or ''}}, \\n        {{_(\\\"Check-out : \\\")}} {{frappe.format(rs.departure_date,{'fieldtype':'Date'}) or ''}} <br>\\n        {{rs.room_type_alias or ''}}, \\n        x {{rs.room_nights or 0}} Nights\\n        </td>\\n        <td class = \\\"text-center\\\">{{rs.room_nights}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(rs.input_rate,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(rs.total_rate,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n{% endfor %}\\n </tbody>  \\n\\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% set grand_total = doc.room_rate_tax_2_amount + doc.total_room_rate + doc.room_rate_tax_3_amount + doc.room_rate_tax_1_amount%}\\n<table class=\\\"table report-list\\\"  style=\\\"font-size:13px;font-family:Khmer OS System\\\">\\n        <tr>\\n            <td width=\\\"200px\\\">{{_(\\\"\\u1794\\u1793\\u17d2\\u1791\\u1794\\u17cb\\u1782\\u17c1\\u1784 / Room Rate\\\")}}  </td>\\n            <td align=\\\"right\\\"> {{frappe.format(doc.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        {% if doc.room_rate_tax_2_amount > 0 %}\\n        <tr>\\n            <td>{{doc.tax_2_name}} {{doc.tax_2_rate}}%   </td>\\n            <td align=\\\"right\\\"> {{frappe.format(doc.room_rate_tax_2_amount,{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        <tr class=\\\"border\\\">\\n            <td>{{_(\\\"\\u178f\\u1798\\u17d2\\u179b\\u17c3\\u1794\\u1793\\u17d2\\u1791\\u1794\\u17cb\\u179a\\u17bd\\u1798\\u17a2\\u17b6\\u1780\\u179a\\u179b\\u17be\\u1780\\u17b6\\u179a\\u179f\\u17d2\\u1793\\u17b6\\u1780\\u17cb\\u1793\\u17c5 / Total Room Include AT\\\")}} </td>\\n            <td align=\\\"right\\\"> {{frappe.format(doc.room_rate_tax_2_amount + doc.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n            \\n        </tr>\\n        {% endif %}\\n        <tr>\\n            <td>{{_(\\\"\\u179f\\u179a\\u17bb\\u1794 / Total\\\")}}</td>\\n            <td align=\\\"right\\\"> {{frappe.format(doc.room_rate_tax_2_amount + doc.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        {% if doc.room_rate_tax_1_amount > 0 %}\\n        <tr class=\\\"border\\\">\\n            <td>{{_(\\\"\\u179f\\u17c1\\u179c\\u17b6\\u179b\\u17be\\u178f\\u1798\\u17d2\\u179b\\u17c3\\u1794\\u1793\\u17d2\\u1790\\u17c2\\u1798 / \\\")}}{{doc.tax_1_name}} {{doc.tax_1_rate}}%  </td>\\n            <td align=\\\"right\\\"> {{frappe.format(doc.room_rate_tax_1_amount,{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        {% endif %}\\n        {% if doc.room_rate_tax_3_amount > 0 %}\\n        <tr class=\\\"border\\\">\\n            <td>{{_(\\\"\\u17a2\\u17b6\\u1780\\u179a\\u179b\\u17be\\u178f\\u1798\\u17d2\\u179b\\u17c3\\u1794\\u1793\\u17d2\\u1790\\u17c2\\u1798 / \\\")}}{{doc.tax_3_name}} {{doc.tax_3_rate}}%   </td>\\n            <td align=\\\"right\\\"> {{frappe.format(doc.room_rate_tax_3_amount,{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        {% endif %}\\n        <tr class=\\\"border\\\">\\n            <td>{{_(\\\"\\u179f\\u179a\\u17bb\\u1794\\u179a\\u17bd\\u1798 / Grand Total\\\")}}   </td>\\n            <td align=\\\"right\\\"> {{frappe.format(grand_total,{'fieldtype':'Currency'})}}</td>\\n        </tr>\\n        <!--<tr class=\\\"border\\\">-->\\n        <!--    <td>{{_(\\\"Exchange Rate\\\")}}   </td>-->\\n        <!--    <td align=\\\"right\\\"> {{frappe.format(grand_total,{'fieldtype':'Currency'})}}</td>-->\\n        <!--</tr>-->\\n        <!--<tr class=\\\"border\\\">-->\\n        <!--    <td>{{_(\\\"Grand Total with Riel\\\")}}   </td>-->\\n        <!--    <td align=\\\"right\\\"> {{frappe.format(grand_total,{'fieldtype':'Currency'})}}</td>-->\\n        <!--</tr>-->\\n        \\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table style=\\\"width:100%;margin-top:200px;font-size:13px;font-family:Khmer OS System\\\" >\\n    <tr>\\n       <td class=\\\"border\\\"></td>\\n       <td width=\\\"50px\\\"></td>\\n       <td class=\\\"border\\\"></td>\\n    </tr>\\n    <tr>\\n        <td class=\\\"text-center\\\"><strong>\\n            {{_(\\\"\\u17a0\\u178f\\u17d2\\u1790\\u179b\\u17c1\\u1781\\u17b6 \\u1793\\u17b7\\u1784\\u1788\\u17d2\\u1798\\u17c4\\u17c7\\u17a2\\u17d2\\u1793\\u1780\\u1791\\u17b7\\u1789\\\")}}<br>\\n            {{_(\\\"Customer's Signature & Name\\\")}}\\n        </strong></td>\\n        <td width=\\\"50px\\\"></td>\\n        <td class=\\\"text-center\\\"><strong>\\n            {{_(\\\"\\u17a0\\u178f\\u17d2\\u1790\\u179b\\u17c1\\u1781\\u17b6 \\u1793\\u17b7\\u1784\\u1788\\u17d2\\u1798\\u17c4\\u17c7\\u17a2\\u17d2\\u1793\\u1780\\u179b\\u1780\\u17cb\\\")}}<br>\\n            {{_(\\\"Seller's Signature & Name\\\")}}\\n        </strong></td>\\n    </tr>  \\n</table>\\n\\n<div style=\\\"margin-top:10px;font-family:Khmer OS System\\\">\\n    {{_(\\\"\\u179f\\u1798\\u17d2\\u1782\\u17b6\\u179b\\u17cb\\u17d6 \\u1785\\u17d2\\u1794\\u17b6\\u1794\\u17cb\\u178a\\u17be\\u1798\\u179f\\u1798\\u17d2\\u179a\\u17b6\\u1794\\u17cb\\u17a2\\u17d2\\u1793\\u1780\\u1791\\u17b7\\u1789 \\u1785\\u17d2\\u1794\\u17b6\\u1794\\u17cb\\u1785\\u1798\\u17d2\\u179b\\u1784\\u179f\\u1798\\u17d2\\u179a\\u17b6\\u1794\\u17cb\\u17a2\\u17d2\\u1793\\u1780\\u179b\\u1780\\u17cb\\u17d4\\\")}}<br>\\n    {{_(\\\"Note : Original Invoice for Customer, Copied Invoice for Seller.\\\")}}\\n</div>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-07-28 14:32:31.652768",
  "module": "eDoor",
  "name": "Folio Tax Invoice Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n   {%\\r\\n        set sql = \\\"\\r\\n           select\\r\\n            name,\\r\\n            room_number,\\r\\n            block_date,\\r\\n            start_date,\\r\\n            end_date,\\r\\n            reason,\\r\\n            room_type,\\r\\n            owner,\\r\\n            creation,\\r\\n            status_color,\\r\\n            is_unblock\\r\\n        from `tabRoom Block` \\r\\n        where \\r\\n        \\r\\n            property='{0}' and \\r\\n            '{1}' between start_date and DATE_ADD(end_date, INTERVAL -1 DAY) and \\r\\n            room_number like '%{2}%' and \\r\\n            docstatus=1 and \\r\\n            is_unblock=0\\\"\\r\\n            .format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get(\\\"date\\\"),\\r\\n                frappe.form_dict.get(\\\"keyword\\\") or ''\\r\\n        )\\r\\n    %}\\r\\n    {%\\r\\n        set data = frappe.db.sql(sql,as_dict=1)\\r\\n    %}\\r\\n     \\r\\n    {% if data %}\\r\\n    <table class=\\\"w-100 report-list\\\" style=\\\"white-space: nowrap;\\\">\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\" >No</th>\\r\\n                <th class=\\\"text-center\\\" >Block Number</th>\\r\\n                <th class=\\\"text-center\\\" >Room #</th>\\r\\n                <th class=\\\"text-center\\\" >Block Date</th>\\r\\n                <th class=\\\"text-center\\\" >Start Date</th>\\r\\n                <th class=\\\"text-center\\\" >Release Date</th>\\r\\n                <th>Reason</th>\\r\\n                <th>Block By</th>\\r\\n                <th class=\\\"text-center\\\" >Block Date</th>\\r\\n                <th class=\\\"text-center\\\" >Status</th>\\r\\n            </tr>\\r\\n            {% for d in data %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\" >{{loop.index}}</td>\\r\\n                    <td class=\\\"text-center\\\" >{{d.name}}</td>\\r\\n                    <td class=\\\"text-center\\\" >{{d.room_number}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.block_date,{'fieldtype':'Date'})}} </td>\\r\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.start_date,{'fieldtype':'Date'})}} </td>\\r\\n \\t\\t    <td class=\\\"text-center\\\">{{frappe.format(d.end_date,{'fieldtype':'Date'})}} </td>\\r\\n\\t\\t\\t\\r\\n                    <td>{{d.reason}}</td>\\r\\n                    <td>{{d.owner}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{frappe.format(d.creation,{'fieldtype':'Datetime'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        <span class=\\\"rounded-pill py-1 px-2 text-white\\\" style=\\\"background: {{d.status_color}}\\\">\\r\\n                            <svg version=\\\"1.2\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"18\\\" height=\\\"18\\\">\\r\\n                            \\t<title>lock-svgrepo-com-svg</title>\\r\\n                            \\t<style>\\r\\n                            \\t\\t.s0 { fill: transparent;stroke: #ffffff;stroke-linecap: round;stroke-linejoin: round;stroke-width: 2 } \\r\\n                            \\t</style>\\r\\n                            \\t<path id=\\\"Layer\\\" fill-rule=\\\"evenodd\\\" class=\\\"s0\\\" d=\\\"m7 10v-2c0-2.8 2.2-5 5-5 2.8 0 5 2.2 5 5v2m1.4 0.3c0.5 0.3 1 0.8 1.3 1.3 0.3 0.7 0.3 1.5 0.3 3.2v1.4c0 1.7 0 2.5-0.3 3.2-0.3 0.5-0.8 1-1.3 1.3-0.7 0.3-1.5 0.3-3.2 0.3h-6.4c-1.7 0-2.5 0-3.2-0.3-0.5-0.3-1-0.8-1.3-1.3-0.3-0.7-0.3-1.5-0.3-3.2v-1.4c0-1.7 0-2.5 0.3-3.2 0.3-0.5 0.8-1 1.3-1.3 0.4-0.2 0.8-0.2 1.4-0.3h10c0.6 0.1 1 0.1 1.4 0.3zm-3.2-0.3h-6.4c-0.7 0-1.3 0-1.8 0h10c-0.5 0-1.1 0-1.8 0z\\\"/>\\r\\n                            </svg>\\r\\n                            {{\\\"Blocked\\\" if d.is_unblock==0 else \\\"Release\\\"}}\\r\\n                        </span>\\r\\n                    </td>\\r\\n                    \\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {% endif %}\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-24 10:23:34.682662",
  "module": "eDoor",
  "name": "eDoor Room Block",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival Remaining\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('action')=='view_arrival_remaining' %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_date,\\n        reference_number,\\n        reservation_type,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        keyword like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status in ('Reserved','Confirmed')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or ''\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('action')=='view_arrival' %}\\n{%\\n\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        reference_number,\\n        reservation_date,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        arrival_date = '{1}' and \\n        keyword like '%{2}%' and \\n        business_source = if('{3}'='', business_source,'{3}') and \\n        room_types like '%{4}%' and \\n        reservation_status = if('{5}' = '', reservation_status, '{5}')\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            frappe.form_dict.get('keyword') or '',\\n            frappe.form_dict.get('business_source') or '',\\n            frappe.form_dict.get('room_type') or '',\\n            frappe.form_dict.get('reservation_status') or '',\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<div class=\\\"ms-info\\\">\\n    In here, include the list of <b>no shows</b>  and <b>cancellations</b>  on the current working day.\\n</div>\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            \\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-08-13 23:05:46.096091",
  "module": "eDoor",
  "name": "eDoor Dashboard Arrival Guest Custom",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "table.tb-secd-stk {\n    border-collapse: collapse;\n    border: 1px solid rgba(204, 204, 204, 0.3);\n    width: 100%;\n}\ntable.tb-secd-stk tr td{\n    border-width: 1px !important;\n    border-style: solid;\n    padding: 0.5rem !important;\n}\ntable.tb-secd-stk tr td:first-child{\n    width: auto;\n    white-space: nowrap;\n    background: rgb(243, 243, 243);\n}\ntable.tb-secd-stk tr td:last-child{\n    width: 100%;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Source",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\n    <!--<h2>-->\\n    <!--    <small class=\\\"sub-heading\\\">{{doc.name}}</small>-->\\n    <!--</h2>-->\\n    \\n    <table class=\\\"tb-secd-stk table-print-format\\\" style=\\\"width:100%\\\">\\n        <tr>\\n            <td>Business Source Type</td>\\n            <td>{{doc.business_source_type}}</td>\\n        </tr>\\n        <tr>\\n            <td>Business Source</td>\\n            <td>{{doc.business_source}}</td>\\n        </tr>\\n        <tr>\\n            <td>Country</td>\\n            <td>{{doc.country or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>City</td>\\n            <td>{{doc.city}}</td>\\n        </tr>\\n        <tr>\\n            <td>Contact Name</td>\\n            <td>{{doc.contact_name or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Phone Number</td>\\n            <td>{{doc.phone_number or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Email</td>\\n            <td>{{doc.email or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Bank name</td>\\n            <td>{{doc.bank_name or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Credit Card Number</td>\\n            <td>{{doc.credit_card_number or \\\"\\\"}}</td>\\n        </tr>\\n        <tr>\\n            <td>Card Holder Name</td>\\n            <td>{{doc.card_holder_name or \\\"\\\"}}</td>\\n        </tr>\\n    </table>\\n</div>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-25 13:52:17.529544",
  "module": "eDoor",
  "name": "eDoor Business Source Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Arrival Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            total_room_rate ,\\r\\n            require_pickup,\\r\\n            TIME_FORMAT(pickup_time, '%H:%i %p') as pickup_time,\\r\\n            arrival_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    \\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-end\\\">ADR</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.pickup_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.arrival_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n    <br/>\\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-09-21 11:55:37.206811",
  "module": "eDoor",
  "name": "Front Desk Arrival Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Housekeeping Arrival Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Type\\\"}}</strong>\\r\\n        </td> \\r\\n        <td></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            child,\\r\\n            total_room_rate ,\\r\\n            housekeeping_note,\\r\\n            require_pickup,\\r\\n            TIME_FORMAT(pickup_time, '%H:%i %p') as pickup_time,\\r\\n            arrival_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n\\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n     {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n                <th class=\\\"text-end\\\">HK Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n           {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.pickup_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.arrival_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.housekeeping_note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n             <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n            \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n    \\r\\n    \\r\\n<!--    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>-->\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-09-01 10:51:15.670744",
  "module": "eDoor",
  "name": "Housekeeping Arrival Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Departure Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            total_debit,\\r\\n            total_credit,\\r\\n            balance,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            total_room_rate ,\\r\\n            require_drop_off,\\r\\n            TIME_FORMAT(drop_off_time, '%H:%i %p') as drop_off_time,\\r\\n            departure_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='departure_date')|unique|list|sort  %}\\r\\n    \\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-end\\\">Debit</th>\\r\\n                <th class=\\\"text-end\\\">Credit</th>\\r\\n                <th class=\\\"text-end\\\">Balance</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('departure_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.drop_off_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.departure_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_debit,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_credit,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.balance,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('departure_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n    <br/>\\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-09-01 10:51:31.329834",
  "module": "eDoor",
  "name": "Front Desk Departure Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Stay Over Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            total_room_rate \\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date < '{1}' and \\r\\n            departure_date > '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            reservation_status = if('{6}' = '', reservation_status, '{6}') and\\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or '',\\r\\n                frappe.form_dict.get('reservation_status') or '',\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n      {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    \\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-end\\\">ADR</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for date in dates%}\\r\\n                <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n                </tr>\\r\\n             {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"1\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n    <br/>\\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-09-21 11:55:58.532788",
  "module": "eDoor",
  "name": "Front Desk Stay Over Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"Upcomming Note\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%\\r\\nset data = frappe.db.sql(\\\"\\r\\n    select * from `tabFrontdesk Note` \\r\\n    where  note_date >= '{0}' and property= '{1}'\\\".format(\\r\\n            frappe.form_dict.get('working_date'),\\r\\n            frappe.form_dict.get('name')\\r\\n        ),as_dict=1)\\r\\n%}\\r\\n{% if (data|length)>0 %}\\r\\n<table class=\\\"report-list w-100 \\\">\\r\\n     <tbody>\\r\\n    <tr>\\r\\n        <th class=\\\"text-center\\\">No.</th>\\r\\n        <td class=\\\"text-center\\\">Room</td>\\r\\n        <td class=\\\"text-center\\\">Reservation</td>\\r\\n        <td class=\\\"text-center\\\">Reservation Stay</td>\\r\\n        <td class=\\\"text-center\\\">Guest</td>\\r\\n        <td class=\\\"text-center\\\">Created Date</td>\\r\\n        <td class=\\\"text-center\\\">Created By</td>\\r\\n        <td style=\\\"width:40%;\\\">Note</td>\\r\\n        \\r\\n    </tr>\\r\\n   \\r\\n        {%for d in data%}\\r\\n    \\r\\n        <tr>\\r\\n        <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n        <td class=\\\"text-center\\\">{% if d.room %} {{d.room}} {%endif%}</td>  \\r\\n        <td class=\\\"text-center\\\" align=\\\"center\\\">{% if d.reservation %}  <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation or ''}}</a>{%endif%}</td>\\r\\n        <td class=\\\"text-center\\\" align=\\\"center\\\">{% if d.reservation_stay %}<a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay or ''}}</a>{%endif%}</td>\\r\\n\\t\\t<td class=\\\"text-center\\\">{% if d.guest %}<a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest or ''}} - {{d.guest_name or ''}}</a> {%endif%}</td> \\r\\n\\t\\t<td class=\\\"text-center\\\" align =\\\"center\\\">{{frappe.format(d.creation,{'fieldtype':'Date'})}}</td>\\r\\n\\t\\t<td class=\\\"text-center\\\">{{d.modified_by}}</td>\\r\\n\\t\\t<td class=\\\"\\\">{{d.content}}</td>\\r\\n\\t\\t\\r\\n        </tr>\\r\\n            \\r\\n        {%endfor%}\\r\\n    </tbody>\\r\\n</table>\\r\\n{%else%}\\r\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n</div>\\r\\n{%endif%}\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-18 10:26:27.180446",
  "module": "eDoor",
  "name": "eDoor Up Coming Note",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Housekeeping Stay Over Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            total_room_rate\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date < '{1}' and \\r\\n            departure_date > '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n      {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    \\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n                <th class=\\\"text-end\\\">HK Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for date in dates%}\\r\\n                <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n                </tr>\\r\\n             {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                     <td class=\\\"text-end nowrap\\\">{{d.housekeeping_note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"1\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n<!--    <br/>\\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>-->\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-09-21 11:57:58.642851",
  "module": "eDoor",
  "name": "Housekeeping Stay Over Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Pickup - Drop off Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Arrival Mode\\\")}} : <strong>{{frappe.form_dict.arrival_modes or \\\"All Arrival Mode\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Departure Mode\\\")}} : <strong>{{frappe.form_dict.departure_mode or \\\"All Departure Mode\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            arrival_mode,\\r\\n            require_pickup,\\r\\n            pickup_driver_name,\\r\\n            TIME_FORMAT(pickup_time, '%H:%i') as pickup_time,\\r\\n            arrival_flight_number,\\r\\n            pickup_note\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            require_pickup = 1 and\\r\\n            property= '{0}' and \\r\\n            arrival_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            ifnull(arrival_mode,''  ) = if('{5}'='', ifnull(arrival_mode,''),'{5}') and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('arrival_modes') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Pickup Guest\\\")}}</h3>\\r\\n\\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                <th class=\\\"text-center\\\">Pickup Date</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th>Station</th>\\r\\n                <th>Driver Name</th>\\r\\n                <th>Pickup Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} {{d.pickup_time or \\\"\\\"}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                            {{d.arrival_flight_number or \\\"\\\"}}\\r\\n                    </td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td>{{d.arrival_mode or ''}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.pickup_driver_name or ''}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.pickup_note or ''}}</td>\\r\\n                    \\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"4\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"4\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n\\r\\n    \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            departure_mode,\\r\\n            require_drop_off,\\r\\n            drop_off_driver_name,\\r\\n            TIME_FORMAT(drop_off_time, '%H:%i') as drop_off_time,\\r\\n            departure_flight_number,\\r\\n            drop_off_note\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            require_drop_off = 1 and\\r\\n            property= '{0}' and \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            ifnull(departure_mode,''  ) = if('{5}'='', ifnull(departure_mode,''),'{5}') and \\r\\n            is_active_reservation=1 \\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('departure_mode') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    {% set dates =  data|map(attribute='departure_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Drop Off Guest\\\")}}</h3>\\r\\n\\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n\\t\\t<th class=\\\"text-center\\\">Room</th>\\r\\n                <th class=\\\"text-center\\\">Drop Off Date</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th>Station</th>\\r\\n                <th>Driver Name</th>\\r\\n                <th>Pickup Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('departure_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}} {{d.drop_off_time or \\\"\\\"}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                            {{d.departure_flight_number or \\\"\\\"}}\\r\\n                    </td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td>{{d.departure_mode or ''}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.drop_off_driver_name or ''}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.drop_off_note or ''}}</td>\\r\\n                    \\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"4\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('departure_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"4\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-09-08 09:55:59.711816",
  "module": "eDoor",
  "name": "Front Desk Pickup - Drop Off Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Housekeeping Departure Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            total_room_rate ,\\r\\n            require_drop_off,\\r\\n            TIME_FORMAT(drop_off_time, '%H:%i %p') as drop_off_time,\\r\\n            departure_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='departure_date')|unique|list|sort  %}\\r\\n    \\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n                <th class=\\\"text-center\\\">HK Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('departure_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.drop_off_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.departure_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.housekeeping_note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('departure_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n  <!--  <br/>\\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>-->\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-09-01 10:50:23.725791",
  "module": "eDoor",
  "name": "Housekeeping Departure Guest Report",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Arrival Stay Over Departure Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            require_pickup,\\r\\n            TIME_FORMAT(pickup_time, '%H:%i %p') as pickup_time,\\r\\n            arrival_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Arrival Guest\\\")}}</h3>\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                     <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.pickup_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.arrival_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            require_pickup,\\r\\n            TIME_FORMAT(pickup_time, '%H:%i') as pickup_time,\\r\\n            arrival_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date < '{1}' and \\r\\n            departure_date > '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            reservation_status = if('{6}' = '', reservation_status, '{6}') and\\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date asc\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or '',\\r\\n                frappe.form_dict.get('reservation_status') or '',\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Stay Over Guest\\\")}}</h3>\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-end\\\">ADR</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for date in dates%}\\r\\n                <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n                </tr>\\r\\n             {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"1\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n\\r\\n    \"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            total_debit,\\r\\n            total_credit,\\r\\n            balance,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            require_drop_off,\\r\\n            TIME_FORMAT(drop_off_time, '%H:%i %p') as drop_off_time,\\r\\n            departure_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date asc\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='departure_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Departure Guest\\\")}}</h3>\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-end\\\">Debit</th>\\r\\n                <th class=\\\"text-end\\\">Credit</th>\\r\\n                <th class=\\\"text-end\\\">Balance</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('departure_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.drop_off_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.departure_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_debit,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_credit,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.balance,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('departure_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n\\r\\n    \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            arrival_date,\\r\\n            departure_date,\\r\\n            business_source,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            child\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n\\r\\n    <h3>{{_(\\\"Arrival Summary \\\")}}</h3>\\r\\n    <table  class='report-list occupied-001' width=\\\"100%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"  \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            child\\r\\n\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date < '{1}' and \\r\\n            departure_date > '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            reservation_status = if('{6}' = '', reservation_status, '{6}') and\\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date asc\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or '',\\r\\n                frappe.form_dict.get('reservation_status') or '',\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    <h3>{{_(\\\"Stay Over Summary\\\")}}</h3>\\r\\n       <table  class='report-list occupied-001' width=\\\"100%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            departure_date,\\r\\n            business_source,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            child\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n\\r\\n    <h3>{{_(\\\"Departure Summary\\\")}}</h3>\\r\\n    <table  class='report-list occupied-001' width=\\\"100%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-09-21 11:57:11.841245",
  "module": "eDoor",
  "name": "Front Desk Arrival Stay Over Departure Guest",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "12",
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Housekeeping Arrival Stay Over Departure Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n        /\\r\\n        {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type or \\\"All Room Types\\\"}}</strong>\\r\\n        </td> \\r\\n        <td ></td>\\r\\n\\r\\n        <td class = \\\"text-right\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            require_pickup,\\r\\n            TIME_FORMAT(pickup_time, '%H:%i %p') as pickup_time,\\r\\n            arrival_flight_number,\\r\\n            housekeeping_note\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Arrival Guest\\\")}}</h3>\\r\\n\\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n                <th class=\\\"text-center\\\">HK Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                     <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.pickup_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.arrival_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.housekeeping_note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n\\r\\n    \"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            require_pickup,\\r\\n            TIME_FORMAT(pickup_time, '%H:%i %p') as pickup_time,\\r\\n            arrival_flight_number,\\r\\n            housekeeping_note\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date < '{1}' and \\r\\n            departure_date > '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            reservation_status = if('{6}' = '', reservation_status, '{6}') and\\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date asc\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or '',\\r\\n                frappe.form_dict.get('reservation_status') or '',\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='arrival_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Stay Over Guest\\\")}}</h3>\\r\\n\\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n                 <th class=\\\"text-center\\\">HK Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('arrival_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.housekeeping_note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('arrival_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n\\r\\n    \"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            total_debit,\\r\\n            total_credit,\\r\\n            balance,\\r\\n            adult,\\r\\n            room_types,\\r\\n            child,\\r\\n            require_drop_off,\\r\\n            TIME_FORMAT(drop_off_time, '%H:%i %p') as drop_off_time,\\r\\n            departure_flight_number,\\r\\n            housekeeping_note\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date asc\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    \\r\\n    \\r\\n    {% set dates =  data|map(attribute='departure_date')|unique|list|sort  %}\\r\\n    <h3>{{_(\\\"Departure Guest\\\")}}</h3>\\r\\n\\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-end\\\">Debit</th>\\r\\n                <th class=\\\"text-end\\\">Credit</th>\\r\\n                <th class=\\\"text-end\\\">Balance</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n                <th class=\\\"text-center\\\">HK Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n        {% for date in dates%}\\r\\n            <tr style=\\\"border-bottom:dotted 1px #000000\\\">\\r\\n                <td colspan=\\\"16\\\"><strong>{{frappe.format(date,{'fieldtype':\\\"Date\\\"})}}</strong></td>\\r\\n            </tr>\\r\\n            {%for d in data|selectattr('departure_date', 'equalto', date)|list %}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    \\r\\n                     <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.drop_off_time or \\\"\\\"}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_drop_off != 0 %}\\r\\n                            {{d.departure_flight_number or \\\"\\\"}}\\r\\n                        {% endif %}    \\r\\n                    </td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_debit,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_credit,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{frappe.format(d.balance,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.note or ''}}</td>\\r\\n                    <td class=\\\"text-end nowrap\\\">{{d.housekeeping_note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n                 <tr  style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td colspan=\\\"1\\\" ></td>\\r\\n                    <td colspan=\\\"3\\\"  ><strong>{{_(\\\"Total:\\\")}}</strong></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list| count}}</strong></td>\\r\\n                    <td colspan=\\\"2\\\" ></td>\\r\\n                    <td class=\\\"text-center\\\" ><strong>{{data|selectattr('departure_date', 'equalto', date)|list | sum(attribute='room_nights')}}</strong></td>\\r\\n                    <td colspan=\\\"3\\\"  ></td>\\r\\n                    <td class=\\\"text-center\\\" width='100px'><strong>{{data|selectattr('departure_date', 'equalto', date)|list|sum(attribute='adult')}} / {{data|selectattr('arrival_date', 'equalto', date)|list|sum(attribute='child')}}</strong></td>\\r\\n                </tr>\\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n        \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"2\\\"></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | sum(attribute='room_nights')}}</strong></td>\\r\\n                <td colspan=\\\"3\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n\\r\\n    \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            arrival_date,\\r\\n            departure_date,\\r\\n            business_source,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            child\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n\\r\\n    <h3>{{_(\\\"Arrival Summary \\\")}}</h3>\\r\\n    <table  class='report-list occupied-001' width=\\\"100%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"  \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            child\\r\\n\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date < '{1}' and \\r\\n            departure_date > '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            reservation_status = if('{6}' = '', reservation_status, '{6}') and\\r\\n            is_active_reservation=1 \\r\\n        order by \\r\\n            arrival_date asc\\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or '',\\r\\n                frappe.form_dict.get('reservation_status') or '',\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    <h3>{{_(\\\"Stay Over Summary\\\")}}</h3>\\r\\n       <table  class='report-list occupied-001' width=\\\"100%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            departure_date,\\r\\n            business_source,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adult,\\r\\n            child\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            departure_date between '{1}' and '{2}' and \\r\\n            keyword like '%{3}%' and \\r\\n            business_source = if('{4}'='', business_source,'{4}') and \\r\\n            room_types like '%{5}%' and \\r\\n            is_active_reservation=1 \\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('end_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n\\r\\n    <h3>{{_(\\\"Departure Summary\\\")}}</h3>\\r\\n    <table  class='report-list occupied-001' width=\\\"100%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Business Source\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"Room Nights\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'room_nights')}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='room_nights')}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 10.0,
  "margin_left": 10.0,
  "margin_right": 10.0,
  "margin_top": 10.0,
  "modified": "2023-09-01 10:56:28.142866",
  "module": "eDoor",
  "name": "Housekeeping Arrival Stay Over Departure Guest",
  "page_number": "Bottom Right",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".header-name{\n    cursor: pointer;\n    padding: .5rem;\n    font-size: 13px;\n    font-weight: 600 !important;\n    background-color: rgb(226 232 240);\n    color: #343a40;\n}\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Customer",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\r\\n{% \\r\\n    set data = frappe.db.sql(\\\"select\\r\\n        name,\\r\\n        property,\\r\\n        reservation, \\r\\n        reservation_stay,\\r\\n        posting_date,\\r\\n        business_source,\\r\\n        room_types,\\r\\n        room_types_alias,\\r\\n        rooms,\\r\\n        total_credit,\\r\\n        total_debit,\\r\\n        balance,\\r\\n        status,\\r\\n        note\\r\\n    from `tabReservation Folio` \\r\\n    where guest='{0}'\\r\\n    \\\".format(doc.name),as_dict=1)\\r\\n    \\r\\n%}\\r\\n{% if data %}\\r\\n<table class=\\\"report-list w-100 \\\">\\r\\n    <tbody>\\r\\n    <tr>\\r\\n        <th class=\\\"text-center\\\">Folio Name</th>\\r\\n        <th class=\\\"text-center\\\">Reservation #</th>\\r\\n        <th class=\\\"text-center\\\">Res #</th>\\r\\n        <th class=\\\"text-center\\\">Posting Date</th>\\r\\n        <th class=\\\"text-center\\\">Business Source</th>\\r\\n        <th class=\\\"text-center\\\">Room</th>\\r\\n        {% if can_view_rate==1%}\\r\\n        <th class=\\\"text-end\\\">Debit (Charge)</th>\\r\\n        <th class=\\\"text-end\\\">Credit (Payment)</th>\\r\\n        <th class=\\\"text-end\\\">Balance</th>\\r\\n        {%endif%}\\r\\n        <th class=\\\"text-center\\\">Status</th>\\r\\n        <th style=\\\"width:40%;\\\" class=\\\"text-start\\\">Note</th>\\r\\n    </tr>\\r\\n     {% for d in data %}\\r\\n        <tr>\\r\\n            <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_folio_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\r\\n            <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\r\\n            <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay}}</a></td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(d.posting_date,{'fieldtype':'Date'})}}</td>\\r\\n            <td class=\\\"\\\">{{d.business_source}}</td>\\r\\n            <td>{{d.rooms}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.room_types_alias}}</td>\\r\\n            {% if can_view_rate==1%}\\r\\n            <td class=\\\"text-end\\\">{{frappe.format(d.total_debit,{'fieldtype':'Currency'})}}</td>\\r\\n            <td class=\\\"text-end\\\">{{frappe.format(d.total_credit,{'fieldtype':'Currency'})}}</td>\\r\\n            \\r\\n            <td class=\\\"text-end\\\">{{frappe.format(d.balance,{'fieldtype':'Currency'})}}</td>\\r\\n            {%endif%}\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {% if d.status == 'Open' %}\\r\\n                    <span class=\\\"rounded-pill py-1 px-2 text-white\\\" style=\\\"background:green;\\\">{{d.status}}</span>\\r\\n                {% else %}\\r\\n                    <span class=\\\"rounded-pill py-1 px-2 text-white\\\" style=\\\"background:red;\\\">{{d.status}}</span>\\r\\n                {% endif %}\\r\\n            </td>\\r\\n            <td class=\\\"text-start\\\">\\r\\n                {% if note %}\\r\\n                    <span>{{ d.note }} </span>\\r\\n                {%endif%}\\r\\n            </td>\\r\\n           \\r\\n            \\r\\n        </tr>\\r\\n    {% endfor%}\\r\\n    </tbody>\\r\\n</table>\\r\\n{% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-27 08:33:28.461885",
  "module": "eDoor",
  "name": "eDoor Guest Detail Folio List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<h2 class=\\\"text-center\\\">{{_(\\\"Reservation List\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{frappe.form_dict.filter_date_by or ''}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n                - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n            {% if frappe.form_dict.business_source %}\\r\\n                / {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source}}</strong>\\r\\n            {% endif %}\\r\\n            {% if frappe.form_dict.reservation_status %}\\r\\n                / {{_(\\\"Reservation Status\\\")}} : <strong>{{frappe.form_dict.reservation_status}}</strong>\\r\\n            {% endif %}\\r\\n            {% if frappe.form_dict.room_type %}\\r\\n                / {{_(\\\"Room Type\\\")}} : <strong>{{frappe.form_dict.room_type}}</strong>\\r\\n            {% endif %}\\r\\n            {% if frappe.form_dict.guest %}\\r\\n                / {{_(\\\"Guest\\\")}} : <strong>{{frappe.form_dict.guest}}</strong>\\r\\n            {% endif %}\\r\\n            \\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_status = None if  not frappe.form_dict.get('reservation_status') else frappe.form_dict.get('reservation_status').split(',') %}\\r\\n \\r\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\r\\n        report_name=\\\"Reservation List Report\\\",\\r\\n        filters={\\r\\n            \\\"filter_date_by\\\":frappe.form_dict.get('filter_date_by'),\\r\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\r\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\r\\n            \\\"property\\\":doc.name,\\r\\n            \\\"reservation_status\\\":reservation_status,\\r\\n            \\\"business_source\\\":frappe.form_dict.get('business_source'),\\r\\n            \\\"chart_type\\\":\\\"bar\\\",\\r\\n            \\\"room_type\\\":frappe.form_dict.get('room_type'),\\r\\n            \\\"guest\\\":frappe.form_dict.get('guest'),\\r\\n            \\\"is_active_reservation\\\":frappe.form_dict.get('is_active_reservation'),\\r\\n            \\\"order_by\\\":frappe.form_dict.get('order_by'),\\r\\n            \\\"sort_order\\\":frappe.form_dict.get('sort_order'),\\r\\n            \\\"group_by\\\":frappe.form_dict.get('group_by')\\r\\n        }\\r\\n    )\\r\\n%}\\r\\n\\r\\n<table class='report-list occupied-001' style='width:100%'>\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th>No</th>\\r\\n            {%for c in data.columns%}\\r\\n                {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                <th class=\\\"text-{{c.align}}\\\">{{c.label}}</th>\\r\\n                {%endif%}\\r\\n            {%endfor%}\\r\\n          \\r\\n        </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n        {% if frappe.form_dict.get('group_by') %}\\r\\n            {% for g in data.result | selectattr('is_group','equalto', 1)|list%}\\r\\n                <tr>\\r\\n                    <td></td>\\r\\n                    <td>{{g.reservation}}</td>\\r\\n                </tr>\\r\\n                \\r\\n                {% for d in data.result | selectattr('parent','equalto', g.id) if not \\\"is_total_row\\\" in d %}\\r\\n                    <tr>\\r\\n                        <td>{{loop.index}}</td>\\r\\n                    {%for c in data.columns%}\\r\\n                    {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                        <td class=\\\"text-{{c.align}}\\\">\\r\\n                            {%if \\\"post_message_action\\\" in c%}\\r\\n                \\r\\n                                <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('{{c.post_message_action}}|{{d[c.fieldname]}}', '*')\\\">{{frappe.format(d[c.fieldname or ''])}}</a>\\r\\n                        \\r\\n                            {%else%}\\r\\n                                {{frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}\\r\\n                            {%endif%}\\r\\n                        </td>\\r\\n                    {%endif%}\\r\\n                    {%endfor%}\\r\\n                    </tr>\\r\\n                {% endfor %}\\r\\n                {% for d in data.result | selectattr('parent','equalto', g.id) if \\\"is_total_row\\\" in d %}\\r\\n                    <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td></td>\\r\\n                    {%for c in data.columns%}\\r\\n                    {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                        <td class=\\\"text-{{c.align}}\\\"><strong>{{'' if not frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype}) else frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}</strong></td>\\r\\n                    {%endif%}\\r\\n                    {%endfor%}\\r\\n                    </tr>\\r\\n                {% endfor %}\\r\\n            {% endfor %}\\r\\n            {% for d in data.result %}\\r\\n                    {% if d.is_grand_total == 1 %}\\r\\n                    <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                    <td></td>\\r\\n                    {%for c in data.columns%}\\r\\n                    {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                        <td class=\\\"text-{{c.align}}\\\"><strong>{{'' if not frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype}) else frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}</strong></td>\\r\\n                    {%endif%}\\r\\n                    {%endfor%}\\r\\n                    </tr>\\r\\n                    {% endif %}\\r\\n                {% endfor %}\\r\\n        {% else %}\\r\\n        {% for d in data.result %}\\r\\n        {% if d.indent != 0 %}\\r\\n        <tr>\\r\\n            <td>{{loop.index}}</td>\\r\\n            {%for c in data.columns%}\\r\\n                {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                <td class=\\\"text-{{c.align}}\\\">\\r\\n                    {%if \\\"post_message_action\\\" in c%}\\r\\n                \\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('{{c.post_message_action}}|{{d[c.fieldname]}}', '*')\\\">{{frappe.format(d[c.fieldname or ''])}}</a>\\r\\n                        \\r\\n                    {%else%}\\r\\n                        {{frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}\\r\\n                    {%endif%}\\r\\n                </td>\\r\\n                {%endif%}\\r\\n            {%endfor%}\\r\\n        </tr>\\r\\n        {% endif %}\\r\\n        {% if d.indent == 0 %}\\r\\n                {% if d.is_total_row == 1 %}\\r\\n                    <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n                        <td></td>\\r\\n                    {%for c in data.columns%}\\r\\n                    {%if c.show_in_report==1 or 'insert_after_index' in c%}\\r\\n                        <td class=\\\"text-{{c.align}}\\\"><strong>{{'' if not frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype}) else frappe.format(d[c.fieldname or ''],{\\\"fieldtype\\\":c.fieldtype})}}</strong></td>\\r\\n                    {%endif%}\\r\\n                    {%endfor%}\\r\\n                    </tr>\\r\\n                {% endif %}\\r\\n            {% endif %}\\r\\n            {% endfor %}\\r\\n        {% endif %}\\r\\n    </tbody>\\r\\n</table>\\r\\n\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_status = None if  not frappe.form_dict.get('reservation_status') else frappe.form_dict.get('reservation_status').split(',') %}\\r\\n \\r\\n{% set data= frappe.call(\\\"frappe.desk.query_report.run\\\",\\r\\n        report_name=\\\"Reservation List Report\\\",\\r\\n        filters={\\r\\n            \\\"filter_date_by\\\":frappe.form_dict.get('filter_date_by'),\\r\\n            \\\"start_date\\\":frappe.form_dict.get('start_date'),\\r\\n            \\\"end_date\\\":frappe.form_dict.get('end_date'),\\r\\n            \\\"property\\\":doc.name,\\r\\n            \\\"reservation_status\\\":reservation_status,\\r\\n            \\\"business_source\\\":frappe.form_dict.get('business_source'),\\r\\n            \\\"chart_type\\\":\\\"bar\\\",\\r\\n            \\\"room_type\\\":frappe.form_dict.get('room_type'),\\r\\n            \\\"guest\\\":frappe.form_dict.get('guest'),\\r\\n            \\\"is_active_reservation\\\":frappe.form_dict.get('is_active_reservation'),\\r\\n            \\\"order_by\\\":frappe.form_dict.get('order_by'),\\r\\n            \\\"sort_order\\\":frappe.form_dict.get('sort_order'),\\r\\n            \\\"summary_filter\\\":frappe.form_dict.get('summary_filter'),\\r\\n            \\\"group_by\\\":frappe.form_dict.get('group_by')\\r\\n        }\\r\\n    )\\r\\n%}\\r\\n\\r\\n<table class='report-list occupied-001' style=\\\"width:60%;margin-top:7px;\\\">\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th>{{_(\\\"Summary By \\\")}}{{frappe.form_dict.summary_filter or ''}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Room Nights\\\")}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Pax(A/C)\\\")}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Debit\\\")}}</th>\\r\\n            <th class=\\\"text-center\\\">{{_(\\\"Credit\\\")}}</th>\\r\\n        </tr>\\r\\n    </thead>\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Business Source\\\" %}\\r\\n    <tbody>\\r\\n        {% for business_source in data.result |  map(attribute='business_source') | unique %}\\r\\n        <tr>\\r\\n            {% if business_source %}\\r\\n            <td>{{business_source or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n        {% if frappe.form_dict.summary_filter ==\\\"Arrival Date\\\" %}\\r\\n    <tbody>\\r\\n        {% for arrival_date in data.result |  map(attribute='arrival_date') | unique %}\\r\\n        <tr>\\r\\n            {% if arrival_date %}\\r\\n            <td>{{arrival_date or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"arrival_date\\\", \\\"equalto\\\", arrival_date) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Departure Date\\\" %}\\r\\n    <tbody>\\r\\n        {% for departure_date in data.result |  map(attribute='departure_date') | unique %}\\r\\n        <tr>\\r\\n            {% if departure_date %}\\r\\n            <td>{{departure_date or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"departure_date\\\", \\\"equalto\\\", departure_date) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Reservation\\\" %}\\r\\n    <tbody>\\r\\n        {% for reservation in data.result |selectattr(\\\"indent\\\", \\\"equalto\\\", 1)|  map(attribute='reservation') | unique %}\\r\\n        <tr>\\r\\n            {% if reservation %}\\r\\n            <td>{{reservation or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation\\\", \\\"equalto\\\", reservation) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    \\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Reservation Date\\\" %}\\r\\n    <tbody>\\r\\n        {% for reservation_date in data.result |  map(attribute='reservation_date') | unique %}\\r\\n        <tr>\\r\\n            {% if reservation_date %}\\r\\n            <td>{{reservation_date or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation_date\\\", \\\"equalto\\\", reservation_date) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Reservation Type\\\" %}\\r\\n    <tbody>\\r\\n        {% for reservation_type in data.result |  map(attribute='reservation_type') | unique %}\\r\\n        <tr>\\r\\n            {% if reservation_type %}\\r\\n            <td>{{reservation_type or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation_type\\\", \\\"equalto\\\", reservation_type) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Guest\\\" %}\\r\\n    <tbody>\\r\\n        {% for guest in data.result |  map(attribute='guest') | unique %}\\r\\n        <tr>\\r\\n            {% if guest %}\\r\\n            <td>{{guest or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"guest\\\", \\\"equalto\\\", guest) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Room Type\\\" %}\\r\\n    <tbody>\\r\\n        {% for room_types in data.result |  map(attribute='room_types') | unique %}\\r\\n        <tr>\\r\\n            {% if room_types %}\\r\\n            <td>{{room_types or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"room_types\\\", \\\"equalto\\\", room_types) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Business Source Type\\\" %}\\r\\n    <tbody>\\r\\n        {% for business_source_type in data.result |  map(attribute='business_source_type') | unique %}\\r\\n        <tr>\\r\\n            {% if business_source_type %}\\r\\n            <td>{{business_source_type or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"business_source_type\\\", \\\"equalto\\\", business_source_type) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Nationality\\\" %}\\r\\n    <tbody>\\r\\n        {% for nationality in data.result |  map(attribute='nationality') | unique %}\\r\\n        <tr>\\r\\n            {% if nationality %}\\r\\n            <td>{{nationality or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"nationality\\\", \\\"equalto\\\", nationality) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Rate Type\\\" %}\\r\\n    <tbody>\\r\\n        {% for rate_type in data.result |  map(attribute='rate_type') | unique %}\\r\\n        <tr>\\r\\n            {% if rate_type %}\\r\\n            <td>{{rate_type or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"rate_type\\\", \\\"equalto\\\", rate_type) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    {% if frappe.form_dict.summary_filter ==\\\"Reservation Status\\\" %}\\r\\n    <tbody>\\r\\n        {% for reservation_status in data.result |  map(attribute='reservation_status') | unique %}\\r\\n        <tr>\\r\\n            {% if reservation_status %}\\r\\n            <td>{{reservation_status or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |list|length}}</td>\\r\\n            <td class=\\\"text-center\\\">{{data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"room_nights\\\")}}</td>\\r\\n            <td class=\\\"text-center\\\">\\r\\n                {{data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"adult\\\")}}/\\r\\n                {{data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"child\\\")}}\\r\\n            </td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"total_debit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            <td class=\\\"text-center\\\">{{frappe.format(data.result |selectattr(\\\"reservation_status\\\", \\\"equalto\\\", reservation_status) |sum(attribute=\\\"total_credit\\\"),{\\\"fieldtype\\\":\\\"Currency\\\"})}}</td>\\r\\n            {% endif %}\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n    {% endif %}\\r\\n    <tfoot>\\r\\n    {% if frappe.form_dict.get('group_by') %}\\r\\n    {% for d in data.result %}\\r\\n    {% if d.is_grand_total == 1 %}\\r\\n        <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n            <td><strong>{{d.reservation}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{(data.result | list| length) - (data.result |selectattr(\\\"indent\\\", \\\"equalto\\\", 0) |list|length)}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{d.room_nights}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{d.total_pax}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{frappe.format(d.total_debit,{\\\"fieldtype\\\":\\\"Currency\\\"})}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{frappe.format(d.total_credit,{\\\"fieldtype\\\":\\\"Currency\\\"})}}</strong></td>\\r\\n        </tr>\\r\\n    {% endif %}\\r\\n    {% endfor %}\\r\\n    {% else %}\\r\\n    {% for d in data.result %}\\r\\n    {% if d.is_total_row == 1 %}\\r\\n        <tr style=\\\"border-top:dotted 1px #000000\\\">\\r\\n            <td><strong>{{_(\\\"Grand Total\\\")}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{(data.result | list| length) - (data.result |selectattr(\\\"indent\\\", \\\"equalto\\\", 0) |list|length)}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{d.room_nights}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{d.total_pax}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{frappe.format(d.total_debit,{\\\"fieldtype\\\":\\\"Currency\\\"})}}</strong></td>\\r\\n            <td class=\\\"text-center\\\"><strong>{{frappe.format(d.total_credit,{\\\"fieldtype\\\":\\\"Currency\\\"})}}</strong></td>\\r\\n        </tr>\\r\\n    {% endif %}\\r\\n    {% endfor %}\\r\\n    {% endif %}\\r\\n    </tfoot>\\r\\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-05 10:38:33.913161",
  "module": "eDoor",
  "name": "Reservation List Report",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Chart\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"w-full my-2 px-3\\\">\\n    <div class=\\\"row w-full\\\">\\n        <div class=\\\"col-3 px-2\\\">\\n<div class=\\\"shadow-sm p-3 bg-light rounded\\\">\\n<h5>Reservation</h5>\\n<div id=\\\"arrival_stay_over_departure\\\" class=\\\"w-full flex justify-content-center\\\" style=\\\"height:200px;\\\"></div>\\n</div>\\n</div>\\n<div class=\\\"col-3 px-2\\\">\\n<div class=\\\"shadow-sm p-3 bg-light rounded\\\">\\n<h5>Business Source</h5>\\n<div id=\\\"business_source_chart\\\"  style=\\\"height:200px;\\\"></div>\\n</div>\\n</div>\\n<div class=\\\"col-3 px-2\\\">\\n<div class=\\\"shadow-sm p-3 bg-light rounded\\\">\\n<h5>Room Type</h5>\\n<div id=\\\"room_type_chart\\\"  style=\\\"height:200px;\\\"></div>\\n</div>\\n</div>\\n<div class=\\\"col-3 px-2\\\">\\n<div class=\\\"shadow-sm p-3 bg-light rounded\\\">\\n<h5>Reservation Type</h5>\\n<div id=\\\"reservation_type_chart\\\" class=\\\"w-full flex justify-content-center\\\"  style=\\\"height:200px;\\\"></div>\\n</div>\\n </div>\\n </div>\\n</div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\n    set data = frappe.call(\\\"edoor.api.frontdesk.get_dashboard_data\\\",property=doc.name,date=frappe.form_dict.get(\\\"date\\\"),room_type_id=(frappe.form_dict.get(\\\"room_type_id\\\") or ''))\\n%}\\n{% set total_res = (data.arrival|int or 0) + (data.stay_over|int or 0) + (data.departure|int or 0) %}\\n{% set total_res_active = (data.arrival|int or 0) + (data.stay_over|int or 0) %}\\n<div class=\\\"row px-3\\\">\\n    <div class=\\\"col-4 p-2\\\">\\n<div class=\\\"shadow-sm p-3 bg-light  rounded\\\">\\n  <div class=\\\"card-body \\\">\\n    <h5 class=\\\"card-title\\\">Summary</h5>\\n    <h6 class=\\\"card-subtitle mb-2 text-muted\\\"> Reservation {{total_res_active}} </h6>\\n    <div class=\\\"row\\\">\\n    <div class=\\\"col lh-1 border-end\\\" style=\\\"color: rgb(236, 134, 75);\\\">\\n        <h3 class=\\\"mb-0 arrival\\\" >{{data.arrival|int}}</h3>\\n        <span>Arrival</span>\\n    </div>\\n    <div class=\\\"col lh-1 border-end\\\" style=\\\"color:#50ac58;\\\">\\n        <h3 class=\\\"mb-0 stay_over\\\">{{data.stay_over|int}}</h3>\\n        <span>Stay Over</span>\\n    </div>\\n        <div  class=\\\"col lh-1 border-end\\\" style=\\\"color: rgb(79, 79, 79);\\\">\\n        <h3 class=\\\"mb-0 departure\\\">{{data.departure|int}}</h3>\\n        Departure\\n    </div>\\n        <div style=\\\"color:rgb(237, 99, 150);\\\" class=\\\"col lh-1\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.unassign_room | int}}</h3>\\n       Unassign Room\\n    </div>\\n\\n    </div>\\n  </div>\\n  <div class=\\\"col-12 mt-2\\\">\\n    <div class=\\\"progress rounded-0 mt-2\\\" style=\\\"height:3px\\\">\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment one\\\" style=\\\"width:{{(data.arrival|int/(total_res or 1))*100}}%;background-color: rgb(236, 134, 75);\\\" aria-valuenow=\\\"15\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">\\n     \\n  </div>\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment two\\\" style=\\\"width:{{(data.stay_over|int/(total_res or 1))*100}}%;background:#50ac58;\\\" aria-valuenow=\\\"10\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">\\n\\n  </div>\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment three\\\" style=\\\"width:{{(data.departure|int/(total_res or 1))*100}}%;background:rgb(79, 79, 79);\\\" aria-valuenow=\\\"20\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">\\n    \\n  </div>\\n</div>\\n</div>\\n</div>\\n</div>\\n<div class=\\\"col-6 p-2\\\">\\n    <div class=\\\"shadow-sm p-3 bg-light rounded\\\">\\n  <div class=\\\"card-body\\\" >\\n    <h5 class=\\\"card-title\\\">Occupancy</h5>\\n    <h6 class=\\\"card-subtitle mb-2 text-muted\\\">Total Room  : {{(data.total_room|int)}}</h6>\\n    <div class=\\\"row\\\">\\n    <div class=\\\"col lh-1 border-end text-nowrap\\\" style=\\\"color:#50ac58;\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.total_room_occupy|int}}</h3>\\n        Occupy  {{\\\"%.2f\\\"|format(data.occupancy)}}% \\n    </div>\\n    <div class=\\\"col lh-1 border-end text-nowrap\\\" style=\\\"color: rgb(236, 134, 75);\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.total_room_vacant | int}}</h3>\\n        Vacant Room {{\\\"%.2f\\\"|format((data.total_room_vacant / ( data.total_room - ( 0 if frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"calculate_room_occupancy_include_room_block\\\") ==1 else room_block|length) )  )*100)}}%\\n    </div>\\n     <div class=\\\"col lh-1 border-end text-nowrap\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.total_room_block | int}}</h3>\\n        Room Block  {{\\\"%.2f\\\"|format((data.total_room_block / ( data.total_room - ( 0 if frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"calculate_room_occupancy_include_room_block\\\") ==1 else room_block|length)) )*100)}}%\\n    </div>\\n            <div style=\\\"color:rgb(130, 130, 5);\\\"  class=\\\"col lh-1 border-end\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.total_no_show|int}}</h3>\\n        No Show\\n    </div>\\n     <div style=\\\"color:rgb(237, 99, 150);\\\" class=\\\"col lh-1 border-end\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.total_cancelled | int}}</h3>\\n        Cancell\\n    </div>\\n     <div style=\\\"color:rgb(255, 0, 0);\\\" class=\\\"col lh-1\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.total_void | int}}</h3>\\n        Void\\n    </div>\\n    </div>\\n  </div>\\n  <div class=\\\"col-12 mt-2\\\">\\n    <div class=\\\"progress rounded-0 mt-2\\\" style=\\\"height:3px;\\\">\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment one\\\" style=\\\"width: {{(data.total_room_occupy|int / data.total_room|int)*100}}%;background:#50ac58\\\" aria-valuenow=\\\"15\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">\\n      \\n  </div>\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment two\\\" style=\\\"width: {{(data.total_room_vacant|int / data.total_room|int )*100}}%;background-color: rgb(236, 134, 75);\\\" aria-valuenow=\\\"15\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\"></div>\\n  <div class=\\\"progress-bar bg-dark\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment \\\" style=\\\"width: {{(data.total_room_block|int / data.total_room|int )*100}}%\\\" aria-valuenow=\\\"15\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\"></div>\\n</div>\\n</div>\\n</div>\\n</div>\\n<div class=\\\"col-2 p-2\\\">\\n<div class=\\\"shadow-sm p-3 bg-light rounded \\\">\\n  <div class=\\\"card-body\\\">\\n    <h5 class=\\\"card-title\\\">\\nTransportation\\n</h5>\\n    <h6 class=\\\"card-subtitle mb-2 text-muted\\\">Total: {{data.pick_up|int + data.drop_off|int}}</h6>\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col lh-1 border-end\\\" style=\\\"color:#50ac58\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.pick_up | int}}</h3>\\n        Pick Up\\n    </div>\\n        <div class=\\\"col lh-1\\\">\\n        <h3 class=\\\"mb-0\\\">{{data.drop_off | int}}</h3>\\n      Drop Off\\n    </div>\\n    </div>\\n  </div>\\n  <div class=\\\"col-12 mt-2\\\">\\n     <div class=\\\"progress rounded-0 mt-2\\\" style=\\\"height:3px\\\">\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment two\\\" style=\\\"width:{{(data.pick_up|int/((data.pick_up|int + data.drop_off|int) or 1))*100}}%;background:#50ac58;\\\" aria-valuenow=\\\"10\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">\\n    \\n  </div>\\n  <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" aria-label=\\\"Segment three\\\" style=\\\"width:{{(data.drop_off|int/((data.pick_up|int + data.drop_off|int) or 1))*100}}%;background:rgb(79, 79, 79);\\\" aria-valuenow=\\\"20\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">\\n     \\n  </div>\\n</div>\\n  </div>\\n</div>\\n</div>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set date = frappe.form_dict.get('date')%}\\n{%set total_room = frappe.db.sql(\\\"select count(name) as total_room from tabRoom where property='{}' \\\".format(doc.name),as_dict=1)[0][\\\"total_room\\\"]%}\\n{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        arrival_mode,\\n        reservation_type,\\n        reference_number,\\n        DATE_FORMAT(reservation_date, '%Y-%m-%d')  as reservation_date,\\n        guest,\\n        guest_name, \\n        business_source, \\n        DATE_FORMAT(arrival_date, '%Y-%m-%d') as arrival_date,\\n        DATE_FORMAT(departure_date, '%Y-%m-%d') as departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        adult,\\n        child,\\n        total_room_rate,\\n        is_active_reservation,\\n        departure_mode,\\n        arrival_flight_number,\\n        departure_flight_number,\\n        pickup_location,\\n        drop_off_location,\\n        pickup_driver,\\n        drop_off_driver,\\n        pickup_driver_name,\\n        drop_off_driver_name,\\n        pickup_driver_phone_number,\\n        drop_off_driver_phone_number,\\n        pickup_note,\\n        drop_off_note,\\n        require_pickup,\\n        require_drop_off,\\n        require_pickup + require_drop_off as is_pickup_drop_off\\n    from `tabReservation Stay` \\n    where \\n        name in (\\n            select reservation_stay from `tabReservation Room Rate` r\\n            where \\n            \\n                property= '{0}' and \\n                date = '{1}'  and \\n                r.room_type_id = if('{2}'='',r.room_type_id,'{2}')\\n            )\\n        or name in ( \\n        select \\n            reservation_stay \\n        from `tabRoom Occupy` r\\n        where \\n            property= '{0}' and \\n            date = '{1}'  and \\n            r.room_type_id = if('{2}'='',r.room_type_id,'{2}')        ) \\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date'),\\n            \\\"\\\" if (frappe.form_dict.get('room_type_id') or \\\"\\\") ==\\\"null\\\" else frappe.form_dict.get('room_type_id')\\n        ),as_dict=1)\\n%} \\n{%\\n    set room_block = frappe.db.sql(\\\"\\n        select\\n            name, \\n            start_date,\\n            block_date,    \\n            end_date,\\n            is_unblock,\\n            room_number,\\n            room_type,\\n            reason\\n            \\n        from `tabRoom Block` \\n        where \\n        property = '{0}' and \\n        name in (\\n            select  stay_room_id from `tabRoom Occupy` r\\n            where \\n                type='Block' and \\n                date = '{1}' and \\n                property = '{0}' and \\n                 r.room_type_id = if('{2}'='',r.room_type_id,'{2}')\\n            \\n        ) \\n    \\\".format(\\n      doc.name,\\n            frappe.form_dict.get('date'),\\n            \\\"\\\" if (frappe.form_dict.get('room_type_id') or \\\"\\\") ==\\\"null\\\" else frappe.form_dict.get('room_type_id')\\n    ),as_dict=1)\\n%}\\n\\n{% set total_room = total_room - ( 0 if frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"calculate_room_occupancy_include_room_block\\\") ==1 else room_block|length) %}\\n{% set business_source = data|map(attribute='business_source')|unique|sort %}\\n{% \\n    set data_room = frappe.call(\\\"edoor.api.frontdesk.get_daily_summary_by_room_type\\\",property=doc.name,date=frappe.form_dict.get(\\\"date\\\"),room_type_id=(frappe.form_dict.get(\\\"room_type_id\\\") or ''))\\n%}\\n{%\\n     set total_room_sold = (data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1)|list| length ) or 1\\n%}\\n\\n<!-- Total -->\\n {% set total_adult = data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | map(attribute='adult') | sum %}\\n            {% set total_child = data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | map(attribute='child') | sum %}       \\n            {% set total_pick_up = data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"require_pickup\\\", \\\"equalto\\\", 1) | list | length   %} \\n            {% set total_drop_off = data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"departure_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"require_drop_off\\\", \\\"equalto\\\", 1) | list | length  %} \\n            {% set total_arrival = data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) |list| length   %} \\n            {% set total_checked_in =data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"In-house\\\") |list| length %} \\n            {% set total_stay_over = data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) |selectattr(\\\"arrival_date\\\", \\\"ne\\\",date) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | list | length %} \\n            {% set total_departure = data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"departure_date\\\", \\\"equalto\\\",date) |list| length %} \\n            {% set total_checked_out = data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"departure_date\\\", \\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Checked Out\\\") |list| length %}\\n            {% set total_no_show = data|  selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"No Show\\\") |list| length  %}\\n            {% set total_cancelled =data| selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Cancelled\\\") |list| length %}\\n            {% set total_void = data| selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Void\\\") |list| length  %}\\n            \\n            {% set total_adr = (data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) |  selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | map(attribute='adr') | sum )/((data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_status\\\",\\\"ne\\\",\\\"Checked Out\\\") | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) |list| length)or 1)  %}\\n            \\n            {% set total_sum_rate = data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | map(attribute='total_room_rate') | sum  %}\\n            {% set total_occupancy =( data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) |list| length)/total_room_sold * 100  %}\\n <div id=\\\"reservation_data\\\" style=\\\"display:none\\\">\\n     {{ data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"departure_date\\\", \\\"ne\\\", date) | list }}\\n </div>\\n{% if (data|length) >0 %}\\n<div class=\\\"row px-3\\\">\\n<div class=\\\"col-12 shadow-sm p-3 rounded\\\">\\n<ul class=\\\"nav nav-tabs\\\" id=\\\"myTab\\\" role=\\\"tablist\\\">\\n\\n  <li class=\\\"nav-item\\\" role=\\\"presentation\\\">\\n    <button class=\\\"nav-link active\\\" id=\\\"profile-tab\\\" data-bs-toggle=\\\"tab\\\" data-bs-target=\\\"#Detail\\\" type=\\\"button\\\" role=\\\"tab\\\" aria-controls=\\\"Detail\\\" aria-selected=\\\"true\\\">Detail</button>\\n  </li>  \\n  <li class=\\\"nav-item\\\" role=\\\"presentation\\\">\\n    <button class=\\\"nav-link\\\" id=\\\"home-tab\\\" data-bs-toggle=\\\"tab\\\" data-bs-target=\\\"#Summary\\\" type=\\\"button\\\" role=\\\"tab\\\" aria-controls=\\\"Summary\\\" aria-selected=\\\"false\\\">Summary</button>\\n  </li>\\n</ul>\\n<div class=\\\"tab-content p-2\\\" id=\\\"myTabContent\\\">\\n<div class=\\\"tab-pane fade show active\\\" id=\\\"Detail\\\" role=\\\"tabpanel\\\" aria-labelledby=\\\"profile-tab\\\" tabindex=\\\"0\\\">\\n        <div class=\\\"accordion\\\" id=\\\"arrivalAccordion\\\">\\n            {% set count_arrival_guest = (data | selectattr(\\\"arrival_date\\\", \\\"equalto\\\", date) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | list) | length %}\\n            <div class=\\\"accordion-item\\\">\\n                <h2 class=\\\"accordion-header\\\" id=\\\"arrivalHeading\\\">\\n                    <button class=\\\"accordion-button\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#arrivalCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"arrivalCollapse\\\">\\n                        Arrival Guest <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                           {{ count_arrival_guest }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"arrivalCollapse\\\" class=\\\"accordion-collapse collapse show\\\" aria-labelledby=\\\"arrivalHeading\\\" data-bs-parent=\\\"#arrivalAccordion\\\">\\n                    <div class=\\\"accordion-body p-0\\\">\\n                        {% if count_arrival_guest > 0 %}\\n                        <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) %}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }} </td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                  <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"accordion\\\" id=\\\"stayOverAccordion\\\">\\n            <div class=\\\"accordion-item\\\">\\n             {% set count_stay_over = (data | selectattr(\\\"arrival_date\\\", \\\"ne\\\",date) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | list) | length %}\\n                <h2 class=\\\"accordion-header\\\" id=\\\"stayOverHeading\\\">\\n                    <button class=\\\"accordion-button\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#stayOverCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"stayOverCollapse\\\">\\n                        Stay Over Guest\\n                        <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                           {{ count_stay_over }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"stayOverCollapse\\\" class=\\\"accordion-collapse collapse show\\\" aria-labelledby=\\\"stayOverHeading\\\" data-bs-parent=\\\"#stayOverAccordion\\\">\\n                    <div class=\\\"accordion-body p-0\\\">\\n                    {% if count_stay_over > 0 %}    \\n                       <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data | selectattr(\\\"arrival_date\\\", \\\"ne\\\",date) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) %}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"accordion\\\" id=\\\"departureAccordion\\\">\\n            <div class=\\\"accordion-item\\\">\\n                {% set count_departure = (data | selectattr(\\\"departure_date\\\", \\\"equalto\\\",date) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | list) | length %}\\n                <h2 class=\\\"accordion-header\\\" id=\\\"departureHeading\\\">\\n                    <button class=\\\"accordion-button\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#departureCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"departureCollapse\\\">\\n                        Departure Guest\\n                        <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                           {{ count_departure }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"departureCollapse\\\" class=\\\"accordion-collapse collapse show\\\" aria-labelledby=\\\"departureHeading\\\" data-bs-parent=\\\"#departureAccordion\\\">\\n                    <div class=\\\"accordion-body p-0\\\">\\n                            {% if count_departure > 0 %}\\n                       <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data | selectattr(\\\"departure_date\\\", \\\"equalto\\\",date) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) %}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                 <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"accordion\\\" id=\\\"unassignAccordion\\\">\\n            <div class=\\\"accordion-item\\\">\\n                  {% set count_unassign_room = (data | selectattr(\\\"reservation_status\\\", \\\"equalto\\\",\\\"Confirmed\\\") | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | list) | length %}\\n                <h2 class=\\\"accordion-header\\\" id=\\\"unassignHeading\\\">\\n                    <button class=\\\"accordion-button collapsed\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#unassignCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"unassignCollapse\\\">\\n                       Unassign Room\\n                         <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                          {{ count_unassign_room }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"unassignCollapse\\\" class=\\\"accordion-collapse collapse\\\" aria-labelledby=\\\"unassignHeading\\\" data-bs-parent=\\\"#unassignAccordion\\\">\\n                    <div class=\\\"accordion-body p-0\\\">\\n                          {% if count_unassign_room > 0 %}\\n                        <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data | selectattr(\\\"reservation_status\\\", \\\"equalto\\\",\\\"Confirmed\\\") | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) %}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                 <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"accordion\\\" id=\\\"pickupDropoffAccordion\\\">\\n            <div class=\\\"accordion-item\\\">\\n                 {% set count_upandoff = (data | selectattr(\\\"is_pickup_drop_off\\\", \\\">\\\",0) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | list) | length %}\\n                <h2 class=\\\"accordion-header\\\" id=\\\"pickupDropoffHeading\\\">\\n                    <button class=\\\"accordion-button collapsed\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#pickupDropoffCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"pickupDropoffCollapse\\\">\\n                        Pick Up / Drop Off\\n                               <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                          {{ count_upandoff }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"pickupDropoffCollapse\\\" class=\\\"accordion-collapse collapse\\\" aria-labelledby=\\\"pickupDropoffHeading\\\" data-bs-parent=\\\"#pickupDropoffAccordion\\\">\\n                    <div class=\\\"accordion-body p-0\\\">\\n                        {% if count_upandoff > 0  %}\\n                       <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th>Mode</th>\\n            <th>Flight Number</th>\\n            <th>Location</th>\\n            <th>Driver</th>\\n            <th>Driver Phone Number</th>\\n            <th class=\\\"text-end\\\">Note</th>\\n            <th class=\\\"text-center\\\">Require</th>\\n        </tr>\\n  \\n        {%for d in data | selectattr(\\\"is_pickup_drop_off\\\", \\\">\\\",0) | selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1)%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td>{{ (d.arrival_mode or d.departure_mode) or ''}}</td>\\n                <td>{{ (d.arrival_flight_number or d.departure_flight_number ) or '' }}</td>\\n                <td>{{ (d.pickup_location or d.drop_off_location ) or '' }}</td>\\n                <td>{{ (d.drop_off_driver_name or d.drop_off_driver_name ) or '' }}</td>\\n                <td>{{ (d.pickup_driver_phone_number or d.drop_off_driver_phone_number ) or '' }}</td>\\n                <td class=\\\"text-end\\\">{{ (d.pickup_note or d.drop_off_note ) or '' }}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background-color: {% if d.require_pickup %} green {% else %} red {% endif %};\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{% if d.require_pickup %}\\n    Pickup\\n{% else %}\\n    Drop off\\n{% endif %}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"accordion\\\" id=\\\"noShowCancelledAccordion\\\">\\n            <div class=\\\"accordion-item\\\">\\n                {% set count_cancelled = (data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | list) | length %}\\n                <h2 class=\\\"accordion-header\\\" id=\\\"noShowCancelledHeading\\\">\\n                    <button class=\\\"accordion-button collapsed\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#noShowCancelledCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"noShowCancelledCollapse\\\">\\n                        No Show, Cancelled & Void\\n                         <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                          {{ count_cancelled }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"noShowCancelledCollapse\\\" class=\\\"accordion-collapse collapse\\\" aria-labelledby=\\\"noShowCancelledHeading\\\" data-bs-parent=\\\"#noShowCancelledAccordion\\\">\\n                    <div class=\\\"accordion-body p-0\\\">\\n                        {% if count_cancelled > 0 %}\\n                       <table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n        </tr>\\n  \\n        {%for d in data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0)%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.adult or \\\"\\\"}} / {{d.child or \\\"0\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n               \\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                 <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{{room.room_number or ''}} {{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"accordion\\\" id=\\\"roomBlockAccordion\\\">\\n            <div class=\\\"accordion-item\\\">\\n                {% set count_room_block = (room_block | list) | length %}\\n                <h2 class=\\\"accordion-header\\\" id=\\\"roomBlockHeading\\\">\\n                    <button class=\\\"accordion-button collapsed\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#roomBlockCollapse\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"roomBlockCollapse\\\">\\n                        Room Block\\n                               <span class=\\\"badge text-bg-secondary ms-2\\\">\\n                          {{ count_room_block }}\\n                        </span>\\n                    </button>\\n                </h2>\\n                <div id=\\\"roomBlockCollapse\\\" class=\\\"accordion-collapse collapse\\\" aria-labelledby=\\\"roomBlockHeading\\\" data-bs-parent=\\\"#roomBlockAccordion\\\">\\n                    <div class=\\\"accordion-body p-0\\\">\\n                        {% if count_room_block > 0 %}\\n                        <table class='report-list occupied-001' style='width:100%' >\\n         <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Room ID</th>\\n            <th class=\\\"text-center\\\">Room</th>\\n            <th class=\\\"text-center\\\">Block Date</th>\\n            <th >Start</th>\\n            <th >Release Date</th>\\n            <th class=\\\"text-center\\\">Status</th>\\n            <th class=\\\" w-50\\\">Reason</th>\\n        </tr>\\n        {%for d in room_block %}\\n            <tr>\\n                <td class=\\\"text-center\\\" >{{loop.index}}</td>\\n                <td class=\\\"text-center\\\" >{{d.name}}</td>\\n                <td class=\\\"text-center\\\" >{{d.room_number}} / {{d.room_type}} </td>\\n                <td class=\\\"text-center\\\" >{{d.block_date}}</td>\\n                <td>{{d.start_date}}</td>\\n                <td>{{d.end_date}}</td>\\n                 <td class=\\\"text-center\\\"><span style=\\\"background-color: {% if d.is_unblock %} green {% else %} red {% endif %};\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{% if d.is_unblock %}\\n    Block\\n{% else %}\\n   UnBlock\\n{% endif %}</span></td>\\n                <td>{{d.reason or ''}}</td>\\n                \\n            </tr>\\n        {%endfor%}\\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n{%endif%}\\n</div>\\n  <div class=\\\"tab-pane fade\\\" id=\\\"Summary\\\" role=\\\"tabpanel\\\" aria-labelledby=\\\"home-tab\\\" tabindex=\\\"0\\\">\\n\\n<div class=\\\"shadow-sm p-2 bg-white border  rounded\\\">\\n<table class='report-list occupied-001' style='width:100%' >\\n       <tr>\\n        <th colspan=\\\"14\\\" class=\\\"text-center fw-bolder p-3\\\">Summary by Business Source</th>\\n    </tr>\\n        <tr>\\n            <th class=\\\"text-center\\\" >No</th>\\n            <th >Business Source</th>\\n            <th class=\\\"text-center\\\" >Room Sold</th> \\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\" >FIT / GIT</th>\\n            <th class=\\\"text-center\\\" >pick up / Drop off</th>\\n            <th class=\\\"text-center\\\" >Arrival / Checked In</th>\\n            <th class=\\\"text-center\\\" >Stay Over</th>\\n            <th class=\\\"text-center\\\">Departure / Checked Out </th>\\n            <th class=\\\"text-center\\\"> No Show </th>\\n            <th class=\\\"text-center\\\"> Cancelled / Void </th> \\n            <th class=\\\"text-end\\\">ADR</th>\\n           <th class=\\\"text-end\\\">Total Rate</th>\\n            <th class=\\\"text-center\\\">Occupancy</th>\\n        </tr>\\n        {% set sum_adult = 0 %}\\n            {%for d in business_source%}\\n            \\n                <tr>\\n                    <td class=\\\"text-center\\\" >{{loop.index}}</td>\\n                    <td >{{d}}</td>\\n                    <td class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"reservation_status\\\",\\\"ne\\\",\\\"Checked Out\\\") |list| length}}</td> \\n                    <td class=\\\"text-center\\\" >{{ data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"business_source\\\", \\\"equalto\\\", d) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | map(attribute='adult') | sum }} / \\n                    {{ data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"business_source\\\", \\\"equalto\\\", d) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | map(attribute='child') | sum }}\\n                    </td>\\n                    <td class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", \\\"FIT\\\") |list| length}}\\n                    / {{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", \\\"GIT\\\") |list| length}}\\n                    </td>\\n                    <td class=\\\"text-center\\\" >{{ data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"business_source\\\", \\\"equalto\\\", d) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"require_pickup\\\", \\\"equalto\\\", 1) | list | length }}\\n/ {{ data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"business_source\\\", \\\"equalto\\\", d) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"departure_date\\\",\\\"equalto\\\",date) | selectattr(\\\"require_drop_off\\\", \\\"equalto\\\", 1) | list | length }}</td>\\n\\n                    \\n                       <td class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) |list| length}}\\n                       / {{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"In-house\\\") |list| length}}\\n                       </td>\\n                       <td class=\\\"text-center\\\" >\\n                        {{ data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"arrival_date\\\", \\\"ne\\\",date) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | list | length  }}\\n                       </td>\\n                     <td class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"departure_date\\\", \\\"equalto\\\",date) |list| length}}\\n                       / {{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"departure_date\\\", \\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Checked Out\\\") |list| length}}\\n                       </td>\\n                       <td class=\\\"text-center\\\" >{{data| selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"No Show\\\") |list| length}}</td>\\n                      <td class=\\\"text-center\\\" >{{data|  selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Cancelled\\\") |list| length}}\\n                      / {{data|  selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Void\\\") |list| length}}\\n                      </td>\\n                      <td class=\\\"text-end\\\">{{frappe.format((data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"business_source\\\", \\\"equalto\\\", d) | map(attribute='adr')  | sum ) / ((data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"reservation_status\\\",\\\"ne\\\",\\\"Checked Out\\\") |list| length)or 1) ,{'fieldtype':'Currency'})}}       </td>\\n                      <td class=\\\"text-end\\\">\\n                     {{frappe.format(data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"business_source\\\", \\\"equalto\\\", d) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | map(attribute='total_room_rate')  | sum,{'fieldtype':'Currency'})}}       \\n                   \\n                      </td>\\n                       <td class=\\\"text-center\\\">{{\\\"%.2f\\\"|format((data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"business_source\\\",\\\"equalto\\\",d) | selectattr(\\\"reservation_status\\\",\\\"ne\\\",\\\"Checked Out\\\") |list| length)/ total_room_sold * 100 )}}%</td>\\n                        \\n                </tr>\\n            {%endfor%}\\n            <tr class=\\\"border bg-white\\\">\\n              <th class=\\\"text-center p-3\\\" colspan=\\\"2\\\" >Total :</th>\\n              <th class=\\\"text-center\\\">{{total_room_sold}}</th>\\n              <th class=\\\"text-center\\\" >{{ total_adult }} / {{ total_child }}</th>\\n              <th class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", \\\"FIT\\\") |list| length}}\\n                    / {{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", \\\"GIT\\\") |list| length}}\\n                    </th>\\n              <th class=\\\"text-center\\\" >{{ total_pick_up }} / {{ total_drop_off }}</th>\\n              <th class=\\\"text-center\\\" >{{total_arrival}} / {{ total_checked_in }} </th>\\n              <th class=\\\"text-center\\\" > {{ total_stay_over }} </th>\\n              <th class=\\\"text-center\\\" >{{ total_departure }} / {{total_checked_out}} </th>\\n              <th class=\\\"text-center\\\" >{{total_no_show}}</th>\\n              <th class=\\\"text-center\\\" >{{total_cancelled}} / {{total_void}} </th>\\n              <th class=\\\"text-end\\\" > {{frappe.format(total_adr ,{'fieldtype':'Currency'})}} </th>\\n              <th class=\\\"text-end\\\"> {{frappe.format(total_sum_rate,{'fieldtype':'Currency'})}} </th>\\n              <th class=\\\"text-center\\\">{{\\\"%.2f\\\"|format(total_occupancy)}}%</th>\\n                        \\n            </tr>\\n \\n</table>\\n</div>\\n{% set reservation_type = data|map(attribute='reservation_type')|unique|sort %}\\n<div class=\\\"shadow-sm p-2 bg-white border  rounded mt-3\\\">\\n<table class='report-list occupied-001' style='width:100%' >\\n    <tr>\\n        <th colspan=\\\"14\\\" class=\\\"text-center fw-bolder p-3\\\">Summary by Reservation Type</th>\\n    </tr>\\n        <tr>\\n            <th class=\\\"text-center\\\" >No</th> \\n            <th  >Reservation Type</th>\\n            <th class=\\\"text-center\\\" >Room Sold</th> \\n            <th class=\\\"text-center\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center\\\" >pick up / Drop off</th>\\n            <th class=\\\"text-center\\\" >Arrival / Checked In</th>\\n            <th class=\\\"text-center\\\" >Stay Over</th>\\n            <th class=\\\"text-center\\\">Departure / Checked Out </th>\\n            <th class=\\\"text-center\\\"> No Show </th>\\n            <th class=\\\"text-center\\\"> Cancelled / Void </th> \\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Rate</th>\\n            <th class=\\\"text-center\\\">Occupancy</th>\\n        </tr>\\n        {% set sum_adult = 0 %}\\n           {%for d in reservation_type%}\\n            \\n                <tr>\\n                    <td class=\\\"text-center\\\" >{{loop.index}}</td>\\n                    <td >{{d}}</td>\\n                    <td class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"reservation_status\\\",\\\"ne\\\",\\\"Checked Out\\\") |list| length}}</td> \\n                    <td class=\\\"text-center\\\" >{{ data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | map(attribute='adult') | sum }} / \\n                    {{ data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | map(attribute='child') | sum }}\\n                    </td>\\n                    <td class=\\\"text-center\\\" >{{ data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"require_pickup\\\", \\\"equalto\\\", 1) | list | length }}\\n/ {{ data | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"departure_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"require_drop_off\\\", \\\"equalto\\\", 1) | list | length }}</td>\\n\\n                    \\n                       <td class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) |list| length}}\\n                       / {{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"arrival_date\\\",\\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"In-house\\\") |list| length}}\\n                       </td>\\n                       <td class=\\\"text-center\\\" >\\n                        {{ data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"arrival_date\\\", \\\"ne\\\",date) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | list | length  }}\\n                       </td>\\n                     <td class=\\\"text-center\\\" >{{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"departure_date\\\", \\\"equalto\\\",date) |list| length}}\\n                       / {{data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"departure_date\\\", \\\"equalto\\\",date) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Checked Out\\\") |list| length}}\\n                       </td>\\n                       <td class=\\\"text-center\\\" >{{data| selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"No Show\\\") |list| length}}</td>\\n                      <td class=\\\"text-center\\\" >{{data|  selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Cancelled\\\") |list| length}}\\n                      / {{data|  selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\",0) | selectattr(\\\"reservation_status\\\", \\\"equalto\\\", \\\"Void\\\") |list| length}}\\n                      </td>\\n                      <td class=\\\"text-end\\\">\\n                          {{frappe.format((data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d) | map(attribute='adr') | sum )/ ((data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"reservation_status\\\",\\\"ne\\\",\\\"Checked Out\\\") |list| length)or 1),{'fieldtype':'Currency'})}}\\n                      </td >\\n                      <td class=\\\"text-end\\\">\\n                          {{frappe.format(data|selectattr(\\\"is_active_reservation\\\", \\\"equalto\\\", 1) | selectattr(\\\"reservation_type\\\", \\\"equalto\\\", d) | selectattr(\\\"departure_date\\\", \\\"ne\\\",date ) | selectattr(\\\"reservation_status\\\", \\\"ne\\\", \\\"Checked Out\\\") | map(attribute='total_room_rate') | sum,{'fieldtype':'Currency'})}}\\n                    \\n                      </td>\\n                       <td class=\\\"text-center\\\">{{\\\"%.2f\\\"|format((data|selectattr(\\\"is_active_reservation\\\",\\\"equalto\\\",1) | selectattr(\\\"reservation_type\\\",\\\"equalto\\\",d) | selectattr(\\\"reservation_status\\\",\\\"ne\\\",\\\"Checked Out\\\") |list| length)/total_room_sold * 100 )}}%\\n</td>\\n                        \\n                </tr>\\n            {%endfor%}\\n           \\n                        <tr class=\\\"border bg-white\\\">\\n              <th class=\\\"text-center p-3\\\" colspan=\\\"2\\\" >Total :</th>\\n              <th class=\\\"text-center\\\">{{total_room_sold}}</th>\\n              <th class=\\\"text-center\\\" >{{ total_adult }} / {{ total_child }}</th>\\n              <th class=\\\"text-center\\\" >{{ total_pick_up }} / {{ total_drop_off }}</th>\\n              <th class=\\\"text-center\\\" >{{total_arrival}} / {{ total_checked_in }} </th>\\n              <th class=\\\"text-center\\\" > {{ total_stay_over }} </th>\\n              <th class=\\\"text-center\\\" >{{ total_departure }} / {{total_checked_out}} </th>\\n              <th class=\\\"text-center\\\" >{{total_no_show}}</th>\\n              <th class=\\\"text-center\\\" >{{total_cancelled}} / {{total_void}} </th>\\n              <th class=\\\"text-end\\\" > {{frappe.format(total_adr ,{'fieldtype':'Currency'})}} </th>\\n              <th class=\\\"text-end\\\"> {{frappe.format(total_sum_rate,{'fieldtype':'Currency'})}} </th>\\n              <th class=\\\"text-center\\\">{{\\\"%.2f\\\"|format(total_occupancy)}}%</th>\\n                        \\n            </tr>\\n</table>\\n</div>\\n<!-- By Room Type -->\\n<div class=\\\"shadow-sm p-2 bg-white border  rounded mt-3\\\">\\n   \\n<table class='report-list occupied-001' style='width:100%' >\\n    <tr>\\n        <th colspan=\\\"15\\\" class=\\\"text-center fw-bolder p-3\\\">Summary by Room Type</th>\\n    </tr>\\n    {% if data_room | length > 0 %} \\n        <tr>\\n            <th class=\\\"text-center px-1\\\" >No</th> \\n            <th >Room Type</th>\\n            <th class=\\\"text-center px-1\\\" >Total Room</th>\\n            <th class=\\\"text-center px-1\\\" >Room Sold</th> \\n            <th class=\\\"text-center px-1\\\">PAX(A/C)</th>\\n            <th class=\\\"text-center px-1\\\" >FIT / GIT</th>\\n            <th class=\\\"text-center px-1\\\" >pick up / Drop off</th>\\n            <th class=\\\"text-center px-1\\\" >Arrival / Checked In</th>\\n            <th class=\\\"text-center px-1\\\" >Stay Over</th>\\n            <th class=\\\"text-center px-1\\\">Departure / Checked Out </th>\\n            <th class=\\\"text-center px-1\\\"> No Show </th>\\n            <th class=\\\"text-center px-1\\\"> Cancelled / Void </th> \\n            <th class=\\\"text-end px-1\\\">ADR</th>\\n            <th class=\\\"text-center px-1\\\">Total Rate</th>\\n            <th class=\\\"text-center px-1\\\">Occupancy</th>\\n        </tr>\\n        {% set sum_adult = 0 %}\\n           {%for d in data_room%}\\n                <tr>\\n                    <td class=\\\"text-center\\\" >{{loop.index}}</td>\\n                    <td title=\\\"{{d.room_type}}\\\" >{{d.room_type_alias}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.toal_room |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.total_room_sold |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.adult |int}} / {{d.child |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.fit |int}} / {{d.git |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.pick_up |int}} / {{d.drop_off |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.arrival |int}} / {{d.checked_in |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.stay_over |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.departure |int}} / {{d.checked_out |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.no_show |int}}</td>\\n                    <td class=\\\"text-center\\\" >{{d.cancelled |int}} / {{d.void |int}}</td>\\n                    <td class=\\\"text-end\\\" >{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                    <td class=\\\"text-end\\\" >{{frappe.format(d.total_rate,{'fieldtype':'Currency'})}}</td>\\n                    <td class=\\\"text-center\\\" > {{\\\"%.2f\\\"|format(d.total_room_sold /((data_room| map(attribute='total_room_sold') | sum) or 1 ) * 100 )}} % </td>\\n                </tr>\\n            {%endfor%}\\n              <tr class=\\\"border bg-white\\\">\\n              <th class=\\\"text-center p-3\\\" colspan=\\\"2\\\" >Total :</th>\\n              <th class=\\\"text-center\\\" >{{data_room| map(attribute='toal_room') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='total_room_sold') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='adult') | sum | int}} / {{data_room| map(attribute='child') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='fit') | sum | int}} / {{data_room| map(attribute='git') | sum |int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='pick_up') | sum | int}} / {{data_room| map(attribute='drop_off') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='arrival') | sum | int}} / {{data_room| map(attribute='checked_in') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='stay_over') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='departure') | sum | int}} / {{data_room| map(attribute='checked_out') | sum | int}} </th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='no_show') | sum | int}}</th>\\n                    <th class=\\\"text-center\\\" >{{data_room| map(attribute='cancelled') | sum | int}} / {{data_room| map(attribute='void') | sum | int}} </th>\\n                    <th class=\\\"text-end\\\" >{{ frappe.format(((\\n    data_room|selectattr(\\\"departure\\\", \\\"equalto\\\", 0)|selectattr(\\\"checked_out\\\", \\\"equalto\\\", 0)|map(attribute='adr')|sum\\n) / (\\n    (data_room|selectattr(\\\"departure\\\", \\\"equalto\\\", 0)|selectattr(\\\"checked_out\\\", \\\"equalto\\\", 0)|list|length) or 1\\n)), {'fieldtype': 'Currency'}) }}\\n\\n\\n</th>\\n                    <th class=\\\"text-end\\\" >{{frappe.format((data_room| map(attribute='total_rate') | sum),{'fieldtype':'Currency'})}}</th>\\n                    <th class=\\\"text-center\\\" > {{\\\"%.2f\\\"|format(((data_room| selectattr(\\\"departure\\\", \\\"equalto\\\",0 )|selectattr(\\\"checked_out\\\", \\\"equalto\\\",0 )| map(attribute='total_room_sold') | sum) or 1 ) / ((data_room| selectattr(\\\"departure\\\", \\\"equalto\\\",0 )|selectattr(\\\"checked_out\\\", \\\"equalto\\\",0 )| map(attribute='total_room_sold') | sum) or 1 ) * 100 )}}% </th>\\n              </tr>\\n              {% else %}\\n<tr>\\n<td>\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n</td>\\n</tr>\\n\\n{% endif %}\\n              \\n</table>\\n</div>\\n</div>\\n</div>\\n</div>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Chart Code\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set reservation_by_room_type=frappe.db.sql(\\\"select room_type_alias,room_type_id, count(name) as total from `tabRoom Occupy` where type='reservation' and is_departure=0 and property='{0}' and date='{1}' and room_type_id=if('{2}'='',room_type_id,'{2}') group by room_type_alias,room_type_id\\\".format(doc.name,frappe.form_dict.get('date'),frappe.form_dict.get('room_type_id')),as_dict=1) %}\\n<div id=\\\"reservation_by_room_type_id\\\" class=\\\"d-none\\\">\\n    {{ reservation_by_room_type }}\\n</div>\\n\\n<script>\\n  \\nlet reservation_data = document.querySelector(\\\"#reservation_data\\\").textContent;\\nreservation_data = reservation_data.replaceAll(\\\"'\\\",'\\\"').replaceAll(': None,',': \\\"\\\",')\\nreservation_data = JSON.parse(reservation_data)\\n//reservation type\\nconst reservation_chart_data = {\\n    labels:[...new Set(reservation_data.map(r=>r.reservation_type))]\\n}\\n \\n \\nlet reservation_chart_dataset =[]\\n\\nreservation_chart_data.labels.map(r=>{\\n   reservation_chart_dataset.push(reservation_data.filter(x=>x.reservation_type==r).length) \\n})\\n    \\n\\nreservation_chart_data.datasets=[\\n    {values: reservation_chart_dataset}\\n]\\nconst reservation_type_chart = new frappe.Chart(\\\"#reservation_type_chart\\\", {  // or a DOM element,                                        // new Chart() in case of ES6 module with above usage\\n    data: reservation_chart_data,\\n    type: 'pie',\\n    height: 200,\\n    valuesOverPoints: 1,\\n    colors:[\\\"red\\\",\\\"green\\\"]\\n})\\n//end reservation type\\n\\n// business_source\\nconst business_source_chart_data = {\\n    labels:[...new Set(reservation_data.map(r=>r.business_source))]\\n}\\n \\n \\nlet business_source_chart_dataset =[]\\n\\nbusiness_source_chart_data.labels.map(r=>{\\n   business_source_chart_dataset.push(reservation_data.filter(x=>x.business_source==r).length) \\n})\\n    \\n\\nbusiness_source_chart_data.datasets=[\\n    {values: business_source_chart_dataset}\\n]\\nconst business_source_type_chart = new frappe.Chart(\\\"#business_source_chart\\\", {  // or a DOM element,                                        // new Chart() in case of ES6 module with above usage\\n    data: business_source_chart_data,\\n    type: 'bar',\\n    height: 200,\\n    valuesOverPoints: 1,\\n    colors:[\\\"#7cd6fd\\\",\\\"green\\\"]\\n})\\n// business_source end\\n\\n// room_type_alias\\nlet room_type_alias_data = document.querySelector(\\\"#reservation_by_room_type_id\\\").textContent;\\nroom_type_alias_data = room_type_alias_data.replaceAll(\\\"'\\\",'\\\"').replaceAll(': None,',': \\\"\\\",')\\nroom_type_alias_data = JSON.parse(room_type_alias_data)\\nconst room_type_chart_data = {\\n    labels:room_type_alias_data.map(r=>r.room_type_alias)\\n}\\n\\n\\nroom_type_chart_data.datasets=[\\n    {values:room_type_alias_data.map(r=>r.total)}\\n]\\nconst room_type_type_chart = new frappe.Chart(\\\"#room_type_chart\\\", {  // or a DOM element,                                        // new Chart() in case of ES6 module with above usage\\n    data: room_type_chart_data,\\n    type: 'bar',\\n    height: 200,\\n    valuesOverPoints: 1,\\n    colors:[\\\"#7cd6fd\\\",\\\"green\\\"]\\n})\\n//arrival stay over departure \\nconst arrival= parseInt(document.querySelector(\\\".arrival\\\").textContent)\\nconst stay_over= parseInt(document.querySelector(\\\".stay_over\\\").textContent)\\nconst departure= parseInt(document.querySelector(\\\".departure\\\").textContent)\\n \\nconst chart2 = new frappe.Chart(\\\"#arrival_stay_over_departure\\\", {  // or a DOM element,                                        // new Chart() in case of ES6 module with above usage\\n    data: {\\n    labels: [\\\"Arrival\\\",\\\"Stay Over\\\",\\\"Departure\\\"],\\n    datasets: [\\n        {\\n            values: [ arrival, stay_over, departure]\\n        }\\n    ]},\\n    type: 'pie', // or 'bar', 'line', 'scatter', 'pie', 'percentage'\\n    height: 200,\\n    valuesOverPoints: 1,\\n    colors: ['#EC864B', '#29CD42','#4F4F4F']\\n})\\n\\n\\n\\n\\n\\n</script>\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-27 14:32:28.125140",
  "module": "eDoor",
  "name": "Daily Property Data Summary",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div>\\t\\n   \\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Conflict Room\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\n                with a as (select \\n                                room_id,\\n                                date \\n                        from `tabTemp Room Occupy` \\n                        where \\n                                ifnull(room_id,'')!='' and \\n                                is_departure=0 and date>='{0}' and \\n                                type='Reservation' and \\n                                reservation_status!='Checked Out' \\n                        group by \\n                                date,\\n                                room_id \\n                        having count(room_id)>1)\\n                ,b as (select distinct \\n                                reservation_stay \\n                        from `tabTemp Room Occupy` \\n                        where \\n                                room_id in(select room_id from a) and \\n                                date in (select date from a))\\n                        select * from `tabReservation Stay` where name in (select reservation_stay from b)\\n\\\".format(doc.name,\\n        frappe.form_dict.get('date')\\n        ),as_dict=1)%}\\n\\n<div style=\\\"font-size:16px;margin-top:7px\\\"><strong>{{_(\\\"Conflict Room Assignment\\\")}}</strong></div>\\n {% if data %}\\n<table class='report-list occupied-001' style=\\\"width:100%;margin-top:7px;\\\">\\n        <tr>\\n            <th class=\\\"text-center\\\">{{_(\\\"No.\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Res #\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Stay #\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Type\\\")}}</th>\\n            <th>{{_(\\\"Res Date\\\")}}</th>\\n            <th>{{_(\\\"Arrival Date\\\")}}</th>\\n            <th>{{_(\\\"Departure Date\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Room Night\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"Room\\\")}}</th>\\n            <th>{{_(\\\"Guest\\\")}}</th>\\n            <th>{{_(\\\"Source\\\")}}</th>\\n            <th class=\\\"text-end nowrap\\\">{{_(\\\"ADR\\\")}}</th>\\n            <th class=\\\"text-end nowrap\\\">{{_(\\\"Total Room Rate\\\")}}</th>\\n            <th class=\\\"text-end nowrap\\\">{{_(\\\"Status\\\")}}</th>\\n        </tr>\\n        {% for d in data  %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation or ''}}</a></td>\\n            <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name or ''}}</a></td>\\n            <td class=\\\"text-center\\\">{{d.reservation_type or ''}}</td>\\n            <td>{{frappe.format(d.reservation_date or '',{'fieldtype':'Date'})}}</td>\\n            <td> {{frappe.format(d.arrival_date or '',{'fieldtype':'Date'})}}</td>\\n            <td> {{frappe.format(d.departure_date or '',{'fieldtype':'Date'})}}</td>\\n            <td class=\\\"text-center\\\">{{d.room_nights or 0}}</td>\\n            <td class=\\\"text-center\\\">{{d.room_type_alias or ''}}/{{d.rooms or ''}}</td>\\n            <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name or ''}}</a></td>\\n            <td>{{d.business_source or ''}}</td>\\n            <td class=\\\"text-end nowrap\\\">{{frappe.format(d.adr or '',{'fieldtype':'Currency'})}}</td>\\n            <td class=\\\"text-end nowrap\\\">{{frappe.format(d.total_room_rate or '',{'fieldtype':'Currency'})}}</td>\\n            <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n        </tr>\\n        {% endfor %}\\n</table>\\n{% else %}\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n    </div>\\n    {% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Over Booking Reservation\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\r\\n                with a as (select \\r\\n                                room_type,\\r\\n                                room_type_id,\\r\\n                                count(name) as total_room \\r\\n                from `tabRoom` \\r\\n                group by room_type_id)\\r\\n                ,b as (select \\r\\n                                sum(type='Reservation') as total_booking, \\r\\n                                sum(type='Block') as total_block, \\r\\n                                room_type_id,date \\r\\n                from `tabTemp Room Occupy` \\r\\n                group by \\r\\n                                date,\\r\\n                                room_type_id)\\r\\n                select *, \\r\\n                                (b.total_booking-a.total_room) as total_over_booking,\\r\\n                                (a.total_room-b.total_block) as total_available \\r\\n                                \\r\\n                from a \\r\\n                inner join b on a.room_type_id = b.room_type_id \\r\\n                where \\r\\n                                b.total_booking > (a.total_room-b.total_block) \\r\\n                order by \\r\\n                                b.date,\\r\\n                                a.room_type\\r\\n\\r\\n\\\".format(doc.name\\r\\n        ),as_dict=1)%}\\r\\n        \\r\\n<div style = \\\"font-size:16px;margin-top:15px\\\"><strong>{{_(\\\"Over Booking Reservation\\\")}}</strong></div>\\r\\n\\r\\n{% if data %}\\r\\n<table class='report-list occupied-001' style=\\\"width:100%;margin-top:7px;\\\">\\r\\n    <tr>\\r\\n        <th class=\\\"text-center\\\">{{_(\\\"No.\\\")}}</th>\\r\\n        <th>{{_(\\\"Room Type\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Room\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Block\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Available\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Booking\\\")}}</th>\\r\\n        <th>{{_(\\\"Total Over Booking\\\")}}</th>\\r\\n    </tr>\\r\\n    {% for date in data | map(attribute='date') | unique | list |sort %}\\r\\n    <tr>\\r\\n        <td><strong><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage({action:'view_property_data_sumary_by_date', date:'{{date}}'}, '*')\\\">{{frappe.format(date,{'fieldtype':'Date'})}}</a></strong></td>\\r\\n        <td></td>\\r\\n        <td></td>\\r\\n        <td></td>\\r\\n        <td></td><td></td>\\r\\n        <td></td>\\r\\n    </tr>\\r\\n        {% for d in data | selectattr('date', 'equalto', date) %}\\r\\n            <tr>\\r\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage({action:'view_property_data_sumary_by_date', date:'{{d.date}}',room_type_id:'{{d.room_type_id}}',room_type:'{{d.room_type}}'}, '*')\\\">{{d.room_type}}</a></td>\\r\\n                <td>{{d.total_room }}</td>\\r\\n                <td>{{d.total_block | round | int}}</td>\\r\\n                <td>{{d.total_available | round | int}}</td>\\r\\n                <td>{{d.total_booking | round | int}}</td>\\r\\n                <td>{{d.total_over_booking | round | int}}</td>\\r\\n            </tr>\\r\\n        {% endfor %}\\r\\n    {% endfor %}\\r\\n</table>\\r\\n{% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n    <div class=\\\"isemtyIcon\\\"></div> \\r\\n    <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {% endif %}\\r\\n    \"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-25 22:31:40.110472",
  "module": "eDoor",
  "name": "eDoor Conflict Room Assignment and Over Booking Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\r\n*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 0px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.print-format .table-bordered {\r\n    border: 0!important;\r\n    margin-top: 10px!important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: 1px!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\nhr{\r\n  border-bottom: solid 1px #000;\r\n  border-top: solid 0px #000;\r\n    margin: 0px;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.border{\r\n    border-bottom:solid 1px #000!important;\r\n    padding:0px!important;\r\n    width:100px!important;\r\n}\r\n\r\n.print-format td, .print-format th{\r\n    padding: 7px 0px!important;\r\n}\r\n\r\n.print-format .table-bordered td, .print-format .table-bordered th{\r\n    border:1px solid #000!important;\r\n    padding:6px 10px!important;\r\n}\r\n",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center><h1>Guest Registration Card</h1></center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_stay = frappe.db.sql(\\\"\\n                                select rs.rooms, \\n                                rs.room_types, \\n                                rs.arrival_date, \\n                                rs.departure_date, \\n                                rs.adult, \\n                                rs.child,\\n                                rs.room_nights, \\n                                rs.guest_name,\\n                                rs.name,\\n                                rs.business_source,\\n                                rs.reference_number\\n                            from  `tabReservation Stay` rs \\n                        where rs.name = '{0}'\\n                        \\n\\\".format(doc.name\\n        ),as_dict=1)%}\\n\\n<table style=\\\"width:100%\\\">\\n{% for rs in reservation_stay %}\\n    <tr>\\n        <td width=\\\"100px\\\">{{_(\\\"Reservation No.\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.name or ''}}</td>\\n        <td width=\\\"100px\\\">{{_(\\\"Check-in Date\\\")}}</td>\\n        <td class = \\\"border\\\">: {{frappe.format(rs.arrival_date,{'fieldtype':'Date'})}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"100px\\\">{{_(\\\"Reference No.\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.reference_number or ''}}</td>\\n        <td width=\\\"100px\\\">{{_(\\\"Check-out Date\\\")}}</td>\\n        <td class = \\\"border\\\">: {{frappe.format(rs.departure_date,{'fieldtype':'Date'})}}</td>\\n    </tr>\\n    \\n    <tr>\\n        <td width=\\\"100px\\\">{{_(\\\"Roon No.\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.rooms or ''}}</td>\\n        <td width=\\\"100px\\\">{{_(\\\"Room Nights\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.room_nights}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"100px\\\">{{_(\\\"Roon Type\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.room_types or ''}}</td>\\n        <td width=\\\"100px\\\">{{_(\\\"No of Person\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.adult or 0}} / {{rs.child or 0}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"100px\\\">{{_(\\\"Business Source\\\")}}</td>\\n        <td class = \\\"border\\\">: {{rs.business_source or ''}}</td>\\n        <td></td>\\n        <td></td>\\n    </tr>\\n {% endfor %}   \\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set reservation_stay = frappe.db.sql(\\\"\\n                                select rs.rooms, \\n                                rs.room_types, \\n                                rs.arrival_date, \\n                                rs.departure_date, \\n                                rs.adult, \\n                                rs.child,\\n                                rs.room_nights, \\n                                rs.name,\\n                                rs.reference_number\\n                            from `tabReservation Stay` rs\\n                            where rs.name = '{0}'\\n                        \\n                           \\n\\\".format(doc.name,\\n\\n        ),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered\\\" style=\\\"margin-top:150px\\\">\\n\\n{% set c = frappe.get_doc(\\\"Customer\\\",frappe.form_dict.get('customer')) %}\\n{% for rs in reservation_stay %}\\n    <tr>\\n        <td>{{_(\\\"Title:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Guest Name:\\\")}}</td>\\n        <td>{{c.customer_name_en or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Address:\\\")}}</td>\\n        <td>{{c.province or ''}} , {{c.country or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"City:\\\")}}</td>\\n        <td>{{c.province or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width=\\\"300px\\\">{{_(\\\"Country:\\\")}}</td>\\n        <td width=\\\"400px\\\">{{c.country or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Email:\\\")}}</td>\\n        <td>{{c.email_address or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"Phone:\\\")}}</td>\\n        <td>{{c.phone_number or ''}} / {{c.phone_number_2 or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td colspan=\\\"2\\\"><strong>{{_(\\\"Identity Information\\\")}}</strong></td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Type:\\\")}}</td>\\n        <td>{{c.identity_type or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Expired Date:\\\")}}</td>\\n        <td>{{ \\\"{}-{}\\\".format( (c.expired_date|string).split(\\\"-\\\")[1],(c.expired_date|string).split(\\\"-\\\")[0])  if   c.expired_date else \\\"\\\" }}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Number:\\\")}}</td>\\n        <td>{{c.id_card_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td>{{_(\\\"ID Card Country:\\\")}}</td>\\n        <td></td>\\n    </tr>\\n{% endfor %}\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<table style=\\\"width:100%;margin-top:20px\\\" >\\n  <tr>\\n      <td width=\\\"150\\\">{{_(\\\"Check-in By\\\")}} </td>\\n      <td class=\\\"border\\\">:</td>\\n      <td width=\\\"50px\\\"></td>\\n      <td width=\\\"150\\\">{{_(\\\"Guest's Sign\\\")}} </td>\\n      <td class=\\\"border\\\">:</td>\\n  </tr>  \\n</table>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-20 15:30:58.639819",
  "module": "eDoor",
  "name": "eDoor Guest Registration Card",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation Stay",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\n    <h2>Reservation Stay Detail</h2>\\n    <h2>{{doc.name}}</h2>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Working Day Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set s = frappe.get_doc(\\\"Cashier Shift\\\",doc.cashier_shift) %}\\n\\n<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Working Day Information\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width: 100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='150px'>{{_(\\\"Working Day\\\")}}</td>\\n        <td width='160px'>: {{doc.working_day or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Working Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.working_date, {'fieldtype': 'Date'}) }}</td>\\n    </tr>\\n    <tr>\\n        <td width='150px'>{{_(\\\"Cashier Shift\\\")}}</td>\\n        <td width='160px'>: {{doc.cashier_shift or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Shift\\\")}}</td>\\n        <td width='160px'>: {{s.shift_name or ''}}</td>\\n\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Property\\\")}}</td>\\n        <td width='160px'>: {{doc.property or ''}}</td>\\n        \\n    </tr>    \\n\\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Guest Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Guest Information\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width: 100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='180px'>{{_(\\\"Guest\\\")}}</td>\\n        <td width='160px'>: {{doc.guest_name or ''}}</td>\\n    \\n        <td width='150px'>{{_(\\\"Nationality\\\")}}</td>\\n        <td width='160px'>: {{doc.nationality or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Phone\\\")}}</td>\\n        <td width='160px'>: {{doc.guest_phone_number or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Email\\\")}}</td>\\n        <td width='160px'>: {{doc.guest_email or ''}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Additional Guest Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if doc.additional_guests %}\\n<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Additional Guest Information\\\")}}</strong></div>\\n<table class=\\\"table report-list\\\" style = \\\"font-size:13px\\\">\\n    <tr>\\n        <th>{{_(\\\"No.\\\")}}</th>\\n       <th>{{_(\\\"Guest Name\\\")}}</th>\\n       <th>{{_(\\\"Phone\\\")}}</th>\\n       <th>{{_(\\\"Email\\\")}}</th>\\n    </tr>\\n    {% for g in doc.additional_guests %}\\n    <tr>\\n        <td>{{loop.index}}</td>\\n        <td>{{g.guest_name or ''}}</td>\\n        <td>{{ \\\"{} / {}\\\".format((g.phone_number_1|string),(g.phone_number_2|string))  if   g.phone_number_2 else g.phone_number_1 }}</td>\\n        <td>{{g.email_address or ''}}</td>\\n    </tr>\\n    {% endfor %}\\n</table>\\n{% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Stay Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Stay Information\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width:100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='180px'>{{_(\\\"Ref #\\\")}}</td>\\n        <td width='160px'>: {{doc.reference_number or ''}}</td>\\n\\n        <td width='150px'>{{_(\\\"Res #\\\")}}</td>\\n        <td width='160px'>: {{doc.reservation or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Stay #\\\")}}</td>\\n        <td width='160px'>: {{doc.name or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Res Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.reservation_date, {'fieldtype': 'Date'}) }}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Res Type\\\")}}</td>\\n        <td width='160px'>: {{doc.reservation_type or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Source\\\")}}</td>\\n        <td width='160px'>: {{doc.business_source or ''}} / {{doc.business_source_type}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Arrival Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.arrival_date, {'fieldtype': 'Date'}) }}</td>\\n\\n        <td width='150px'>{{_(\\\"Departure Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.departure_date, {'fieldtype': 'Date'}) }}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Status\\\")}}</td>\\n        <td width='160px'>: {{doc.reservation_status or ''}}</td>\\n    </tr>\\n</table>\\n\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Pickup and Drop Off Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if doc.require_pickup or doc.require_drop_off %}\\n    <div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Pickup and Drop Off Information\\\")}}</strong></div>\\n{% endif %}\\n\\n{% if doc.require_pickup %}\\n<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Pickup\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width:100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='180px'>{{_(\\\"Pickup Driver\\\")}}</td>\\n        <td width='160px'>: {{doc.pickup_driver_name or ''}}</td>\\n   \\n        <td width='150px'>{{_(\\\"Phone\\\")}}</td>\\n        <td width='160px'>: {{doc.pickup_driver_phone_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Pickup Time\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.pickup_time, {'fieldtype': 'Time'}) }}</td>\\n    \\n        <td width='150px'>{{_(\\\"Flight Number\\\")}}</td>\\n        <td width='160px'>: {{doc.arrival_flight_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Pickup Location\\\")}}</td>\\n        <td width='160px'>: {{doc.pickup_location or ''}}</td>\\n\\n        <td width='150px'>{{_(\\\"Pickup Mode\\\")}}</td>\\n        <td width='160px'>: {{doc.arrival_mode or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Note\\\")}}</td>\\n        <td width='160px'>: {{doc.pickup_note or ''}}</td>\\n    </tr>\\n</table>\\n{% endif %}\\n\\n{% if doc.require_drop_off %}\\n<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Drop Off\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width:100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='180px'>{{_(\\\"Drop Off Driver\\\")}}</td>\\n        <td width='160px'>: {{doc.drop_off_driver_name or ''}}</td>\\n    \\n        <td width='150px'>{{_(\\\"Phone\\\")}}</td>\\n        <td width='160px'>: {{doc.drop_off_driver_phone_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Drop Off Time\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.drop_off_time, {'fieldtype': 'Time'}) }}</td>\\n    \\n        <td width='150px'>{{_(\\\"Flight Number\\\")}}</td>\\n        <td width='160px'>: {{doc.departure_flight_number or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Drop Off Location\\\")}}</td>\\n        <td width='160px'>: {{doc.drop_off_location or ''}}</td>\\n   \\n        <td width='150px'>{{_(\\\"Drop Off Mode\\\")}}</td>\\n        <td width='160px'>: {{doc.departure_mode or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Note\\\")}}</td>\\n        <td width='160px'>: {{doc.drop_off_note or ''}}</td>\\n    </tr>\\n</table>\\n{% endif %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Room Rate\\\")}}</strong></div>\\n<table class=\\\"table report-list\\\" style = \\\"font-size:12px;word-break: break-all;white-space: nowrap;\\\">\\n    <tr>\\n        <th>{{_(\\\"No.\\\")}}</th>\\n        <th>{{_(\\\"Room\\\")}}</th>\\n        <th>{{_(\\\"Stay Date\\\")}}</th>\\n        <th>{{_(\\\"Room Night\\\")}}</th>\\n        <th>{{_(\\\"Room Type\\\")}}</th>\\n        <th>{{_(\\\"Rate Type\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Rate\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Disc.\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Tax\\\")}}</th>\\n        <th class=\\\"text-right\\\">{{_(\\\"Total Rate\\\")}}</th>\\n    </tr>\\n    {% for r in doc.stays %}\\n    <tr>\\n        <td>{{loop.index}}</td>\\n        <td>{{r.room_number}}</td>\\n        <td>{{ frappe.format(r.start_date, {'fieldtype': 'Date'}) }}-{{ frappe.format(r.end_date, {'fieldtype': 'Date'}) }}</td>\\n        <td class=\\\"text-center\\\">{{r.room_nights}}</td>\\n        <td>{{r.room_type_alias}}</td>\\n        <td>{{r.rate_type}}</td>\\n        <td class=\\\"text-right\\\">{{ frappe.format(r.input_rate, {'fieldtype': 'Currency'}) }}</td>\\n        <td class=\\\"text-right\\\">{{ frappe.format(r.discount_amount, {'fieldtype': 'Currency'}) }}</td>\\n        <td class=\\\"text-right\\\">{{ frappe.format(r.total_tax, {'fieldtype': 'Currency'}) }}</td>\\n        <td class=\\\"text-right\\\">{{ frappe.format(r.total_rate, {'fieldtype': 'Currency'}) }}</td>\\n    </tr>\\n    {% endfor %}\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table class=\\\"table report-list\\\" style = \\\"font-size:13px\\\">\\n    <tr>\\n        <td><strong>{{_(\\\"Total Room Rate\\\")}}</strong></td>\\n        <td class=\\\"text-right\\\">: {{frappe.format(doc.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    <tr>\\n        <td><strong>{{_(\\\"Discount\\\")}}</strong></td>\\n        <td class=\\\"text-right\\\">: {{frappe.format(doc.room_rate_discount,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    <tr>\\n        <td><strong>{{_(\\\"Total Tax\\\")}}</strong></td>\\n        <td class=\\\"text-right\\\">: {{frappe.format(doc.total_room_rate_tax,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set folio_transaction = frappe.db.sql(\\\"\\n                    select \\n                            ft.transaction_number,\\n                            rs.name, \\n                            ft.reservation_stay,\\n                            if(ifnull(ft.parent_reference,'') = '',ft.name,ft.parent_reference) as folio_transaction,\\n                            ft.account_name,\\n                            ft.guest_name,\\n                            rf.guest_name as guest,\\n                            rf.name as folio_number,\\n                            rf.posting_date as rf_posting_date, \\n                            ft.posting_date as ft_posting_date,\\n                            ft.room_number,\\n                            ft.quantity,\\n                            ft.total_tax,\\n                            ft.bank_fee,\\n                            ft.amount,\\n                            ft.total_amount,\\n                            ft.discount_amount,\\n                            ft.note\\n                    from `tabReservation Stay` rs\\n                    inner join `tabFolio Transaction` ft on rs.name = ft.reservation_stay\\n                    inner join `tabReservation Folio` rf on ft.transaction_number = rf.name\\n                    where \\n                            ft.transaction_type = 'Reservation Folio' and\\n                            rs.name = '{0}'\\n\\\".format(doc.name),as_dict=1)%}\\n{% if folio_transaction %}\\n<div style=\\\"font-size:16px\\\"><strong>\\n    {{_(\\\"Folio Transaction\\\")}}\\n</strong></div>\\n<table class='report-list occupied-001' style='width:100%;font-size:12px;margin-bottom'>\\n    <tr>\\n        <th>{{_(\\\"Folio Tran.#\\\")}}</th>\\n        <th>{{_(\\\"Post Date\\\")}}</th>\\n        <th>{{_(\\\"Room\\\")}}</th>\\n        <th>{{_(\\\"Account Code\\\")}}</th>\\n        <th>{{_(\\\"QTY\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Amount\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Discount\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Tax\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Bank Fee\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Total Amount\\\")}}</th>\\n        <th class='text-center'>{{_(\\\"Note\\\")}}</th>\\n    </tr>\\n     {% for folio_number in folio_transaction | map(attribute='folio_number') | unique  %}\\n        {% for rf_posting_date in folio_transaction |selectattr(\\\"folio_number\\\", \\\"equalto\\\", folio_number) |map(attribute='rf_posting_date') | unique  %}\\n            {% for guest in folio_transaction |selectattr(\\\"folio_number\\\", \\\"equalto\\\", folio_number) |map(attribute='guest') | unique  %}\\n                <tr>\\n                    <td style=\\\"white-space: nowrap;\\\"><strong>\\n                        {{folio_number}}<br>\\n                        {{guest}}<br>\\n                        {{frappe.format(rf_posting_date,{'fieldtype':'Date'})}}\\n                    </strong></td>\\n                </tr>\\n                {% for d in folio_transaction |selectattr(\\\"guest\\\", \\\"equalto\\\", guest)%}\\n                    <tr>\\n                        <td style=\\\"white-space: nowrap;\\\">{{d.folio_transaction}}</td>\\n                        <td style=\\\"white-space: nowrap;\\\">{{frappe.format(d.ft_posting_date,{'fieldtype':'Date'})}}</td>\\n                        <td>{{d.room_number}}</td>\\n                        <td >{{d.account_name}}</td>\\n                        <td>{{d.quantity or ''}}</td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">{{frappe.format(d.amount,{'fieldtype':'Currency'})}}</td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">{{frappe.format(d.discount_amount or 0,{'fieldtype':'Currency'})}}</td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">\\n                            {{frappe.format(d.total_tax or 0,{'fieldtype':'Currency'})}}\\n                        </td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">\\n                            {{frappe.format(d.bank_fee or 0,{'fieldtype':'Currency'})}}\\n                        </td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">\\n                            {{frappe.format(d.total_amount,{'fieldtype':'Currency'})}}\\n                        </td>\\n                        <td width=\\\"300px\\\">\\n                            {{d.note or ''}}\\n                        </td>\\n                    </tr>\\n                {% endfor %}\\n            {% endfor %}\\n        {% endfor %}\\n    {% endfor %}\\n    {% endif %}\\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size:16px\\\"><strong>\\n    {{_(\\\"Summary\\\")}}\\n</strong></div>\\n\\n<div class=\\\"text-center\\\" style=\\\"display:flex;margin-bottom:2px;margin-top:2px;gap:15px;justify-content: center\\\">\\n    <div style=\\\"padding:15px;background-color:#f0f0f0;border-color:#c4c4c4;width:300px;border:1px;border-radius: 0.5rem;height: 70px\\\">\\n        <div style=\\\"text-transform:uppercase;color:#9e9e9e;font-size:14px\\\">Total Debit</div>    \\n        <div style=\\\"font-weight:600;font-size:18px\\\"><span>{{frappe.format(doc.total_debit,{'fieldtype':'Currency'})}}</span></div>\\n    </div>\\n    <div style=\\\"padding:15px;background-color:#f0f0f0;border-color:#c4c4c4;width:250px;border:1px;border-radius: 0.5rem;height: 70px\\\">\\n        <div style=\\\"text-transform: uppercase;color:#9e9e9e;font-size:14px\\\">Total Credit</div>    \\n        <div style=\\\"font-weight:600;font-size:18px\\\"><span>{{frappe.format(doc.total_credit,{'fieldtype':'Currency'})}}</span></div>\\n    </div>\\n    <div style=\\\"padding:15px;background-color:#82fc9f;border-color:#86fca1;width:300px;border:1px;border-radius: 0.5rem;height: 70px\\\">\\n        <div style=\\\"text-transform: uppercase;color:#9e9e9e;font-size:14px\\\">Balance</div>    \\n        <div style=\\\"font-weight:600;font-size:18px\\\"><span>{{frappe.format(doc.balance,{'fieldtype':'Currency'})}}</span></div>\\n    </div>\\n</div>\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_reservation_charge_summary\\\",reservation_stay=doc.name) %}\\n<table class='report-list occupied-001' style='width:100%;font-size:12px;'>\\n    <tr>\\n        <th>{{_(\\\"No.\\\")}}</th>\\n        <th>{{_(\\\"Description\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Amount\\\")}}</th>\\n    </tr>\\n    {% for d in data %}\\n    <tr>\\n        <td>{{loop.index}}</td>\\n        <td>{{d.account_category}}</td>\\n        <td class='text-right'>{{frappe.format(d.amount,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    {% endfor %}\\n</table>\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-02 14:22:15.494266",
  "module": "eDoor",
  "name": "Reservation Stay Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set can_view_rate = frappe.call(\\\"edoor.api.utils.can_view_rate\\\") %}\\n{%\\nset data = frappe.db.sql(\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_type,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_types,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay` \\n    where \\n        property= '{0}' and \\n        reservation_status = 'Void' and \\n        arrival_date = '{1}'\\n        \\\".format(\\n            doc.name,\\n            frappe.form_dict.get('date')\\n        ),as_dict=1)\\n%}\\n{% if (data|length) >0 %}\\n<table class='report-list' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n            {%endif%}\\n            <th class=\\\"text-center\\\">Status</th>\\n            \\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{loop.index}}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>{{d.rooms}} {{\\\"/\\\" if d.rooms else \\\"\\\"}} {{d.room_type_alias}}</td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                {% if can_view_rate==1%}\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\n                <td class=\\\"text-end\\\" align=\\\"right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                {%endif%}\\n                <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                \\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\n<div class=\\\"isemtyIcon\\\"></div> \\n<small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{% endif %}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-26 10:55:03.063562",
  "module": "eDoor",
  "name": "eDoor Void Reservation List",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Business Branch",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%set sql=\\\"\\\"\\\"\\n    select \\n        name,\\n        reservation,\\n        reservation_date,\\n        reference_number,\\n        reservation_type,\\n        business_source,\\n        guest,\\n        guest_name, \\n        business_source, \\n        arrival_date, \\n        departure_date,\\n        reservation_status,\\n        room_type_alias,\\n        status_color,\\n        rooms,\\n        room_nights,\\n        adr,\\n        total_room_rate \\n    from `tabReservation Stay`\\n    where \\n        property='{0}' and \\n        arrival_date>='{1}' and \\n        {2} = '{3}'  \\n\\\"\\\"\\\".format(\\n    doc.name,\\n    frappe.form_dict.get(\\\"date\\\") ,\\n    frappe.form_dict.get(\\\"fieldname\\\") ,\\n    frappe.form_dict.get(\\\"value\\\")\\n)\\n%}\\n\\n{%set data = frappe.db.sql(sql,as_dict=1)%}\\n\\n{% if (data|length) >0 %}\\n<table class='report-list occupied-001' style='width:100%'>\\n \\n        <tr>\\n            <th class=\\\"text-center\\\">No.</th>\\n            <th class=\\\"text-center\\\">Reservation #</th>\\n            <th class=\\\"text-center\\\">Stay #</th>\\n            <th>Ref. #</th>\\n            <th class=\\\"text-center\\\">Type</th>\\n            <th class=\\\"text-center\\\">Res. Date</th>\\n            <th class=\\\"text-center\\\">Stay Date</th>\\n            <th class=\\\"text-center\\\">Room Nights</th>\\n            <th>Room(s)</th>\\n            <th>Guest</th>\\n            <th>Source</th>\\n            \\n            {% if can_view_rate==1%}\\n            <th class=\\\"text-end\\\">ADR</th>\\n            <th class=\\\"text-end\\\">Total Room Rate</th>\\n             {%endif%}\\n             <th class=\\\"text-center\\\">Status</th> \\n            \\n        </tr>\\n  \\n        {%for d in data%}\\n            <tr>\\n                <td class=\\\"text-center\\\">{{ loop.index }}</td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a></td>\\n                <td class=\\\"text-center\\\"><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a></td>\\n                <td>{{d.reference_number or \\\"\\\"}}</td>\\n                <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.reservation_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} &#8594; {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n                <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\n                <td>\\n                    {% set rooms = frappe.db.sql(\\\"SELECT `name`,room_type,room_type_alias,room_number FROM `tabReservation Stay Room` WHERE parent = '{0}'\\\".format(d.name),as_dict=1) %}\\n                    {% if (rooms|length)>0 %}\\n                        {% for room in rooms %}\\n                          <span title=\\\"{{room.room_type}}\\\">{{room.room_type_alias}}</span>/{% if room.room_number %} {{room.room_number}} {%else%} <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('assign_room|{{d.name}}|{{room.name}}', '*')\\\">Assign</a>{% endif %}{{ \\\"\\\" if loop.last else \\\", \\\" }}\\n                        {% endfor %}\\n                    {% endif %}\\n                </td>\\n                <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest}} - {{d.guest_name}}</a></td>\\n                <td>{{d.business_source}}</td>\\n                {%if can_view_rate==1 %}\\n                    <td class=\\\"text-end\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td> \\n                    <td class=\\\"text-end\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n                   \\n                {%endif%}\\n                 <td class=\\\"text-center\\\"><span style=\\\"background: {{d.status_color}}\\\" class=\\\"rounded-pill py-1 px-2 text-white\\\">{{d.reservation_status}}</span></td>\\n                \\n            </tr>\\n        {%endfor%}\\n     \\n</table>\\n{% else %}\\n<div class=\\\"mt-4 print-heading text-center p-2\\\">\\n    <div class=\\\"isemtyIcon\\\"></div> \\n    <small class=\\\"text-emty\\\">No Data </small>\\n</div>\\n{%endif%}\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-10-26 17:39:41.256220",
  "module": "eDoor",
  "name": "eDoor Existed Reservation",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Reservation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\n    <h2>Reservation Stay Detail</h2>\\n    <h2>{{doc.name}}</h2>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Working Day Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set s = frappe.get_doc(\\\"Cashier Shift\\\",doc.cashier_shift) %}\\n\\n<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Working Day Information\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width: 100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='150px'>{{_(\\\"Working Day\\\")}}</td>\\n        <td width='160px'>: {{doc.working_day or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Working Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.working_date, {'fieldtype': 'Date'}) }}</td>\\n    </tr>\\n    <tr>\\n        <td width='150px'>{{_(\\\"Cashier Shift\\\")}}</td>\\n        <td width='160px'>: {{doc.cashier_shift or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Shift\\\")}}</td>\\n        <td width='160px'>: {{s.shift_name or ''}}</td>\\n\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Property\\\")}}</td>\\n        <td width='160px'>: {{doc.property or ''}}</td>\\n        \\n    </tr>    \\n\\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Guest Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Guest Information\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width: 100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='180px'>{{_(\\\"Guest\\\")}}</td>\\n        <td width='160px'>: {{doc.guest_name or ''}}</td>\\n    \\n        <td width='150px'>{{_(\\\"Nationality\\\")}}</td>\\n        <td width='160px'>: {{doc.nationality or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Phone\\\")}}</td>\\n        <td width='160px'>: {{doc.guest_phone_number or ''}}</td>\\n        \\n        <td width='150px'>{{_(\\\"Email\\\")}}</td>\\n        <td width='160px'>: {{doc.guest_email or ''}}</td>\\n    </tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Reservation Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Reservation Information\\\")}}</strong></div>\\n<table style = \\\"font-size:13px;width:100%;word-break: break-all;\\\">\\n    <tr>\\n        <td width='180px'>{{_(\\\"Ref #\\\")}}</td>\\n        <td width='160px'>: {{doc.reference_number or ''}}</td>\\n\\n        <td width='150px'>{{_(\\\"Res #\\\")}}</td>\\n        <td width='160px'>: {{doc.name or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Res Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.reservation_date, {'fieldtype': 'Date'}) }}</td>\\n        \\n        <td width='150px'>{{_(\\\"Res Type\\\")}}</td>\\n        <td width='160px'>: {{doc.reservation_type or ''}}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Arrival Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.arrival_date, {'fieldtype': 'Date'}) }}</td>\\n\\n        <td width='150px'>{{_(\\\"Departure Date\\\")}}</td>\\n        <td width='160px'>: {{ frappe.format(doc.departure_date, {'fieldtype': 'Date'}) }}</td>\\n    </tr>\\n    <tr>\\n        <td width='180px'>{{_(\\\"Source\\\")}}</td>\\n        <td width='160px'>: {{doc.business_source or ''}} / {{doc.business_source_type}}</td>\\n\\n        <td width='150px'>{{_(\\\"Status\\\")}}</td>\\n        <td width='160px'>: {{doc.reservation_status or ''}}</td>\\n    </tr>\\n</table>\\n\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Stay Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\n                select \\n                        rs.name, \\n                        rs.arrival_date, \\n                        rs.departure_date, \\n                        rs.rooms, \\n                        rs.room_type_alias,\\n                        rs.require_pickup,\\n                        rs.require_drop_off,\\n                        rs.guest_name, \\n                        rs.pickup_time,\\n                        rs.pickup_location,\\n                        rs.drop_off_time,\\n                        rs.drop_off_location,\\n                        rs.total_room_rate, \\n                        rs.total_debit,\\n                        rs.total_credit, \\n                        rs.balance, \\n                        rs.reservation_status \\n                from `tabReservation Stay` rs\\n                inner join `tabReservation` r on r.name = rs.reservation\\n                where \\n                        r.name ='{0}'\\n\\\".format(doc.name),as_dict=1)%}\\n\\n<div style=\\\"font-size:16px\\\"><strong>{{_(\\\"Stay Information\\\")}}</strong></div>\\n<table class='report-list occupied-001' style='width:100%;font-size:12px;'>\\n    <tr>\\n        <th>{{_(\\\"No.\\\")}}</th>\\n        <th>{{_(\\\"Stay #\\\")}}</th>\\n        <th class = \\\"text-center\\\">{{_(\\\"Stay Date\\\")}}</th>\\n        <th>{{_(\\\"Room\\\")}}</th>\\n        <th>{{_(\\\"Guest\\\")}}</th>\\n        <th>{{_(\\\"Pickup\\\")}}</th>\\n        <th>{{_(\\\"Drop Off\\\")}}</th>\\n        <th class = \\\"text-right\\\">{{_(\\\"Rate\\\")}}</th>\\n        <th class = \\\"text-right\\\">{{_(\\\"Debit\\\")}}</th>\\n        <th class = \\\"text-right\\\">{{_(\\\"Credit\\\")}}</th>\\n        <th class = \\\"text-right\\\">{{_(\\\"Balance\\\")}}</th>\\n        <th>{{_(\\\"Status\\\")}}</th>\\n    </tr>\\n    {% for d in data %}\\n    <tr>\\n        <td>{{loop.index}}</td>\\n        <td>{{d.name}}</td>\\n        <td class = \\\"text-center\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}} - {{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\n        <td>{{d.room_type_alias}}/{{d.rooms}}</td>\\n        <td>{{d.guest_name}}</td>\\n        <td>\\n            {% if d.require_pickup %}\\n                {{frappe.format(d.pickup_time or '',{'fieldtype':'Time'})}}, {{d.pickup_location or ''}}\\n            {% endif %}\\n        </td>\\n        <td>\\n            {% if d.require_drop_off %}\\n                {{frappe.format(d.drop_off_time or '',{'fieldtype':'Time'})}}, {{d.drop_off_location or ''}}\\n            {% endif %}\\n        </td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.total_room_rate,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.total_debit,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.total_credit,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.balance,{'fieldtype':'Currency'})}}</td>\\n        <td>{{d.reservation_status}}</td>\\n    </tr>\\n    {% endfor %}\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set folio_transaction = frappe.db.sql(\\\"\\n                    select \\n                            ft.transaction_number,\\n                            r.name, \\n                            ft.reservation_stay,\\n                            if(ifnull(ft.parent_reference,'') = '',ft.name,ft.parent_reference) as folio_transaction,\\n                            ft.account_name,\\n                            ft.guest_name,\\n                            rf.guest_name as guest,\\n                            rf.name as folio_number,\\n                            rf.posting_date as rf_posting_date, \\n                            ft.posting_date as ft_posting_date,\\n                            ft.room_number,\\n                            ft.quantity,\\n                            ft.total_tax,\\n                            ft.bank_fee,\\n                            ft.amount,\\n                            ft.total_amount,\\n                            ft.discount_amount,\\n                            ft.note\\n                    from  `tabReservation` r\\n                    inner join `tabFolio Transaction` ft on r.name = ft.reservation\\n                    inner join `tabReservation Folio` rf on ft.transaction_number = rf.name\\n                    where \\n                            ft.transaction_type = 'Reservation Folio' and\\n                            r.name = '{0}'\\n\\\".format(doc.name),as_dict=1)%}\\n{% if folio_transaction %}\\n<div style=\\\"font-size:16px\\\"><strong>\\n    {{_(\\\"Folio Transaction\\\")}}\\n</strong></div>\\n<table class='report-list occupied-001' style='width:100%;font-size:11px;margin-bottom:10px;'>\\n    <tr>\\n        <th>{{_(\\\"Folio Tran.#\\\")}}</th>\\n        <th>{{_(\\\"Post Date\\\")}}</th>\\n        <th>{{_(\\\"Room\\\")}}</th>\\n        <th>{{_(\\\"Account Code\\\")}}</th>\\n        <th>{{_(\\\"QTY\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Amount\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Discount\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Tax\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Bank Fee\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Total Amount\\\")}}</th>\\n        <th class='text-center'>{{_(\\\"Note\\\")}}</th>\\n    </tr>\\n    {%for reservation_stay in folio_transaction | map(attribute='reservation_stay') | unique%}\\n     {% for folio_number in folio_transaction |selectattr(\\\"reservation_stay\\\", \\\"equalto\\\", reservation_stay)| map(attribute='folio_number') | unique  %}\\n        {% for rf_posting_date in folio_transaction |selectattr(\\\"folio_number\\\", \\\"equalto\\\", folio_number) |map(attribute='rf_posting_date') | unique  %}\\n            {% for guest in folio_transaction |selectattr(\\\"folio_number\\\", \\\"equalto\\\", folio_number) |map(attribute='guest') | unique  %}\\n                <tr>\\n                    <td style=\\\"white-space: nowrap;\\\"><strong>\\n                        {{reservation_stay}}, {{folio_number}}<br>\\n                        {{guest}}, \\n                        {{frappe.format(rf_posting_date,{'fieldtype':'Date'})}}\\n                    </strong></td>\\n                </tr>\\n                {% for d in folio_transaction |selectattr(\\\"guest\\\", \\\"equalto\\\", guest)%}\\n                    <tr>\\n                        <td style=\\\"white-space: nowrap;\\\">{{d.folio_transaction}}</td>\\n                        <td style=\\\"white-space: nowrap;\\\">{{frappe.format(d.ft_posting_date,{'fieldtype':'Date'})}}</td>\\n                        <td>{{d.room_number}}</td>\\n                        <td >{{d.account_name}}</td>\\n                        <td>{{d.quantity or ''}}</td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">{{frappe.format(d.amount,{'fieldtype':'Currency'})}}</td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">{{frappe.format(d.discount_amount or 0,{'fieldtype':'Currency'})}}</td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">\\n                            {{frappe.format(d.total_tax or 0,{'fieldtype':'Currency'})}}\\n                        </td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">\\n                            {{frappe.format(d.bank_fee or 0,{'fieldtype':'Currency'})}}\\n                        </td>\\n                        <td class='text-right' style=\\\"white-space: nowrap;\\\">\\n                            {{frappe.format(d.total_amount,{'fieldtype':'Currency'})}}\\n                        </td>\\n                        <td width=\\\"300px\\\">\\n                            {{d.note or ''}}\\n                        </td>\\n                    </tr>\\n                {% endfor %}\\n            {% endfor %}\\n        {% endfor %}\\n    {% endfor %}\\n    {% endfor %}\\n    {% endif %}\\n</table>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size:16px\\\"><strong>\\n    {{_(\\\"Summary\\\")}}\\n</strong></div>\\n\\n<div class=\\\"text-center\\\" style=\\\"display:flex;margin-bottom:2px;margin-top:2px;gap:15px;justify-content: center\\\">\\n    <div style=\\\"padding:15px;background-color:#f0f0f0;border-color:#c4c4c4;width:300px;border:1px;border-radius: 0.5rem;height: 70px\\\">\\n        <div style=\\\"text-transform:uppercase;color:#9e9e9e;font-size:14px\\\">Total Debit</div>    \\n        <div style=\\\"font-weight:600;font-size:18px\\\"><span>{{frappe.format(doc.total_debit,{'fieldtype':'Currency'})}}</span></div>\\n    </div>\\n    <div style=\\\"padding:15px;background-color:#f0f0f0;border-color:#c4c4c4;width:300px;border:1px;border-radius:0.5rem;height:70px\\\">\\n        <div style=\\\"text-transform: uppercase;color:#9e9e9e;font-size:14px\\\">Total Credit</div>    \\n        <div style=\\\"font-weight:600;font-size:18px\\\"><span>{{frappe.format(doc.total_credit,{'fieldtype':'Currency'})}}</span></div>\\n    </div>\\n    <div style=\\\"padding:15px;background-color:#82fc9f;border-color:#86fca1;width:300px;border:1px;border-radius: 0.5rem;height: 70px\\\">\\n        <div style=\\\"text-transform: uppercase;color:#9e9e9e;font-size:14px\\\">Balance</div>    \\n        <div style=\\\"font-weight:600;font-size:18px\\\"><span>{{frappe.format(doc.balance,{'fieldtype':'Currency'})}}</span></div>\\n    </div>\\n</div>\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_reservation_charge_summary\\\",reservation=doc.name) %}\\n<table class='report-list occupied-001' style='width:100%;font-size:12px;'>\\n    <tr>\\n        <th>{{_(\\\"No.\\\")}}</th>\\n        <th>{{_(\\\"Description\\\")}}</th>\\n        <th class='text-right'>{{_(\\\"Amount\\\")}}</th>\\n    </tr>\\n    {% for d in data %}\\n    <tr>\\n        <td>{{loop.index}}</td>\\n        <td>{{d.account_category}}</td>\\n        <td class='text-right'>{{frappe.format(d.amount,{'fieldtype':'Currency'})}}</td>\\n    </tr>\\n    {% endfor %}\\n</table>\\n\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2023-11-02 14:19:39.400383",
  "module": "eDoor",
  "name": "Reservation Detail",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 }
]