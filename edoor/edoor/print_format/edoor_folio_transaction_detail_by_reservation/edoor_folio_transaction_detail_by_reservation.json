{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2023-11-22 17:04:06.810495",
 "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Reservation",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>FOLIO DETAIL BY RESERVATION</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"guest_name\", \"print_hide\": 0, \"label\": \"Guest Name\"}, {\"fieldname\": \"nationality\", \"print_hide\": 0, \"label\": \"Nationality\"}, {\"fieldname\": \"business_source\", \"print_hide\": 0, \"label\": \"Business Source\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Address\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t\\t{{frappe.db.get_value(\\\"Customer\\\",doc.guest,\\\"address\\\") or \\\"\\\"}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rate_type\", \"print_hide\": 0, \"label\": \"Rate Type\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"business_source\\\" data-fieldtype=\\\"Link\\\">\\n\\t\\t\\t\\t<div class=\\\"col-xs-5\\\">\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label>{{_(\\\"Reservation #\\\")}}: </label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-xs-7\\n\\t\\t\\t\\t\\n\\t value\\\">\\n\\t\\t\\t\\t{{doc.name}}\\n\\t\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\"}, {\"fieldname\": \"rooms\", \"print_hide\": 0, \"label\": \"Rooms\"}, {\"fieldname\": \"arrival_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check In\"}, {\"fieldname\": \"departure_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Check Out\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n {% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction\\\",reservation=doc.name,transaction_type='Reservation Folio') %}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n    <tr>\\n        <th class='text-center'>No</th>    \\n        <th class='text-center'>Date</th>    \\n        {% if show_room_number=='1'%}\\n            <th class='text-center'>Room</th>    \\n        {%endif%}\\n        <th>Description</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Debit</th>    \\n        <th class='text-right'>Credit</th>    \\n        <th class='text-right'>Balance</th>    \\n    </tr>\\n    </thead>\\n    <tbody>\\n        {%for d in data %}\\n        <tr>\\n            <td class='text-center'>{{loop.index}}</td>\\n            <td class='text-center'>{{frappe.format_value(d.posting_date,\\\"Date\\\") if d.posting_date else \\\"\\\"   }}</td>\\n            {% if show_room_number=='1'%}\\n                <td class='text-center'>{{d.room_number or \\\"\\\"}}</td>\\n            {%endif%}\\n            <td>{{d.account_name or \\\"\\\"}}</td>\\n            <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            \\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{frappe.format_value( data |sum(attribute='quantity'),'Float')}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n\\n{%endif%}\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"Simple style\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set show_room_number = frappe.form_dict.get(\\\"show_room_number\\\") or 0 %}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        room_number,\\n        account_code,\\n        account_code_sort_order,\\n        posting_date,\\n        report_description,\\n        report_quantity as quantity,\\n        (price  + bank_fee_amount) * if(type='Debit',1,-1) as price,\\n        discount_amount * if(type='Debit',1,-1) as discount_amount,\\n        total_tax * if(type='Debit',1,-1) as total_tax,\\n        bank_fee_amount * if(type='Debit',-1,1) as bank_fee_amount,\\n        (total_amount - bank_fee_amount) * if(type='Debit',1,-1)  as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Reservation Folio' and\\n        reservation = '{0}' and \\n        ifnull(parent_reference,'')=''\\n        \\n    order by \\n    posting_date,\\n    name\\n\\\"\\\"\\\".format(\\n        doc.name\\n    )\\n%}\\n{% set show_account_code =  frappe.form_dict.get(\\\"show_account_code\\\") %} \\n\\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\" style=\\\"margin-top:8px!important\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>\\n            <th class=\\\"text-center\\\">Date</th>\\n            {% if show_room_number==\\\"1\\\"%}\\n                <th class=\\\"text-center\\\">Room</th>\\n            {%endif%}\\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee!= 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td class=\\\"text-center\\\">{{frappe.format_value(d.posting_date,'Date')}}</td>\\n            {% if show_room_number==\\\"1\\\"%}\\n            <td class=\\\"text-center\\\">{{d.room_number}}</td>\\n            {%endif%}\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==\\\"1\\\" else \\\"\\\"}}{{d.report_description or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{ frappe.format_value(d.quantity,'Float')}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee != 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"{{4 if show_room_number=='1' else 3}}\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee!= 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\\n\\n \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% if frappe.form_dict.get('show_summary')==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(report_quantity) as quantity, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where reservation = '{}' and transaction_type='Reservation Folio' group by account_category order by account_category_sort_order\\\".format(doc.name),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th>Summary</th>    \\n        <th class='text-center'>QTY</th>    \\n        <th class='text-right'>Amount</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-center\\\">{{frappe.format_value(d.quantity,\\\"Float\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n        \\n    </tbody>\\n   <tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\"><strong>Balance</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(summary_data|sum(attribute='amount'),\\\"Currency\\\")}}</strong></td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}]",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 5.0,
 "margin_left": 5.0,
 "margin_right": 5.0,
 "margin_top": 5.0,
 "modified": "2023-11-23 09:04:29.803200",
 "modified_by": "Administrator",
 "module": "eDoor",
 "name": "eDoor Folio Transaction Detail by Reservation",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}