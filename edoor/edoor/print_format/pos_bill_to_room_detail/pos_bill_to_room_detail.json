{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2024-02-20 10:53:02.329073",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Business Branch",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\n    <h2>POS BILL TO ROOM DETAIL</h2>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set data = frappe.db.sql(\\\"\\n                                select \\n                                    ft.name,\\n                                    ft.posting_date,\\n                                    ft.reservation,\\n                                    ft.reservation_stay,\\n                                    ft.room_type_alias,\\n                                    ft.room_number,\\n                                    ft.guest,\\n                                    ft.guest_name,\\n                                    ft.total_amount, \\n                                    ft.business_source,\\n                                    ft.note, \\n                                    ft.sale,\\n                                    sp.product_name,\\n                                    sp.quantity,\\n                                    sp.price,\\n                                    sp.discount_amount,\\n                                    sp.amount,\\n                                    sp.total_tax\\n                                from `tabFolio Transaction` ft\\n                                inner join `tabSale` s on s.name = ft.sale\\n                                inner join `tabSale Product` sp on s.name = sp.parent\\n                                where\\n                                    ft.property = '{0}' and\\n                                    ft.posting_date between '{1}' and '{2}'\\n\\\".format(doc.name,\\n         frappe.form_dict.get('start_date'),\\n         frappe.form_dict.get('end_date')\\n        ),as_dict=1)%}\\n\\n<table class='report-list' style='width:100%'>\\n    <tr>\\n        <th>No.</th>\\n        <th colspan=\\\"2\\\">Product Name</th>\\n        <th class = \\\"text-center\\\">QTY</th>\\n        <th class = \\\"text-right\\\">Price</th>\\n        <th class = \\\"text-right\\\">Disc.</th>\\n        <th class = \\\"text-right\\\">Tax</th>\\n        <th class = \\\"text-right\\\">Amount</th>\\n    </tr>\\n    {% for room_number in data | map(attribute = 'room_number') | unique %}\\n    <tr>\\n        <td>Room #: <strong>{{room_number}}</strong></td>\\n    </tr>\\n    {% for name in data |selectattr('room_number','equalto',room_number) | map(attribute = 'name') | unique %}\\n    {% for sale in data |selectattr('name','equalto',name) | map(attribute='sale') | unique %}\\n    {% for posting_date in data |selectattr('name','equalto',name) | map(attribute='posting_date') | unique %}\\n    <tr>\\n        <td></td>\\n        <td>Folio Tran. #: <strong>{{name}}</strong>, Sale #: <strong>{{sale}}</strong>, Date : <strong>{{frappe.format(posting_date,{'fieldtype':'Date'})}}</strong></td>\\n    </tr>\\n    {% for d in data |selectattr('name','equalto',name) | list %}\\n    <tr>\\n        <td class = \\\"text-right\\\">{{loop.index}}</td>\\n        <td colspan=\\\"2\\\">{{d.product_name}}</td>\\n        <td class = \\\"text-center\\\">{{d.quantity | int}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.price,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.discount_amount,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\n        <td class = \\\"text-right\\\">{{frappe.format(d.amount,{'fieldtype':'Currency'})}}</td>\\n        \\n    </tr>\\n    {% endfor %}\\n    <tr>\\n        <td></td>\\n        <td colspan=\\\"2\\\"><strong>Total</strong></td>\\n        <td class = \\\"text-center\\\"><strong>{{(data|selectattr('name','equalto',name)|sum(attribute='quantity')) | int }}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|selectattr('name','equalto',name)|sum(attribute='price'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|selectattr('name','equalto',name)|sum(attribute='discount_amount'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|selectattr('name','equalto',name)|sum(attribute='total_tax'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|selectattr('name','equalto',name)|sum(attribute='amount'),{'fieldtype':'Currency'})}}</strong></td>\\n    </tr>\\n    \\n    {% endfor %}\\n    {% endfor %}\\n    {% endfor %}\\n    <tr>\\n        <td></td>\\n        <td colspan=\\\"2\\\"><strong>Grand Total</strong></td>\\n        <td class = \\\"text-center\\\"><strong>{{(data|selectattr('room_number','equalto',room_number)|sum(attribute='quantity')) | int }}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|selectattr('room_number','equalto',room_number)|sum(attribute='price'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|selectattr('room_number','equalto',room_number)|sum(attribute='discount_amount'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|selectattr('room_number','equalto',room_number)|sum(attribute='total_tax'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|selectattr('room_number','equalto',room_number)|sum(attribute='amount'),{'fieldtype':'Currency'})}}</strong></td>\\n        \\n    </tr>\\n    {% endfor %}\\n\\n    <tr style = \\\"border-top:1px solid black\\\">\\n        <td></td>\\n        <td colspan=\\\"2\\\"><strong>Grand Total</strong></td>\\n        <td class = \\\"text-center\\\"><strong>{{(data|sum(attribute='quantity')) | int }}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='price'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='discount_amount'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='total_tax'),{'fieldtype':'Currency'})}}</strong></td>\\n        <td class = \\\"text-right\\\"><strong>{{frappe.format(data|sum(attribute='amount'),{'fieldtype':'Currency'})}}</strong></td>\\n    </tr>\\n</table>\"}]",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2024-02-20 17:01:01.870025",
 "modified_by": "Administrator",
 "module": "eDoor",
 "name": "POS Bill to Room Detail",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}