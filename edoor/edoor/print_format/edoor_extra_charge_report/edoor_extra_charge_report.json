{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2024-02-24 11:07:20.904308",
 "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}\n.break-all{\n    word-break: break-all!important;\n}",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Business Branch",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\n    <h2>Extra Charge</h2>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;border-collapse: collapse;text-overflow: ellipsis;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            Date : \\r\\n            {% if frappe.form_dict.start_date == frappe.form_dict.end_date %}\\r\\n            <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> \\r\\n            {% else %}\\r\\n                <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n             - <strong>{{frappe.format(frappe.form_dict.end_date,{'fieldtype':'Date'})}}</strong>\\r\\n             {% endif %}\\r\\n            \\r\\n        </td> \\r\\n\\r\\n\\r\\n        <td class = \\\"text-right\\\" width = \\\"200px\\\">\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<!--{% set acc = None if  not frappe.form_dict.get('account') else frappe.form_dict.get('account').split(',') %}-->\\r\\n{% set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n\\t\\t\\tname,\\r\\n\\t\\t\\ttransaction_type, \\r\\n\\t\\t\\treservation,\\r\\n\\t\\t\\treservation_stay,\\r\\n\\t\\t\\tbusiness_source,\\r\\n\\t\\t\\treservation_type,\\r\\n\\t\\t\\troom_number,\\r\\n\\t\\t\\troom_type,\\r\\n\\t\\t\\tguest_name,\\r\\n\\t\\t\\tnote,\\r\\n\\t\\t\\tguest,\\r\\n\\t\\t\\tposting_date, \\r\\n\\t\\t\\tconcat(account_code,'-',report_description ) as account, \\r\\n\\t\\t\\tdiscount_amount,\\r\\n\\t\\t\\ttotal_tax,\\r\\n\\t\\t\\tbank_fee_amount,\\r\\n\\t\\t\\tsum(total_amount * if(type='Credit',-1,1)) as total_amount,\\r\\n\\t\\t\\tsum(amount * if(type='Credit',-1,1)) as amount,\\r\\n\\t\\t\\treport_quantity,\\r\\n\\t\\t\\ttype,\\r\\n\\t\\t\\taccount_code,\\r\\n\\t\\t\\taccount_group\\r\\n\\t\\tfrom `tabFolio Transaction`\\r\\n\\t\\twhere\\r\\n\\t\\t\\tproperty = '{0}' and \\r\\n\\t\\t\\tposting_date between '{1}' and '{2}' and\\r\\n\\t\\t\\taccount_group in ('10000','40000') and\\r\\n\\t\\t\\ttransaction_type = 'Reservation Folio' and\\r\\n\\t\\t\\tifnull(parent_reference,'') = '' and\\r\\n\\t\\t\\taccount_category not in ('Room Charge') and\\r\\n\\t\\t\\tifnull(account_code,'') like '%{3}%' and\\r\\n\\t\\t\\tifnull(account_group,'') like '%{5}%' and\\r\\n\\t\\t\\tifnull(account_category,'') like '%{4}%' \\r\\n\\t\\tgroup by\\r\\n\\t\\t    name,\\r\\n\\t\\t\\ttransaction_type, \\r\\n\\t\\t\\treservation,\\r\\n\\t\\t\\treservation_stay,\\r\\n\\t\\t\\tbusiness_source,\\r\\n\\t\\t\\treservation_type,\\r\\n\\t\\t\\troom_number,\\r\\n\\t\\t\\troom_type,\\r\\n\\t\\t\\tguest_name,\\r\\n\\t\\t\\tnote,\\r\\n\\t\\t\\tguest,\\r\\n\\t\\t\\tposting_date, \\r\\n\\t\\t\\taccount, \\r\\n\\t\\t\\tdiscount_amount,\\r\\n\\t\\t\\ttotal_tax,\\r\\n\\t\\t\\tbank_fee_amount,\\r\\n\\t\\t\\treport_quantity,\\r\\n\\t\\t\\taccount_code\\r\\n\\t\\torder by account_code asc\\t\\r\\n\\\"\\r\\n.format(doc.name,\\r\\n         frappe.form_dict.get('start_date'),\\r\\n         frappe.form_dict.get('end_date'),\\r\\n         frappe.form_dict.get('account') or '',\\r\\n         frappe.form_dict.get('account_categories') or '',\\r\\n         frappe.form_dict.get('parent_account') or ''\\r\\n),as_dict =1)%}\\r\\n\\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <tr>\\r\\n            <th class=\\\"text-center\\\">No.</th>\\r\\n            <th class=\\\"text-center\\\">Stay #</th>\\r\\n            <th>Folio Tran. #</th>\\r\\n            <th>Room #</th>\\r\\n            <th class=\\\"text-center\\\">Date</th>\\r\\n            <th>Account</th>\\r\\n            <th class=\\\"text-center\\\">QTY</th>\\r\\n            <th>Guest</th>\\r\\n            <th>Source</th>\\r\\n            <th class=\\\"text-right\\\">Amount</th>\\r\\n            <th class=\\\"text-right\\\">Discount</th>\\r\\n            <th class=\\\"text-right\\\">Tax</th>\\r\\n            <th class=\\\"text-right\\\">Total Amount</th>\\r\\n        </tr>\\r\\n        {% for d in data %}\\r\\n\\r\\n        <tr>\\r\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\r\\n            <td class=\\\"text-center nowrap\\\">\\r\\n                <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.reservation_stay}}', '*')\\\">{{d.reservation_stay or ''}}</a>\\r\\n            </td>\\r\\n            <td class=\\\"nowrap\\\">\\r\\n                <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_folio_transaction_detail|{{d.name}}', '*')\\\">{{d.name or ''}}</a>\\r\\n            </td>\\r\\n            <td>{{d.room_type or ''}}{{'/' if d.room_number else ''}}{{d.room_number or ''}}</td>\\r\\n            <td class=\\\"text-center nowrap\\\">{{frappe.format(d.posting_date,{'fieldtype':'Date'})}}</td>\\r\\n            <td>{{d.account or ''}}</td>\\r\\n            <td class=\\\"text-center\\\">{{d.report_quantity|int}}</td>\\r\\n            <td class='nowrap'><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name or ''}}</a></td>\\r\\n            <td>{{d.business_source or ''}}</td>\\r\\n            <td class=\\\"text-right nowrap\\\">{{frappe.format(d.amount,{'fieldtype':'Currency'})}}</td>\\r\\n            <td class=\\\"text-right nowrap\\\">{{frappe.format(d.discount_amount,{'fieldtype':'Currency'})}}</td>\\r\\n            <td class=\\\"text-right nowrap\\\">{{frappe.format(d.total_tax,{'fieldtype':'Currency'})}}</td>\\r\\n            <td class=\\\"text-right nowrap\\\">\\r\\n                {{frappe.format(d.total_amount,{'fieldtype':'Currency'})}}\\r\\n            </td>\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n        <tr>\\r\\n            <td></td>\\r\\n            <td class='text-center'><strong>Total</strong></td>\\r\\n            <td colspan=\\\"7\\\"></td>\\r\\n            <td class='text-right'><strong>{{frappe.format(data|sum(attribute='amount'),{'fieldtype':'Currency'})}}</strong></td>\\r\\n            <td class='text-right'><strong>{{frappe.format(data|sum(attribute='discount_amount'),{'fieldtype':'Currency'})}}</strong></td>\\r\\n            <td class='text-right'><strong>{{frappe.format(data|sum(attribute='total_tax'),{'fieldtype':'Currency'})}}</strong></td>\\r\\n            <td class='text-right'><strong>{{frappe.format(data|sum(attribute='total_amount'),{'fieldtype':'Currency'})}}</strong></td>\\r\\n        </tr>\\r\\n    </table>\"}]",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2024-02-27 15:19:21.312499",
 "modified_by": "Administrator",
 "module": "eDoor",
 "name": "eDoor Extra Charge Report",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}