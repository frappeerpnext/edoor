{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2023-11-29 14:46:21.520819",
 "css": "@media print{@page {size: landscape}}\n\n.print-format{\n    font-size:12px!important;\n    min-width:95%!important;\n}\n.print-format td, .print-format th{\n    padding:4px 2px !important;\n}\n\n.print-format th{\n    color:#000!important;\n    border-bottom: solid 1px #000;\n    background:#ccc;\n}\n.print-format .letter-head{\n    margin:0px !important;\n}\nh2{\n    margin:0px!important;\n}\n\n.nowrap{\n    white-space: nowrap!important;\n}",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Business Branch",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"\\r\\n<h2 class=\\\"text-center\\\">{{_(\\\"Arrival Guest\\\")}}</h2>\\r\\n\\r\\n<table style=\\\"width: 150%;border-collapse: collapse;\\\">\\r\\n    <tr>\\r\\n        <td class=\\\"filter-section\\\" >\\r\\n            {{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong>\\r\\n\\r\\n        <br>\\r\\n        {{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n        </td> \\r\\n        <td>\\r\\n        {{_(\\\"Printed By\\\")}} : <strong>{{frappe.db.get_value(\\\"User\\\", frappe.session.user, \\\"full_name\\\")}}</strong>\\r\\n        <br>\\r\\n        {{_(\\\"Printed Date\\\")}} : <strong>{{frappe.format(frappe.utils.now(),{'fieldtype':'Datetime'})}}</strong>\\r\\n        </td> \\r\\n    </tr>\\r\\n\\r\\n</table>\\r\\n<!--<div class=\\\"filter-section\\\">\\r\\n{{_(\\\"Arrival Date\\\")}} : <strong>{{frappe.format(frappe.form_dict.start_date,{'fieldtype':'Date'})}}</strong> /\\r\\n{{_(\\\"Business Soruce\\\")}} : <strong>{{frappe.form_dict.business_source or \\\"All Business Source\\\"}}</strong>\\r\\n\\r\\n</div>-->\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Arrival List\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \" \\r\\n{%\\r\\n\\r\\n    set data = frappe.db.sql(\\\"\\r\\n        select \\r\\n            name,\\r\\n            reservation,\\r\\n            reservation_type,\\r\\n            reference_number,\\r\\n            reservation_date,\\r\\n            business_source,\\r\\n            guest,\\r\\n            guest_name, \\r\\n            business_source, \\r\\n            arrival_date, \\r\\n            departure_date,\\r\\n            reservation_status,\\r\\n            room_type_alias,\\r\\n            status_color,\\r\\n            rooms,\\r\\n            room_nights,\\r\\n            adr,\\r\\n            adult,\\r\\n            child,\\r\\n            total_room_rate ,\\r\\n            require_pickup,\\r\\n            TIME_FORMAT(pickup_time, '%H:%i') as pickup_time,\\r\\n            arrival_flight_number\\r\\n        from `tabReservation Stay` \\r\\n        where \\r\\n            property= '{0}' and \\r\\n            arrival_date = '{1}' and \\r\\n            keyword like '%{2}%' and \\r\\n            business_source = if('{3}'='', business_source,'{3}') and \\r\\n            room_types like '%{4}%' and \\r\\n            is_active_reservation=1 \\r\\n        \\r\\n    \\r\\n            \\\".format(\\r\\n                doc.name,\\r\\n                frappe.form_dict.get('start_date'),\\r\\n                frappe.form_dict.get('keyword') or '',\\r\\n                frappe.form_dict.get('business_source') or '',\\r\\n                frappe.form_dict.get('room_type') or ''\\r\\n            ),as_dict=1)\\r\\n    %}\\r\\n    {% if (data|length) >0 %}\\r\\n    \\r\\n    <table class='report-list occupied-001' style='width:100%'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"text-center\\\">No.</th>\\r\\n                <th class=\\\"text-center\\\">Reservation #</th>\\r\\n                <th class=\\\"text-center\\\">Type</th>\\r\\n                <th class=\\\"text-center\\\">Room Type</th>\\r\\n                <th class=\\\"text-center\\\">Room</th>\\r\\n                \\r\\n                <th class=\\\"text-center\\\">Arrival</th>\\r\\n                <th class=\\\"text-center\\\">Departure</th>\\r\\n                 <th class=\\\"text-center\\\">Room <br/> Nights</th>\\r\\n                <th class=\\\"text-center\\\">Time</th>\\r\\n                <th class=\\\"text-center\\\">Flight</th>\\r\\n                <th>Guest</th>\\r\\n                <th class=\\\"text-center\\\">(A/C)</th>\\r\\n                <th>Source</th>\\r\\n                <th class=\\\"text-right\\\">ADR</th>\\r\\n                <th class=\\\"text-center\\\">Status</th>\\r\\n                <th class=\\\"text-center\\\">Guest Note</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {%for d in data%}\\r\\n                <tr>\\r\\n                    <td class=\\\"text-center\\\">{{ loop.index }}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_detail|{{d.reservation}}', '*')\\\">{{d.reservation}}</a>\\r\\n                        <br/>\\r\\n                        <a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_reservation_stay_detail|{{d.name}}', '*')\\\">{{d.name}}</a>\\r\\n                    </td>\\r\\n \\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_type}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_type_alias}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.rooms}}</td>\\r\\n                   \\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.arrival_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center nowrap\\\">{{frappe.format(d.departure_date,{'fieldtype':'Date'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.room_nights}}</td>\\r\\n                    <td class=\\\"text-center\\\">\\r\\n                        {% if d.require_pickup != 0 %}\\r\\n                            {{d.pickup_time}}\\r\\n                        {% endif %}\\r\\n                    </td>\\r\\n                    <td class=\\\"text-center\\\">{{d.arrival_flight_number or \\\"\\\"}}</td>\\r\\n    \\r\\n                    <td><a class=\\\"p-0 link_line_action1\\\" onclick=\\\"window.parent.postMessage('view_guest_detail|{{d.guest}}', '*')\\\">{{d.guest_name}}</a></td>\\r\\n                    <td class=\\\"text-center\\\">{{d.adult}}/{{d.child}}</td>\\r\\n                    <td>{{d.business_source}}</td>\\r\\n                    <td class=\\\"text-right nowrap\\\">{{frappe.format(d.adr,{'fieldtype':'Currency'})}}</td>\\r\\n                    <td class=\\\"text-center\\\">{{d.reservation_status}}</td>\\r\\n                    <td class=\\\"text-right nowrap\\\">{{d.note or ''}}</td>\\r\\n                </tr>\\r\\n                \\r\\n            {%endfor%}\\r\\n        </tbody>\\r\\n            \\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td colspan=\\\"1\\\"></td>\\r\\n                <td colspan=\\\"3\\\"><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\" ><strong>{{data | count}}</strong></td>\\r\\n                <td colspan=\\\"6\\\"></td>\\r\\n                <td class=\\\"text-center\\\" width='100px'><strong>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</strong></td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n            \\r\\n    </table>\\r\\n    <!---->\\r\\n    \\r\\n    \\r\\n    \\r\\n    <table  class='report-list occupied-001' width=\\\"50%\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{_(\\\"Arrival Summary By Business Source\\\")}}</th>\\r\\n                <th class=\\\"text-center\\\">{{_(\\\"Room Count\\\")}}</th>\\r\\n                <th>{{_(\\\"PAX(A/C)\\\")}}</th>\\r\\n            </tr>    \\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {% for business_source in data | map(attribute='business_source') | unique %}\\r\\n                <tr>\\r\\n                    <td>{{business_source }}</td>\\r\\n                    <td class=\\\"text-center\\\">{{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |list|length}}</td>\\r\\n                    <td>\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'adult')}}/\\r\\n                        {{data |selectattr(\\\"business_source\\\", \\\"equalto\\\", business_source) |sum(attribute = 'child')}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n            {% endfor %}\\r\\n        </tbody>\\r\\n        <tfoot style=\\\"border-top:solid 1px #000;\\\">\\r\\n            <tr>\\r\\n                <td><strong>{{_(\\\"Grand Total:\\\")}}</strong></td>\\r\\n                <td class=\\\"text-center\\\"><strong>{{data | count}}</strong></td>\\r\\n                <td>{{data|sum(attribute='adult')}} / {{data|sum(attribute='child')}}</td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n    {% else %}\\r\\n    <div class=\\\"mt-4 print-heading text-center p-2\\\">\\r\\n        <div class=\\\"isemtyIcon\\\"></div> \\r\\n        <small class=\\\"text-emty\\\">No Data </small>\\r\\n    </div>\\r\\n    {%endif%}\\r\\n    \"}]",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 0.0,
 "margin_left": 0.0,
 "margin_right": 0.0,
 "margin_top": 0.0,
 "modified": "2023-12-06 09:26:45.679068",
 "modified_by": "Administrator",
 "module": "eDoor",
 "name": "Front Desk Arrival Guest Report",
 "page_number": "Bottom Right",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}