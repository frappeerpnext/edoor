{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2023-11-29 14:46:22.990387",
 "css": "*{\r\n    color:#000!important;\r\n}\r\ntable{\r\n    border:none!important;\r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 10px !important;\r\n}\r\n.report-list td,.tbl-payment-list td {\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px!important;\r\n}\r\n.tbl-list tr td,.tbl-list-summary table tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 13px !important;\r\n    border:none!important;\r\n}\r\n.tbl-list tr td:nth-child(2), .tbl-list-summary table tr td:nth-child(2){\r\n    padding-left: 4px !important;\r\n    padding-right: 4px !important;\r\n}\r\n.tbl-list-right tr td:nth-child(3), .tbl-list-summary table tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n.report-list thead {\r\n    background: silver;\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n.report-list tfoot {\r\n    border-top:double 1px #000!important;\r\n}\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n}\r\n.report-list th, .report-list td {\r\n    border: none!important\r\n}\r\n.tbl-list-summary table tr td:nth-child(3) {\r\n    min-width: 100px;\r\n}\r\n.tbl-payment-list tbody td {\r\n    border-top: none !important;\r\n}\r\n\r\n.print-format .row:not(.section-break)\r\n{\r\n    margin-top:5px!important;\r\n}\r\n.print-format .letter-head{\r\n\r\n    margin-bottom:5px!important;\r\n}\r\n.print-heading{\r\n    border-bottom:solid 1px #000!important;\r\n}\r\n",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Desk Folio",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <div class=\\\"print-heading\\\">\\n        <h2>\\n            <div>DESK FOLIO VOUCHER</div>\\n        </h2>\\n    </div>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table style=\\\"width:100%;font-size:13px\\\">\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Guest Name\\\")}}</td>\\n        <td>: {{doc.guest_name or ''}}</td>\\n        <td width=\\\"150px\\\">{{_(\\\"Deposit No.\\\")}}</td>\\n        <td>: {{doc.name}}</td>\\n        \\n              \\n    </tr>\\n    <tr>\\n        <td width=\\\"150px\\\">{{_(\\\"Phone Number\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'phone_number')}}</td>\\n          <td width=\\\"150px\\\">{{_(\\\"Deposit Date\\\")}}</td>\\n        <td>: {{frappe.format(doc.posting_date,{\\\"fieldtype\\\":\\\"Date\\\"})}}</td>\\n\\n    </tr>\\n\\n    <tr>\\n         <td width=\\\"150px\\\">{{_(\\\"Nationality\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'country')}}</td>\\n       \\n        \\n        <td>{{_(\\\"Room\\\")}}</td>\\n        <td>: {{doc.room_number or ''}}</td>\\n    </tr>\\n  <tr>\\n      \\n        <td width=\\\"150px\\\">{{_(\\\"Email Address\\\")}}</td>\\n        <td>: {{frappe.db.get_value(\\\"Customer\\\",doc.guest,'email_address') or ''}}</td>\\n       <td></td>\\n       <td></td>\\n  </tr>\\n  </table>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Debit/Credit Style\\\"%}\\n{% set data = frappe.call(\\\"edoor.api.reservation.get_folio_transaction_summary\\\",transaction_type='Desk Folio', transaction_number=doc.name,sort_by_field='account_code_sort_order') %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-right\\\">Debit</th>    \\n            <th class=\\\"text-right\\\">Credit</th>    \\n            <th class=\\\"text-right\\\">Balance</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n            <td>{{d.description or ''}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.debit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.credit or 0,\\\"Currency\\\") }}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.balance or 0,\\\"Currency\\\") }}</td>\\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n\\n    <tfoot>\\n        <tr>\\n                <td colspan=\\\"4\\\">\\n                    <strong>Balance</strong>\\n                </td>\\n                <td class=\\\"text-right\\\"><strong>\\n                    {{frappe.format_value((data |sum(attribute='debit')) - (data |sum(attribute='credit')),\\\"Currency\\\")}}\\n                </strong></td>\\n            </tr>\\n    </tfoot>\\n    \\n</table>\\n{%endif%}\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n{% if (frappe.form_dict.get(\\\"invoice_style\\\") or \\\"Simple Style\\\") == \\\"Simple Style\\\"%}\\n{%set sql =\\\"\\\"\\\"\\n    select \\n        account_code,\\n        room_number,\\n        account_name,\\n        sum(if(allow_enter_quantity=1,quantity,0)) as quantity,\\n        sum(price * if(type='Debit',1,-1)) as price,\\n        sum(discount_amount * if(type='Debit',1,-1)) as discount_amount,\\n        sum(total_tax * if(type='Debit',1,-1)) as total_tax,\\n        sum(bank_fee_amount * if(type='Debit',1,-1)) as bank_fee_amount,\\n        sum(total_amount * if(type='Debit',1,-1)) as total_amount\\n    from `tabFolio Transaction` \\n    where \\n        transaction_type ='Desk Folio' and\\n        transaction_number = '{}'\\n    group by \\n        account_code,\\n        account_name ,\\n        room_number\\n    order by \\n    account_code_sort_order\\n\\\"\\\"\\\".format(doc.name)%}\\n\\n \\n{% set data = frappe.db.sql(sql,as_dict=1) %}\\n{%set show_account_code = frappe.db.get_single_value(\\\"eDoor Setting\\\",\\\"show_account_code_in_folio_transaction\\\")%}\\n{% set total_tax = (data|sum(attribute='total_tax')) or 0 %}\\n{% set total_bank_fee = (data|sum(attribute='bank_fee_amount')) or 0 %}\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-center\\\">No</th>    \\n            <th>Description</th>    \\n            <th class=\\\"text-center\\\">QTY</th>    \\n            <th class=\\\"text-right\\\">Price</th>    \\n            <th class=\\\"text-right\\\">Dis.</th>    \\n            {% if total_tax> 0 %}\\n                <th class=\\\"text-right\\\">Tax</th>    \\n            {%endif%}\\n            \\n            {% if total_bank_fee> 0 %}\\n                <th class=\\\"text-right\\\">Bank Fee</th>    \\n            {%endif%}\\n            \\n            \\n            <th class=\\\"text-right\\\">Total Amt</th>    \\n        </tr>\\n    </thead>\\n\\n    <tbody>\\n        {% for d in data %}\\n        <tr>\\n            <td class=\\\"text-center\\\">{{loop.index}}</td>\\n           <td>{{d.account_code + \\\"-\\\" if show_account_code==1 else \\\"\\\"}}{{d.account_name or \\\"\\\"}}</td>\\n           <td class=\\\"text-center\\\">{{d.quantity}}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.price,\\\"Currency\\\") }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.discount_amount,\\\"Currency\\\") }}</td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.total_tax,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">{{frappe.format_value(d.bank_fee_amount,\\\"Currency\\\") }}</td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">{{frappe.format_value(d.total_amount ,\\\"Currency\\\") }}</td>\\n           \\n        </tr> \\n        {% endfor %}\\n    </tbody>\\n<tfoot>\\n        <tr>\\n            <td colspan=\\\"2\\\">\\n                <strong>Total</strong>\\n            </td>\\n            <td class=\\\"text-center\\\">\\n                <strong>\\n                    {{data | sum(attribute='quantity')}}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='price'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='discount_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            {% if total_tax> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_tax,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            {% if total_bank_fee> 0 %}\\n                <td class=\\\"text-right\\\">\\n                    <strong>\\n                        {{frappe.format_value(total_bank_fee,\\\"Currency\\\") }}\\n                    </strong>\\n                </td>\\n            {%endif%}\\n            <td class=\\\"text-right\\\">\\n                <strong>\\n                    {{frappe.format_value(data|sum(attribute='total_amount'),\\\"Currency\\\") }}\\n                </strong>\\n            </td>\\n            \\n        </tr>\\n    </tfoot>\\n</table>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n{% if (frappe.form_dict.get(\\\"show_summary\\\") or \\\"0\\\") ==\\\"1\\\" %}\\n{%set summary_data = frappe.db.sql(\\\"select account_category,account_category_sort_order, sum(amount * if(type='Debit',1,-1)) as amount from `tabFolio Transaction` where transaction_number = '{}' group by account_category order by account_category_sort_order\\\".format(doc.name),as_dict=1)%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n    <tr>\\n        <th colspan='2'>Summary</th>    \\n        \\n    </tr>\\n    \\n        \\n    </thead>\\n    <tbody>\\n        {%for d in summary_data %}\\n        <tr>\\n        <td>{{ d.account_category }}</td>\\n           <td class=\\\"text-right\\\">{{frappe.format_value(d.amount or 0,\\\"Currency\\\") }}</td>\\n        </tr>\\n        {%endfor%}\\n    </tbody>\\n   \\n</table>\\n{%endif%}\\n\"}]",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 5.0,
 "margin_left": 5.0,
 "margin_right": 5.0,
 "margin_top": 5.0,
 "modified": "2023-12-06 14:35:39.111847",
 "modified_by": "Administrator",
 "module": "eDoor",
 "name": "eDoor Desk Folio Invoice Detail",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}